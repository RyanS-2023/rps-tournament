var VM=Object.defineProperty,jM=Object.defineProperties;var UM=Object.getOwnPropertyDescriptors;var ww=Object.getOwnPropertySymbols,BM=Object.getPrototypeOf,$M=Object.prototype.hasOwnProperty,HM=Object.prototype.propertyIsEnumerable,qM=Reflect.get;var Tw=(t,e,n)=>e in t?VM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})$M.call(e,n)&&Tw(t,n,e[n]);if(ww)for(var n of ww(e))HM.call(e,n)&&Tw(t,n,e[n]);return t},ye=(t,e)=>jM(t,UM(e));var pr=(t,e,n)=>qM(BM(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var cp;function Pu(){return cp}function cn(t){let e=cp;return cp=t,e}var Dw=Symbol("NotFound");function ho(t){return t===Dw||t?.name==="\u0275NotFound"}var ct=null,ku=!1,up=1,zM=null,ut=Symbol("SIGNAL");function Q(t){let e=ct;return ct=t,e}function Fu(){return ct}var fo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function po(t){if(ku)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(t);let e=ct.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=ct.recomputing;if(r&&(n=e!==void 0?e.nextProducer:ct.producers,n!==void 0&&n.producer===t)){ct.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===ct&&(!r||WM(i,ct)))return;let o=mo(ct),s={producer:t,consumer:ct,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};ct.producersTail=s,e!==void 0?e.nextProducer=s:ct.producers=s,o&&Aw(t,s)}function bw(){up++}function Vu(t){if(!(mo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===up)){if(!t.producerMustRecompute(t)&&!la(t)){Lu(t);return}t.producerRecomputeValue(t),Lu(t)}}function lp(t){if(t.consumers===void 0)return;let e=ku;ku=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||GM(r)}}finally{ku=e}}function dp(){return ct?.consumerAllowSignalWrites!==!1}function GM(t){t.dirty=!0,lp(t),t.consumerMarkedDirty?.(t)}function Lu(t){t.dirty=!1,t.lastCleanEpoch=up}function go(t){return t&&Cw(t),Q(t)}function Cw(t){t.producersTail=void 0,t.recomputing=!0}function ua(t,e){Q(e),t&&Sw(t)}function Sw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(mo(t))do n=hp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function la(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Vu(n),r!==n.version))return!0}return!1}function da(t){if(mo(t)){let e=t.producers;for(;e!==void 0;)e=hp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Aw(t,e){let n=t.consumersTail,r=mo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Aw(i.producer,i)}function hp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!mo(e)){let o=e.producers;for(;o!==void 0;)o=hp(o)}return n}function mo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function ju(t){zM?.(t)}function WM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Uu(t,e){return Object.is(t,e)}function Bu(t,e){let n=Object.create(KM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Vu(n),po(n),n.value===ca)throw n.error;return n.value};return r[ut]=n,ju(n),r}var xu=Symbol("UNSET"),Ou=Symbol("COMPUTING"),ca=Symbol("ERRORED"),KM=ye(F({},fo),{value:xu,dirty:!0,error:null,equal:Uu,kind:"computed",producerMustRecompute(t){return t.value===xu||t.value===Ou},producerRecomputeValue(t){if(t.value===Ou)throw new Error("");let e=t.value;t.value=Ou;let n=go(t),r,i=!1;try{r=t.computation(),Q(null),i=e!==xu&&e!==ca&&r!==ca&&t.equal(e,r)}catch(o){r=ca,t.error=o}finally{ua(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function QM(){throw new Error}var Rw=QM;function Nw(t){Rw(t)}function fp(t){Rw=t}var YM=null;function pp(t,e){let n=Object.create($u);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Mw(n);return r[ut]=n,ju(n),[r,s=>yo(n,s),s=>gp(n,s)]}function Mw(t){return po(t),t.value}function yo(t,e){dp()||Nw(t),t.equal(t.value,e)||(t.value=e,ZM(t))}function gp(t,e){dp()||Nw(t),yo(t,e(t.value))}var $u=ye(F({},fo),{equal:Uu,value:void 0,kind:"signal"});function ZM(t){t.version++,bw(),lp(t),YM?.(t)}function X(t){return typeof t=="function"}function vo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hu=vo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ri(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Pw(o)}catch(s){e=e??[],s instanceof Hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Pw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ri(n,e)}remove(e){let{_finalizers:n}=this;n&&ri(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var mp=Re.EMPTY;function qu(t){return t instanceof Re||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function Pw(t){X(t)?t():t.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _o={setTimeout(t,e,...n){let{delegate:r}=_o;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=_o;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function zu(t){_o.setTimeout(()=>{let{onUnhandledError:e}=Gt;if(e)e(t);else throw t})}function ha(){}var kw=yp("C",void 0,void 0);function xw(t){return yp("E",void 0,t)}function Ow(t){return yp("N",t,void 0)}function yp(t,e,n){return{kind:t,value:e,error:n}}var ii=null;function Eo(t){if(Gt.useDeprecatedSynchronousErrorHandling){let e=!ii;if(e&&(ii={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ii;if(ii=null,n)throw r}}else t()}function Lw(t){Gt.useDeprecatedSynchronousErrorHandling&&ii&&(ii.errorThrown=!0,ii.error=t)}var oi=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qu(e)&&e.add(this)):this.destination=eP}static create(e,n,r){return new Io(e,n,r)}next(e){this.isStopped?_p(Ow(e),this):this._next(e)}error(e){this.isStopped?_p(xw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_p(kw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JM=Function.prototype.bind;function vp(t,e){return JM.call(t,e)}var Ep=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Gu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Gu(r)}else Gu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Gu(n)}}},Io=class extends oi{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vp(e.next,o),error:e.error&&vp(e.error,o),complete:e.complete&&vp(e.complete,o)}):i=e}this.destination=new Ep(i)}};function Gu(t){Gt.useDeprecatedSynchronousErrorHandling?Lw(t):zu(t)}function XM(t){throw t}function _p(t,e){let{onStoppedNotification:n}=Gt;n&&_o.setTimeout(()=>n(t,e))}var eP={closed:!0,next:ha,error:XM,complete:ha};var wo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bt(t){return t}function Ip(...t){return wp(t)}function wp(t){return t.length===0?bt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=nP(n)?n:new Io(n,r,i);return Eo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Fw(r),new r((i,o)=>{let s=new Io({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[wo](){return this}pipe(...n){return wp(n)(this)}toPromise(n){return n=Fw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Fw(t){var e;return(e=t??Gt.Promise)!==null&&e!==void 0?e:Promise}function tP(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function nP(t){return t&&t instanceof oi||tP(t)&&qu(t)}function Tp(t){return X(t?.lift)}function ce(t){return e=>{if(Tp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Dp(t,e,n,r,i)}var Dp=class extends oi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function To(){return ce((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Do=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Tp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return To()(this)}};var Vw=vo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Wu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Vw}next(n){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Eo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?mp:(this.currentObservers=null,o.push(n),new Re(()=>{this.currentObservers=null,ri(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new Wu(e,n),t})(),Wu=class extends qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:mp}};var et=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bp={now(){return(bp.delegate||Date).now()},delegate:void 0};var Ku=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var fa={setInterval(t,e,...n){let{delegate:r}=fa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=fa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var bo=class extends Ku{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return fa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ri(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Co=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Co.now=bp.now;var So=class extends Co{constructor(e,n=Co.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Cp=new So(bo);var Qu=class extends bo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Yu=class extends So{};var Sp=new Yu(Qu);var Et=new Y(t=>t.complete());function jw(t){return t&&X(t.schedule)}function Uw(t){return t[t.length-1]}function Zu(t){return X(Uw(t))?t.pop():void 0}function gr(t){return jw(Uw(t))?t.pop():void 0}function Ap(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $w(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Bw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function si(t){return this instanceof si?(this.v=t,this):new si(t)}function Hw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,x){o.push([y,N,R,x])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof si?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function qw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bw=="function"?Bw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ju=t=>t&&typeof t.length=="number"&&typeof t!="function";function Xu(t){return X(t?.then)}function el(t){return X(t[wo])}function tl(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function nl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rl=rP();function il(t){return X(t?.[rl])}function ol(t){return Hw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield si(n.read());if(i)return yield si(void 0);yield yield si(r)}}finally{n.releaseLock()}})}function sl(t){return X(t?.getReader)}function Le(t){if(t instanceof Y)return t;if(t!=null){if(el(t))return iP(t);if(Ju(t))return oP(t);if(Xu(t))return sP(t);if(tl(t))return zw(t);if(il(t))return aP(t);if(sl(t))return cP(t)}throw nl(t)}function iP(t){return new Y(e=>{let n=t[wo]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oP(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function sP(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zu)})}function aP(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function zw(t){return new Y(e=>{uP(t,e).catch(n=>e.error(n))})}function cP(t){return zw(ol(t))}function uP(t,e){var n,r,i,o;return $w(this,void 0,void 0,function*(){try{for(n=qw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function It(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mr(t,e=0){return ce((n,r)=>{n.subscribe(se(r,i=>It(r,t,()=>r.next(i),e),()=>It(r,t,()=>r.complete(),e),i=>It(r,t,()=>r.error(i),e)))})}function yr(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Gw(t,e){return Le(t).pipe(yr(e),mr(e))}function Ww(t,e){return Le(t).pipe(yr(e),mr(e))}function Kw(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Qw(t,e){return new Y(n=>{let r;return It(n,e,()=>{r=t[rl](),It(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function al(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{It(n,e,()=>{let r=t[Symbol.asyncIterator]();It(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Yw(t,e){return al(ol(t),e)}function Zw(t,e){if(t!=null){if(el(t))return Gw(t,e);if(Ju(t))return Kw(t,e);if(Xu(t))return Ww(t,e);if(tl(t))return al(t,e);if(il(t))return Qw(t,e);if(sl(t))return Yw(t,e)}throw nl(t)}function Pe(t,e){return e?Zw(t,e):Le(t)}function G(...t){let e=gr(t);return Pe(t,e)}function Ao(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Rp(t){return!!t&&(t instanceof Y||X(t.lift)&&X(t.subscribe))}var xn=vo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(t,e){return ce((n,r)=>{let i=0;n.subscribe(se(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:lP}=Array;function dP(t,e){return lP(e)?t(...e):t(e)}function cl(t){return ue(e=>dP(t,e))}var{isArray:hP}=Array,{getPrototypeOf:fP,prototype:pP,keys:gP}=Object;function ul(t){if(t.length===1){let e=t[0];if(hP(e))return{args:e,keys:null};if(mP(e)){let n=gP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function mP(t){return t&&typeof t=="object"&&fP(t)===pP}function ll(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function dl(...t){let e=gr(t),n=Zu(t),{args:r,keys:i}=ul(t);if(r.length===0)return Pe([],e);let o=new Y(yP(r,e,i?s=>ll(i,s):bt));return n?o.pipe(cl(n)):o}function yP(t,e,n=bt){return r=>{Jw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Jw(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(se(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Jw(t,e,n){t?It(n,t,e):e()}function Xw(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Le(n(N,h++)).subscribe(se(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?It(e,s,()=>C(x)):C(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(se(e,y,()=>{p=!0,g()})),()=>{a?.()}}function $e(t,e,n=1/0){return X(e)?$e((r,i)=>ue((o,s)=>e(r,o,i,s))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>Xw(r,i,t,n)))}function eT(t=1/0){return $e(bt,t)}function tT(){return eT(1)}function Ro(...t){return tT()(Pe(t,gr(t)))}function pa(t){return new Y(e=>{Le(t()).subscribe(e)})}function vP(...t){let e=Zu(t),{args:n,keys:r}=ul(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Le(n[h]).subscribe(se(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ll(r,a):a),o.complete())}))}});return e?i.pipe(cl(e)):i}function Ft(t,e){return ce((n,r)=>{let i=0;n.subscribe(se(r,o=>t.call(e,o,i++)&&r.next(o)))})}function vr(t){return ce((e,n)=>{let r=null,i=!1,o;r=e.subscribe(se(n,void 0,void 0,s=>{o=Le(t(s,vr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function nT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(se(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function No(t,e){return X(e)?$e(t,e,1):$e(t,1)}function _r(t){return ce((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function On(t){return t<=0?()=>Et:ce((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function hl(t=_P){return ce((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function _P(){return new xn}function ga(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ln(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ft((i,o)=>t(i,o,r)):bt,On(1),n?_r(e):hl(()=>new xn))}function Mo(t){return t<=0?()=>Et:ce((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Np(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ft((i,o)=>t(i,o,r)):bt,Mo(1),n?_r(e):hl(()=>new xn))}function Mp(t,e){return ce(nT(t,e,arguments.length>=2,!0))}function Pp(...t){let e=gr(t);return ce((n,r)=>{(e?Ro(t,n,e):Ro(t,n)).subscribe(r)})}function wt(t,e){return ce((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(se(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(t(u,h)).subscribe(i=se(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function fl(t){return ce((e,n)=>{Le(t).subscribe(se(n,()=>n.complete(),ha)),!n.closed&&e.subscribe(n)})}function ze(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):bt}function rT(t){let e=Q(null);try{return t()}finally{Q(e)}}var ko=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zp=new ko("20.3.16");var yl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(_a(e,n)),this.code=e}};function EP(t){return`NG0${Math.abs(t)}`}function _a(t,e){return`${EP(t)}${e?": "+e:""}`}var Ea=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("")}function sT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Vn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Vn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Gp(t,e){return t?e?`${t} ${e}`:t:e||""}var IP=pe({__forward_ref__:pe});function vl(t){return t.__forward_ref__=vl,t.toString=function(){return Vn(this())},t}function tt(t){return Wp(t)?t():t}function Wp(t){return typeof t=="function"&&t.hasOwnProperty(IP)&&t.__forward_ref__===vl}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function hi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ia(t){return wP(t,_l)}function Kp(t){return Ia(t)!==null}function wP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function TP(t){let e=t?.[_l]??null;return e||null}function xp(t){return t&&t.hasOwnProperty(gl)?t[gl]:null}var _l=pe({\u0275prov:pe}),gl=pe({\u0275inj:pe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Qp(t){return t&&!!t.\u0275providers}var Yp=pe({\u0275cmp:pe}),Zp=pe({\u0275dir:pe}),Jp=pe({\u0275pipe:pe}),Xp=pe({\u0275mod:pe}),ya=pe({\u0275fac:pe}),fi=pe({__NG_ELEMENT_ID__:pe}),iT=pe({__NG_ENV_ID__:pe});function pi(t){return typeof t=="string"?t:t==null?"":String(t)}function aT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():pi(t)}var cT=pe({ngErrorCode:pe}),DP=pe({ngErrorMessage:pe}),bP=pe({ngTokenPath:pe});function eg(t,e){return uT("",-200,e)}function El(t,e){throw new j(-201,!1)}function uT(t,e,n){let r=new j(e,t);return r[cT]=e,r[DP]=t,n&&(r[bP]=n),r}function CP(t){return t[cT]}var Op;function lT(){return Op}function Ct(t){let e=Op;return Op=t,e}function tg(t,e,n){let r=Ia(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;El(t,"Injector")}var SP={},ai=SP,Lp="__NG_DI_FLAG__",Fp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=ci(n)||0;try{return this.injector.get(e,r&8?null:ai,r)}catch(i){if(ho(i))return i;throw i}}};function AP(t,e=0){let n=Pu();if(n===void 0)throw new j(-203,!1);if(n===null)return tg(t,void 0,e);{let r=RP(e),i=n.retrieve(t,r);if(ho(i)){if(r.optional)return null;throw i}return i}}function ne(t,e=0){return(lT()||AP)(tt(t),e)}function k(t,e){return ne(t,ci(e))}function ci(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function RP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Vp(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=NP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function dT(t,e){return t[Lp]=e,t.prototype[Lp]=e,t}function NP(t){return t[Lp]}function ui(t,e){let n=t.hasOwnProperty(ya);return n?t[ya]:null}function Il(t,e){t.forEach(n=>Array.isArray(n)?Il(n,e):e(n))}function ng(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function fT(t,e,n){let r=xo(t,e);return r>=0?t[r|1]=n:(r=~r,hT(t,r,e,n)),r}function wl(t,e){let n=xo(t,e);if(n>=0)return t[n|1]}function xo(t,e){return MP(t,e,1)}function MP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wr={},St=[],Tr=new U(""),rg=new U("",-1),ig=new U(""),va=class{get(e,n=ai){if(n===ai){let i=uT("",-201);throw i.name="\u0275NotFound",i}return n}};function og(t){return t[Xp]||null}function Dr(t){return t[Yp]||null}function sg(t){return t[Zp]||null}function pT(t){return t[Jp]||null}function Wt(t){return{\u0275providers:t}}function gT(...t){return{\u0275providers:ag(!0,t),\u0275fromNgModule:!0}}function ag(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Il(e,s=>{let a=s;ml(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&mT(i,o),n}function mT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];cg(i,o=>{e(o,r)})}}function ml(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=xp(t),s=!o&&Dr(t);if(!o&&!s){let u=t.ngModule;if(o=xp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ml(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Il(o.imports,h=>{ml(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&mT(l,e)}if(!a){let l=ui(i)||(()=>new i);e({provide:i,useFactory:l,deps:St},i),e({provide:ig,useValue:i,multi:!0},i),e({provide:Tr,useValue:()=>ne(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;cg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function cg(t,e){for(let n of t)Qp(n)&&(n=n.\u0275providers),Array.isArray(n)?cg(n,e):e(n)}var PP=pe({provide:String,useValue:pe});function yT(t){return t!==null&&typeof t=="object"&&PP in t}function kP(t){return!!(t&&t.useExisting)}function xP(t){return!!(t&&t.useFactory)}function li(t){return typeof t=="function"}function vT(t){return!!t.useClass}var Ta=new U(""),pl={},oT={},kp;function Da(){return kp===void 0&&(kp=new va),kp}var Fe=class{},di=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Up(e,s=>this.processProvider(s)),this.records.set(rg,Po(void 0,this)),i.has("environment")&&this.records.set(Fe,Po(void 0,this));let o=this.records.get(Ta);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ig,St,{self:!0}))}retrieve(e,n){let r=ci(n)||0;try{return this.get(e,ai,r)}catch(i){if(ho(i))return i;throw i}}destroy(){ma(this),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return ma(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ma(this);let n=cn(this),r=Ct(void 0),i;try{return e()}finally{cn(n),Ct(r)}}get(e,n=ai,r){if(ma(this),e.hasOwnProperty(iT))return e[iT](this);let i=ci(r),o,s=cn(this),a=Ct(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=jP(e)&&Ia(e);h&&this.injectableDefInScope(h)?l=Po(jp(e),pl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Da():this.parent;return n=i&8&&n===ai?null:n,u.get(e,n)}catch(u){let l=CP(u);throw l===-200||l===-201?new j(l,null):u}finally{Ct(a),cn(s)}}resolveInjectorInitializers(){let e=Q(null),n=cn(this),r=Ct(void 0),i;try{let o=this.get(Tr,St,{self:!0});for(let s of o)s()}finally{cn(n),Ct(r),Q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Vn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tt(e);let n=li(e)?e:tt(e&&e.provide),r=LP(e);if(!li(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Po(void 0,pl,!0),i.factory=()=>Vp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Q(null);try{if(n.value===oT)throw eg(Vn(e));return n.value===pl&&(n.value=oT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&VP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function jp(t){let e=Ia(t),n=e!==null?e.factory:ui(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return OP(t);throw new j(204,!1)}function OP(t){if(t.length>0)throw new j(204,!1);let n=TP(t);return n!==null?()=>n.factory(t):()=>new t}function LP(t){if(yT(t))return Po(void 0,t.useValue);{let e=ug(t);return Po(e,pl)}}function ug(t,e,n){let r;if(li(t)){let i=tt(t);return ui(i)||jp(i)}else if(yT(t))r=()=>tt(t.useValue);else if(xP(t))r=()=>t.useFactory(...Vp(t.deps||[]));else if(kP(t))r=(i,o)=>ne(tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=tt(t&&(t.useClass||t.provide));if(FP(t))r=()=>new i(...Vp(t.deps));else return ui(i)||jp(i)}return r}function ma(t){if(t.destroyed)throw new j(205,!1)}function Po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function FP(t){return!!t.deps}function VP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function jP(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Up(t,e){for(let n of t)Array.isArray(n)?Up(n,e):n&&Qp(n)?Up(n.\u0275providers,e):e(n)}function He(t,e){let n;t instanceof di?(ma(t),n=t):n=new Fp(t);let r,i=cn(n),o=Ct(void 0);try{return e()}finally{cn(i),Ct(o)}}function _T(){return lT()!==void 0||Pu()!=null}var Kt=0,W=1,ee=2,Ge=3,Vt=4,jt=5,Oo=6,Lo=7,ke=8,jn=9,ln=10,De=11,Fo=12,lg=13,gi=14,At=15,mi=16,yi=17,vi=18,ba=19,dg=20,Fn=21,Tl=22,Ca=23,Rt=24,Dl=25,_i=26,nt=27,ET=1,hg=6,br=7,Sa=8,Aa=9,xe=10;function dn(t){return Array.isArray(t)&&typeof t[ET]=="object"}function Qt(t){return Array.isArray(t)&&t[ET]===!0}function fg(t){return(t.flags&4)!==0}function Cr(t){return t.componentOffset>-1}function bl(t){return(t.flags&1)===1}function hn(t){return!!t.template}function Vo(t){return(t[ee]&512)!==0}function Ei(t){return(t[ee]&256)===256}var IT="svg",wT="math";function Ut(t){for(;Array.isArray(t);)t=t[Kt];return t}function pg(t,e){return Ut(e[t])}function Yt(t,e){return Ut(e[t.index])}function Ra(t,e){return t.data[e]}function Bt(t,e){let n=e[t];return dn(n)?n:n[Kt]}function Cl(t){return(t[ee]&128)===128}function TT(t){return Qt(t[Ge])}function fn(t,e){return e==null?null:t[e]}function gg(t){t[yi]=0}function mg(t){t[ee]&1024||(t[ee]|=1024,Cl(t)&&Ma(t))}function DT(t,e){for(;t>0;)e=e[gi],t--;return e}function Na(t){return!!(t[ee]&9216||t[Rt]?.dirty)}function Sl(t){t[ln].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Na(t)&&Ma(t)}function Ma(t){t[ln].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!Cl(e)));)e=Er(e)}function yg(t,e){if(Ei(t))throw new j(911,!1);t[Fn]===null&&(t[Fn]=[]),t[Fn].push(e)}function bT(t,e){if(t[Fn]===null)return;let n=t[Fn].indexOf(e);n!==-1&&t[Fn].splice(n,1)}function Er(t){let e=t[Ge];return Qt(e)?e[Ge]:e}function CT(t){return t[Lo]??=[]}function ST(t){return t.cleanup??=[]}var ie={lFrame:HT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Bp=!1;function AT(){return ie.lFrame.elementDepthCount}function RT(){ie.lFrame.elementDepthCount++}function vg(){ie.lFrame.elementDepthCount--}function NT(){return ie.bindingsEnabled}function MT(){return ie.skipHydrationRootTNode!==null}function _g(t){return ie.skipHydrationRootTNode===t}function Eg(){ie.skipHydrationRootTNode=null}function de(){return ie.lFrame.lView}function lt(){return ie.lFrame.tView}function PT(t){return ie.lFrame.contextLView=t,t[ke]}function kT(t){return ie.lFrame.contextLView=null,t}function dt(){let t=Ig();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ig(){return ie.lFrame.currentTNode}function xT(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function jo(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function wg(){return ie.lFrame.isParent}function OT(){ie.lFrame.isParent=!1}function Tg(){return Bp}function Dg(t){let e=Bp;return Bp=t,e}function LT(){return ie.lFrame.bindingIndex}function FT(t){return ie.lFrame.bindingIndex=t}function Ii(){return ie.lFrame.bindingIndex++}function bg(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function VT(){return ie.lFrame.inI18n}function jT(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Al(e)}function UT(){return ie.lFrame.currentDirectiveIndex}function Al(t){ie.lFrame.currentDirectiveIndex=t}function BT(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Cg(t){ie.lFrame.currentQueryIndex=t}function UP(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[jt]:null}function Sg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=UP(o),i===null||(o=o[gi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ie.lFrame=$T();return r.currentTNode=e,r.lView=t,!0}function Rl(t){let e=$T(),n=t[W];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $T(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?HT(t):e}function HT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qT(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ag=qT;function Nl(){let t=qT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zT(t){return(ie.lFrame.contextLView=DT(t,ie.lFrame.contextLView))[ke]}function Un(){return ie.lFrame.selectedIndex}function Sr(t){ie.lFrame.selectedIndex=t}function Ml(){let t=ie.lFrame;return Ra(t.tView,t.selectedIndex)}function GT(){return ie.lFrame.currentNamespace}var WT=!0;function Pl(){return WT}function kl(t){WT=t}function $p(t,e=null,n=null,r){let i=Rg(t,e,n,r);return i.resolveInjectorInitializers(),i}function Rg(t,e=null,n=null,r,i=new Set){let o=[n||St,gT(t)];return r=r||(typeof t=="object"?void 0:Vn(t)),new di(o,e||Da(),r||null,i)}var We=class t{static THROW_IF_NOT_FOUND=ai;static NULL=new va;static create(e,n){if(Array.isArray(e))return $p({name:""},n,e,"");{let r=e.name??"";return $p({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>ne(rg)});static __NG_ELEMENT_ID__=-1},rt=new U(""),wi=(()=>{class t{static __NG_ELEMENT_ID__=BP;static __NG_ENV_ID__=n=>n}return t})(),Hp=class extends wi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ei(this._lView)}onDestroy(e){let n=this._lView;return yg(n,e),()=>bT(n,e)}};function BP(){return new Hp(de())}var un=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nt=new U("",{providedIn:"root",factory:()=>{let t=k(Fe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(un),e.handleError(n))}}}),KT={provide:Tr,useValue:()=>void k(un),multi:!0};function Ng(t){return typeof t=="function"&&t[ut]!==void 0}function Ti(t,e){let[n,r,i]=pp(t,e?.equal),o=n,s=o[ut];return o.set=r,o.update=i,o.asReadonly=QT.bind(o),o}function QT(){let t=this[ut];if(t.readonlyFn===void 0){let e=()=>this();e[ut]=t,t.readonlyFn=e}return t.readonlyFn}function Mg(t){return Ng(t)&&typeof t.set=="function"}var Ir=class{},Pa=new U("",{providedIn:"root",factory:()=>!1});var Pg=new U(""),kg=new U(""),pn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Uo=(()=>{class t{internalPendingTasks=k(pn);scheduler=k(Ir);errorHandler=k(Nt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();function ka(...t){}var xg=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new qp})}return t})(),qp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ko(t){return{toString:t}.toString()}var xl="__parameters__";function ZP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function JP(t,e,n){return Ko(()=>{let r=ZP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(xl)?u[xl]:Object.defineProperty(u,xl,{value:[]})[xl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Mt=dT(JP("Optional"),8);function XP(t){return typeof t=="function"}var Bl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function SD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Qo=(()=>{let t=()=>AD;return t.ngInherit=!0,t})();function AD(t){return t.type.prototype.ngOnChanges&&(t.setInput=tk),ek}function ek(){let t=ND(this),e=t?.current;if(e){let n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function tk(t,e,n,r,i){let o=this.declaredInputs[r],s=ND(t)||nk(t,{previous:wr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Bl(l&&l.currentValue,n,u===wr),SD(t,e,i,n)}var RD="__ngSimpleChanges__";function ND(t){return t[RD]||null}function nk(t,e){return t[RD]=e}var YT=[];var Ie=function(t,e=null,n){for(let r=0;r<YT.length;r++){let i=YT[r];i(t,e,n)}};function rk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=AD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ik(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Fl(t,e,n){MD(t,e,3,n)}function Vl(t,e,n,r){(t[ee]&3)===n&&MD(t,e,n,r)}function Og(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function MD(t,e,n,r){let i=r!==void 0?t[yi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[yi]+=65536),(a<o||o==-1)&&(ok(t,n,e,u),t[yi]=(t[yi]&4294901760)+u+2),u++}function ZT(t,e){Ie(4,t,e);let n=Q(null);try{e.call(t)}finally{Q(n),Ie(5,t,e)}}function ok(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ee]>>14<t[yi]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,ZT(a,o)):ZT(a,o)}var $o=-1,bi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function sk(t){return(t.flags&8)!==0}function ak(t){return(t.flags&16)!==0}function ck(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];uk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function PD(t){return t===3||t===4||t===6}function uk(t){return t.charCodeAt(0)===64}function Ho(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?JT(t,n,i,null,e[++r]):JT(t,n,i,null,null))}}return t}function JT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function kD(t){return t!==$o}function $l(t){return t&32767}function lk(t){return t>>16}function Hl(t,e){let n=lk(t),r=e;for(;n>0;)r=r[gi],n--;return r}var zg=!0;function XT(t){let e=zg;return zg=t,e}var dk=256,xD=dk-1,OD=5,hk=0,gn={};function fk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(fi)&&(r=n[fi]),r==null&&(r=n[fi]=hk++);let i=r&xD,o=1<<i;e.data[t+(i>>OD)]|=o}function ql(t,e){let n=LD(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,Lg(r.data,t),Lg(e,null),Lg(r.blueprint,null));let i=mm(t,e),o=t.injectorIndex;if(kD(i)){let s=$l(i),a=Hl(i,e),u=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Lg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=BD(i),r===null)return $o;if(n++,i=i[gi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $o}function Gg(t,e,n){fk(t,e,n)}function pk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(PD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function FD(t,e,n){if(n&8||t!==void 0)return t;El(e,"NodeInjector")}function VD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[jn],o=Ct(void 0);try{return i?i.get(e,r,n&8):tg(e,r,n&8)}finally{Ct(o)}}return FD(r,e,n)}function jD(t,e,n,r=0,i){if(t!==null){if(e[ee]&2048&&!(r&2)){let s=_k(t,e,n,r,gn);if(s!==gn)return s}let o=UD(t,e,n,r,gn);if(o!==gn)return o}return VD(e,n,r,i)}function UD(t,e,n,r,i){let o=yk(n);if(typeof o=="function"){if(!Sg(e,t,r))return r&1?FD(i,n,r):VD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))El(n);else return s}finally{Ag()}}else if(typeof o=="number"){let s=null,a=LD(t,e),u=$o,l=r&1?e[At][jt]:null;for((a===-1||r&4)&&(u=a===-1?mm(t,e):e[a+8],u===$o||!tD(r,!1)?a=-1:(s=e[W],a=$l(u),e=Hl(u,e)));a!==-1;){let h=e[W];if(eD(o,a,h.data)){let p=gk(a,e,n,s,r,l);if(p!==gn)return p}u=e[a+8],u!==$o&&tD(r,e[W].data[a+8]===l)&&eD(o,a,e)?(s=h,a=$l(u),e=Hl(u,e)):a=-1}}return i}function gk(t,e,n,r,i,o){let s=e[W],a=s.data[t+8],u=r==null?Cr(a)&&zg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=mk(a,s,n,u,l);return h!==null?zl(e,s,h,a,i):gn}function mk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&hn(y)&&y.type===n)return u}return null}function zl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof bi){let a=o;if(a.resolving){let y=aT(s[n]);throw eg(y)}let u=XT(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Ct(a.injectImpl):null,g=Sg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&rk(n,s[n],e)}finally{p!==null&&Ct(p),XT(u),a.resolving=!1,Ag()}}return o}function yk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(fi)?t[fi]:void 0;return typeof e=="number"?e>=0?e&xD:vk:e}function eD(t,e,n){let r=1<<t;return!!(n[e+(t>>OD)]&r)}function tD(t,e){return!(t&2)&&!(t&1&&e)}var Di=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jD(this._tNode,this._lView,e,ci(r),n)}};function vk(){return new Di(dt(),de())}function sd(t){return Ko(()=>{let e=t.prototype.constructor,n=e[ya]||Wg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ya]||Wg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wg(t){return Wp(t)?()=>{let e=Wg(tt(t));return e&&e()}:ui(t)}function _k(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!Vo(s);){let a=UD(o,s,n,r|2,gn);if(a!==gn)return a;let u=o.parent;if(!u){let l=s[dg];if(l){let h=l.get(n,gn,r);if(h!==gn)return h}u=BD(s),s=s[gi]}o=u}return i}function BD(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[jt]:null}function Ba(t){return pk(dt(),t)}function Ek(){return ym(dt(),de())}function ym(t,e){return new $a(Yt(t,e))}var $a=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Ek}return t})();function $D(t){return(t.flags&128)===128}var vm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(vm||{}),HD=new Map,Ik=0;function wk(){return Ik++}function Tk(t){HD.set(t[ba],t)}function Kg(t){HD.delete(t[ba])}var nD="__ngContext__";function qo(t,e){dn(e)?(t[nD]=e[ba],Tk(e)):t[nD]=e}function qD(t){return GD(t[Fo])}function zD(t){return GD(t[Vt])}function GD(t){for(;t!==null&&!Qt(t);)t=t[Vt];return t}var Qg;function _m(t){Qg=t}function WD(){if(Qg!==void 0)return Qg;if(typeof document<"u")return document;throw new j(210,!1)}var ad=new U("",{providedIn:"root",factory:()=>Dk}),Dk="ng",cd=new U(""),Ni=new U("",{providedIn:"platform",factory:()=>"unknown"});var ud=new U("",{providedIn:"root",factory:()=>WD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bk="h",Ck="b";var KD="r";var QD="di";var YD=!1,ZD=new U("",{providedIn:"root",factory:()=>YD});var Sk=(t,e,n,r)=>{};function Ak(t,e,n,r){Sk(t,e,n,r)}function Em(t){return(t.flags&32)===32}var Rk=()=>null;function JD(t,e,n=!1){return Rk(t,e,n)}function XD(t,e){let n=t.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Cg(o),a.contentQueries(2,e[s],s)}}}finally{Q(r)}}}function Yg(t,e,n){Cg(0);let r=Q(null);try{e(t,n)}finally{Q(r)}}function eb(t,e,n){if(fg(e)){let r=Q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Q(r)}}}var Bn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Bn||{});var Ol;function Nk(){if(Ol===void 0&&(Ol=null,Ea.trustedTypes))try{Ol=Ea.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ol}function rD(t){return Nk()?.createScriptURL(t)||t}var Gl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yl})`}};function ld(t){return t instanceof Gl?t.changingThisBreaksApplicationSecurity:t}function Im(t,e){let n=tb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${yl})`)}return n===e}function tb(t){return t instanceof Gl&&t.getTypeName()||null}var Mk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nb(t){return t=String(t),t.match(Mk)?t:"unsafe:"+t}function Pk(t,e){return t.createText(e)}function kk(t,e,n){t.setValue(e,n)}function rb(t,e,n){return t.createElement(e,n)}function Wl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ib(t,e,n){t.appendChild(e,n)}function iD(t,e,n,r,i){r!==null?Wl(t,e,n,r,i):ib(t,e,n)}function ob(t,e,n,r){t.removeChild(null,e,n,r)}function xk(t,e,n){t.setAttribute(e,"style",n)}function Ok(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function sb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ck(t,e,r),i!==null&&Ok(t,e,i),o!==null&&xk(t,e,o)}var dd=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(dd||{});function ab(t){let e=ub();return e?e.sanitize(dd.URL,t)||"":Im(t,"URL")?ld(t):nb(pi(t))}function cb(t){let e=ub();if(e)return rD(e.sanitize(dd.RESOURCE_URL,t)||"");if(Im(t,"ResourceURL"))return rD(ld(t));throw new j(904,!1)}var Lk=new Set(["embed","frame","iframe","media","script"]),Fk=new Set(["base","link","script"]);function Vk(t,e){return e==="src"&&Lk.has(t)||e==="href"&&Fk.has(t)||e==="xlink:href"&&t==="script"?cb:ab}function wm(t,e,n){return Vk(e,n)(t)}function ub(){let t=de();return t&&t[ln].sanitizer}function lb(t){return t instanceof Function?t():t}function jk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var db="ng-template";function Uk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Tm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Tm(t){return t.type===4&&t.value!==db}function Bk(t,e,n){let r=t.type===4&&!n?db:t.value;return e===r}function $k(t,e,n){let r=4,i=t.attrs,o=i!==null?zk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Zt(r)&&!Zt(u))return!1;if(s&&Zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Bk(t,u,n)||u===""&&e.length===1){if(Zt(r))return!1;s=!0}}else if(r&8){if(i===null||!Uk(t,i,u,n)){if(Zt(r))return!1;s=!0}}else{let l=e[++a],h=Hk(u,i,Tm(t),n);if(h===-1){if(Zt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;s=!0}}}}return Zt(r)||s}function Zt(t){return(t&1)===0}function Hk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Gk(e,t)}function qk(t,e,n=!1){for(let r=0;r<e.length;r++)if($k(t,e[r],n))return!0;return!1}function zk(t){for(let e=0;e<t.length;e++){let n=t[e];if(PD(n))return e}return t.length}function Gk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function oD(t,e){return t?":not("+e.trim()+")":e}function Wk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zt(s)&&(e+=oD(o,i),i=""),r=s,o=o||!Zt(r);n++}return i!==""&&(e+=oD(o,i)),e}function Kk(t){return t.map(Wk).join(",")}function Qk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Zt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Jt={};function Dm(t,e,n,r,i,o,s,a,u,l,h){let p=nt+r,g=p+i,y=Yk(p,g),C=typeof l=="function"?l():l;return y[W]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function Yk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jt);return n}function Zk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Dm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function bm(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Kt]=i,p[ee]=r|4|128|8|64|1024,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),gg(p),p[Ge]=p[gi]=t,p[ke]=n,p[ln]=s||t&&t[ln],p[De]=a||t&&t[De],p[jn]=u||t&&t[jn]||null,p[jt]=o,p[ba]=wk(),p[Oo]=h,p[dg]=l,p[At]=e.type==2?t[At]:p,p}function Jk(t,e,n){let r=Yt(e,t),i=Zk(n),o=t[ln].rendererFactory,s=Cm(t,bm(t,i,null,hb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function hb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function fb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Cm(t,e){return t[Fo]?t[lg][Vt]=e:t[Fo]=e,t[lg]=e,e}function Xk(t=1){pb(lt(),de(),Un()+t,!1)}function pb(t,e,n,r){if(!r)if((e[ee]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Fl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Vl(e,o,0,n)}Sr(n)}var hd=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(hd||{});function Zg(t,e,n,r){let i=Q(null);try{let[o,s,a]=t.inputs[n],u=null;(s&hd.SignalBased)!==0&&(u=e[o][ut]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):SD(e,u,o,r)}finally{Q(i)}}var $n=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})($n||{}),ex;function Sm(t,e){return ex(t,e)}var Ci=new Set,Am=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Am||{}),Ha=new U(""),sD=new Set;function Ar(t){sD.has(t)||(sD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var gb=!1,Jg=class extends qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,_T()&&(this.destroyRef=k(wi,{optional:!0})??void 0,this.pendingTasks=k(pn,{optional:!0})??void 0)}emit(e){let n=Q(null);try{super.next(e)}finally{Q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},yt=Jg;function mb(t){let e,n;function r(){t=ka;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function aD(t){return queueMicrotask(()=>t()),()=>{t=ka}}var Rm="isAngularZone",Kl=Rm+"_ID",tx=0,ve=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new yt(!1);onMicrotaskEmpty=new yt(!1);onStable=new yt(!1);onError=new yt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ix(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Rm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nx,ka,ka);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},nx={};function Nm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function rx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){mb(()=>{t.callbackScheduled=!1,Xg(t),t.isCheckStableRunning=!0,Nm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Xg(t)}function ix(t){let e=()=>{rx(t)},n=tx++;t._inner=t._inner.fork({name:"angular",properties:{[Rm]:!0,[Kl]:n,[Kl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(ox(u))return r.invokeTask(o,s,a,u);try{return cD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),uD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return cD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!sx(u)&&e(),uD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Xg(t),Nm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Xg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function cD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uD(t){t._nesting--,Nm(t)}var Ql=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new yt;onMicrotaskEmpty=new yt;onStable=new yt;onError=new yt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function ox(t){return yb(t,"__ignore_ng_zone__")}function sx(t){return yb(t,"__scheduler_tick__")}function yb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var vb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var _b=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Eb(t,e,n){let r=t.get(_b);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function ax(t,e){let n=t.get(_b);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function cx(t,e){for(let[n,r]of e)Eb(t,r.animateFns)}function lD(t,e,n,r){let i=t?.[_i]?.enter;e!==null&&i&&i.has(n.index)&&cx(r,i)}function Bo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Qt(i)?u=i:dn(i)&&(l=!0,i=i[Kt]);let h=Ut(i);t===0&&r!==null?(lD(a,r,o,n),s==null?ib(e,r,h):Wl(e,r,h,s||null,!0)):t===1&&r!==null?(lD(a,r,o,n),Wl(e,r,h,s||null,!0)):t===2?dD(a,o,n,p=>{ob(e,h,l,p)}):t===3&&dD(a,o,n,()=>{e.destroyNode(h)}),u!=null&&Ix(e,t,n,u,o,r,s)}}function ux(t,e){Ib(t,e),e[Kt]=null,e[jt]=null}function lx(t,e,n,r,i,o){r[Kt]=i,r[jt]=e,pd(t,r,n,1,i,o)}function Ib(t,e){e[ln].changeDetectionScheduler?.notify(9),pd(t,e,e[De],2,null,null)}function dx(t){let e=t[Fo];if(!e)return Fg(t[W],t);for(;e;){let n=null;if(dn(e))n=e[Fo];else{let r=e[xe];r&&(n=r)}if(!n){for(;e&&!e[Vt]&&e!==t;)dn(e)&&Fg(e[W],e),e=e[Ge];e===null&&(e=t),dn(e)&&Fg(e[W],e),n=e&&e[Vt]}e=n}}function Mm(t,e){let n=t[Aa],r=n.indexOf(e);n.splice(r,1)}function fd(t,e){if(Ei(e))return;let n=e[De];n.destroyNode&&pd(t,e,n,3,null,null),dx(e)}function Fg(t,e){if(Ei(e))return;let n=Q(null);try{e[ee]&=-129,e[ee]|=256,e[Rt]&&da(e[Rt]),px(t,e),fx(t,e),e[W].type===1&&e[De].destroy();let r=e[mi];if(r!==null&&Qt(e[Ge])){r!==e[Ge]&&Mm(r,e);let i=e[vi];i!==null&&i.detachView(t)}Kg(e)}finally{Q(n)}}function dD(t,e,n,r){let i=t?.[_i];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Ci.add(t),Eb(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),hx(t,r)}else t&&Ci.delete(t),r(!1)},i)}function hx(t,e){let n=t[_i]?.running;if(n){n.then(()=>{t[_i].running=void 0,Ci.delete(t),e(!0)});return}e(!1)}function fx(t,e){let n=t.cleanup,r=e[Lo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Lo]=null);let i=e[Fn];if(i!==null){e[Fn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ca];if(o!==null){e[Ca]=null;for(let s of o)s.destroy()}}function px(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof bi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ie(4,a,u);try{u.call(a)}finally{Ie(5,a,u)}}else{Ie(4,i,o);try{o.call(i)}finally{Ie(5,i,o)}}}}}function gx(t,e,n){return mx(t,e.parent,n)}function mx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Kt];if(Cr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Bn.None||i===Bn.Emulated)return null}return Yt(r,n)}function yx(t,e,n){return _x(t,e,n)}function vx(t,e,n){return t.type&40?Yt(t,n):null}var _x=vx,hD;function Pm(t,e,n,r){let i=gx(t,r,e),o=e[De],s=r.parent||e[jt],a=yx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)iD(o,i,n[u],a,!1);else iD(o,i,n,a,!1);hD!==void 0&&hD(o,r,e,n,i)}function xa(t,e){if(e!==null){let n=e.type;if(n&3)return Yt(e,t);if(n&4)return em(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return xa(t,r);{let i=t[e.index];return Qt(i)?em(-1,i):Ut(i)}}else{if(n&128)return xa(t,e.next);if(n&32)return Sm(e,t)()||Ut(t[e.index]);{let r=wb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[At]);return xa(i,r)}else return xa(t,e.next)}}}return null}function wb(t,e){if(e!==null){let r=t[At][jt],i=e.projection;return r.projection[i]}return null}function em(t,e){let n=xe+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return xa(r,i)}return e[br]}function km(t,e,n,r,i,o,s){for(;n!=null;){let a=r[jn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&qo(Ut(u),r),n.flags|=2),!Em(n))if(l&8)km(t,e,n.child,r,i,o,!1),Bo(e,t,a,i,u,n,o,r);else if(l&32){let h=Sm(n,r),p;for(;p=h();)Bo(e,t,a,i,p,n,o,r);Bo(e,t,a,i,u,n,o,r)}else l&16?Ex(t,e,r,n,i,o):Bo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function pd(t,e,n,r,i,o){km(n,r,t.firstChild,e,i,o,!1)}function Ex(t,e,n,r,i,o){let s=n[At],u=s[jt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Bo(e,t,n[jn],i,h,r,o,n)}else{let l=u,h=s[Ge];$D(r)&&(l.flags|=128),km(t,e,l,h,i,o,!0)}}function Ix(t,e,n,r,i,o,s){let a=r[br],u=Ut(r);a!==u&&Bo(e,t,n,o,a,i,s);for(let l=xe;l<r.length;l++){let h=r[l];pd(h[W],h,t,e,o,a)}}function wx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:$n.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=$n.Important),t.setStyle(n,r,i,o))}}function Tb(t,e,n,r,i){let o=Un(),s=r&2;try{Sr(-1),s&&e.length>nt&&pb(t,e,nt,!1),Ie(s?2:0,i,n),n(r,i)}finally{Sr(o),Ie(s?3:1,i,n)}}function Db(t,e,n){Rx(t,e,n),(n.flags&64)===64&&Nx(t,e,n)}function xm(t,e,n=Yt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Tx(t,e,n,r){let o=r.get(ZD,YD)||n===Bn.ShadowDom,s=t.selectRootElement(e,o);return Dx(s),s}function Dx(t){bx(t)}var bx=()=>null;function Cx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Sx(t,e,n,r,i,o){let s=e[W];if(Om(t,s,e,n,r)){Cr(t)&&Ax(e,t.index);return}t.type&3&&(n=Cx(n)),bb(t,e,n,r,i,o)}function bb(t,e,n,r,i,o){if(t.type&3){let s=Yt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Ax(t,e){let n=Bt(e,t);n[ee]&16||(n[ee]|=64)}function Rx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Cr(n)&&Jk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ql(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=zl(e,t,s,n);if(qo(u,e),o!==null&&Ox(e,s-r,u,a,n,o),hn(a)){let l=Bt(n.index,e);l[ke]=zl(e,t,s,n)}}}function Nx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=UT();try{Sr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Al(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Mx(u,l)}}finally{Sr(-1),Al(s)}}function Mx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Px(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];qk(e,o.selectors,!1)&&(r??=[],hn(o)?r.unshift(o):r.push(o))}return r}function kx(t,e,n,r,i,o){let s=Yt(t,e);xx(e[De],s,o,t.value,n,r,i)}function xx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?pi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Ox(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Zg(r,n,u,l)}}function Cb(t,e,n,r,i){let o=nt+n,s=e[W],a=i(s,e,t,r,n);e[o]=a,jo(t,!0);let u=t.type===2;return u?(sb(e[De],a,t),(AT()===0||bl(t))&&qo(a,e),RT()):qo(a,e),Pl()&&(!u||!Em(t))&&Pm(s,e,a,t),t}function Sb(t){let e=t;return wg()?OT():(e=e.parent,jo(e,!1)),e}function Lx(t,e){let n=t[jn];if(!n)return;let r;try{r=n.get(Nt,null)}catch{r=null}r?.(e)}function Om(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Zg(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Zg(h,l,r,i),a=!0}return a}function Fx(t,e){let n=Bt(e,t),r=n[W];Vx(r,n);let i=n[Kt];i!==null&&n[Oo]===null&&(n[Oo]=JD(i,n[jn])),Ie(18),Lm(r,n,n[ke]),Ie(19,n[ke])}function Vx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Lm(t,e,n){Rl(e);try{let r=t.viewQuery;r!==null&&Yg(1,r,n);let i=t.template;i!==null&&Tb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[vi]?.finishViewCreation(t),t.staticContentQueries&&XD(t,e),t.staticViewQueries&&Yg(2,t.viewQuery,n);let o=t.components;o!==null&&jx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,Nl()}}function jx(t,e){for(let n=0;n<e.length;n++)Fx(t,e[n])}function Fm(t,e,n,r){let i=Q(null);try{let o=e.tView,a=t[ee]&4096?4096:16,u=bm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[mi]=l;let h=t[vi];return h!==null&&(u[vi]=h.createEmbeddedView(o)),Lm(o,u,n),u}finally{Q(i)}}function La(t,e){return!e||e.firstChild===null||$D(t)}function Fa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Ut(o)),Qt(o)&&Ab(o,r);let s=n.type;if(s&8)Fa(t,e,n.child,r);else if(s&32){let a=Sm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=wb(e,n);if(Array.isArray(a))r.push(...a);else{let u=Er(e[At]);Fa(u[W],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ab(t,e){for(let n=xe;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&Fa(r[W],r,i,e)}t[br]!==t[Kt]&&e.push(t[br])}function Rb(t){if(t[Dl]!==null){for(let e of t[Dl])e.impl.addSequence(e);t[Dl].length=0}}var Nb=[];function Ux(t){return t[Rt]??Bx(t)}function Bx(t){let e=Nb.pop()??Object.create(Hx);return e.lView=t,e}function $x(t){t.lView[Rt]!==t&&(t.lView=null,Nb.push(t))}var Hx=ye(F({},fo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ma(t.lView)},consumerOnSignalRead(){this.lView[Rt]=this}});function qx(t){let e=t[Rt]??Object.create(zx);return e.lView=t,e}var zx=ye(F({},fo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!Mb(e[W]);)e=Er(e);e&&mg(e)},consumerOnSignalRead(){this.lView[Rt]=this}});function Mb(t){return t.type!==2}function Pb(t){if(t[Ca]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ca])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ee]&8192)}}var Gx=100;function kb(t,e=0){let r=t[ln].rendererFactory,i=!1;i||r.begin?.();try{Wx(t,e)}finally{i||r.end?.()}}function Wx(t,e){let n=Tg();try{Dg(!0),tm(t,e);let r=0;for(;Na(t);){if(r===Gx)throw new j(103,!1);r++,tm(t,1)}}finally{Dg(n)}}function Kx(t,e,n,r){if(Ei(e))return;let i=e[ee],o=!1,s=!1;Rl(e);let a=!0,u=null,l=null;o||(Mb(t)?(l=Ux(e),u=go(l)):Fu()===null?(a=!1,l=qx(e),u=go(l)):e[Rt]&&(da(e[Rt]),e[Rt]=null));try{gg(e),FT(t.bindingStartIndex),n!==null&&Tb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Fl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Vl(e,y,0,null),Og(e,0)}if(s||Qx(e),Pb(e),xb(e,0),t.contentQueries!==null&&XD(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Fl(e,y)}else{let y=t.contentHooks;y!==null&&Vl(e,y,1),Og(e,1)}Zx(t,e);let p=t.components;p!==null&&Lb(e,p,0);let g=t.viewQuery;if(g!==null&&Yg(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Fl(e,y)}else{let y=t.viewHooks;y!==null&&Vl(e,y,2),Og(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Tl]){for(let y of e[Tl])y();e[Tl]=null}o||(Rb(e),e[ee]&=-73)}catch(h){throw o||Ma(e),h}finally{l!==null&&(ua(l,u),a&&$x(l)),Nl()}}function xb(t,e){for(let n=qD(t);n!==null;n=zD(n))for(let r=xe;r<n.length;r++){let i=n[r];Ob(i,e)}}function Qx(t){for(let e=qD(t);e!==null;e=zD(e)){if(!(e[ee]&2))continue;let n=e[Aa];for(let r=0;r<n.length;r++){let i=n[r];mg(i)}}}function Yx(t,e,n){Ie(18);let r=Bt(e,t);Ob(r,n),Ie(19,r[ke])}function Ob(t,e){Cl(t)&&tm(t,e)}function tm(t,e){let r=t[W],i=t[ee],o=t[Rt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&la(o)),s||=!1,o&&(o.dirty=!1),t[ee]&=-9217,s)Kx(r,t,r.template,t[ke]);else if(i&8192){let a=Q(null);try{Pb(t),xb(t,1);let u=r.components;u!==null&&Lb(t,u,1),Rb(t)}finally{Q(a)}}}function Lb(t,e,n){for(let r=0;r<e.length;r++)Yx(t,e[r],n)}function Zx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Sr(~i);else{let o=i,s=n[++r],a=n[++r];jT(s,o);let u=e[o];Ie(24,u),a(2,u),Ie(25,u)}}}finally{Sr(-1)}}function Vm(t,e){let n=Tg()?64:1088;for(t[ln].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=Er(t);if(Vo(t)&&!r)return t;t=r}return null}function Fb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Vb(t,e){let n=xe+e;if(n<t.length)return t[n]}function gd(t,e,n,r=!0){let i=e[W];if(Jx(i,e,t,n),r){let s=em(n,t),a=e[De],u=a.parentNode(t[br]);u!==null&&lx(i,t[jt],a,e,u,s)}let o=e[Oo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function jb(t,e){let n=Va(t,e);return n!==void 0&&fd(n[W],n),n}function Va(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n];if(r){let i=r[mi];i!==null&&i!==t&&Mm(i,r),e>0&&(t[n-1][Vt]=r[Vt]);let o=wa(t,xe+e);ux(r[W],r);let s=o[vi];s!==null&&s.detachView(o[W]),r[Ge]=null,r[Vt]=null,r[ee]&=-129}return r}function Jx(t,e,n,r){let i=xe+r,o=n.length;r>0&&(n[i-1][Vt]=e),r<o-xe?(e[Vt]=n[i],ng(n,xe+r,e)):(n.push(e),e[Vt]=null),e[Ge]=n;let s=e[mi];s!==null&&n!==s&&Ub(s,e);let a=e[vi];a!==null&&a.insertView(t),Sl(e),e[ee]|=128}function Ub(t,e){let n=t[Aa],r=e[Ge];if(dn(r))t[ee]|=2;else{let i=r[Ge][At];e[At]!==i&&(t[ee]|=2)}n===null?t[Aa]=[e]:n.push(e)}var Si=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[W];return Fa(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return Ei(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ge];if(Qt(e)){let n=e[Sa],r=n?n.indexOf(this):-1;r>-1&&(Va(e,r),wa(n,r))}this._attachedToViewContainer=!1}fd(this._lView[W],this._lView)}onDestroy(e){yg(this._lView,e)}markForCheck(){Vm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Sl(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,kb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vo(this._lView),n=this._lView[mi];n!==null&&!e&&Mm(n,this._lView),Ib(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Vo(this._lView),r=this._lView[mi];r!==null&&!n&&Ub(r,this._lView),Sl(this._lView)}};function md(t,e,n,r,i){let o=t.data[e];if(o===null)o=Xx(t,e,n,r,i),VT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=xT();o.injectorIndex=s===null?-1:s.injectorIndex}return jo(o,!0),o}function Xx(t,e,n,r,i){let o=Ig(),s=wg(),a=s?o:o&&o.parent,u=t.data[e]=tO(t,a,n,e,r,i);return eO(t,u,o,s),u}function eO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function tO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return MT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Y9=new RegExp(`^(\\d+)*(${Ck}|${bk})*(.*)`);function nO(t){let e=t[hg]??[],r=t[Ge][De],i=[];for(let o of e)o.data[QD]!==void 0?i.push(o):rO(o,r);t[hg]=i}function rO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[KD];for(;n<i;){let o=r.nextSibling;ob(e,r,!1),r=o,n++}}}var iO=()=>null,oO=()=>null;function nm(t,e){return iO(t,e)}function Bb(t,e,n){return oO(t,e,n)}var $b=class{},yd=class{},rm=class{resolveComponentFactory(e){throw new j(917,!1)}},qa=class{static NULL=new rm},Ai=class{},vd=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>sO()}return t})();function sO(){let t=de(),e=dt(),n=Bt(e.index,t);return(dn(n)?n:t)[De]}var Hb=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var jl={},im=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,jl,r);return i!==jl||n===jl?i:this.parentInjector.get(e,n,r)}};function Yl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Gp(i,a);else if(o==2){let u=a,l=e[++s];r=Gp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Xt(t,e=0){let n=de();if(n===null)return ne(t,e);let r=dt();return jD(r,n,tt(t),e)}function aO(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}lO(t,e,n,a,o,u,l)}o!==null&&r!==null&&cO(n,r,o)}function cO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function uO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function lO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&hn(y)&&(u=!0,uO(t,n,g)),Gg(ql(n,e),t,y.type)}mO(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=fb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ho(n.mergedAttrs,y.hostAttrs),hO(t,n,e,p,y),gO(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}dO(t,n,o)}function dO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))fD(0,e,i,r),fD(1,e,i,r),gD(e,r,!1);else{let o=n.get(i);pD(0,e,o,r),pD(1,e,o,r),gD(e,r,!0)}}}function fD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),qb(e,o)}}function pD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),qb(e,s)}}function qb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function gD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Tm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function hO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ui(i.type,!0)),s=new bi(o,hn(i),Xt,null);t.blueprint[r]=s,n[r]=s,fO(t,e,r,fb(t,n,i.hostVars,Jt),i)}function fO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;pO(s)!=a&&s.push(a),s.push(n,r,o)}}function pO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function gO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hn(e)&&(n[""]=t)}}function mO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zb(t,e,n,r,i,o,s,a){let u=e[W],l=u.consts,h=fn(l,s),p=md(u,t,n,r,h);return o&&aO(u,e,p,fn(l,a),i),p.mergedAttrs=Ho(p.mergedAttrs,p.attrs),p.attrs!==null&&Yl(p,p.attrs,!1),p.mergedAttrs!==null&&Yl(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Gb(t,e){ik(t,e),fg(e)&&t.queries.elementEnd(e)}function yO(t,e,n,r,i,o){let s=e.consts,a=fn(s,i),u=md(e,t,n,r,a);if(u.mergedAttrs=Ho(u.mergedAttrs,u.attrs),o!=null){let l=fn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Yl(u,u.attrs,!1),u.mergedAttrs!==null&&Yl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Hn(t,e,n){if(n===Jt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function vO(t,e,n,r){let i=Hn(t,e,n);return Hn(t,e+1,r)||i}function Ul(t,e,n){return function r(i){let o=Cr(t)?Bt(t.index,e):e;Vm(o,5);let s=e[ke],a=mD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=mD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function mD(t,e,n,r){let i=Q(null);try{return Ie(6,e,n),n(r)!==!1}catch(o){return Lx(t,o),!1}finally{Ie(7,e,n),Q(i)}}function Wb(t,e,n,r,i,o,s,a){let u=bl(t),l=!1,h=null;if(!r&&u&&(h=EO(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Yt(t,n),g=r?r(p):p;Ak(n,g,o,a);let y=i.listen(g,o,a);if(!_O(o)){let C=r?N=>r(Ut(N[t.index])):t.index;Kb(C,e,n,o,a,y,!1)}}return l}function _O(t){return t.startsWith("animation")||t.startsWith("transition")}function EO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Lo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Kb(t,e,n,r,i,o,s){let a=e.firstCreatePass?ST(e):null,u=CT(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function yD(t,e,n,r,i,o){let s=e[n],a=e[W],l=a.data[n].outputs[r],p=s[l].subscribe(o);Kb(t.index,a,e,i,o,p,!0)}var om=Symbol("BINDING");var Zl=class extends qa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Dr(e);return new zo(n,this.ngModule)}};function IO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&hd.SignalBased)!==0};return i&&(o.transform=i),o})}function wO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function TO(t,e,n){let r=e instanceof Fe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new im(n,r):n}function DO(t){let e=t.get(Ai,null);if(e===null)throw new j(407,!1);let n=t.get(Hb,null),r=t.get(Ir,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function bO(t,e){let n=Qb(t);return rb(e,n,n==="svg"?IT:n==="math"?wT:null)}function Qb(t){return(t.selectors[0][0]||"div").toLowerCase()}var zo=class extends yd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=IO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=wO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Kk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ie(22);let a=Q(null);try{let u=this.componentDef,l=CO(r,u,s,o),h=TO(u,i||this.ngModule,e),p=DO(h),g=p.rendererFactory.createRenderer(null,u),y=r?Tx(g,r,u.encapsulation,h):bO(u,g),C=s?.some(vD)||o?.some(x=>typeof x!="function"&&x.bindings.some(vD)),N=bm(null,l,null,512|hb(u),null,null,p,g,h,null,JD(y,h,!0));N[nt]=y,Rl(N);let R=null;try{let x=zb(nt,N,2,"#host",()=>l.directiveRegistry,!0,0);sb(g,y,x),qo(y,N),Db(l,N,x),eb(l,x,N),Gb(l,x),n!==void 0&&AO(x,this.ngContentSelectors,n),R=Bt(x.index,N),N[ke]=R[ke],Lm(l,N,null)}catch(x){throw R!==null&&Kg(R),Kg(N),x}finally{Ie(23),Nl()}return new Jl(this.componentType,N,!!C)}finally{Q(a)}}};function CO(t,e,n,r){let i=t?["ng-version","20.3.16"]:Qk(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[om].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[om].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=sg(p);u.push(g)}return Dm(0,null,SO(o,s),1,a,u,null,null,null,[i],null)}function SO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function vD(t){let e=t[om].kind;return e==="input"||e==="twoWay"}var Jl=class extends $b{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ra(n[W],nt),this.location=ym(this._tNode,n),this.instance=Bt(this._tNode.index,n)[ke],this.hostView=this.changeDetectorRef=new Si(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Om(r,i[W],i,e,n);this.previousInputValues.set(e,n);let s=Bt(r.index,i);Vm(s,1)}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var za=(()=>{class t{static __NG_ELEMENT_ID__=RO}return t})();function RO(){let t=dt();return MO(t,de())}var NO=za,Yb=class extends NO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ym(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){let e=mm(this._hostTNode,this._hostLView);if(kD(e)){let n=Hl(e,this._hostLView),r=$l(e),i=n[W].data[r+8];return new Di(i,n)}else return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_D(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,La(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!XP(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new zo(Dr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Fe,null);x&&(o=x)}let g=Dr(h.componentType??{}),y=nm(this._lContainer,g?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,La(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(TT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ge],l=new Yb(u,u[jt],u[Ge]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return gd(s,i,o,r),e.attachToViewContainerRef(),ng(Vg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_D(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Va(this._lContainer,n);r&&(wa(Vg(this._lContainer),n),fd(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=Va(this._lContainer,n);return r&&wa(Vg(this._lContainer),n)!=null?new Si(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function _D(t){return t[Sa]}function Vg(t){return t[Sa]||(t[Sa]=[])}function MO(t,e){let n,r=e[t.index];return Qt(r)?n=r:(n=Fb(r,e,null,t),e[t.index]=n,Cm(e,n)),kO(n,e,t,r),new Yb(n,t,e)}function PO(t,e){let n=t[De],r=n.createComment(""),i=Yt(e,t),o=n.parentNode(i);return Wl(n,o,r,n.nextSibling(i),!1),r}var kO=LO,xO=()=>!1;function OO(t,e,n){return xO(t,e,n)}function LO(t,e,n,r){if(t[br])return;let i;n.type&8?i=Ut(r):i=PO(e,n),t[br]=i}var Go=class{},_d=class{};var Xl=class extends Go{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Zl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=og(e);this._bootstrapComponents=lb(o.bootstrap),this._r3Injector=Rg(e,n,[{provide:Go,useValue:this},{provide:qa,useValue:this.componentFactoryResolver},...r],Vn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ed=class extends _d{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Xl(this.moduleType,e,[])}};var ja=class extends Go{injector;componentFactoryResolver=new Zl(this);instance=null;constructor(e){super();let n=new di([...e.providers,{provide:Go,useValue:this},{provide:qa,useValue:this.componentFactoryResolver}],e.parent||Da(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ga(t,e,n=null){return new ja({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var FO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=ag(!1,n.type),i=r.length>0?Ga([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(ne(Fe))})}return t})();function jm(t){return Ko(()=>{let e=Zb(t),n=ye(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(FO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Bn.Emulated,styles:t.styles||St,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ar("NgStandalone"),Jb(n);let r=t.dependencies;return n.directiveDefs=ED(r,VO),n.pipeDefs=ED(r,pT),n.id=BO(n),n})}function VO(t){return Dr(t)||sg(t)}function Yo(t){return Ko(()=>({type:t.type,bootstrap:t.bootstrap||St,declarations:t.declarations||St,imports:t.imports||St,exports:t.exports||St,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jO(t,e){if(t==null)return wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=hd.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function UO(t){if(t==null)return wr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Zo(t){return Ko(()=>{let e=Zb(t);return Jb(e),e})}function Zb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||St,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:jO(t.inputs,e),outputs:UO(t.outputs),debugInfo:null}}function Jb(t){t.features?.forEach(e=>e(t))}function ED(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function BO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $O(t){return Object.getPrototypeOf(t.prototype).constructor}function Xb(t){let e=$O(t.type),n=!0,r=[t];for(;e;){let i;if(hn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=jg(t.inputs),s.declaredInputs=jg(t.declaredInputs),s.outputs=jg(t.outputs);let a=i.hostBindings;a&&WO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zO(t,u),l&&GO(t,l),HO(t,i),sT(t.outputs,i.outputs),hn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Xb&&(n=!1)}}e=Object.getPrototypeOf(e)}qO(r)}function HO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function qO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ho(i.hostAttrs,n=Ho(n,i.hostAttrs))}}function jg(t){return t===wr?{}:t===St?[]:t}function zO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function GO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function WO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function KO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ho(t.mergedAttrs,t.attrs);let h=t.tView=Dm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),jo(t,!1);let u=QO(n,e,t,r);Pl()&&Pm(n,e,u,t),qo(u,e);let l=Fb(u,e,u,t);e[r+nt]=l,Cm(e,l),OO(l,t,e)}function td(t,e,n,r,i,o,s,a,u,l,h){let p=n+nt,g;if(e.firstCreatePass){if(g=md(e,p,4,s||null,a||null),l!=null){let y=fn(e.consts,l);g.localNames=[];for(let C=0;C<y.length;C+=2)g.localNames.push(y[C],-1)}}else g=e.data[p];return KO(g,t,e,n,r,i,o,u),l!=null&&xm(t,g,h),g}var QO=YO;function YO(t,e,n,r){return kl(!0),e[De].createComment("")}var Um=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Bm=new U("");function Wa(t){return!!t&&typeof t.then=="function"}function eC(t){return!!t&&typeof t.subscribe=="function"}var tC=new U("");var $m=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(tC,{optional:!0})??[];injector=k(We);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=He(this.injector,i);if(Wa(o))n.push(o);else if(eC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ed=new U("");function nC(){fp(()=>{let t="";throw new j(600,t)})}function rC(t){return t.isBoundToModule}var ZO=10;var Mi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Nt);afterRenderManager=k(vb);zonelessEnabled=k(Pa);rootEffectScheduler=k(xg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new qe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(pn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(n=>!n))}constructor(){k(Ha,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=We.NULL){return this._injector.get(ve).run(()=>{Ie(10);let s=n instanceof yd;if(!this._injector.get($m).done){let C="";throw new j(405,C)}let u;s?u=n:u=this._injector.get(qa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=rC(u)?void 0:this._injector.get(Go),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Bm,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Oa(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Ie(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ie(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Am.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=Q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Q(n),this.afterTick.next(),Ie(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ai,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ZO;)Ie(14),this.synchronizeOnce(),Ie(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Na(i))continue;let o=r&&!this.zonelessEnabled?0:1;kb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Na(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Oa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ed,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Oa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Id(t,e,n,r){let i=de(),o=Ii();if(Hn(i,o,e)){let s=lt(),a=Ml();kx(a,i,t,e,n,r)}return Id}var r8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var sm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Ug(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function JO(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Ug(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],C=Ug(s,g,u,y,n);if(C!==0){C<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,g),x=n(o,h);if(Object.is(x,R)){let H=n(u,y);Object.is(H,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new nd,i??=wD(t,o,s,n),am(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(N,t.detach(o)),s--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,s++}}for(;o<=u;)ID(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Ug(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new nd,i??=wD(t,o,s,n);let y=n(o,p);if(am(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let C=n(o,h);r.set(C,t.detach(o)),s--}}}for(;!l.done;)ID(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function am(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function ID(t,e,n,r,i){if(am(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function wD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var nd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function XO(t,e,n,r,i,o,s,a){Ar("NgControlFlow");let u=de(),l=lt(),h=fn(l.consts,o);return td(u,l,t,e,n,r,i,h,256,s,a),Hm}function Hm(t,e,n,r,i,o,s,a){Ar("NgControlFlow");let u=de(),l=lt(),h=fn(l.consts,o);return td(u,l,t,e,n,r,i,h,512,s,a),Hm}function e1(t,e){Ar("NgControlFlow");let n=de(),r=Ii(),i=n[r]!==Jt?n[r]:-1,o=i!==-1?rd(n,nt+i):void 0,s=0;if(Hn(n,r,t)){let a=Q(null);try{if(o!==void 0&&jb(o,s),t!==-1){let u=nt+t,l=rd(n,u),h=dm(n[W],u),p=Bb(l,h,n),g=Fm(n,h,e,{dehydratedView:p});gd(l,g,s,La(h,p))}}finally{Q(a)}}else if(o!==void 0){let a=Vb(o,s);a!==void 0&&(a[ke]=e)}}var cm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-xe}};var um=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function t1(t,e,n,r,i,o,s,a,u,l,h,p,g){Ar("NgControlFlow");let y=de(),C=lt(),N=u!==void 0,R=de(),x=a?s.bind(R[At][ke]):s,H=new um(N,x);R[nt+t]=H,td(y,C,t+1,e,n,r,i,fn(C.consts,o),256),N&&td(y,C,t+2,u,l,h,p,fn(C.consts,g),512)}var lm=class extends sm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-xe}at(e){return this.getLView(e)[ke].$implicit}attach(e,n){let r=n[Oo];this.needsIndexUpdate||=e!==this.length,gd(this.lContainer,n,e,La(this.templateTNode,r)),r1(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,i1(this.lContainer,e),o1(this.lContainer,e)}create(e,n){let r=nm(this.lContainer,this.templateTNode.tView.ssrId),i=Fm(this.hostLView,this.templateTNode,new cm(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){fd(e[W],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[ke].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return s1(this.lContainer,e)}};function n1(t){let e=Q(null),n=Un();try{let r=de(),i=r[W],o=r[n],s=n+1,a=rd(r,s);if(o.liveCollection===void 0){let l=dm(i,s);o.liveCollection=new lm(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(JO(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Ii(),h=u.length===0;if(Hn(r,l,h)){let p=n+2,g=rd(r,p);if(h){let y=dm(i,p),C=Bb(g,y,r),N=Fm(r,y,void 0,{dehydratedView:C});gd(g,N,0,La(y,C))}else i.firstUpdatePass&&nO(g),jb(g,0)}}}finally{Q(e)}}function rd(t,e){return t[e]}function r1(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[_i]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[jn];ax(o,i),Ci.delete(r),i.detachedLeaveAnimationFns=void 0}}function i1(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[_i]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function o1(t,e){return Va(t,e)}function s1(t,e){return Vb(t,e)}function dm(t,e){return Ra(t,e)}function TD(t,e,n,r,i){Om(e,t,n,i?"class":"style",r)}function qm(t,e,n,r){let i=de(),o=i[W],s=t+nt,a=o.firstCreatePass?zb(s,i,2,e,Px,NT(),n,r):o.data[s];if(Cb(a,i,t,e,oC),bl(a)){let u=i[W];Db(u,i,a),eb(u,a,i)}return r!=null&&xm(i,a),qm}function zm(){let t=lt(),e=dt(),n=Sb(e);return t.firstCreatePass&&Gb(t,n),_g(n)&&Eg(),vg(),n.classesWithoutHost!=null&&sk(n)&&TD(t,n,de(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&ak(n)&&TD(t,n,de(),n.stylesWithoutHost,!1),zm}function wd(t,e,n,r){return qm(t,e,n,r),zm(),wd}function Gm(t,e,n,r){let i=de(),o=i[W],s=t+nt,a=o.firstCreatePass?yO(s,o,2,e,n,r):o.data[s];return Cb(a,i,t,e,oC),r!=null&&xm(i,a),Gm}function Wm(){let t=dt(),e=Sb(t);return _g(e)&&Eg(),vg(),Wm}function iC(t,e,n,r){return Gm(t,e,n,r),Wm(),iC}var oC=(t,e,n,r,i)=>(kl(!0),rb(e[De],r,GT()));function a1(){return de()}function sC(t,e,n){let r=de(),i=Ii();if(Hn(r,i,e)){let o=lt(),s=Ml();bb(s,r,t,e,r[De],n)}return sC}var Ka="en-US";var c1=Ka;function aC(t){typeof t=="string"&&(c1=t.toLowerCase().replace(/_/g,"-"))}function Td(t,e,n){let r=de(),i=lt(),o=dt();return uC(i,r,r[De],o,t,e,n),Td}function cC(t,e,n){let r=de(),i=lt(),o=dt();return(o.type&3||n)&&Wb(o,i,r,n,r[De],t,e,Ul(o,r,e)),cC}function uC(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ul(r,e,o),Wb(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Ul(r,e,o),yD(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Ul(r,e,o),yD(r,e,p,i,i,u)}}function u1(t=1){return zT(t)}function Ll(t,e){return t<<17|e<<2}function Ri(t){return t>>17&32767}function l1(t){return(t&2)==2}function d1(t,e){return t&131071|e<<17}function hm(t){return t|2}function Wo(t){return(t&131068)>>2}function Bg(t,e){return t&-131069|e<<2}function h1(t){return(t&1)===1}function fm(t){return t|1}function f1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ri(s),u=Wo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||xo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Ri(t[a+1]);t[r+1]=Ll(g,a),g!==0&&(t[g+1]=Bg(t[g+1],r)),t[a+1]=d1(t[a+1],r)}else t[r+1]=Ll(a,0),a!==0&&(t[a+1]=Bg(t[a+1],r)),a=r;else t[r+1]=Ll(u,0),a===0?a=r:t[u+1]=Bg(t[u+1],r),u=r;l&&(t[r+1]=hm(t[r+1])),DD(t,h,r,!0),DD(t,h,r,!1),p1(e,h,t,r,o),s=Ll(a,u),o?e.classBindings=s:e.styleBindings=s}function p1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&xo(o,e)>=0&&(n[r+1]=fm(n[r+1]))}function DD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ri(i):Wo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];g1(u,e)&&(a=!0,t[s+1]=r?fm(l):hm(l)),s=r?Ri(l):Wo(l)}a&&(t[n+1]=r?hm(i):fm(i))}function g1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xo(t,e)>=0:!1}function lC(t,e){return m1(t,e,null,!0),lC}function m1(t,e,n,r){let i=de(),o=lt(),s=bg(2);if(o.firstUpdatePass&&v1(o,t,s,r),e!==Jt&&Hn(i,s,e)){let a=o.data[Un()];T1(o,a,i,i[De],t,i[s+1]=D1(e,n),r,s)}}function y1(t,e){return e>=t.expandoStartIndex}function v1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Un()],s=y1(t,n);b1(o,r)&&e===null&&!s&&(e=!1),e=_1(i,o,e,r),f1(i,o,e,n,s,r)}}function _1(t,e,n,r){let i=BT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=$g(null,t,e,n,r),n=Ua(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=$g(i,t,e,n,r),o===null){let u=E1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=$g(null,t,e,u[1],r),u=Ua(u,e.attrs,r),I1(t,e,r,u))}else o=w1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function E1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Wo(r)!==0)return t[Ri(r)]}function I1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ri(i)]=r}function w1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ua(r,s,n)}return Ua(r,e.attrs,n)}function $g(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ua(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ua(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),fT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function T1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=h1(l)?bD(u,e,n,i,Wo(l),s):void 0;if(!id(h)){id(o)||l1(l)&&(o=bD(u,null,n,i,a,s));let p=pg(Un(),n);wx(r,s,p,i,o)}}function bD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Jt&&(g=p?St:void 0);let y=p?wl(g,r):h===r?g:void 0;if(l&&!id(y)&&(y=wl(u,r)),id(y)&&(a=y,s))return a;let C=t[i+1];i=s?Ri(C):Wo(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=wl(u,r))}return a}function id(t){return t!==void 0}function D1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Vn(ld(t)))),t}function b1(t,e){return(t.flags&(e?8:16))!==0}function C1(t,e=""){let n=de(),r=lt(),i=t+nt,o=r.firstCreatePass?md(r,i,1,e,null):r.data[i],s=S1(r,n,o,e,t);n[i]=s,Pl()&&Pm(r,n,s,o),jo(o,!1)}var S1=(t,e,n,r,i)=>(kl(!0),Pk(e[De],r));function A1(t,e,n,r=""){return Hn(t,Ii(),n)?e+pi(n)+r:Jt}function R1(t,e,n,r,i,o=""){let s=LT(),a=vO(t,s,n,i);return bg(2),a?e+pi(n)+r+pi(i)+o:Jt}function dC(t){return Km("",t),dC}function Km(t,e,n){let r=de(),i=A1(r,t,e,n);return i!==Jt&&fC(r,Un(),i),Km}function hC(t,e,n,r,i){let o=de(),s=R1(o,t,e,n,r,i);return s!==Jt&&fC(o,Un(),s),hC}function fC(t,e,n){let r=pg(e,t);kk(t[De],r,n)}function pC(t,e,n){Mg(e)&&(e=e());let r=de(),i=Ii();if(Hn(r,i,e)){let o=lt(),s=Ml();Sx(s,r,t,e,r[De],n)}return pC}function N1(t,e){let n=Mg(t);return n&&t.set(e),n}function gC(t,e){let n=de(),r=lt(),i=dt();return uC(r,n,n[De],i,t,e),gC}function M1(t,e,n){let r=lt();if(r.firstCreatePass){let i=hn(t);pm(n,r.data,r.blueprint,i,!0),pm(e,r.data,r.blueprint,i,!1)}}function pm(t,e,n,r,i){if(t=tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)pm(t[o],e,n,r,i);else{let o=lt(),s=de(),a=dt(),u=li(t)?t:tt(t.provide),l=ug(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(li(t)||!t.multi){let y=new bi(l,i,Xt,null),C=qg(u,e,i?h:h+g,p);C===-1?(Gg(ql(a,s),o,u),Hg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=qg(u,e,h+g,p),C=qg(u,e,h,h+g),N=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!N){Gg(ql(a,s),o,u);let x=x1(i?k1:P1,n.length,i,r,l,t);!i&&R&&(n[C].providerFactory=x),Hg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=mC(n[i?C:y],l,!i&&r);Hg(o,t,y>-1?y:C,x)}!i&&r&&R&&n[C].componentProviders++}}}function Hg(t,e,n,r){let i=li(e),o=vT(e);if(i||o){let u=(o?tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function mC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function P1(t,e,n,r,i){return gm(this.multi,[])}function k1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=zl(r,r[W],this.providerFactory.index,i);s=u.slice(0,a),gm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],gm(o,s);return s}function gm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function x1(t,e,n,r,i,o){let s=new bi(t,n,Xt,null);return s.multi=[],s.index=e,s.componentProviders=0,mC(s,i,r&&!n),s}function O1(t,e=[]){return n=>{n.providersResolver=(r,i)=>M1(r,i?i(t):t,e)}}var od=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Qm=(()=>{class t{compileModuleSync(n){return new ed(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=og(n),o=lb(i.declarations).reduce((s,a)=>{let u=Dr(a);return u&&s.push(new zo(u)),s},[]);return new od(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var L1=(()=>{class t{zone=k(ve);changeDetectionScheduler=k(Ir);applicationRef=k(Mi);applicationErrorHandler=k(Nt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yC=new U("",{factory:()=>!1});function Ym({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(ye(F({},Zm()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:Tr,multi:!0,useFactory:()=>{let r=k(L1,{optional:!0});return()=>r.initialize()}},{provide:Tr,multi:!0,useFactory:()=>{let r=k(V1);return()=>{r.initialize()}}},e===!0?{provide:Pg,useValue:!0}:[],{provide:kg,useValue:n??gb},{provide:Nt,useFactory:()=>{let r=k(ve),i=k(Fe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(un),o.handleError(s))})}}}]}function F1(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Ym({ngZoneFactory:()=>{let i=Zm(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ar("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Wt([{provide:yC,useValue:!0},{provide:Pa,useValue:!1},r])}function Zm(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var V1=(()=>{class t{subscription=new Re;initialized=!1;zone=k(ve);pendingTasks=k(pn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vC=(()=>{class t{applicationErrorHandler=k(Nt);appRef=k(Mi);taskService=k(pn);ngZone=k(ve);zonelessEnabled=k(Pa);tracing=k(Ha,{optional:!0});disableScheduling=k(Pg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(kg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ql||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?aD:mb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,aD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function j1(){return typeof $localize<"u"&&$localize.locale||Ka}var Jm=new U("",{providedIn:"root",factory:()=>k(Jm,{optional:!0,skipSelf:!0})||j1()});function qn(t){return rT(t)}function U1(t,e){return Bu(t,e?.equal)}var _C=class{[ut];constructor(e){this[ut]=e}destroy(){this[ut].destroy()}};var IC=Symbol("InputSignalNode#UNSET"),nL=ye(F({},$u),{transformFn:void 0,applyValueToInputSignal(t,e){yo(t,e)}});function wC(t,e){let n=Object.create(nL);n.value=t,n.transformFn=e?.transform;function r(){if(po(n),n.value===IC){let i=null;throw new j(-950,i)}return n.value}return r[ut]=n,r}var bd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ba(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},rL=new U("");rL.__NG_ELEMENT_ID__=t=>{let e=dt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function EC(t,e){return wC(t,e)}function iL(t){return wC(IC,t)}var TC=(EC.required=iL,EC);var Xm=new U(""),oL=new U("");function Qa(t){return!t.moduleRef}function sL(t){let e=Qa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{Qa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Nt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Qa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Xm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Xm);s.add(o),t.moduleRef.onDestroy(()=>{Oa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return cL(r,n,()=>{let o=e.get(pn),s=o.add(),a=e.get($m);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Jm,Ka);if(aC(u||Ka),!e.get(oL,!0))return Qa(t)?e.get(Mi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Qa(t)){let h=e.get(Mi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return aL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var aL;function cL(t,e,n){try{let r=n();return Wa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Dd=null;function uL(t=[],e){return We.create({name:e,providers:[{provide:Ta,useValue:"platform"},{provide:Xm,useValue:new Set([()=>Dd=null])},...t]})}function lL(t=[]){if(Dd)return Dd;let e=uL(t);return Dd=e,nC(),dL(e),e}function dL(t){let e=t.get(cd,null);He(t,()=>{e?.forEach(n=>n())})}function ey(){return!1}var Cd=(()=>{class t{static __NG_ELEMENT_ID__=hL}return t})();function hL(t){return fL(dt(),de(),(t&16)===16)}function fL(t,e,n){if(Cr(t)&&!n){let r=Bt(t.index,e);return new Si(r,r)}else if(t.type&175){let r=e[At];return new Si(r,e)}return null}function DC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ie(8);try{let o=i?.injector??lL(r),s=[Ym({}),{provide:Ir,useExisting:vC},KT,...n||[]],a=new ja({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return sL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ie(9)}}function Sd(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var SC=null;function Gn(){return SC}function ty(t){SC??=t}var Ya=class{},ny=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(AC),providedIn:"platform"})}return t})();var AC=(()=>{class t extends ny{_location;_history;_doc=k(rt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gn().getBaseHref(this._doc)}onPopState(n){let r=Gn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Gn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function RC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function bC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Rr(t){return t&&t[0]!=="?"?`?${t}`:t}var Jo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(MC),providedIn:"root"})}return t})(),NC=new U(""),MC=(()=>{class t extends Jo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return RC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Rr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(ny),ne(NC,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xo=(()=>{class t{_subject=new qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=mL(bC(CC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Rr(r))}normalize(n){return t.stripTrailingSlash(gL(this._basePath,CC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Rr;static joinWithSlash=RC;static stripTrailingSlash=bC;static \u0275fac=function(r){return new(r||t)(ne(Jo))};static \u0275prov=B({token:t,factory:()=>pL(),providedIn:"root"})}return t})();function pL(){return new Xo(ne(Jo))}function gL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function CC(t){return t.replace(/\/index.html$/,"")}function mL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var PC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yo({type:t});static \u0275inj=hi({})}return t})();function ry(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Za=class{};var kC="browser";var Ja=class{_doc;constructor(e){this._doc=e}manager},Ad=(()=>{class t extends Ja{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ne(rt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Nd=new U(""),cy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Ad));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Ad);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne(Nd),ne(ve))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),iy="ng-app-id";function xC(t){for(let e of t)e.remove()}function OC(t,e){let n=e.createElement("style");return n.textContent=t,n}function _L(t,e,n,r){let i=t.head?.querySelectorAll(`style[${iy}="${e}"],link[${iy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(iy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function sy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var uy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,_L(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,OC);r?.forEach(i=>this.addUsage(i,this.external,sy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(xC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])xC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,OC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,sy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(rt),ne(ad),ne(ud,8),ne(Ni))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),oy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ly=/%COMP%/g;var FC="%COMP%",EL=`_nghost-${FC}`,IL=`_ngcontent-${FC}`,wL=!0,TL=new U("",{providedIn:"root",factory:()=>wL});function DL(t){return IL.replace(ly,t)}function bL(t){return EL.replace(ly,t)}function VC(t,e){return e.map(n=>n.replace(ly,t))}var dy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Xa(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Rd?i.applyToHost(n):i instanceof ec&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Bn.Emulated:o=new Rd(u,l,r,this.appId,h,s,a,p,g);break;case Bn.ShadowDom:return new ay(u,l,n,r,s,a,this.nonce,p,g);default:o=new ec(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ne(cy),ne(uy),ne(ad),ne(TL),ne(rt),ne(ve),ne(ud),ne(Ha,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Xa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(oy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(LC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(LC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=oy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=oy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($n.DashCase|$n.Important)?e.style.setProperty(n,r,i&$n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Gn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function LC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ay=class extends Xa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=VC(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=sy(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ec=class extends Xa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?VC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ci.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Rd=class extends ec{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=DL(h),this.hostAttr=bL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Md=class t extends Ya{supportsDOMEvents=!0;static makeCurrent(){ty(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=CL();return n==null?null:SL(n)}resetBaseElement(){tc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ry(document.cookie,e)}},tc=null;function CL(){return tc=tc||document.head.querySelector("base"),tc?tc.getAttribute("href"):null}function SL(t){return new URL(t,document.baseURI).pathname}var AL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),jC=["alt","control","meta","shift"],RL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},UC=(()=>{class t extends Ja{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),jC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=RL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jC.forEach(s=>{if(s!==i){let a=NL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(rt))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function ML(t,e,n){let r=F({rootComponent:t,platformRef:n?.platformRef},PL(e));return DC(r)}function PL(t){return{appProviders:[...FL,...t?.providers??[]],platformProviders:LL}}function kL(){Md.makeCurrent()}function xL(){return new un}function OL(){return _m(document),document}var LL=[{provide:Ni,useValue:kC},{provide:cd,useValue:kL,multi:!0},{provide:rt,useFactory:OL}];var FL=[{provide:Ta,useValue:"root"},{provide:un,useFactory:xL},{provide:Nd,useClass:Ad,multi:!0,deps:[rt]},{provide:Nd,useClass:UC,multi:!0,deps:[rt]},dy,uy,cy,{provide:Ai,useExisting:dy},{provide:Za,useClass:AL},[]];var BC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(rt))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z="primary",mc=Symbol("RouteTitle"),my=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function xi(t){return new my(t)}function QC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!mn(t[n],e[n]))return!1;return!0}function mn(t,e){let n=t?yy(t):void 0,r=e?yy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!YC(t[i],e[i]))return!1;return!0}function yy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function YC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ZC(t){return t.length>0?t[t.length-1]:null}function Qn(t){return Rp(t)?t:Wa(t)?Pe(Promise.resolve(t)):G(t)}var UL={exact:XC,subset:eS},JC={exact:BL,subset:$L,ignored:()=>!0};function $C(t,e,n){return UL[n.paths](t.root,e.root,n.matrixParams)&&JC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function BL(t,e){return mn(t,e)}function XC(t,e,n){if(!Pi(t.segments,e.segments)||!xd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!XC(t.children[r],e.children[r],n))return!1;return!0}function $L(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>YC(t[n],e[n]))}function eS(t,e,n){return tS(t,e,e.segments,n)}function tS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Pi(i,n)||e.hasChildren()||!xd(i,n,r))}else if(t.segments.length===n.length){if(!Pi(t.segments,n)||!xd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!eS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Pi(t.segments,i)||!xd(t.segments,i,r)||!t.children[Z]?!1:tS(t.children[Z],e,o,r)}}function xd(t,e,n){return e.every((r,i)=>JC[n](t[i].parameters,r.parameters))}var vn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new fe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xi(this.queryParams),this._queryParamMap}toString(){return zL.serialize(this)}},fe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Od(this)}},Nr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=xi(this.parameters),this._parameterMap}toString(){return rS(this)}};function HL(t,e){return Pi(t,e)&&t.every((n,r)=>mn(n.parameters,e[r].parameters))}function Pi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function qL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var yc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new Oi,providedIn:"root"})}return t})(),Oi=class{parse(e){let n=new _y(e);return new vn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${nc(e.root,!0)}`,r=KL(e.queryParams),i=typeof e.fragment=="string"?`#${GL(e.fragment)}`:"";return`${n}${r}${i}`}},zL=new Oi;function Od(t){return t.segments.map(e=>rS(e)).join("/")}function nc(t,e){if(!t.hasChildren())return Od(t);if(e){let n=t.children[Z]?nc(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${nc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=qL(t,(r,i)=>i===Z?[nc(t.children[Z],!1)]:[`${i}:${nc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${Od(t)}/${n[0]}`:`${Od(t)}/(${n.join("//")})`}}function nS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pd(t){return nS(t).replace(/%3B/gi,";")}function GL(t){return encodeURI(t)}function vy(t){return nS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ld(t){return decodeURIComponent(t)}function HC(t){return Ld(t.replace(/\+/g,"%20"))}function rS(t){return`${vy(t.path)}${WL(t.parameters)}`}function WL(t){return Object.entries(t).map(([e,n])=>`;${vy(e)}=${vy(n)}`).join("")}function KL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Pd(n)}=${Pd(i)}`).join("&"):`${Pd(n)}=${Pd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var QL=/^[^\/()?;#]+/;function hy(t){let e=t.match(QL);return e?e[0]:""}var YL=/^[^\/()?;=#]+/;function ZL(t){let e=t.match(YL);return e?e[0]:""}var JL=/^[^=?&#]+/;function XL(t){let e=t.match(JL);return e?e[0]:""}var eF=/^[^&#]+/;function tF(t){let e=t.match(eF);return e?e[0]:""}var _y=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new fe(e,n)),r}parseSegment(){let e=hy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Nr(Ld(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ZL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hy(this.remaining);i&&(r=i,this.capture(r))}e[Ld(n)]=Ld(r)}parseQueryParam(e){let n=XL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=tF(this.remaining);s&&(r=s,this.capture(r))}let i=HC(n),o=HC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new fe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function iS(t){return t.segments.length>0?new fe([],{[Z]:t}):t}function oS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=oS(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new fe(t.segments,e);return nF(n)}function nF(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new fe(t.segments.concat(e.segments),e.children)}return t}function Mr(t){return t instanceof vn}function sS(t,e,n=null,r=null){let i=aS(t);return cS(i,e,n,r)}function aS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new fe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=iS(r);return e??i}function cS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return fy(i,i,i,n,r);let o=rF(e);if(o.toRoot())return fy(i,i,new fe([],{}),n,r);let s=iF(o,i,t),a=s.processChildren?ic(s.segmentGroup,s.index,o.commands):lS(s.segmentGroup,s.index,o.commands);return fy(i,s.segmentGroup,a,n,r)}function Fd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ac(t){return typeof t=="object"&&t!=null&&t.outlets}function fy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=uS(t,e,n);let a=iS(oS(s));return new vn(a,o,i)}function uS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=uS(o,e,n)}),new fe(t.segments,r)}var Vd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fd(r[0]))throw new j(4003,!1);let i=r.find(ac);if(i&&i!==ZC(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Vd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Vd(n,e,r)}var ns=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function iF(t,e,n){if(t.isAbsolute)return new ns(e,!0,0);if(!n)return new ns(e,!1,NaN);if(n.parent===null)return new ns(n,!0,0);let r=Fd(t.commands[0])?0:1,i=n.segments.length-1+r;return oF(n,i,t.numberOfDoubleDots)}function oF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ns(r,!1,i-o)}function sF(t){return ac(t[0])?t[0].outlets:{[Z]:t}}function lS(t,e,n){if(t??=new fe([],{}),t.segments.length===0&&t.hasChildren())return ic(t,e,n);let r=aF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new fe(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new fe(t.segments.slice(r.pathIndex),t.children),ic(o,0,i)}else return r.match&&i.length===0?new fe(t.segments,{}):r.match&&!t.hasChildren()?Ey(t,e,n):r.match?ic(t,0,i):Ey(t,e,n)}function ic(t,e,n){if(n.length===0)return new fe(t.segments,{});{let r=sF(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=ic(t.children[Z],e,n);return new fe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new fe(t.segments,i)}}function aF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ac(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!zC(u,l,s))return o;r+=2}else{if(!zC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ey(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ac(o)){let u=cF(o.outlets);return new fe(r,u)}if(i===0&&Fd(n[0])){let u=t.segments[e];r.push(new Nr(u.path,qC(n[0]))),i++;continue}let s=ac(o)?o.outlets[Z]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Fd(a)?(r.push(new Nr(s,qC(a))),i+=2):(r.push(new Nr(s,{})),i++)}return new fe(r,{})}function cF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ey(new fe([],{}),0,r))}),e}function qC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function zC(t,e,n){return t==n.path&&mn(e,n.parameters)}var oc="imperative",Ke=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ke||{}),kt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Li=class extends kt{type=Ke.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_n=class extends kt{urlAfterRedirects;type=Ke.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(vt||{}),cc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(cc||{}),yn=class extends kt{reason;code;type=Ke.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wn=class extends kt{reason;code;type=Ke.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},is=class extends kt{error;target;type=Ke.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},uc=class extends kt{urlAfterRedirects;state;type=Ke.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends kt{urlAfterRedirects;state;type=Ke.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends kt{urlAfterRedirects;state;shouldActivate;type=Ke.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bd=class extends kt{urlAfterRedirects;state;type=Ke.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends kt{urlAfterRedirects;state;type=Ke.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hd=class{route;type=Ke.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qd=class{route;type=Ke.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zd=class{snapshot;type=Ke.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gd=class{snapshot;type=Ke.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wd=class{snapshot;type=Ke.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kd=class{snapshot;type=Ke.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lc=class{},os=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function uF(t){return!(t instanceof lc)&&!(t instanceof os)}function lF(t,e){return t.providers&&!t._injector&&(t._injector=Ga(t.providers,e,`Route: ${t.path}`)),t._injector??e}function en(t){return t.outlet||Z}function dF(t,e){let n=t.filter(r=>en(r)===e);return n.push(...t.filter(r=>en(r)!==e)),n}function cs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Qd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return cs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new us(this.rootInjector)}},us=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Qd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(Fe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Iy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Iy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wy(e,this._root).map(n=>n.value)}};function Iy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Iy(t,n);if(r)return r}return null}function wy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=wy(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ts(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var dc=class extends Yd{snapshot;constructor(e,n){super(e),this.snapshot=n,Ny(this,e)}toString(){return this.snapshot.toString()}};function dS(t){let e=hF(t),n=new et([new Nr("",{})]),r=new et({}),i=new et({}),o=new et({}),s=new et(""),a=new Kn(n,r,o,s,i,Z,t,e.root);return a.snapshot=e.root,new dc(new Pt(a,[]),e)}function hF(t){let e={},n={},r={},o=new ki([],e,r,"",n,Z,t,null,{});return new hc("",new Pt(o,[]))}var Kn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[mc]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>xi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>xi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&fS(i)&&(r.resolve[mc]=i.title),r}var ki=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[mc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},hc=class extends Yd{url;constructor(e,n){super(n),this.url=e,Ny(this,n)}toString(){return hS(this._root)}};function Ny(t,e){e.value._routerState=t,e.children.forEach(n=>Ny(t,n))}function hS(t){let e=t.children.length>0?` { ${t.children.map(hS).join(", ")} } `:"";return`${t.value}${e}`}function py(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,mn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),mn(e.params,n.params)||t.paramsSubject.next(n.params),jL(e.url,n.url)||t.urlSubject.next(n.url),mn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ty(t,e){let n=mn(t.params,e.params)&&HL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ty(t.parent,e.parent))}function fS(t){return typeof t.title=="string"||t.title===null}var pS=new U(""),My=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new yt;deactivateEvents=new yt;attachEvents=new yt;detachEvents=new yt;routerOutletData=TC();parentContexts=k(us);location=k(za);changeDetector=k(Cd);inputBinder=k(th,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Dy(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Zo({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Qo]})}return t})(),Dy=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Kn?this.route:e===us?this.childContexts:e===pS?this.outletData:this.parent.get(e,n)}},th=new U("");var Py=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=jm({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&wd(0,"router-outlet")},dependencies:[My],encapsulation:2})}return t})();function ky(t){let e=t.children&&t.children.map(ky),n=e?ye(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=Py),n}function fF(t,e,n){let r=fc(t,e._root,n?n._root:void 0);return new dc(r,e)}function fc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=pF(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fc(t,a)),s}}let r=gF(e.value),i=e.children.map(o=>fc(t,o));return new Pt(r,i)}}function pF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return fc(t,r,i);return fc(t,r)})}function gF(t){return new Kn(new et(t.url),new et(t.params),new et(t.queryParams),new et(t.fragment),new et(t.data),t.outlet,t.component,t)}var ss=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},gS="ngNavigationCancelingError";function Jd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Mr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mS(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[gS]=!0,n.cancellationCode=e,n}function mF(t){return yS(t)&&Mr(t.url)}function yS(t){return!!t&&t[gS]}var yF=(t,e,n,r)=>ue(i=>(new by(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),by=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),py(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ts(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ts(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ts(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ts(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Kd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Gd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(py(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),py(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Xd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},rs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function vF(t,e,n){let r=t._root,i=e?e._root:null;return rc(r,i,n,[r.value])}function _F(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ls(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Kp(t)?t:e.get(t):r}function rc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ts(e);return t.children.forEach(s=>{EF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>sc(a,n.getContext(s),i)),i}function EF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=IF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Xd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?rc(t,e,a?a.children:null,r,i):rc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new rs(a.outlet.component,s))}else s&&sc(e,a,i),i.canActivateChecks.push(new Xd(r)),o.component?rc(t,null,a?a.children:null,r,i):rc(t,null,n,r,i);return i}function IF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Pi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(t.url,e.url)||!mn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ty(t,e)||!mn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ty(t,e)}}function sc(t,e,n){let r=ts(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?sc(s,e.children.getContext(o),n):sc(s,null,n):sc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new rs(e.outlet.component,i)):n.canDeactivateChecks.push(new rs(null,i)):n.canDeactivateChecks.push(new rs(null,i))}function vc(t){return typeof t=="function"}function wF(t){return typeof t=="boolean"}function TF(t){return t&&vc(t.canLoad)}function DF(t){return t&&vc(t.canActivate)}function bF(t){return t&&vc(t.canActivateChild)}function CF(t){return t&&vc(t.canDeactivate)}function SF(t){return t&&vc(t.canMatch)}function vS(t){return t instanceof xn||t?.name==="EmptyError"}var kd=Symbol("INITIAL_VALUE");function as(){return wt(t=>dl(t.map(e=>e.pipe(On(1),Pp(kd)))).pipe(ue(e=>{for(let n of e)if(n!==!0){if(n===kd)return kd;if(n===!1||AF(n))return n}return!0}),Ft(e=>e!==kd),On(1)))}function AF(t){return Mr(t)||t instanceof ss}function RF(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(ye(F({},n),{guardsResult:!0})):NF(s,r,i,t).pipe($e(a=>a&&wF(a)?MF(r,o,t,e):G(a)),ue(a=>ye(F({},n),{guardsResult:a})))})}function NF(t,e,n,r){return Pe(t).pipe($e(i=>LF(i.component,i.route,n,e,r)),Ln(i=>i!==!0,!0))}function MF(t,e,n,r){return Pe(e).pipe(No(i=>Ro(kF(i.route.parent,r),PF(i.route,r),OF(t,i.path,n),xF(t,i.route,n))),Ln(i=>i!==!0,!0))}function PF(t,e){return t!==null&&e&&e(new Wd(t)),G(!0)}function kF(t,e){return t!==null&&e&&e(new zd(t)),G(!0)}function xF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>pa(()=>{let s=cs(e)??n,a=ls(o,s),u=DF(a)?a.canActivate(e,t):He(s,()=>a(e,t));return Qn(u).pipe(Ln())}));return G(i).pipe(as())}function OF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>_F(s)).filter(s=>s!==null).map(s=>pa(()=>{let a=s.guards.map(u=>{let l=cs(s.node)??n,h=ls(u,l),p=bF(h)?h.canActivateChild(r,t):He(l,()=>h(r,t));return Qn(p).pipe(Ln())});return G(a).pipe(as())}));return G(o).pipe(as())}function LF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=cs(e)??i,l=ls(a,u),h=CF(l)?l.canDeactivate(t,e,n,r):He(u,()=>l(t,e,n,r));return Qn(h).pipe(Ln())});return G(s).pipe(as())}function FF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=ls(s,t),u=TF(a)?a.canLoad(e,n):He(t,()=>a(e,n));return Qn(u)});return G(o).pipe(as(),_S(r))}function _S(t){return Ip(ze(e=>{if(typeof e!="boolean")throw Jd(t,e)}),ue(e=>e===!0))}function VF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=ls(s,t),u=SF(a)?a.canMatch(e,n):He(t,()=>a(e,n));return Qn(u)});return G(o).pipe(as(),_S(r))}var pc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},gc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function es(t){return Ao(new pc(t))}function jF(t){return Ao(new j(4e3,!1))}function UF(t){return Ao(mS(!1,vt.GuardRejected))}var Cy=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[Z])return jF(`${e.redirectTo}`);i=i.children[Z]}}applyRedirectCommands(e,n,r,i,o){return BF(n,i,o).pipe(ue(s=>{if(s instanceof vn)throw new gc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new gc(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new vn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new fe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function BF(t,e,n){if(typeof t=="string")return G(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Qn(He(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $F(t,e,n,r,i){let o=ES(t,e,n);return o.matched?(r=lF(e,r),VF(r,e,n,i).pipe(ue(s=>s===!0?o:F({},Sy)))):G(o)}function ES(t,e,n){if(e.path==="**")return HF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Sy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QC)(n,t,e);if(!i)return F({},Sy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function HF(t){return{matched:!0,parameters:t.length>0?ZC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function GC(t,e,n,r){return n.length>0&&GF(t,n,r)?{segmentGroup:new fe(e,zF(r,new fe(n,t.children))),slicedSegments:[]}:n.length===0&&WF(t,n,r)?{segmentGroup:new fe(t.segments,qF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new fe(t.segments,t.children),slicedSegments:n}}function qF(t,e,n,r){let i={};for(let o of n)if(nh(t,e,o)&&!r[en(o)]){let s=new fe([],{});i[en(o)]=s}return F(F({},r),i)}function zF(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&en(r)!==Z){let i=new fe([],{});n[en(r)]=i}return n}function GF(t,e,n){return n.some(r=>nh(t,e,r)&&en(r)!==Z)}function WF(t,e,n){return n.some(r=>nh(t,e,r))}function nh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function KF(t,e,n){return e.length===0&&!t.children[n]}var Ay=class{};function QF(t,e,n,r,i,o,s="emptyOnly"){return new Ry(t,e,n,r,i,s,o).recognize()}var YF=31,Ry=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cy(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=GC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:n,rootSnapshot:r})=>{let i=new Pt(r,n),o=new hc("",i),s=sS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new ki([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,n).pipe(ue(r=>({children:r,rootSnapshot:n})),vr(r=>{if(r instanceof gc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof Pt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(No(s=>{let a=r.children[s],u=dF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Mp((s,a)=>(s.push(...a),s)),_r(null),Np(),$e(s=>{if(s===null)return es(r);let a=IS(s);return ZF(a),G(a)}))}processSegment(e,n,r,i,o,s,a){return Pe(n).pipe(No(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(vr(l=>{if(l instanceof pc)return G(null);throw l}))),Ln(u=>!!u),vr(u=>{if(vS(u))return KF(r,i,o)?G(new Ay):es(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return en(r)!==s&&(s===Z||!nh(i,o,r))?es(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):es(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=ES(n,i,o);if(!u)return es(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>YF&&(this.allowRedirects=!1));let y=new ki(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,WC(i),en(i),i.component??i._loadedComponent??null,i,KC(i)),C=Zd(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(wt(R=>this.applyRedirects.lineralizeSegments(i,R)),$e(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=$F(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(wt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(wt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,C=new ki(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,WC(r),en(r),r.component??r._loadedComponent??null,r,KC(r)),N=Zd(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=GC(n,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(ue(K=>new Pt(C,K)));if(l.length===0&&x.length===0)return G(new Pt(C,[]));let H=en(r)===o;return this.processSegment(h,l,R,x,H?Z:o,!0,C).pipe(ue(K=>new Pt(C,K instanceof Pt?[K]:[])))}))):es(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):FF(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(ze(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):UF(n))):G({routes:[],injector:e})}};function ZF(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function JF(t){let e=t.value.routeConfig;return e&&e.path===""}function IS(t){let e=[],n=new Set;for(let r of t){if(!JF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=IS(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function WC(t){return t.data||{}}function KC(t){return t.resolve||{}}function XF(t,e,n,r,i,o){return $e(s=>QF(t,e,n,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>ye(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function eV(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of wS(u))s.add(l);let a=0;return Pe(s).pipe(No(u=>o.has(u)?tV(u,r,t,e):(u.data=Zd(u,u.parent,t).resolve,G(void 0))),ze(()=>a++),Mo(1),$e(u=>a===s.size?G(n):Et))})}function wS(t){let e=t.children.map(n=>wS(n)).flat();return[t,...e]}function tV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!fS(i)&&(o[mc]=i.title),pa(()=>(t.data=Zd(t,t.parent,n).resolve,nV(o,t,e,r).pipe(ue(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function nV(t,e,n,r){let i=yy(t);if(i.length===0)return G({});let o={};return Pe(i).pipe($e(s=>rV(t[s],e,n,r).pipe(Ln(),ze(a=>{if(a instanceof ss)throw Jd(new Oi,a);o[s]=a}))),Mo(1),ue(()=>o),vr(s=>vS(s)?Et:Ao(s)))}function rV(t,e,n,r){let i=cs(e)??r,o=ls(t,i),s=o.resolve?o.resolve(e,n):He(i,()=>o(e,n));return Qn(s)}function gy(t){return wt(e=>{let n=t(e);return n?Pe(n).pipe(ue(()=>e)):G(e)})}var xy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[mc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(TS),providedIn:"root"})}return t})(),TS=(()=>{class t extends xy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(BC))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ds=new U("",{providedIn:"root",factory:()=>({})}),_c=new U(""),DS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Qm);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Qn(He(n,()=>r.loadComponent())).pipe(ue(CS),wt(SS),ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ga(()=>{this.componentLoaders.delete(r)})),o=new Do(i,()=>new qe).pipe(To());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=bS(r,this.compiler,n,this.onLoadEndListener).pipe(ga(()=>{this.childrenLoaders.delete(r)})),s=new Do(o,()=>new qe).pipe(To());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bS(t,e,n,r){return Qn(He(n,()=>t.loadChildren())).pipe(ue(CS),wt(SS),$e(i=>i instanceof _d||Array.isArray(i)?G(i):Pe(e.compileModuleAsync(i))),ue(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(_c,[],{optional:!0,self:!0}).flat()),{routes:s.map(ky),injector:o}}))}function iV(t){return t&&typeof t=="object"&&"default"in t}function CS(t){return iV(t)?t.default:t}function SS(t){return G(t)}var rh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(oV),providedIn:"root"})}return t})(),oV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),AS=new U("");var RS=new U(""),NS=(()=>{class t{currentNavigation=Ti(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new qe;transitionAbortWithErrorSubject=new qe;configLoader=k(DS);environmentInjector=k(Fe);destroyRef=k(wi);urlSerializer=k(yc);rootContexts=k(us);location=k(Xo);inputBindingEnabled=k(th,{optional:!0})!==null;titleStrategy=k(xy);options=k(ds,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(rh);createViewTransition=k(AS,{optional:!0});navigationErrorHandler=k(RS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Hd(i)),r=i=>this.events.next(new qd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;qn(()=>{this.transitions?.next(ye(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new et(null),this.transitions.pipe(Ft(r=>r!==null),wt(r=>{let i=!1;return G(r).pipe(wt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Wn(o.id,this.urlSerializer.serialize(o.rawUrl),"",cc.IgnoredSameUrlNavigation)),o.resolve(!1),Et;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(wt(u=>(this.events.next(new Li(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Et:Promise.resolve(u))),XF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),ze(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new uc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Li(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=dS(this.rootComponentType).snapshot;return this.currentTransition=r=ye(F({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:ye(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),G(r)}else return this.events.next(new Wn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",cc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Et}),ze(o=>{let s=new jd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=ye(F({},o),{guards:vF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),RF(this.environmentInjector,o=>this.events.next(o)),ze(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Jd(this.urlSerializer,o.guardsResult);let s=new Ud(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ft(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",vt.GuardRejected),!1)),gy(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(ze(s=>{let a=new Bd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),wt(s=>{let a=!1;return G(s).pipe(eV(this.paramsInheritanceStrategy,this.environmentInjector),ze({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",vt.NoDataFromResolver)}}))}),ze(s=>{let a=new $d(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),gy(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=cs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(ze(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return dl(s(o.targetSnapshot.root)).pipe(_r(null),On(1))}),gy(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Pe(a).pipe(ue(()=>r)):G(r)}),ue(o=>{let s=fF(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ze(()=>{this.events.next(new lc)}),yF(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),On(1),fl(new Y(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ft(()=>!i&&!r.targetRouterState),ze(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vt.Aborted)}))),ze({next:o=>{i=!0,this.lastSuccessfulNavigation=qn(this.currentNavigation),this.events.next(new _n(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),fl(this.transitionAbortWithErrorSubject.pipe(ze(o=>{throw o}))),ga(()=>{i||this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),vr(o=>{if(this.destroyed)return r.resolve(!1),Et;if(i=!0,yS(o))this.events.next(new yn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),mF(o)?this.events.next(new os(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new is(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ss){let{message:u,cancellationCode:l}=Jd(this.urlSerializer,a);this.events.next(new yn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new os(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Et}))}))}cancelNavigationTransition(n,r,i){let o=new yn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=qn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sV(t){return t!==oc}var MS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(aV),providedIn:"root"})}return t})(),eh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},aV=(()=>{class t extends eh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=sd(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PS=(()=>{class t{urlSerializer=k(yc);options=k(ds,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Xo);urlHandlingStrategy=k(rh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof vn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=dS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(cV),providedIn:"root"})}return t})(),cV=(()=>{class t extends PS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Li?this.updateStateMemento():n instanceof Wn?this.commitTransition(r):n instanceof uc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof lc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof yn&&n.code!==vt.SupersededByNewNavigation&&n.code!==vt.Redirect?this.restoreHistory(r):n instanceof is?this.restoreHistory(r,!0):n instanceof _n&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=sd(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oy(t,e){t.events.pipe(Ft(n=>n instanceof _n||n instanceof yn||n instanceof is||n instanceof Wn),ue(n=>n instanceof _n||n instanceof Wn?0:(n instanceof yn?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?2:1),Ft(n=>n!==2),On(1)).subscribe(()=>{e()})}var uV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ec=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(Um);stateManager=k(PS);options=k(ds,{optional:!0})||{};pendingTasks=k(pn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(NS);urlSerializer=k(yc);location=k(Xo);urlHandlingStrategy=k(rh);injector=k(Fe);_events=new qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(MS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(_c,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(th,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=qn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof yn&&r.code!==vt.Redirect&&r.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _n)this.navigated=!0;else if(r instanceof os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sV(i.source)},s);this.scheduleNavigation(a,oc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}uF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Nt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return qn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ky),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=aS(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return cS(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Mr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,oc,null,r)}navigate(n,r={skipLocationChange:!1}){return dV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(_a(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},uV):r===!1?i=F({},lV):i=r,Mr(n))return $C(this.currentUrlTree,n,i);let o=this.parseUrl(n);return $C(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Oy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var kS=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ti(null);get href(){return qn(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new qe;applicationErrorHandler=k(Nt);options=k(ds,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new bd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof _n&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Mr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Mr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Xt(Ec),Xt(Kn),Ba("tabindex"),Xt(vd),Xt($a),Xt(Jo))};static \u0275dir=Zo({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Td("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Id("href",i.reactiveHref(),wm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Sd],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Sd],replaceUrl:[2,"replaceUrl","replaceUrl",Sd],routerLink:"routerLink"},features:[Qo]})}return t})();var fV=new U("");function pV(t,...e){return Wt([{provide:_c,multi:!0,useValue:t},[],{provide:Kn,useFactory:gV,deps:[Ec]},{provide:Ed,multi:!0,useFactory:mV},e.map(n=>n.\u0275providers)])}function gV(t){return t.routerState.root}function mV(){let t=k(We);return e=>{let n=t.get(Mi);if(e!==n.components[0])return;let r=t.get(Ec),i=t.get(yV);t.get(vV)===1&&r.initialNavigation(),t.get(_V,null,{optional:!0})?.setUpPreloading(),t.get(fV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yV=new U("",{factory:()=>new qe}),vV=new U("",{providedIn:"root",factory:()=>1});var _V=new U("");var xS=()=>{};var FS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ih={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Fy;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Fy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},IV=function(t){let e=FS(t);return ih.encodeByteArray(e,!0)},wc=function(t){return IV(t).replace(/\./g,"")},oh=function(t){try{return ih.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wV=()=>jy().__FIREBASE_DEFAULTS__,TV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&oh(t[1]);return e&&JSON.parse(e)},sh=()=>{try{return xS()||wV()||TV()||DV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Uy=t=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VS=t=>{let e=Uy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},By=()=>{var t;return(t=sh())===null||t===void 0?void 0:t.config},$y=t=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${t}`]};var Fi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Pr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function ah(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function jS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wc(JSON.stringify(n)),wc(JSON.stringify(s)),""].join(".")}var Ic={};function bV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ic))Ic[e]?t.emulator.push(e):t.prod.push(e);return t}function CV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var OS=!1;function ch(t,e){if(typeof window>"u"||typeof document>"u"||!Pr(window.location.host)||Ic[t]===e||Ic[t]||OS)return;Ic[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=bV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{OS=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=CV(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),H=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let K=g.element;a(K),h(R,N);let _e=l();u(H,x),K.append(H,C,R,_e),document.body.appendChild(K)}o?(C.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function US(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function SV(){var t;let e=(t=sh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $S(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qS(){let t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zS(){return!SV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tc(){try{return typeof indexedDB=="object"}catch{return!1}}function GS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var AV="FirebaseError",xt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}},tn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?RV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new xt(i,a,r)}};function RV(t,e){return t.replace(NV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var NV=/\{\$([^}]+)}/g;function WS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function En(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(LS(o)&&LS(s)){if(!En(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function LS(t){return t!==null&&typeof t=="object"}function Dc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function fs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KS(t,e){let n=new Vy(t,e);return n.subscribe.bind(n)}var Vy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ly),i.error===void 0&&(i.error=Ly),i.complete===void 0&&(i.complete=Ly);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function MV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ly(){}var $ee=14400*1e3;function Oe(t){return t&&t._delegate?t._delegate:t}var _t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vi="[DEFAULT]";var Hy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Fi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kV(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function PV(t){return t===Vi?void 0:t}function kV(t){return t.instantiationMode==="EAGER"}var uh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Hy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var xV=[],oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(oe||{}),OV={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},LV=oe.INFO,FV={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},VV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=FV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},In=class{constructor(e){this.name=e,this._logLevel=LV,this._logHandler=VV,this._userLogHandler=null,xV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var jV=(t,e)=>e.some(n=>t instanceof n),QS,YS;function UV(){return QS||(QS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BV(){return YS||(YS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ZS=new WeakMap,zy=new WeakMap,JS=new WeakMap,qy=new WeakMap,Wy=new WeakMap;function $V(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(wn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ZS.set(n,t)}).catch(()=>{}),Wy.set(e,t),e}function HV(t){if(zy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});zy.set(t,e)}var Gy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XS(t){Gy=t(Gy)}function qV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(lh(this),e,...n);return JS.set(r,e.sort?e.sort():[e]),wn(r)}:BV().includes(t)?function(...e){return t.apply(lh(this),e),wn(ZS.get(this))}:function(...e){return wn(t.apply(lh(this),e))}}function zV(t){return typeof t=="function"?qV(t):(t instanceof IDBTransaction&&HV(t),jV(t,UV())?new Proxy(t,Gy):t)}function wn(t){if(t instanceof IDBRequest)return $V(t);if(qy.has(t))return qy.get(t);let e=zV(t);return e!==t&&(qy.set(t,e),Wy.set(e,t)),e}var lh=t=>Wy.get(t);function tA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=wn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(wn(s.result),u.oldVersion,u.newVersion,wn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var GV=["get","getKey","getAll","getAllKeys","count"],WV=["put","add","delete","clear"],Ky=new Map;function eA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ky.get(e))return Ky.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=WV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GV.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Ky.set(e,o),o}XS(t=>ye(F({},t),{get:(e,n,r)=>eA(e,n)||t.get(e,n,r),has:(e,n)=>!!eA(e,n)||t.has(e,n)}));var Yy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function KV(t){let e=t.getComponent();return e?.type==="VERSION"}var Zy="@firebase/app",nA="0.13.2";var Yn=new In("@firebase/app"),QV="@firebase/app-compat",YV="@firebase/analytics-compat",ZV="@firebase/analytics",JV="@firebase/app-check-compat",XV="@firebase/app-check",e2="@firebase/auth",t2="@firebase/auth-compat",n2="@firebase/database",r2="@firebase/data-connect",i2="@firebase/database-compat",o2="@firebase/functions",s2="@firebase/functions-compat",a2="@firebase/installations",c2="@firebase/installations-compat",u2="@firebase/messaging",l2="@firebase/messaging-compat",d2="@firebase/performance",h2="@firebase/performance-compat",f2="@firebase/remote-config",p2="@firebase/remote-config-compat",g2="@firebase/storage",m2="@firebase/storage-compat",y2="@firebase/firestore",v2="@firebase/ai",_2="@firebase/firestore-compat",E2="firebase",I2="11.10.0";var Jy="[DEFAULT]",w2={[Zy]:"fire-core",[QV]:"fire-core-compat",[ZV]:"fire-analytics",[YV]:"fire-analytics-compat",[XV]:"fire-app-check",[JV]:"fire-app-check-compat",[e2]:"fire-auth",[t2]:"fire-auth-compat",[n2]:"fire-rtdb",[r2]:"fire-data-connect",[i2]:"fire-rtdb-compat",[o2]:"fire-fn",[s2]:"fire-fn-compat",[a2]:"fire-iid",[c2]:"fire-iid-compat",[u2]:"fire-fcm",[l2]:"fire-fcm-compat",[d2]:"fire-perf",[h2]:"fire-perf-compat",[f2]:"fire-rc",[p2]:"fire-rc-compat",[g2]:"fire-gcs",[m2]:"fire-gcs-compat",[y2]:"fire-fst",[_2]:"fire-fst-compat",[v2]:"fire-vertex","fire-js":"fire-js",[E2]:"fire-js-all"};var bc=new Map,T2=new Map,Xy=new Map;function rA(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nn(t){let e=t.name;if(Xy.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Xy.set(e,t);for(let n of bc.values())rA(n,t);for(let n of T2.values())rA(n,t);return!0}function ps(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tt(t){return t==null?!1:t.settings!==void 0}var D2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new tn("app","Firebase",D2);var ev=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}};var xr=I2;function rv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw kr.create("bad-app-name",{appName:String(i)});if(n||(n=By()),!n)throw kr.create("no-options");let o=bc.get(i);if(o){if(En(n,o.options)&&En(r,o.config))return o;throw kr.create("duplicate-app",{appName:i})}let s=new uh(i);for(let u of Xy.values())s.addComponent(u);let a=new ev(n,r,s);return bc.set(i,a),a}function ji(t=Jy){let e=bc.get(t);if(!e&&t===Jy&&By())return rv();if(!e)throw kr.create("no-app",{appName:t});return e}function dh(){return Array.from(bc.values())}function Ne(t,e,n){var r;let i=(r=w2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}nn(new _t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var b2="firebase-heartbeat-database",C2=1,Cc="firebase-heartbeat-store",Qy=null;function aA(){return Qy||(Qy=tA(b2,C2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),Qy}function S2(t){return v(this,null,function*(){try{let n=(yield aA()).transaction(Cc),r=yield n.objectStore(Cc).get(cA(t));return yield n.done,r}catch(e){if(e instanceof xt)Yn.warn(e.message);else{let n=kr.create("idb-get",{originalErrorMessage:e?.message});Yn.warn(n.message)}}})}function iA(t,e){return v(this,null,function*(){try{let r=(yield aA()).transaction(Cc,"readwrite");yield r.objectStore(Cc).put(e,cA(t)),yield r.done}catch(n){if(n instanceof xt)Yn.warn(n.message);else{let r=kr.create("idb-set",{originalErrorMessage:n?.message});Yn.warn(r.message)}}})}function cA(t){return`${t.name}!${t.options.appId}`}var A2=1024,R2=30,tv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new nv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>R2){let s=M2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=oA(),{heartbeatsToSend:r,unsentEntries:i}=N2(this._heartbeatsCache.heartbeats),o=wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Yn.warn(n),""}})}};function oA(){return new Date().toISOString().substring(0,10)}function N2(t,e=A2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var nv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Tc()?GS().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield S2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function sA(t){return wc(JSON.stringify({version:2,heartbeats:t})).length}function M2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function P2(t){nn(new _t("platform-logger",e=>new Yy(e),"PRIVATE")),nn(new _t("heartbeat",e=>new tv(e),"PRIVATE")),Ne(Zy,nA,t),Ne(Zy,nA,"esm2017"),Ne("fire-js","")}P2("");var k2="firebase",x2="11.10.0";Ne(k2,x2,"app");function uA(t){t===void 0&&(t=k(We));let e=t.get(Uo);return n=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Or=new ko("ANGULARFIRE2_VERSION");function Sc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ms=(t,e)=>{let n=e?[e]:dh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},gs=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(gs||{}),lA=ey()&&typeof Zone<"u"?gs.WARN:gs.SILENT;var hh=class{zone;delegate;constructor(e,n=Sp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Lr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(ve);this.outsideAngular=n.runOutsideAngular(()=>new hh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new hh(typeof Zone>"u"?void 0:Zone.current,Cp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dA=!1;function O2(t,e){!dA&&(lA>gs.SILENT||ey())&&(dA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),lA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function L2(t){let e=k(ve,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ui(t){let e=k(ve,{optional:!0});return e?e.run(()=>t()):t()}var F2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),He(n,()=>Ui(()=>t.apply(void 0,r)))),Se=(t,e,n)=>(n||=e?gs.WARN:gs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(Lr),s=k(Uo),a=k(Fe)}catch{return O2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ui(()=>s.add())),i[l]=F2(i[l],r,a));let u=L2(()=>t.apply(this,i));return e?u instanceof Y?u.pipe(yr(o.outsideAngular),mr(o.insideAngular),uA(a)):u instanceof Promise?Ui(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>He(a,()=>Ui(()=>h(g))),g=>He(a,()=>Ui(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ui(()=>u):u instanceof Y?u.pipe(yr(o.outsideAngular),mr(o.insideAngular)):Ui(()=>u)});var Zn=class{constructor(e){return e}},Bi=class{constructor(){return dh()}};function V2(t){return t&&t.length===1?t[0]:new Zn(ji())}var iv=new U("angularfire2._apps"),j2={provide:Zn,useFactory:V2,deps:[[new Mt,iv]]},U2={provide:Bi,deps:[[new Mt,iv]]};function B2(t){return(e,n)=>{let r=n.get(Ni);Ne("angularfire",Or.full,"core"),Ne("angularfire",Or.full,"app"),Ne("angular",zp.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Zn(i)}}function Fte(t,...e){return Wt([j2,U2,{provide:iv,useFactory:B2(t),multi:!0,deps:[ve,We,Lr,...e]}])}var Vte=Se(rv,!0);var $2=new Map,H2={activated:!1,tokenObservers:[]},q2={initialized:!1,enabled:!1};function rn(t){return $2.get(t)||Object.assign({},H2)}function gA(){return q2}var z2="https://content-firebaseappcheck.googleapis.com/v1";var G2="exchangeDebugToken",hA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Wte=1440*60*1e3;var av=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new Fi,this.pending.promise.catch(n=>{}),yield W2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Fi,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function W2(t){return new Promise(e=>{setTimeout(e,t)})}var K2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Fr=new tn("appCheck","AppCheck",K2);function mA(t){if(!rn(t).activated)throw Fr.create("use-before-activation",{appName:t.name})}function yA(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Fr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Fr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Fr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Fr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function vA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${z2}/projects/${n}/apps/${r}:${G2}?key=${i}`,body:{debug_token:e}}}var Q2="firebase-app-check-database",Y2=1,cv="firebase-app-check-store";var fh=null;function Z2(){return fh||(fh=new Promise((t,e)=>{try{let n=indexedDB.open(Q2,Y2);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Fr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(cv,{keyPath:"compositeKey"})}}}catch(n){e(Fr.create("storage-open",{originalErrorMessage:n?.message}))}}),fh)}function J2(t,e){return X2(ej(t),e)}function X2(t,e){return v(this,null,function*(){let r=(yield Z2()).transaction(cv,"readwrite"),o=r.objectStore(cv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Fr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function ej(t){return`${t.options.appId}-${t.name}`}var Ac=new In("@firebase/app-check");function ov(t,e){return Tc()?J2(t,e).catch(n=>{Ac.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _A(){return gA().enabled}function EA(){return v(this,null,function*(){let t=gA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var tj={error:"UNKNOWN_ERROR"};function nj(t){return ih.encodeString(JSON.stringify(t),!1)}function uv(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;mA(r);let i=rn(r),o=i.token,s;if(o&&!Rc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Rc(l)?o=l:yield ov(r,void 0))}if(!e&&o&&Rc(o))return{token:o.token};let a=!1;if(_A())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=yA(vA(r,yield EA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield ov(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ac.warn(l.message):n&&Ac.error(l),sv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield rn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ac.warn(l.message):n&&Ac.error(l),s=l}let u;return o?s?Rc(o)?u={token:o.token,internalError:s}:u=sv(s):(u={token:o.token},i.token=o,yield ov(r,o)):u=sv(s),a&&sj(r,u),u})}function rj(t){return v(this,null,function*(){let e=t.app;mA(e);let{provider:n}=rn(e);if(_A()){let r=yield EA(),{token:i}=yield yA(vA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function ij(t,e,n,r){let{app:i}=t,o=rn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Rc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),fA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fA(t))}function IA(t,e){let n=rn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function fA(t){let{app:e}=t,n=rn(e),r=n.tokenRefresher;r||(r=oj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function oj(t){let{app:e}=t;return new av(()=>v(null,null,function*(){let n=rn(e),r;if(n.token?r=yield uv(t,!0):r=yield uv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=rn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},hA.RETRIAL_MIN_WAIT,hA.RETRIAL_MAX_WAIT)}function sj(t,e){let n=rn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Rc(t){return t.expireTimeMillis-Date.now()>0}function sv(t){return{token:nj(tj),error:t}}var lv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=rn(this.app);for(let n of e)IA(this.app,n.next);return Promise.resolve()}};function aj(t,e){return new lv(t,e)}function cj(t){return{getToken:e=>uv(t,e),getLimitedUseToken:()=>rj(t),addTokenListener:e=>ij(t,"INTERNAL",e),removeTokenListener:e=>IA(t.app,e)}}var uj="@firebase/app-check",lj="0.10.1";var dj="app-check",pA="app-check-internal";function hj(){nn(new _t(dj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return aj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(pA).initialize()})),nn(new _t(pA,t=>{let e=t.getProvider("app-check").getImmediate();return cj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(uj,lj)}hj();var fj="app-check";var ys=class{constructor(){return ms(fj)}};var pj=["localhost","0.0.0.0","127.0.0.1"],sne=typeof window<"u"&&pj.includes(window.location.hostname);function FA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var VA=FA,jA=new tn("auth","Firebase",FA());var _h=new In("@firebase/auth");function gj(t,...e){_h.logLevel<=oe.WARN&&_h.warn(`Auth (${xr}): ${t}`,...e)}function gh(t,...e){_h.logLevel<=oe.ERROR&&_h.error(`Auth (${xr}): ${t}`,...e)}function Dn(t,...e){throw Ov(t,...e)}function $i(t,...e){return Ov(t,...e)}function UA(t,e,n){let r=Object.assign(Object.assign({},VA()),{[e]:n});return new tn("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return UA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ov(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jA.create(t,...e)}function z(t,e,...n){if(!t)throw Ov(e,...n)}function Jn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw gh(e),new Error(e)}function Ur(t,e){t||Jn(e)}function pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mj(){return wA()==="http:"||wA()==="https:"}function wA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function yj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mj()||$S()||"connection"in navigator)?navigator.onLine:!0}function vj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Hi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=US()||HS()}get(){return yj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Lv(t,e){Ur(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Eh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ej=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ij=new Hi(3e4,6e4);function Br(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function $r(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return BA(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Dc(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return BS()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Pr(t.emulatorConfig.host)&&(y.credentials="include"),Eh.fetch()(yield $A(t,t.config.apiHost,n,p),y)}))})}function BA(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},_j),e);try{let i=new gv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ph(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw ph(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw UA(t,h,l);Dn(t,h)}}catch(i){if(i instanceof xt)throw i;Dn(t,"network-request-failed",{message:String(i)})}})}function Vc(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield $r(t,e,n,r,i);return"mfaPendingCredential"in l&&Dn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function $A(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Lv(t.config,i):`${t.config.apiScheme}://${i}`;return Ej.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function wj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var gv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($i(this.auth,"network-request-failed")),Ij.get())})}};function ph(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=$i(t,e,r);return i.customData._tokenResponse=n,i}function TA(t){return t!==void 0&&t.enterprise!==void 0}var mv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Tj(t,e){return v(this,null,function*(){return $r(t,"GET","/v2/recaptchaConfig",Br(t,e))})}function Dj(t,e){return v(this,null,function*(){return $r(t,"POST","/v1/accounts:delete",e)})}function Ih(t,e){return v(this,null,function*(){return $r(t,"POST","/v1/accounts:lookup",e)})}function Mc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Fv(t,e=!1){return v(this,null,function*(){let n=Oe(t),r=yield n.getIdToken(e),i=Vv(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Mc(dv(i.auth_time)),issuedAtTime:Mc(dv(i.iat)),expirationTime:Mc(dv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function dv(t){return Number(t)*1e3}function Vv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{let i=oh(n);return i?JSON.parse(i):(gh("Failed to decode base64 JWT payload"),null)}catch(i){return gh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function DA(t){let e=Vv(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function kc(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof xt&&bj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function bj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var yv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function wh(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield kc(t,Ih(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?HA(o.providerUserInfo):[],a=Cj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function jv(t){return v(this,null,function*(){let e=Oe(t);yield wh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Cj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HA(t){return t.map(e=>{var{providerId:n}=e,r=Ap(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Sj(t,e){return v(this,null,function*(){let n=yield BA(t,{},()=>v(null,null,function*(){let r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield $A(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Pr(t.emulatorConfig.host)&&(u.credentials="include"),Eh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Aj(t,e){return v(this,null,function*(){return $r(t,"POST","/v2/accounts:revokeToken",Br(t,e))})}var Pc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=DA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Sj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Jn("not implemented")}};function Vr(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var jr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield kc(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Fv(this,e)}reload(){return jv(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield wh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Tt(this.auth.app))return Promise.reject(er(this.auth));let e=yield this.getIdToken();return yield kc(this,Dj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:_e,isAnonymous:pt,providerData:me,stsTokenManager:T}=n;z(K&&T,e,"internal-error");let _=Pc.fromJSON(this.name,T);z(typeof K=="string",e,"internal-error"),Vr(p,e.name),Vr(g,e.name),z(typeof _e=="boolean",e,"internal-error"),z(typeof pt=="boolean",e,"internal-error"),Vr(y,e.name),Vr(C,e.name),Vr(N,e.name),Vr(R,e.name),Vr(x,e.name),Vr(H,e.name);let I=new t({uid:K,auth:e,email:g,emailVerified:_e,displayName:p,isAnonymous:pt,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:x,lastLoginAt:H});return me&&Array.isArray(me)&&(I.providerData=me.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Pc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?HA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Pc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var bA=new Map;function Xn(t){Ur(t instanceof Function,"Expected a class definition");let e=bA.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bA.set(t,e),e)}var Rj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),vv=Rj;function mh(t,e,n){return`firebase:${t}:${e}:${n}`}var Th=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=mh(this.userKey,i.apiKey,o),this.fullPersistenceKey=mh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Ih(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Xn(vv),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Xn(vv),s=mh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Ih(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield jr._fromGetAccountInfoResponse(e,g,h)}else p=jr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function CA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QA(e))return"Blackberry";if(YA(e))return"Webos";if(zA(e))return"Safari";if((e.includes("chrome/")||GA(e))&&!e.includes("edge/"))return"Chrome";if(KA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function qA(t=Qe()){return/firefox\//i.test(t)}function zA(t=Qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GA(t=Qe()){return/crios\//i.test(t)}function WA(t=Qe()){return/iemobile/i.test(t)}function KA(t=Qe()){return/android/i.test(t)}function QA(t=Qe()){return/blackberry/i.test(t)}function YA(t=Qe()){return/webos/i.test(t)}function Uv(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Nj(t=Qe()){var e;return Uv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Mj(){return qS()&&document.documentMode===10}function ZA(t=Qe()){return Uv(t)||KA(t)||YA(t)||QA(t)||/windows phone/i.test(t)||WA(t)}function JA(t,e=[]){let n;switch(t){case"Browser":n=CA(Qe());break;case"Worker":n=`${CA(Qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xr}/${r}`}var _v=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Pj(n){return v(this,arguments,function*(t,e={}){return $r(t,"GET","/v2/passwordPolicy",Br(t,e))})}var kj=6,Ev=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:kj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Iv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dh(this),this.idTokenSubscription=new Dh(this),this.beforeStateQueue=new _v(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Th.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield Ih(this,{idToken:e}),r=yield jr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Tt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vj()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Tt(this.app))return Promise.reject(er(this));let n=e?Oe(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Tt(this.app)?Promise.reject(er(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tt(this.app)?Promise.reject(er(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Pj(this),n=new Ev(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Aj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Xn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield Th.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&gj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function zi(t){return Oe(t)}var Dh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KS(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Mh={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xj(t){Mh=t}function XA(t){return Mh.loadJS(t)}function Oj(){return Mh.recaptchaEnterpriseScript}function Lj(){return Mh.gapiScript}function e0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var wv=class{constructor(){this.enterprise=new Tv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Tv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var Fj="recaptcha-enterprise",t0="NO_RECAPTCHA",Dv=class{constructor(e){this.type=Fj,this.auth=zi(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){Tj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new mv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;TA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(t0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&TA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Oj();u.length!==0&&(u+=a),XA(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Nc(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new Dv(t),s;if(i)s=t0;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function bv(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Nc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Nc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Nc(t,e,n);return r(t,a).catch(u=>v(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Nc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield Nc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function Bv(t,e){let n=ps(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(En(o,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function Vj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function $v(t,e,n){let r=zi(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=n0(e),{host:s,port:a}=jj(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(En(l,r.config.emulator)&&En(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Pr(s)?(ah(`${o}//${s}${u}`),ch("Auth",!0)):i||Uj()}function n0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jj(t){let e=n0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:SA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:SA(s)}}}function SA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Uj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Oc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}};function Bj(t,e){return v(this,null,function*(){return $r(t,"POST","/v1/accounts:signUp",e)})}function $j(t,e){return v(this,null,function*(){return Vc(t,"POST","/v1/accounts:signInWithPassword",Br(t,e))})}function Hj(t,e){return v(this,null,function*(){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))})}function qj(t,e){return v(this,null,function*(){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))})}var Lc=class t extends Oc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bv(e,n,"signInWithPassword",$j,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Hj(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bv(e,r,"signUpPassword",Bj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return qj(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function hv(t,e){return v(this,null,function*(){return Vc(t,"POST","/v1/accounts:signInWithIdp",Br(t,e))})}function zj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gj(t){let e=hs(fs(t)).link,n=e?hs(fs(e)).deep_link_id:null,r=hs(fs(t)).deep_link_id;return(r?hs(fs(r)).link:null)||r||n||e||t}var bh=class t{constructor(e){var n,r,i,o,s,a;let u=hs(fs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=zj((i=u.mode)!==null&&i!==void 0?i:null);z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=Gj(e);try{return new t(n)}catch{return null}}};var r0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Lc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=bh.parseLink(r);return z(i,"argument-error"),Lc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Ch=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Cv=class extends Ch{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Wj(t,e){return v(this,null,function*(){return Vc(t,"POST","/v1/accounts:signUp",Br(t,e))})}var vs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield jr._fromIdTokenResponse(e,r,i),s=AA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=AA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function AA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Sv=class t extends xt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function i0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sv._fromErrorAndOperation(t,o,e,r):o})}function Kj(t,e,n=!1){return v(this,null,function*(){let r=yield kc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return vs._forOperation(t,"link",r)})}function Qj(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Tt(r.app))return Promise.reject(er(r));let i="reauthenticate";try{let o=yield kc(t,i0(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=Vv(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(t.uid===a,r,"user-mismatch"),vs._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Dn(r,"user-mismatch"),o}})}function o0(t,e,n=!1){return v(this,null,function*(){if(Tt(t.app))return Promise.reject(er(t));let r="signIn",i=yield i0(t,r,e),o=yield vs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Hv(t,e){return v(this,null,function*(){return o0(zi(t),e)})}function s0(t){return v(this,null,function*(){let e=zi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function qv(t,e,n){return v(this,null,function*(){if(Tt(t.app))return Promise.reject(er(t));let r=zi(t),s=yield bv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wj,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&s0(t),u}),a=yield vs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function zv(t,e,n){return Tt(t.app)?Promise.reject(er(t)):Hv(Oe(t),r0.credential(e,n)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&s0(t),r}))}function jc(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function Gv(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function Wv(t){return Oe(t).signOut()}var Sh="__sak";var Ah=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Yj=1e3,Zj=10,Jj=(()=>{class t extends Ah{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Mj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Zj):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield pr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield pr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield pr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),a0=Jj;var Xj=(()=>{class t extends Ah{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Kv=Xj;function eU(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var tU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield eU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function c0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Av=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=c0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Tn(){return window}function nU(t){Tn().location.href=t}function u0(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}function rU(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function iU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oU(){return u0()?self:null}var l0="firebaseLocalStorageDb",sU=1,Rh="firebaseLocalStorage",d0="fbase_key",qi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ph(t,e){return t.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function aU(){let t=indexedDB.deleteDatabase(l0);return new qi(t).toPromise()}function Rv(){let t=indexedDB.open(l0,sU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Rh,{keyPath:d0})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Rh)?e(r):(r.close(),yield aU(),e(yield Rv()))}))})}function RA(t,e,n){return v(this,null,function*(){let r=Ph(t,!0).put({[d0]:e,value:n});return new qi(r).toPromise()})}function cU(t,e){return v(this,null,function*(){let n=Ph(t,!1).get(e),r=yield new qi(n).toPromise();return r===void 0?null:r.value})}function NA(t,e){let n=Ph(t,!0).delete(e);return new qi(n).toPromise()}var uU=800,lU=3,dU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Rv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>lU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return u0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=tU._getInstance(oU()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield rU(),!this.activeServiceWorker)return;this.sender=new Av(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||iU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Rv();return yield RA(n,Sh,"1"),yield NA(n,Sh),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>RA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>cU(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>NA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=Ph(o,!1).getAll();return new qi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),uU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),h0=dU;var pne=e0("rcb"),gne=new Hi(3e4,6e4);function hU(t,e){return e?Xn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Fc=class extends Oc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function fU(t){return o0(t.auth,new Fc(t),t.bypassAuthState)}function pU(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),Qj(n,new Fc(t),t.bypassAuthState)}function gU(t){return v(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),Kj(n,new Fc(t),t.bypassAuthState)})}var Nv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fU;case"linkViaPopup":case"linkViaRedirect":return gU;case"reauthViaPopup":case"reauthViaRedirect":return pU;default:Dn(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var mne=new Hi(2e3,1e4);var mU="pendingRedirect",yh=new Map,Mv=class t extends Nv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=yh.get(this.auth._key());if(!e){try{let r=(yield yU(this.resolver,this.auth))?yield pr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return pr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function yU(t,e){return v(this,null,function*(){let n=EU(e),r=_U(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function vU(t,e){yh.set(t._key(),e)}function _U(t){return Xn(t._redirectPersistence)}function EU(t){return mh(mU,t.config.apiKey,t.name)}function IU(t,e,n=!1){return v(this,null,function*(){if(Tt(t.app))return Promise.reject(er(t));let r=zi(t),i=hU(r,e),s=yield new Mv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var wU=600*1e3,Pv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!f0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($i(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wU&&this.cachedEventUids.clear(),this.cachedEventUids.has(MA(e))}saveEventToCache(e){this.cachedEventUids.add(MA(e)),this.lastProcessedEventTime=Date.now()}};function MA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function f0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function TU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f0(t);default:return!1}}function DU(n){return v(this,arguments,function*(t,e={}){return $r(t,"GET","/v1/projects",e)})}var bU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CU=/^https?/;function SU(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield DU(t);for(let n of e)try{if(AU(n))return}catch{}Dn(t,"unauthorized-domain")})}function AU(t){let e=pv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!CU.test(n))return!1;if(bU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var RU=new Hi(3e4,6e4);function PA(){let t=Tn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NU(t){return new Promise((e,n)=>{var r,i,o;function s(){PA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PA(),n($i(t,"network-request-failed"))},timeout:RU.get()})}if(!((i=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Tn().gapi)===null||o===void 0)&&o.load)s();else{let a=e0("iframefcb");return Tn()[a]=()=>{gapi.load?s():n($i(t,"network-request-failed"))},XA(`${Lj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw vh=null,e})}var vh=null;function MU(t){return vh=vh||NU(t),vh}var PU=new Hi(5e3,15e3),kU="__/auth/iframe",xU="emulator/auth/iframe",OU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FU(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Lv(e,xU):`https://${t.config.authDomain}/${kU}`,r={apiKey:e.apiKey,appName:t.name,v:xr},i=LU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Dc(r).slice(1)}`}function VU(t){return v(this,null,function*(){let e=yield MU(t),n=Tn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:FU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OU,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=$i(t,"network-request-failed"),a=Tn().setTimeout(()=>{o(s)},PU.get());function u(){Tn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var jU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UU=500,BU=600,$U="_blank",HU="http://localhost",Nh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function qU(t,e,n,r=UU,i=BU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},jU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Qe().toLowerCase();n&&(a=GA(l)?$U:n),qA(l)&&(e=e||HU,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(Nj(l)&&a!=="_self")return zU(e||"",a),new Nh(null);let p=window.open(e||"",a,h);z(p,t,"popup-blocked");try{p.focus()}catch{}return new Nh(p)}function zU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var GU="__/auth/handler",WU="emulator/auth/handler",KU=encodeURIComponent("fac");function kA(t,e,n,r,i,o){return v(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(e instanceof Ch){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",WS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Cv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${KU}=${encodeURIComponent(u)}`:"";return`${QU(t)}?${Dc(a).slice(1)}${l}`})}function QU({config:t}){return t.emulator?Lv(t,WU):`https://${t.authDomain}/${GU}`}var fv="webStorageSupport",kv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kv,this._completeRedirectFn=IU,this._overrideRedirectResult=vU}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Ur((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield kA(e,n,r,pv(),i);return qU(e,s,c0())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield kA(e,n,r,pv(),i);return nU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ur(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield VU(e),r=new Pv(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fv,{type:fv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[fv];s!==void 0&&n(!!s),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZA()||zA()||Uv()}},p0=kv;var xA="@firebase/auth",OA="1.10.8";var xv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function YU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZU(t){nn(new _t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JA(t)},l=new Iv(r,i,o,u);return Vj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nn(new _t("auth-internal",e=>{let n=zi(e.getProvider("auth").getImmediate());return(r=>new xv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(xA,OA,YU(t)),Ne(xA,OA,"esm2017")}var JU=300,XU=$y("authIdTokenMaxAge")||JU,LA=null,eB=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XU)return;let i=n?.token;LA!==i&&(LA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Qv(t=ji()){let e=ps(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Bv(t,{popupRedirectResolver:p0,persistence:[h0,a0,Kv]}),r=$y("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=eB(o.toString());Gv(n,s,()=>s(n.currentUser)),jc(n,a=>s(a))}}let i=Uy("auth");return i&&$v(n,`http://${i}`),n}function tB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=$i("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",tB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZU("Browser");function y0(t){return new Y(function(e){var n=jc(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var v0="auth",Gi=class{constructor(e){return e}},Uc=class{constructor(){return ms(v0)}};var Yv=new U("angularfire2.auth-instances");function $B(t,e){let n=Sc(v0,t,e);return n&&new Gi(n)}function HB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Gi(r)}}var qB={provide:Uc,deps:[[new Mt,Yv]]},zB={provide:Gi,useFactory:$B,deps:[[new Mt,Yv],Zn]};function cre(t,...e){return Ne("angularfire",Or.full,"auth"),Wt([zB,qB,{provide:Yv,useFactory:HB(t),multi:!0,deps:[ve,We,Lr,Bi,[new Mt,ys],...e]}])}var ure=Se(y0,!0);var lre=Se(qv,!0,2);var dre=Se(Qv,!0);var hre=Se(zv,!0,2);var fre=Se(Wv,!0,2);var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E0={};var tr,Zv;(function(){var t;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,S){for(var E=Array(arguments.length-2),Mn=2;Mn<arguments.length;Mn++)E[Mn-2]=arguments[Mn];return _.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],D=T.g[2];var S=T.g[3],E=_+(S^I&(D^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^S&(I^D))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,w=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(w[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<_;)if(w[D++]=T[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)T[I++]=this.g[_]>>>w&255;return T};function o(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function s(T,_){this.h=_;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;w&&S==_||(I[D]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var _=[],I=1,w=0;T>=I;w++)_[w]=T/I|0,I*=4294967296;return new s(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return R(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var _=l(Math.pow(T,6)),I=this,w="";;){var D=_e(I,_).g;I=x(I,D.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:C(T)?0:1};function R(T){for(var _=T.g.length,I=[],w=0;w<_;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=_;D++){var S=w+(this.i(D)&65535)+(T.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(T,_){return T.add(R(_))}t.j=function(T){if(C(this)||C(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,Mn=T.i(D)>>>16,Hs=T.i(D)&65535;I[2*w+2*D]+=E*Hs,H(I,2*w+2*D),I[2*w+2*D+1]+=S*Hs,H(I,2*w+2*D+1),I[2*w+2*D+1]+=E*Mn,H(I,2*w+2*D+1),I[2*w+2*D+2]+=S*Mn,H(I,2*w+2*D+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function H(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function K(T,_){this.g=T,this.h=_}function _e(T,_){if(C(_))throw Error("division by zero");if(C(T))return new K(p,p);if(N(T))return _=_e(R(T),_),new K(R(_.g),R(_.h));if(N(_))return _=_e(T,R(_)),new K(R(_.g),_.h);if(30<T.g.length){if(N(T)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=_;0>=w.l(T);)I=pt(I),w=pt(w);var D=me(I,1),S=me(w,1);for(w=me(w,2),I=me(I,2);!C(w);){var E=S.add(w);0>=E.l(T)&&(D=D.add(I),S=E),w=me(w,1),I=me(I,1)}return _=x(T,D.j(_)),new K(D,_)}for(D=p;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(_);C(S)&&(S=g),D=D.add(S),T=x(T,E)}return new K(D,T)}t.A=function(T){return _e(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function pt(T){for(var _=T.g.length+1,I=[],w=0;w<_;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function me(T,_){var I=_>>5;_%=32;for(var w=T.g.length-I,D=[],S=0;S<w;S++)D[S]=0<_?T.i(S+I)>>>_|T.i(S+I+1)<<32-_:T.i(S+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Zv=E0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,tr=E0.Integer=s}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var Jv,GB,_s,Xv,Bc,xh,e_,t_,n_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,A){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[b].apply(m,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let b=c.length||0,A=m.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var pt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function me(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Ff;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Mn{constructor(){this.h=this.g=null}add(d,f){let m=Hs.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Hs=new x(()=>new iM,c=>c.reset());class iM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let qs,zs=!1,Ff=new Mn,II=()=>{let c=a.Promise.resolve(void 0);qs=()=>{c.then(oM)}};var oM=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=Hs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}zs=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var sM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Gs(c,d){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(pt){e:{try{_e(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:aM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Gs.aa.h.call(this)}}C(Gs,it);var aM={2:"touch",3:"pen",4:"mouse"};Gs.prototype.h=function(){Gs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ws="closure_listenable_"+(1e6*Math.random()|0),cM=0;function uM(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++cM,this.da=this.fa=!1}function gu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function mu(c){this.src=c,this.g={},this.h=0}mu.prototype.add=function(c,d,f,m,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=jf(c,d,m,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new uM(d,this.src,A,!!m,b),d.fa=f,c.push(d)),d};function Vf(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(m,b,1),A&&(gu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function jf(c,d,f,m){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return b}return-1}var Uf="closure_lm_"+(1e6*Math.random()|0),Bf={};function wI(c,d,f,m,b){if(m&&m.once)return DI(c,d,f,m,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)wI(c,d[A],f,m,b);return null}return f=zf(f),c&&c[Ws]?c.K(d,f,l(m)?!!m.capture:!!m,b):TI(c,d,f,!1,m,b)}function TI(c,d,f,m,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ee=Hf(c);if(Ee||(c[Uf]=Ee=new mu(c)),f=Ee.add(d,f,m,O,A),f.proxy)return f;if(m=lM(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)sM||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(CI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function lM(){function c(f){return d.call(c.src,c.listener,f)}let d=dM;return c}function DI(c,d,f,m,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)DI(c,d[A],f,m,b);return null}return f=zf(f),c&&c[Ws]?c.L(d,f,l(m)?!!m.capture:!!m,b):TI(c,d,f,!0,m,b)}function bI(c,d,f,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)bI(c,d[A],f,m,b);else m=l(m)?!!m.capture:!!m,f=zf(f),c&&c[Ws]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=jf(A,f,m,b),-1<f&&(gu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Hf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=jf(d,f,m,b)),(f=-1<c?d[c]:null)&&$f(f))}function $f(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ws])Vf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(CI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Hf(d))?(Vf(f,c),f.h==0&&(f.src=null,d[Uf]=null)):gu(c)}}}function CI(c){return c in Bf?Bf[c]:Bf[c]="on"+c}function dM(c,d){if(c.da)c=!0;else{d=new Gs(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&$f(c),c=f.call(m,d)}return c}function Hf(c){return c=c[Uf],c instanceof mu?c:null}var qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function zf(c){return typeof c=="function"?c:(c[qf]||(c[qf]=function(d){return c.handleEvent(d)}),c[qf])}function ot(){lr.call(this),this.i=new mu(this),this.M=this,this.F=null}C(ot,lr),ot.prototype[Ws]=!0,ot.prototype.removeEventListener=function(c,d,f,m){bI(this,c,d,f,m)};function gt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new it(d,c);else if(d instanceof it)d.target=d.target||c;else{var b=d;d=new it(m,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=yu(O,m,!0,d)&&b}if(O=d.g=c,b=yu(O,m,!0,d)&&b,b=yu(O,m,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=yu(O,m,!1,d)&&b}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)gu(f[m]);delete c.g[d],c.h--}}this.F=null},ot.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},ot.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function yu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ee=O.listener,Xe=O.ha||O.src;O.fa&&Vf(c.i,O),b=Ee.call(Xe,m)!==!1&&b}}return b&&!m.defaultPrevented}function SI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function AI(c){c.g=SI(()=>{c.g=null,c.i&&(c.i=!1,AI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class hM extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:AI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(c){lr.call(this),this.h=c,this.g={}}C(Ks,lr);var RI=[];function NI(c){me(c.g,function(d,f){this.g.hasOwnProperty(f)&&$f(d)},c),c.g={}}Ks.prototype.N=function(){Ks.aa.N.call(this),NI(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gf=a.JSON.stringify,fM=a.JSON.parse,pM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wf(){}Wf.prototype.h=null;function MI(c){return c.h||(c.h=c.i())}function PI(){}var Qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kf(){it.call(this,"d")}C(Kf,it);function Qf(){it.call(this,"c")}C(Qf,it);var Xr={},kI=null;function vu(){return kI=kI||new ot}Xr.La="serverreachability";function xI(c){it.call(this,Xr.La,c)}C(xI,it);function Ys(c){let d=vu();gt(d,new xI(d))}Xr.STAT_EVENT="statevent";function OI(c,d){it.call(this,Xr.STAT_EVENT,c),this.stat=d}C(OI,it);function mt(c){let d=vu();gt(d,new OI(d,c))}Xr.Ma="timingevent";function LI(c,d){it.call(this,Xr.Ma,c),this.size=d}C(LI,it);function Zs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Js(){this.g=!0}Js.prototype.xa=function(){this.g=!1};function gM(c,d,f,m,b,A){c.info(function(){if(c.g)if(A)for(var O="",Ee=A.split("&"),Xe=0;Xe<Ee.length;Xe++){var he=Ee[Xe].split("=");if(1<he.length){var st=he[0];he=he[1];var at=st.split("_");O=2<=at.length&&at[1]=="type"?O+(st+"="+he+"&"):O+(st+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function mM(c,d,f,m,b,A,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function ao(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+vM(c,f)+(m?" "+m:"")})}function yM(c,d){c.info(function(){return"TIMEOUT: "+d})}Js.prototype.info=function(){};function vM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return Gf(f)}catch{return d}}var _u={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yf;function Eu(){}C(Eu,Wf),Eu.prototype.g=function(){return new XMLHttpRequest},Eu.prototype.i=function(){return{}},Yf=new Eu;function dr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new VI}function VI(){this.i=null,this.g="",this.h=!1}var jI={},Zf={};function Jf(c,d,f){c.L=1,c.v=Du(Pn(d)),c.m=f,c.P=!0,UI(c,null)}function UI(c,d){c.F=Date.now(),Iu(c),c.A=Pn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),ew(f.i,"t",m),c.C=0,f=c.j.J,c.h=new VI,c.g=vw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new hM(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(RI[0]=b.toString()),b=RI);for(var A=0;A<b.length;A++){var O=wI(f,b[A],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ys(),gM(c.i,c.u,c.A,c.l,c.R,c.m)}dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&kn(c)==3?d.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{let at=kn(this.g);var d=this.g.Ba();let lo=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||aw(this.g)))){this.J||at!=4||d==7||(d==8||0>=lo?Ys(3):Ys(2)),Xf(this);var f=this.g.Z();this.X=f;t:if(BI(this)){var m=aw(this.g);c="";var b=m.length,A=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),Xs(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,mM(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Xe=this.g;if((Ee=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ee)){var he=Ee;break t}}he=null}if(f=he)ao(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ep(this,f);else{this.o=!1,this.s=3,mt(12),ei(this),Xs(this);break e}}if(this.P){f=!0;let zt;for(;!this.J&&this.C<O.length;)if(zt=_M(this,O),zt==Zf){at==4&&(this.s=4,mt(14),f=!1),ao(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==jI){this.s=4,mt(15),ao(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else ao(this.i,this.l,zt,null),ep(this,zt);if(BI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||O.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)ao(this.i,this.l,O,"[Invalid Chunked Response]"),ei(this),Xs(this);else if(0<O.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),sp(st),st.M=!0,mt(11))}}else ao(this.i,this.l,O,null),ep(this,O);at==4&&ei(this),this.o&&!this.J&&(at==4?pw(this.j,this):(this.o=!1,Iu(this)))}else LM(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),ei(this),Xs(this)}}}catch{}finally{}};function BI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function _M(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Zf:(f=Number(d.substring(f,m)),isNaN(f)?jI:(m+=1,m+f>d.length?Zf:(d=d.slice(m,m+f),c.C=m+f,d)))}dr.prototype.cancel=function(){this.J=!0,ei(this)};function Iu(c){c.S=Date.now()+c.I,$I(c,c.I)}function $I(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Zs(g(c.ba,c),d)}function Xf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(yM(this.i,this.A),this.L!=2&&(Ys(),mt(17)),ei(this),this.s=2,Xs(this)):$I(this,this.S-c)};function Xs(c){c.j.G==0||c.J||pw(c.j,c)}function ei(c){Xf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,NI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ep(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||tp(f.h,c))){if(!c.K&&tp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ru(f),Su(f);else break e;op(f),mt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Zs(g(f.Za,f),6e3));if(1>=zI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ni(f,11)}else if((c.K||f.g==c)&&Ru(f),!H(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let he=b[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let st=he[3];st!=null&&(f.la=st,f.j.info("VER="+f.la));let at=he[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let lo=he[5];lo!=null&&typeof lo=="number"&&0<lo&&(m=1.5*lo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let zt=c.g;if(zt){let Mu=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mu){var A=m.h;A.g||Mu.indexOf("spdy")==-1&&Mu.indexOf("quic")==-1&&Mu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(np(A,A.h),A.h=null))}if(m.D){let ap=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;ap&&(m.ya=ap,Te(m.I,m.D,ap))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=yw(m,m.J?m.ia:null,m.W),O.K){GI(m.h,O);var Ee=O,Xe=m.L;Xe&&(Ee.I=Xe),Ee.B&&(Xf(Ee),Iu(Ee)),m.g=O}else hw(m);0<f.i.length&&Au(f)}else he[0]!="stop"&&he[0]!="close"||ni(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?ni(f,7):ip(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}Ys(4)}catch{}}var EM=class{constructor(c,d){this.g=c,this.map=d}};function HI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zI(c){return c.h?1:c.g?c.g.size:0}function tp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function np(c,d){c.g?c.g.add(d):c.h=d}function GI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}HI.prototype.cancel=function(){if(this.i=WI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function WI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function IM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function wM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function KI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=wM(c),m=IM(c),b=m.length,A=0;A<b;A++)d.call(void 0,m[A],f&&f[A],c)}var QI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var A=c[f].substring(0,m);b=c[f].substring(m+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ti(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ti){this.h=c.h,wu(this,c.j),this.o=c.o,this.g=c.g,Tu(this,c.s),this.l=c.l;var d=c.i,f=new na;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),YI(this,f),this.m=c.m}else c&&(d=String(c).match(QI))?(this.h=!1,wu(this,d[1]||"",!0),this.o=ea(d[2]||""),this.g=ea(d[3]||"",!0),Tu(this,d[4]),this.l=ea(d[5]||"",!0),YI(this,d[6]||"",!0),this.m=ea(d[7]||"")):(this.h=!1,this.i=new na(null,this.h))}ti.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ta(d,ZI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ta(d,ZI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ta(f,f.charAt(0)=="/"?CM:bM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ta(f,AM)),c.join("")};function Pn(c){return new ti(c)}function wu(c,d,f){c.j=f?ea(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Tu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function YI(c,d,f){d instanceof na?(c.i=d,RM(c.i,c.h)):(f||(d=ta(d,SM)),c.i=new na(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Du(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ea(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ta(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,DM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ZI=/[#\/\?@]/g,bM=/[#\?:]/g,CM=/[#\?]/g,SM=/[#\?@]/g,AM=/#/g;function na(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function hr(c){c.g||(c.g=new Map,c.h=0,c.i&&TM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=na.prototype,t.add=function(c,d){hr(this),this.i=null,c=co(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function JI(c,d){hr(c),d=co(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function XI(c,d){return hr(c),d=co(c,d),c.g.has(d)}t.forEach=function(c,d){hr(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},t.na=function(){hr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let A=0;A<b.length;A++)f.push(d[m])}return f},t.V=function(c){hr(this);let d=[];if(typeof c=="string")XI(this,c)&&(d=d.concat(this.g.get(co(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return hr(this),this.i=null,c=co(this,c),XI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function ew(c,d,f){JI(c,d),0<f.length&&(c.i=null,c.g.set(co(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var b=A;O[m]!==""&&(b+="="+encodeURIComponent(String(O[m]))),c.push(b)}}return this.i=c.join("&")};function co(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function RM(c,d){d&&!c.j&&(hr(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(JI(this,m),ew(this,b,f))},c)),c.j=d}function NM(c,d){let f=new Js;if(a.Image){let m=new Image;m.onload=y(fr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(fr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(fr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(fr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function MM(c,d){let f=new Js,m=new AbortController,b=setTimeout(()=>{m.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),fr(f,"TestPingServer: error",!1,d)})}function fr(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function PM(){this.g=new pM}function kM(c,d,f){let m=f||"";try{KI(c,function(b,A){let O=b;l(b)&&(O=Gf(b)),d.push(m+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function ra(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ra,Wf),ra.prototype.g=function(){return new bu(this.l,this.j)},ra.prototype.i=(function(c){return function(){return c}})({});function bu(c,d){ot.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(bu,ot),t=bu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,oa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,oa(this)),this.g&&(this.readyState=3,oa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function tw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ia(this):oa(this),this.readyState==3&&tw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ia(this))},t.Qa=function(c){this.g&&(this.response=c,ia(this))},t.ga=function(){this.g&&ia(this)};function ia(c){c.readyState=4,c.l=null,c.j=null,c.v=null,oa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function oa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function nw(c){let d="";return me(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function rp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=nw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ae(c){ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,ot);var xM=/^https?$/i,OM=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yf.g(),this.v=this.o?MI(this.o):MI(Yf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){rw(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(OM,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){rw(this,A)}};function rw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,iw(c),Cu(c)}function iw(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cu(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ow(this):this.bb())},t.bb=function(){ow(this)};function ow(c){if(c.h&&typeof s<"u"&&(!c.v[1]||kn(c)!=4||c.Z()!=2)){if(c.u&&kn(c)==4)SI(c.Ea,0,c);else if(gt(c,"readystatechange"),kn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var b=String(c.D).match(QI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!xM.test(b?b.toLowerCase():"")}f=m}if(f)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var A=2<kn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",iw(c)}}finally{Cu(c)}}}}function Cu(c,d){if(c.g){sw(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||gt(c,"ready");try{f.onreadystatechange=m}catch{}}}function sw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function kn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),fM(d)}};function aw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function LM(c){let d={};c=(c.g&&2<=kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=D(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function cw(c){this.Aa=0,this.i=[],this.j=new Js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sa("baseRetryDelayMs",5e3,c),this.cb=sa("retryDelaySeedMs",1e4,c),this.Wa=sa("forwardChannelMaxRetries",2,c),this.wa=sa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new HI(c&&c.concurrentRequestLimit),this.Da=new PM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){mt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=yw(this,null,this.W),Au(this)};function ip(c){if(uw(c),c.G==3){var d=c.U++,f=Pn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),aa(c,f),d=new dr(c,c.j,d),d.L=2,d.v=Du(Pn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=vw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Iu(d)}mw(c)}function Su(c){c.g&&(sp(c),c.g.cancel(),c.g=null)}function uw(c){Su(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ru(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Au(c){if(!qI(c.h)&&!c.s){c.s=!0;var d=c.Ga;qs||II(),zs||(qs(),zs=!0),Ff.add(d,c),c.B=0}}function FM(c,d){return zI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Zs(g(c.Ga,c,d),gw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new dr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=dw(this,b,d),f=Pn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),aa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(nw(A)))+"&"+d:this.m&&rp(f,this.m,A)),np(this.h,b),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),b.T=!0,Jf(b,f,null)):Jf(b,f,d),this.G=2}}else this.G==3&&(c?lw(this,c):this.i.length==0||qI(this.h)||lw(this))};function lw(c,d){var f;d?f=d.l:f=c.U++;let m=Pn(c.I);Te(m,"SID",c.K),Te(m,"RID",f),Te(m,"AID",c.T),aa(c,m),c.m&&c.o&&rp(m,c.m,c.o),f=new dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=dw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),np(c.h,f),Jf(f,m,d)}function aa(c,d){c.H&&me(c.H,function(f,m){Te(d,m,f)}),c.l&&KI({},function(f,m){Te(d,m,f)})}function dw(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ee=!0;for(let Xe=0;Xe<f;Xe++){let he=b[Xe].g,st=b[Xe].map;if(he-=A,0>he)A=Math.max(0,b[Xe].g-100),Ee=!1;else try{kM(st,O,"req"+he+"_")}catch{m&&m(st)}}if(Ee){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function hw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;qs||II(),zs||(qs(),zs=!0),Ff.add(d,c),c.v=0}}function op(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Zs(g(c.Fa,c),gw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,fw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Zs(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Su(this),fw(this))};function sp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function fw(c){c.g=new dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Pn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),aa(c,d),c.m&&c.o&&rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Du(Pn(d)),f.m=null,f.P=!0,UI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Su(this),op(this),mt(19))};function Ru(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function pw(c,d){var f=null;if(c.g==d){Ru(c),sp(c),c.g=null;var m=2}else if(tp(c.h,d))f=d.D,GI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=vu(),gt(m,new LI(m,f)),Au(c)}else hw(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&FM(c,d)||m==2&&op(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:ni(c,5);break;case 4:ni(c,10);break;case 3:ni(c,6);break;default:ni(c,2)}}}function gw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ni(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new ti(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wu(m,"https"),Du(m),b?NM(m.toString(),f):MM(m.toString(),f)}else mt(2);c.G=0,c.l&&c.l.sa(d),mw(c),uw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function mw(c){if(c.G=0,c.ka=[],c.l){let d=WI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function yw(c,d,f){var m=f instanceof ti?Pn(f):new ti(f);if(m.g!="")d&&(m.g=d+"."+m.g),Tu(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new ti(null);m&&wu(A,m),d&&(A.g=d),b&&Tu(A,b),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Te(m,f,d),Te(m,"VER",c.la),aa(c,m),m}function vw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new ra({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _w(){}t=_w.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nu(){}Nu.prototype.g=function(c,d){return new Dt(c,d)};function Dt(c,d){ot.call(this),this.g=new cw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new uo(this)}C(Dt,ot),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){ip(this.g)},Dt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Gf(c),c=f);d.i.push(new EM(d.Ya++,c)),d.G==3&&Au(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,ip(this.g),delete this.g,Dt.aa.N.call(this)};function Ew(c){Kf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Ew,Kf);function Iw(){Qf.call(this),this.status=1}C(Iw,Qf);function uo(c){this.g=c}C(uo,_w),uo.prototype.ua=function(){gt(this.g,"a")},uo.prototype.ta=function(c){gt(this.g,new Ew(c))},uo.prototype.sa=function(c){gt(this.g,new Iw)},uo.prototype.ra=function(){gt(this.g,"b")},Nu.prototype.createWebChannel=Nu.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,n_=nr.createWebChannelTransport=function(){return new Nu},t_=nr.getStatEventTarget=function(){return vu()},e_=nr.Event=Xr,xh=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_u.NO_ERROR=0,_u.TIMEOUT=8,_u.HTTP_ERROR=6,Bc=nr.ErrorCode=_u,FI.COMPLETE="complete",Xv=nr.EventType=FI,PI.EventType=Qs,Qs.OPEN="a",Qs.CLOSE="b",Qs.ERROR="c",Qs.MESSAGE="d",ot.prototype.listen=ot.prototype.K,_s=nr.WebChannel=PI,GB=nr.FetchXmlHttpFactory=ra,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,Jv=nr.XhrIo=Ae}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});var I0="@firebase/firestore",w0="4.8.0";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var js="11.10.0";var Ji=new In("@firebase/firestore");function Es(){return Ji.logLevel}function V(t,...e){if(Ji.logLevel<=oe.DEBUG){let n=e.map(qE);Ji.debug(`Firestore (${js}): ${t}`,...n)}}function ir(t,...e){if(Ji.logLevel<=oe.ERROR){let n=e.map(qE);Ji.error(`Firestore (${js}): ${t}`,...n)}}function Wr(t,...e){if(Ji.logLevel<=oe.WARN){let n=e.map(qE);Ji.warn(`Firestore (${js}): ${t}`,...n)}}function qE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pR(t,r,n)}function pR(t,e,n){let r=`FIRESTORE (${js}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||pR(e,i,r)}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends xt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var on=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Bh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},a_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}},c_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},u_=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new on;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new on,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new on)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new Bh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ye(e)}},l_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},d_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new l_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$h=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},h_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $h(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $h(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function WB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function gR(){return new TextEncoder}var Wc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=WB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function f_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return re(r,i);{let o=gR(),s=KB(o.encode(T0(t,n)),o.encode(T0(e,n)));return s!==0?s:re(r,i)}}n+=r>65535?2:1}return re(t.length,e.length)}function T0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function KB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function Ss(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var D0="__name__",Hh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):f_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tr.fromString(e.substring(4,e.length-2))}},Ce=class t extends Hh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},QB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class t extends Hh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return QB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D0}static keyField(){return new t([D0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};function mR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YB(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b0(t){if(!$.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function C0(t){if($.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=wf(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZB(t,e){if(e<=0)throw new L(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Be(t,e){let n={typeString:t};return e&&(n.value=e),n}function uu(t,e){if(!yR(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}var S0=-62135596800,A0=1e6,we=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*A0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S0)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A0}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-S0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};we._jsonSchemaVersion="firestore/timestamp/1.0",we._jsonSchema={type:Be("string",we._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new we(0,0))}static max(){return new t(new we(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kc=-1,p_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};p_.UNKNOWN_ID=-1;function JB(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new we(n+1,0):new we(n,r));return new Xi(i,$.empty(),e)}function XB(t){return new Xi(t.readTime,t.key,Kc)}var Xi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),$.empty(),Kc)}static max(){return new t(te.max(),$.empty(),Kc)}};function e$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var t$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",g_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Us(t){return v(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==t$)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function n$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bs(t){return t.name==="IndexedDbTransactionError"}var zE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),GE=-1;function Tf(t){return t==null}function Qc(t){return t===0&&1/t==-1/0}function r$(t){return typeof t=="number"&&Number.isInteger(t)&&!Qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var vR="";function i$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=R0(e)),e=o$(t.get(n),e);return R0(e)}function o$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case vR:n+="";break;default:n+=o}}return n}function R0(t){return t+vR+""}var s$="remoteDocuments",_R="owner";var ER="mutationQueues";var IR="mutations";var wR="documentMutations",a$="remoteDocumentsV14";var TR="remoteDocumentGlobal";var DR="targets";var bR="targetDocuments";var CR="targetGlobal",SR="collectionParents";var AR="clientMetadata";var RR="bundles";var NR="namedQueries";var c$="indexConfiguration";var u$="indexState";var l$="indexEntries";var MR="documentOverlays";var d$="globals";var h$=[ER,IR,wR,s$,DR,_R,CR,bR,AR,TR,SR,RR,NR],Are=[...h$,MR],f$=[ER,IR,wR,a$,DR,_R,CR,bR,AR,TR,SR,RR,NR,MR],p$=f$,g$=[...p$,c$,u$,l$];var Rre=[...g$,d$];function N0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ds(this.root,e,this.comparator,!0)}},Ds=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qh(this.data.getIterator())}getIteratorFrom(e){return new qh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},qh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ht=class t{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ze(Lt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ss(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var zh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var m$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=m$.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var kR="server_timestamp",xR="__type__",OR="__previous_value__",LR="__local_write_time__";function WE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xR])===null||n===void 0?void 0:n.stringValue)===kR}function Df(t){let e=t.mapValue.fields[OR];return WE(e)?Df(e):e}function Yc(t){let e=or(t.mapValue.fields[LR].timestampValue);return new we(e.seconds,e.nanos)}var m_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Gh="(default)",Wh=class t{constructor(e,n){this.projectId=e,this.database=n||Gh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var KE="__type__",FR="__max__",Oh={mapValue:{fields:{__type__:{stringValue:FR}}}},QE="__vector__",As="value";function Kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?WE(t)?4:jR(t)?9007199254740991:VR(t)?10:11:q(28295,{value:t})}function An(t,e){if(t===e)return!0;let n=Kr(t);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yc(t).isEqual(Yc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return sr(i.bytesValue).isEqual(sr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?Qc(s)===Qc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ss(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(N0(s)!==N0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!An(s[u],a[u])))return!1;return!0})(t,e);default:return q(52216,{left:t})}}function Zc(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;let n=Kr(t),r=Kr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return M0(t.timestampValue,e.timestampValue);case 4:return M0(Yc(t),Yc(e));case 5:return f_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=sr(o),u=sr(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=re(be(o.latitude),be(s.latitude));return a!==0?a:re(be(o.longitude),be(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return P0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[As])===null||a===void 0?void 0:a.arrayValue,C=(u=g[As])===null||u===void 0?void 0:u.arrayValue,N=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:P0(y,C)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Oh.mapValue&&s===Oh.mapValue)return 0;if(o===Oh.mapValue)return 1;if(s===Oh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=f_(u[p],h[p]);if(g!==0)return g;let y=Rs(a[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)})(t.mapValue,e.mapValue);default:throw q(23264,{le:n})}}function M0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=or(t),r=or(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function P0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Rs(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function Ns(t){return y_(t)}function y_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return sr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=y_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${y_(n.fields[s])}`;return i+"}"})(t.mapValue):q(61005,{value:t})}function Vh(t){switch(Kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Df(t);return e?16+Vh(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Vh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Jr(r.fields,(o,s)=>{i+=o.length+Vh(s)}),i})(t.mapValue);default:throw q(13486,{value:t})}}function k0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function v_(t){return!!t&&"integerValue"in t}function YE(t){return!!t&&"arrayValue"in t}function x0(t){return!!t&&"nullValue"in t}function O0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jh(t){return!!t&&"mapValue"in t}function VR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[KE])===null||n===void 0?void 0:n.stringValue)===QE}function Hc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===FR}var Mre={mapValue:{fields:{[KE]:{stringValue:QE},[As]:{arrayValue:{}}}}};var Ot=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Hc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Hc(this.value))}};function UR(t){let e=[];return Jr(t.fields,(n,r)=>{let i=new Lt([n]);if(jh(r)){let o=UR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ht(e)}var sn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ms=class{constructor(e,n){this.position=e,this.inclusive=n}};function L0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=Rs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function F0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var eo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function y$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Kh=class{},Ue=class t extends Kh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new E_(e,n,r):n==="array-contains"?new T_(e,r):n==="in"?new D_(e,r):n==="not-in"?new b_(e,r):n==="array-contains-any"?new C_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new I_(e,r):new w_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rs(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},an=class t extends Kh{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return BR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function BR(t){return t.op==="and"}function $R(t){return v$(t)&&BR(t)}function v$(t){for(let e of t.filters)if(e instanceof an)return!1;return!0}function __(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Ns(t.value);if($R(t))return t.filters.map(e=>__(e)).join(",");{let e=t.filters.map(n=>__(n)).join(",");return`${t.op}(${e})`}}function HR(t,e){return t instanceof Ue?(function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)})(t,e):t instanceof an?(function(r,i){return i instanceof an&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&HR(s,i.filters[a]),!0):!1})(t,e):void q(19439)}function qR(t){return t instanceof Ue?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ns(n.value)}`})(t):t instanceof an?(function(n){return n.op.toString()+" {"+n.getFilters().map(qR).join(" ,")+"}"})(t):"Filter"}var E_=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},I_=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=zR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},w_=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=zR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function zR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var T_=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return YE(n)&&Zc(n.arrayValue,this.value)}},D_=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Zc(this.value.arrayValue,n)}},b_=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zc(this.value.arrayValue,n)}},C_=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!YE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}};var S_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function V0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new S_(t,e,n,r,i,o,s)}function ZE(t){let e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>__(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Tf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ns(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ns(r)).join(",")),e.Pe=n}return e.Pe}function JE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!F0(t.startAt,e.startAt)&&F0(t.endAt,e.endAt)}function A_(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Qr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function _$(t,e,n,r,i,o,s,a){return new Qr(t,e,n,r,i,o,s,a)}function bf(t){return new Qr(t)}function j0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GR(t){return t.collectionGroup!==null}function qc(t){let e=J(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ze(Lt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new eo(o,r))}),n.has(Lt.keyField().canonicalString())||e.Te.push(new eo(Lt.keyField(),r))}return e.Te}function Cn(t){let e=J(t);return e.Ie||(e.Ie=E$(e,qc(t))),e.Ie}function E$(t,e){if(t.limitType==="F")return V0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new eo(i.field,o)});let n=t.endAt?new Ms(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ms(t.startAt.position,t.startAt.inclusive):null;return V0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R_(t,e){let n=t.filters.concat([e]);return new Qr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qh(t,e,n){return new Qr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cf(t,e){return JE(Cn(t),Cn(e))&&t.limitType===e.limitType}function WR(t){return`${ZE(Cn(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qR(i)).join(", ")}]`),Tf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ns(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ns(i)).join(",")),`Target(${r})`})(Cn(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of qc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=L0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,qc(r),i)||r.endAt&&!(function(s,a,u){let l=L0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,qc(r),i))})(t,e)}function I$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KR(t){return(e,n)=>{let r=!1;for(let i of qc(t)){let o=w$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function w$(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Rs(u,l):q(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var ar=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return PR(this.inner)}size(){return this.innerSize}};var T$=new Me($.comparator);function cr(){return T$}var QR=new Me($.comparator);function $c(...t){let e=QR;for(let n of t)e=e.insert(n.key,n);return e}function YR(t){let e=QR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wi(){return zc()}function ZR(){return zc()}function zc(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}var D$=new Me($.comparator),b$=new Ze($.comparator);function ae(...t){let e=b$;for(let n of t)e=e.add(n);return e}var C$=new Ze(re);function S$(){return C$}function XE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function JR(t){return{integerValue:""+t}}function A$(t,e){return r$(e)?JR(e):XE(t,e)}var Ps=class{constructor(){this._=void 0}};function R$(t,e,n){return t instanceof ks?(function(i,o){let s={fields:{[xR]:{stringValue:kR},[LR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&WE(o)&&(o=Df(o)),o&&(s.fields[OR]=o),{mapValue:s}})(n,e):t instanceof to?eN(t,e):t instanceof no?tN(t,e):(function(i,o){let s=XR(i,o),a=U0(s)+U0(i.Ee);return v_(s)&&v_(i.Ee)?JR(a):XE(i.serializer,a)})(t,e)}function N$(t,e,n){return t instanceof to?eN(t,e):t instanceof no?tN(t,e):n}function XR(t,e){return t instanceof xs?(function(r){return v_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ks=class extends Ps{},to=class extends Ps{constructor(e){super(),this.elements=e}};function eN(t,e){let n=nN(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var no=class extends Ps{constructor(e){super(),this.elements=e}};function tN(t,e){let n=nN(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var xs=class extends Ps{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function U0(t){return be(t.integerValue||t.doubleValue)}function nN(t){return YE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function M$(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof to&&i instanceof to||r instanceof no&&i instanceof no?Ss(r.elements,i.elements,An):r instanceof xs&&i instanceof xs?An(r.Ee,i.Ee):r instanceof ks&&i instanceof ks})(t.transform,e.transform)}var N_=class{constructor(e,n){this.version=e,this.transformResults=n}},rr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Os=class{};function rN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jc(t.key,rr.none()):new ro(t.key,t.data,rr.none());{let n=t.data,r=Ot.empty(),i=new Ze(Lt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rn(t.key,r,new Ht(i.toArray()),rr.none())}}function P$(t,e,n){t instanceof ro?(function(i,o,s){let a=i.value.clone(),u=$0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Rn?(function(i,o,s){if(!Uh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=$0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(iN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Gc(t,e,n,r){return t instanceof ro?(function(o,s,a,u){if(!Uh(o.precondition,s))return a;let l=o.value.clone(),h=H0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Rn?(function(o,s,a,u){if(!Uh(o.precondition,s))return a;let l=H0(o.fieldTransforms,u,s),h=s.data;return h.setAll(iN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Uh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function k$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=XR(r.transform,i||null);o!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,o))}return n||null}function B0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ss(r,i,(o,s)=>M$(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ro=class extends Os{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rn=class extends Os{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function $0(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,N$(s,a,n[i]))}return r}function H0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,R$(o,s,e))}return r}var Jc=class extends Os{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},M_=class extends Os{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var P_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&P$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Gc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ZR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=rN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(n,r)=>B0(n,r))&&Ss(this.baseMutations,e.baseMutations,(n,r)=>B0(n,r))}},k_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return D$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var x_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var O_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,le;function x$(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function oN(t){if(t===void 0)return ir("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(le=Ve||(Ve={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var q0=null;var O$=new tr([4294967295,4294967295],0);function z0(t){let e=gR().encode(t),n=new Zv;return n.update(e),new Uint8Array(n.digest())}function G0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new tr([n,r],0),new tr([i,o],0)]}var L_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ki(`Invalid padding: ${n}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=tr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(tr.fromNumber(r)));return i.compare(O$)===1&&(i=new tr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=z0(e),[r,i]=G0(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=z0(e),[r,i]=G0(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Me(re),cr(),ae())}},Xc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ae(),ae(),ae())}};var bs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Zh=class{constructor(e,n){this.targetId=e,this.De=n}},Jh=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Xh=class{constructor(){this.ve=0,this.Ce=W0(),this.Fe=ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),n=ae(),r=ae();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Xc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=W0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},F_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=cr(),this.je=Lh(),this.Je=Lh(),this.He=new Me(re)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(A_(o))if(r===0){let s=new $(o.path);this.Xe(n,s,sn.newNoDocument(s,te.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}q0?.ct((function(h,p,g,y,C){var N,R,x,H,K,_e;let pt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},me=p.unchangedNames;return me&&(pt.bloomFilter={applied:C===0,hashCount:(N=me?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(H=(x=(R=me?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&H!==void 0?H:0,padding:(_e=(K=me?.bits)===null||K===void 0?void 0:K.padding)!==null&&_e!==void 0?_e:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),pt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=sr(r).toUint8Array()}catch(u){if(u instanceof zh)return Wr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new L_(s,i,o)}catch(u){return Wr(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&A_(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,sn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ae();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Yh(e,n,this.He,this.ze,r);return this.ze=cr(),this.je=Lh(),this.Je=Lh(),this.He=new Me(re),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Xh,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ze(re),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ze(re),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Xh),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Lh(){return new Me($.comparator)}function W0(){return new Me($.comparator)}var L$={asc:"ASCENDING",desc:"DESCENDING"},F$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V$={and:"AND",or:"OR"},V_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function j_(t,e){return t.useProto3Json||Tf(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j$(t,e){return ef(t,e.toTimestamp())}function Sn(t){return ge(!!t,49232),te.fromTimestamp((function(n){let r=or(n);return new we(r.seconds,r.nanos)})(t))}function eI(t,e){return U_(t,e).canonicalString()}function U_(t,e){let n=(function(i){return new Ce(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function aN(t){let e=Ce.fromString(t);return ge(hN(e),10190,{key:e.toString()}),e}function B_(t,e){return eI(t.databaseId,e.path)}function r_(t,e){let n=aN(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(uN(n))}function cN(t,e){return eI(t.databaseId,e)}function U$(t){let e=aN(t);return e.length===4?Ce.emptyPath():uN(e)}function $_(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uN(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function K0(t,e,n){return{name:B_(t,e),fields:n.value.mapValue.fields}}function B$(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?M.UNKNOWN:oN(l.code);return new L(h,l.message||"")})(s);n=new Jh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=r_(t,r.document.name),o=Sn(r.document.updateTime),s=r.document.createTime?Sn(r.document.createTime):te.min(),a=new Ot({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new bs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=r_(t,r.document),o=r.readTime?Sn(r.readTime):te.min(),s=sn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new bs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=r_(t,r.document),o=r.removedTargetIds||[];n=new bs([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new O_(i,o),a=r.targetId;n=new Zh(a,s)}}return n}function $$(t,e){let n;if(e instanceof ro)n={update:K0(t,e.key,e.value)};else if(e instanceof Jc)n={delete:B_(t,e.key)};else if(e instanceof Rn)n={update:K0(t,e.key,e.data),updateMask:Z$(e.fieldMask)};else{if(!(e instanceof M_))return q(16599,{Rt:e.type});n={verify:B_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ks)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof to)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof no)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xs)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:j$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(t,e.precondition)),n}function H$(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Sn(i.updateTime):Sn(o);return s.isEqual(te.min())&&(s=Sn(o)),new N_(s,i.transformResults||[])})(n,e))):[]}function q$(t,e){return{documents:[cN(t,e.path)]}}function z$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cN(t,i);let o=(function(l){if(l.length!==0)return dN(an.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ws(g.field),direction:K$(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=j_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function G$(t){let e=U$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=lN(p);return g instanceof an&&$R(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(C){return new eo(Ts(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Tf(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Ms(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ms(y,g)})(n.endAt)),_$(e,i,s,o,a,"F",u,l)}function W$(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ts(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ts(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ts(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ts(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ue.create(Ts(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return an.create(n.compositeFilter.filters.map(r=>lN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(n.compositeFilter.op))})(t):q(30097,{filter:t})}function K$(t){return L$[t]}function Q$(t){return F$[t]}function Y$(t){return V$[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Ts(t){return Lt.fromServerFormat(t.fieldPath)}function dN(t){return t instanceof Ue?(function(n){if(n.op==="=="){if(O0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(x0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(O0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(x0(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:Q$(n.op),value:n.value}}})(t):t instanceof an?(function(n){let r=n.getFilters().map(i=>dN(i));return r.length===1?r[0]:{compositeFilter:{op:Y$(n.op),filters:r}}})(t):q(54877,{filter:t})}function Z$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var eu=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var H_=class{constructor(e){this.gt=e}};function J$(t){let e=G$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qh(e,e.limit,"L"):e}var tf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Qc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=or(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(sr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?jR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):VR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=As,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(be(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};tf.Ut=new tf;var q_=class{constructor(){this.Dn=new z_}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Xi.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},z_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Ce.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Ce.comparator)).toArray()}};var Pre=new Uint8Array(0);var Q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fN=41943040,$t=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(fN,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);var tu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var Y0="LruGarbageCollector",X$=1048576;function Z0([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var G_=class{constructor(e){this.Tr=e,this.buffer=new Ze(Z0),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Z0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},W_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(Y0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bs(n)?V(Y0,"Ignoring IndexedDB error during garbage collection: ",n):yield Us(n)}yield this.Rr(3e5)}))}},K_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(zE.ue);let r=new G_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(Q0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Es()<=oe.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function eH(t,e){return new K_(t,e)}var Q_=class{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Y_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Z_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gc(r.mutation,i,Ht.empty(),we.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){let i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=$c();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=cr(),s=zc(),a=(function(){return zc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Rn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Gc(h.mutation,l,h.mutation.getFieldMask(),we.now())):s.set(l.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Y_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=zc(),i=new Me((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Ht.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=ZR();h.forEach(g=>{if(!o.has(g)){let y=rN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Wi()),a=Kc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:a,changes:YR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=$c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=$c();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,g){return new Qr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,sn.newInvalidDocument(h)))});let a=$c();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Gc(h.mutation,l,Ht.empty(),we.now()),Sf(n,l)&&(a=a.insert(u,l))}),a})}};var J_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Sn(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:J$(i.bundledQuery),readTime:Sn(i.readTime)}})(n)),P.resolve()}};var X_=class{constructor(){this.overlays=new Me($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Wi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Wi(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Wi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Wi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new x_(n,r));let o=this.kr.get(n);o===void 0&&(o=ae(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var eE=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var nu=class{constructor(){this.qr=new Ze(je.Qr),this.$r=new Ze(je.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new je(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new je(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new Ce([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new Ce([])),r=new je(n,e),i=new je(n,e+1),o=ae();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var tE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ze(je.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new P_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new je(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?GE:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(re);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new je(new $(o),0),a=new Ze(re);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new je(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var nE=class{constructor(e){this.ni=e,this.docs=(function(){return new Me($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||e$(XB(h),r)<=0||(i.has(h.key)||Sf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rE(this)}getSize(e){return P.resolve(this.size)}},rE=class extends Q_{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var iE=class{constructor(e){this.persistence=e,this.ii=new ar(n=>ZE(n),JE),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new nu,this.targetCount=0,this._i=tu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new tu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var nf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new zE(0),this.ci=!1,this.ci=!0,this.li=new eE,this.referenceDelegate=e(this),this.hi=new iE(this),this.indexManager=new q_,this.remoteDocumentCache=(function(i){return new nE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new H_(n),this.Ti=new J_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new tE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new oE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},oE=class extends g_{constructor(e){super(),this.currentSequenceNumber=e}},sE=class t{constructor(e){this.persistence=e,this.Ai=new nu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},rf=class t{constructor(e,n){this.persistence=e,this.gi=new ar(r=>i$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=eH(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vh(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var aE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ae(),i=ae();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var cE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var uE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return zS()?8:n$(Qe())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new cE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Es()<=oe.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Es()<=oe.DEBUG&&V("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Es()<=oe.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):P.resolve())}ps(e,n){if(j0(n))return P.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Qh(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,Qh(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return j0(n)||i.isEqual(te.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Es()<=oe.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Is(n)),this.vs(e,s,n,JB(i,Kc)).next(a=>a))})}bs(e,n){let r=new Ze(KR(e));return n.forEach((i,o)=>{Sf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Es()<=oe.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Is(n)),this.gs.getDocumentsMatchingQuery(e,n,Xi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tI="LocalStore",tH=3e8,lE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Me(re),this.Ms=new ar(o=>ZE(o),JE),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function nH(t,e,n,r){return new lE(t,e,n,r)}function pN(t,e){return v(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function rH(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);ge(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gN(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function iH(t,e){let n=J(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=tH?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=cr(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(oH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function oH(t,e,n){let r=ae(),i=ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(tI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function sH(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=GE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aH(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new eu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function dE(t,e,n){return v(this,null,function*(){let r=J(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Bs(s))throw s;V(tI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function J0(t,e,n){let r=J(t),i=te.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:ae())).next(a=>(cH(r,I$(e),a),{documents:a,qs:o})))}function cH(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var of=class{constructor(){this.activeTargetIds=S$()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hE=class{constructor(){this.Fo=new of,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new of,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fE=class{xo(e){}shutdown(){}};var X0="ConnectivityMonitor",sf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(X0,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(X0,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fh=null;function pE(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}var i_="RestConnection",uH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},gE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Gh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=pE(),a=this.Go(e,n.toUriEncodedString());V(i_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Pr(l);return this.jo(e,a,u,r,h).then(p=>(V(i_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Wr(i_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+js})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=uH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var mE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ht="WebChannelConnection",yE=class extends gE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=pE();return new Promise((a,u)=>{let l=new Jv;l.setWithCredentials(!0),l.listenOnce(Xv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bc.NO_ERROR:let p=l.getResponseJson();V(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Bc.TIMEOUT:V(ht,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:let g=l.getStatus();if(V(ht,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=(function(x){let H=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN})(C.status);u(new L(N,C.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(ht,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=pE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=n_(),a=t_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,C=new mE({Ho:R=>{y?V(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(V(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(ht,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,x,H)=>{R.listen(x,K=>{try{H(K)}catch(_e){setTimeout(()=>{throw _e},0)}})};return N(p,_s.EventType.OPEN,()=>{y||(V(ht,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,_s.EventType.CLOSE,()=>{y||(y=!0,V(ht,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,_s.EventType.ERROR,R=>{y||(y=!0,Wr(ht,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,_s.EventType.MESSAGE,R=>{var x;if(!y){let H=R.data[0];ge(!!H,16349);let K=H,_e=K?.error||((x=K[0])===null||x===void 0?void 0:x.error);if(_e){V(ht,`RPC '${e}' stream ${i} received error:`,_e);let pt=_e.status,me=(function(I){let w=Ve[I];if(w!==void 0)return oN(w)})(pt),T=_e.message;me===void 0&&(me=M.INTERNAL,T="Unknown error status: "+pt+" with message "+_e.message),y=!0,C.__(new L(me,T)),p.close()}else V(ht,`RPC '${e}' stream ${i} received:`,H),C.a_(H)}}),N(a,e_.STAT_EVENT,R=>{R.stat===xh.PROXY?V(ht,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===xh.NOPROXY&&V(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function o_(){return typeof document<"u"?document:null}function Af(t){return new V_(t,!0)}var af=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var eR="PersistentStream",cf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new af(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(eR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(eR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vE=class extends cf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=B$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Sn(s.readTime):te.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=$_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=A_(u)?{documents:q$(o,u)}:{query:z$(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sN(o,s.resumeToken);let l=j_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=ef(o,s.snapshotVersion.toTimestamp());let l=j_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=W$(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=$_(this.serializer),n.removeTarget=e,this.k_(n)}},_E=class extends cf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=H$(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=$_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>$$(this.serializer,r))};this.k_(n)}};var EE=class{},IE=class extends EE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,U_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,U_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},wE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ir(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var io="RemoteStore",TE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){oo(this)&&(V(io,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=J(u);l.Ia.add(4),yield lu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Rf(l)})})(this))}))}),this.Aa=new wE(r,i)}};function Rf(t){return v(this,null,function*(){if(oo(t))for(let e of t.da)yield e(!0)})}function lu(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function mN(t,e){let n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),oI(n)?iI(n):$s(n).x_()&&rI(n,e))}function nI(t,e){let n=J(t),r=$s(n);n.Ta.delete(e),r.x_()&&yN(n,e),n.Ta.size===0&&(r.x_()?r.B_():oo(n)&&n.Aa.set("Unknown"))}function rI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$s(t).H_(e)}function yN(t,e){t.Ra.$e(e),$s(t).Y_(e)}function iI(t){t.Ra=new F_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),$s(t).start(),t.Aa.aa()}function oI(t){return oo(t)&&!$s(t).M_()&&t.Ta.size>0}function oo(t){return J(t).Ia.size===0}function vN(t){t.Ra=void 0}function lH(t){return v(this,null,function*(){t.Aa.set("Online")})}function dH(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{rI(t,e)})})}function hH(t,e){return v(this,null,function*(){vN(t),oI(t)?(t.Aa.la(e),iI(t)):t.Aa.set("Unknown")})}function fH(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof Jh&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){V(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uf(t,r)}else if(e instanceof bs?t.Ra.Ye(e):e instanceof Zh?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{let r=yield gN(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),yN(o,u);let p=new eu(h.target,u,l,h.sequenceNumber);rI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){V(io,"Failed to raise snapshot:",r),yield uf(t,r)}})}function uf(t,e,n){return v(this,null,function*(){if(!Bs(e))throw e;t.Ia.add(1),yield lu(t),t.Aa.set("Offline"),n||(n=()=>gN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){V(io,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Rf(t)}))})}function _N(t,e){return e().catch(n=>uf(t,n,e))}function Nf(t){return v(this,null,function*(){let e=J(t),n=Yr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:GE;for(;pH(e);)try{let i=yield sH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,gH(e,i)}catch(i){yield uf(e,i)}EN(e)&&IN(e)})}function pH(t){return oo(t)&&t.Pa.length<10}function gH(t,e){t.Pa.push(e);let n=Yr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function EN(t){return oo(t)&&!Yr(t).M_()&&t.Pa.length>0}function IN(t){Yr(t).start()}function mH(t){return v(this,null,function*(){Yr(t).na()})}function yH(t){return v(this,null,function*(){let e=Yr(t);for(let n of t.Pa)e.X_(n.mutations)})}function vH(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=k_.from(r,e,n);yield _N(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Nf(t)})}function _H(t,e){return v(this,null,function*(){e&&Yr(t).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return x$(s)&&s!==M.ABORTED})(i.code)){let o=r.Pa.shift();Yr(r).N_(),yield _N(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Nf(r)}})})(t,e)),EN(t)&&IN(t)})}function tR(t,e){return v(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),V(io,"RemoteStore received new credentials");let r=oo(n);n.Ia.add(3),yield lu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Rf(n)})}function EH(t,e){return v(this,null,function*(){let n=J(t);e?(n.Ia.delete(2),yield Rf(n)):e||(n.Ia.add(2),yield lu(n),n.Aa.set("Unknown"))})}function $s(t){return t.Va||(t.Va=(function(n,r,i){let o=J(n);return o.ia(),new vE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:lH.bind(null,t),e_:dH.bind(null,t),n_:hH.bind(null,t),J_:fH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),oI(t)?iI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),vN(t))}))),t.Va}function Yr(t){return t.ma||(t.ma=(function(n,r,i){let o=J(n);return o.ia(),new _E(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:mH.bind(null,t),n_:_H.bind(null,t),ea:yH.bind(null,t),ta:vH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield Nf(t)):(yield t.ma.stop(),t.Pa.length>0&&(V(io,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var DE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sI(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Bs(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var lf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=$c(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var df=class{constructor(){this.fa=new Me($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ls=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,lf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var bE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},CE=class{constructor(){this.queries=nR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=J(n),o=i.queries;i.queries=nR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function nR(){return new ar(t=>WR(t),Cf)}function aI(t,e){return v(this,null,function*(){let n=J(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new bE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=sI(s,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&uI(n)})}function cI(t,e){return v(this,null,function*(){let n=J(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function IH(t,e){let n=J(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&uI(n)}function wH(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function uI(t){t.Da.forEach(e=>{e.next()})}var SE,rR;(rR=SE||(SE={})).Fa="default",rR.Cache="cache";var ru=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==SE.Cache}};var hf=class{constructor(e){this.key=e}},ff=class{constructor(e){this.key=e}},AE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=KR(e),this.eu=new lf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new df,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Sf(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(C)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ls(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new df,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ff(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new hf(r))}),n}uu(e){this.Ha=e.qs,this.Za=ae();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ls.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},lI="SyncEngine",RE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},NE=class{constructor(e){this.key=e,this.lu=!1}},ME=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ar(a=>WR(a),Cf),this.Tu=new Map,this.Iu=new Set,this.du=new Me($.comparator),this.Eu=new Map,this.Au=new nu,this.Ru={},this.Vu=new Map,this.mu=tu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function TH(t,e,n=!0){return v(this,null,function*(){let r=SN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield wN(r,e,n,!0),i})}function DH(t,e){return v(this,null,function*(){let n=SN(t);yield wN(n,e,!0,!1)})}function wN(t,e,n,r){return v(this,null,function*(){let i=yield aH(t.localStore,Cn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield bH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&mN(t.remoteStore,i),a})}function bH(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,g,y)=>(function(N,R,x,H){return v(this,null,function*(){let K=R.view.nu(x);K.Ds&&(K=yield J0(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,K)));let _e=H&&H.targetChanges.get(R.targetId),pt=H&&H.targetMismatches.get(R.targetId)!=null,me=R.view.applyChanges(K,N.isPrimaryClient,_e,pt);return oR(N,R.targetId,me._u),me.snapshot})})(t,p,g,y);let o=yield J0(t.localStore,e,!0),s=new AE(e,o.qs),a=s.nu(o.documents),u=Xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);oR(t,n,l._u);let h=new RE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function CH(t,e,n){return v(this,null,function*(){let r=J(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Cf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nI(r.remoteStore,i.targetId),PE(r,i.targetId)}).catch(Us))):(PE(r,i.targetId),yield dE(r.localStore,i.targetId,!0))})}function SH(t,e){return v(this,null,function*(){let n=J(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nI(n.remoteStore,r.targetId))})}function AH(t,e,n){return v(this,null,function*(){let r=OH(t);try{let i=yield(function(s,a){let u=J(s),l=we.now(),h=a.reduce((y,C)=>y.add(C.key),ae()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=cr(),N=ae();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((x,H)=>{H.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let x=[];for(let H of a){let K=k$(H,p.get(H.key).overlayedDocument);K!=null&&x.push(new Rn(H.key,K,UR(K.value.mapValue),rr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:YR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Me(re)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield du(r,i.changes),yield Nf(r.remoteStore)}catch(i){let o=sI(i,"Failed to persist write");n.reject(o)}})}function TN(t,e){return v(this,null,function*(){let n=J(t);try{let r=yield iH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ge(s.lu,14607):i.removedDocuments.size>0&&(ge(s.lu,42227),s.lu=!1))}),yield du(n,r,e)}catch(r){yield Us(r)}})}function iR(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&uI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RH(t,e,n){return v(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me($.comparator);s=s.insert(o,sn.newNoDocument(o,te.min()));let a=ae().add(o),u=new Yh(te.min(),new Map,new Me(re),s,a);yield TN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),dI(r)}else yield dE(r.localStore,e,!1).then(()=>PE(r,e,n)).catch(Us)})}function NH(t,e){return v(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield rH(n.localStore,e);bN(n,r,null),DN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield du(n,i)}catch(i){yield Us(i)}})}function MH(t,e,n){return v(this,null,function*(){let r=J(t);try{let i=yield(function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);bN(r,e,n),DN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield du(r,i)}catch(i){yield Us(i)}})}function DN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function bN(t,e,n){let r=J(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function PE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||CN(t,r)})}function CN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(nI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),dI(t))}function oR(t,e,n){for(let r of n)r instanceof hf?(t.Au.addReference(r.key,e),PH(t,r)):r instanceof ff?(V(lI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||CN(t,r.key)):q(19791,{yu:r})}function PH(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(lI,"New document in limbo: "+n),t.Iu.add(r),dI(t))}function dI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new NE(n)),t.du=t.du.insert(n,r),mN(t.remoteStore,new eu(Cn(bf(n.path)),r,"TargetPurposeLimboResolution",zE.ue))}}function du(t,e,n){return v(this,null,function*(){let r=J(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=aE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Bs(p))throw p;V(tI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(g,N)}}})})(r.localStore,o))})}function kH(t,e){return v(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){V(lI,"User change. New user:",e.toKey());let r=yield pN(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield du(n,r.Bs)}})}function xH(t,e){let n=J(t),r=n.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let i=ae(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function SN(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RH.bind(null,e),e.hu.J_=IH.bind(null,e.eventManager),e.hu.pu=wH.bind(null,e.eventManager),e}function OH(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MH.bind(null,e),e}var AN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Af(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return nH(this.persistence,new uE,n.initialUser,this.serializer)}Du(n){return new nf(sE.Vi,this.serializer)}bu(n){return new hE}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),kE=class extends AN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ge(this.persistence.referenceDelegate instanceof rf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new W_(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new nf(r=>rf.Vi(r,n),this.serializer)}};var LH=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kH.bind(null,this.syncEngine),yield EH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new CE})()}createDatastore(n){let r=Af(n.databaseInfo.databaseId),i=(function(s){return new yE(s)})(n.databaseInfo);return(function(s,a,u,l){return new IE(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new TE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>iR(this.syncEngine,r,0),(function(){return sf.C()?new sf:new fE})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new ME(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield(function(o){return v(this,null,function*(){let s=J(o);V(io,"RemoteStore shutting down."),s.Ia.add(5),yield lu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var iu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Zr="FirestoreClient",xE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=Wc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){V(Zr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(Zr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=sI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function s_(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V(Zr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield pN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Wr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Wr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function sR(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield FH(t);V(Zr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>tR(e.remoteStore,i)),t._onlineComponents=e})}function FH(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(Zr,"Using user provided OfflineComponentProvider");try{yield s_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Wr("Error using user provided cache. Falling back to memory cache: "+n),yield s_(t,new AN)}}else V(Zr,"Using default OfflineComponentProvider"),yield s_(t,new kE(void 0));return t._offlineComponents})}function RN(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(Zr,"Using user provided OnlineComponentProvider"),yield sR(t,t._uninitializedComponentsProvider._online)):(V(Zr,"Using default OnlineComponentProvider"),yield sR(t,new LH))),t._onlineComponents})}function VH(t){return RN(t).then(e=>e.syncEngine)}function pf(t){return v(this,null,function*(){let e=yield RN(t),n=e.eventManager;return n.onListen=TH.bind(null,e.syncEngine),n.onUnlisten=CH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SH.bind(null,e.syncEngine),n})}function jH(t,e,n={}){let r=new on;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new iu({next:g=>{h.Ou(),s.enqueueAndForget(()=>cI(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ru(bf(a.path),h,{includeMetadataChanges:!0,ka:!0});return aI(o,p)})(yield pf(t),t.asyncQueue,e,n,r)})),r.promise}function UH(t,e,n={}){let r=new on;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new iu({next:g=>{h.Ou(),s.enqueueAndForget(()=>cI(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ru(a,h,{includeMetadataChanges:!0,ka:!0});return aI(o,p)})(yield pf(t),t.asyncQueue,e,n,r)})),r.promise}function NN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var aR=new Map;var MN="firestore.googleapis.com",cR=!0,gf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MN,this.ssl=cR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:cR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<X$)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new a_;switch(r.type){case"firstParty":return new d_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=aR.get(n);r&&(V("ComponentProvider","Removing Datastore"),aR.delete(n),r.terminate())})(this),Promise.resolve()}};function PN(t,e,n,r={}){var i;t=qt(t,Fs);let o=Pr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(ah(`https://${u}`),ch("Firestore",!0)),s.host!==MN&&s.host!==u&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!En(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ye.MOCK_USER;else{h=jS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ye(g)}t._authCredentials=new c_(new Bh(h,p))}}var ur=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Je=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(uu(n,t._jsonSchema))return new t(e,r||null,new $(Ce.fromString(n.referencePath)))}};Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:Be("string",Je._jsonSchemaVersion),referencePath:Be("string")};var Hr=class t extends ur{constructor(e,n,r){super(e,n,bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function kN(t,e,...n){if(t=Oe(t),mR("collection","path",e),t instanceof Fs){let r=Ce.fromString(e,...n);return C0(r),new Hr(t,null,r)}{if(!(t instanceof Je||t instanceof Hr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return C0(r),new Hr(t.firestore,null,r)}}function hI(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=Wc.newId()),mR("doc","path",e),t instanceof Fs){let r=Ce.fromString(e,...n);return b0(r),new Je(t,null,new $(r))}{if(!(t instanceof Je||t instanceof Hr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return b0(r),new Je(t.firestore,t instanceof Hr?t.converter:null,new $(r))}}var uR="AsyncQueue",mf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new af(this,"async_queue_retry"),this.oc=()=>{let r=o_();r&&V(uR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=o_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=o_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new on;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Bs(e))throw e;V(uR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ir("INTERNAL UNHANDLED ERROR: ",lR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=DE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:lR(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function lR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function dR(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Nn=class extends Fs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new mf(e),this._firestoreClient=void 0,yield e}})}};function xN(t,e){let n=typeof t=="object"?t:ji(),r=typeof t=="string"?t:e||Gh,i=ps(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=VS("firestore");o&&PN(i,...o)}return i}function Mf(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BH(t),t._firestoreClient}function BH(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new m_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new xE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var qr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};qr._jsonSchemaVersion="firestore/bytes/1.0",qr._jsonSchema={type:Be("string",qr._jsonSchemaVersion),bytes:Be("string")};var Vs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ou=class{constructor(e){this._methodName=e}};var zr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(uu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Be("string",zr._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var Gr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:Be("string",Gr._jsonSchemaVersion),vectorValues:Be("object")};var $H=/^__.*__$/,OE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ro(e,this.data,n,this.fieldTransforms)}},yf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function ON(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:t})}}var LE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return _f(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ON(this.Ec)&&$H.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},FE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Af(e)}Dc(e,n,r,i=!1){return new LE({Ec:e,methodName:n,bc:r,path:Lt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function fI(t){let e=t._freezeSettings(),n=Af(t._databaseId);return new FE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HH(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);pI("Data must be an object, but it was:",s,r);let a=LN(r,s),u,l;if(o.merge)u=new Ht(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=VE(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);VN(h,g)||h.push(g)}u=new Ht(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new OE(new Ot(a),u,l)}var vf=class t extends ou{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function qH(t,e,n,r){let i=t.Dc(1,e,n);pI("Data must be an object, but it was:",i,r);let o=[],s=Ot.empty();Jr(r,(u,l)=>{let h=gI(e,u,n);l=Oe(l);let p=i.gc(h);if(l instanceof vf)o.push(h);else{let g=hu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Ht(o);return new yf(s,a,i.fieldTransforms)}function zH(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[VE(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(VE(e,o[g])),u.push(o[g+1]);let l=[],h=Ot.empty();for(let g=a.length-1;g>=0;--g)if(!VN(l,a[g])){let y=a[g],C=u[g];C=Oe(C);let N=s.gc(y);if(C instanceof vf)l.push(y);else{let R=hu(C,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Ht(l);return new yf(h,p,s.fieldTransforms)}function GH(t,e,n,r=!1){return hu(n,t.Dc(r?4:3,e))}function hu(t,e){if(FN(t=Oe(t)))return pI("Unsupported field value:",e,t),LN(t,e);if(t instanceof ou)return(function(r,i){if(!ON(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=hu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=we.fromDate(r);return{timestampValue:ef(i.serializer,o)}}if(r instanceof we){let o=new we(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(i.serializer,o)}}if(r instanceof zr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qr)return{bytesValue:sN(i.serializer,r._byteString)};if(r instanceof Je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gr)return(function(s,a){return{mapValue:{fields:{[KE]:{stringValue:QE},[As]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return XE(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${wf(r)}`)})(t,e)}function LN(t,e){let n={};return PR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,i)=>{let o=hu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function FN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof we||t instanceof zr||t instanceof qr||t instanceof Je||t instanceof ou||t instanceof Gr)}function pI(t,e,n){if(!FN(n)||!yR(n)){let r=wf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function VE(t,e,n){if((e=Oe(e))instanceof Vs)return e._internalPath;if(typeof e=="string")return gI(t,e);throw _f("Field path arguments must be of type string or ",t,!1,void 0,n)}var WH=new RegExp("[~\\*/\\[\\]]");function gI(t,e,n){if(e.search(WH)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vs(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _f(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function VN(t,e){return t.some(n=>n.isEqual(e))}var Ef=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Pf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},jE=class extends Ef{data(){return super.data()}};function Pf(t,e){return typeof e=="string"?gI(t,e):e instanceof Vs?e._internalPath:e._delegate._internalPath}function jN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var su=class{},au=class extends su{};function UN(t,e,...n){let r=[];e instanceof su&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof UE).length,a=o.filter(u=>u instanceof If).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var If=class t extends au{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return qN(e._query,n),new ur(e.firestore,e.converter,R_(e._query,n))}_parse(e){let n=fI(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fR(p,h);let C=[];for(let N of p)C.push(hR(u,o,N));g={arrayValue:{values:C}}}else g=hR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fR(p,h),g=GH(a,s,p,h==="in"||h==="not-in");return Ue.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function BN(t,e,n){let r=e,i=Pf("where",t);return If._create(i,r,n)}var UE=class t extends su{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)qN(s,u),s=R_(s,u)})(e._query,n),new ur(e.firestore,e.converter,R_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var BE=class t extends au{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eo(o,s)})(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Qr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function $N(t,e="asc"){let n=e,r=Pf("orderBy",t);return BE._create(r,n)}var $E=class t extends au{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ur(e.firestore,e.converter,Qh(e._query,this._limit,this._limitType))}};function HN(t){return ZB("limit",t),$E._create("limit",t,"F")}function hR(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GR(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ce.fromString(n));if(!$.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return k0(t,new $(r))}if(n instanceof Je)return k0(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(n)}.`)}function fR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qN(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var HE=class{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Jr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[As].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>be(s.doubleValue));return new Gr(o)}convertGeoPoint(e){return new zr(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){let n=or(e);return new we(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ce.fromString(e);ge(hN(r),9688,{name:e});let i=new Wh(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function KH(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Qi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yi=class t extends Ef{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Cs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Pf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yi._jsonSchema={type:Be("string",Yi._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var Cs=class extends Yi{data(e={}){return super.data(e)}},Zi=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cs(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Cs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Cs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:QH(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function QH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function zN(t){t=qt(t,Je);let e=qt(t.firestore,Nn);return jH(Mf(e),t._key).then(n=>ZN(e,t,n))}Zi._jsonSchemaVersion="firestore/querySnapshot/1.0",Zi._jsonSchema={type:Be("string",Zi._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var cu=class extends HE{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}};function GN(t){t=qt(t,ur);let e=qt(t.firestore,Nn),n=Mf(e),r=new cu(e);return jN(t._query),UH(n,t._query).then(i=>new Zi(e,r,t,i))}function WN(t,e,n,...r){t=qt(t,Je);let i=qt(t.firestore,Nn),o=fI(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof Vs?zH(o,"updateDoc",t._key,e,n,r):qH(o,"updateDoc",t._key,e),mI(i,[s.toMutation(t._key,rr.exists(!0))])}function KN(t){return mI(qt(t.firestore,Nn),[new Jc(t._key,rr.none())])}function QN(t,e){let n=qt(t.firestore,Nn),r=hI(t),i=KH(t.converter,e);return mI(n,[HH(fI(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rr.exists(!1))]).then(()=>r)}function YN(t,...e){var n,r,i;t=Oe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||dR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(dR(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Je)l=qt(t.firestore,Nn),h=bf(t._key.path),u={next:p=>{e[s]&&e[s](ZN(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=qt(t,ur);l=qt(p.firestore,Nn),h=p._query;let g=new cu(l);u={next:y=>{e[s]&&e[s](new Zi(l,g,p,y))},error:e[s+1],complete:e[s+2]},jN(t._query)}return(function(g,y,C,N){let R=new iu(N),x=new ru(y,R,C);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return aI(yield pf(g),x)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return cI(yield pf(g),x)}))}})(Mf(l),h,a,u)}function mI(t,e){return(function(r,i){let o=new on;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return AH(yield VH(r),i,o)})),o.promise})(Mf(t),e)}function ZN(t,e,n){let r=n.docs.get(e._key),i=new cu(t);return new Yi(t,i,e._key,r,new Qi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){js=i})(xr),nn(new _t("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Nn(new u_(r.getProvider("auth-internal")),new h_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wh(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(I0,w0,e),Ne(I0,w0,"esm2017")})();var so=class{constructor(e){return e}},JN="firestore",yI=class{constructor(){return ms(JN)}};var vI=new U("angularfire2.firestore-instances");function YH(t,e){let n=Sc(JN,t,e);return n&&new so(n)}function ZH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new so(r)}}var JH={provide:yI,deps:[[new Mt,vI]]},XH={provide:so,useFactory:YH,deps:[[new Mt,vI],Zn]};function Oie(t,...e){return Ne("angularfire",Or.full,"fst"),Wt([XH,JH,{provide:vI,useFactory:ZH(t),multi:!0,deps:[ve,We,Lr,Bi,[new Mt,Uc],[new Mt,ys],...e]}])}var XN=Se(QN,!0,2);var fu=Se(kN,!0,2);var eM=Se(KN,!0,2);var pu=Se(hI,!0,2);var tM=Se(zN,!0);var _I=Se(GN,!0);var Lie=Se(xN,!0);var kf=Se(HN,!0,2);var EI=Se(YN,!0);var nM=Se($N,!0,2),xf=Se(UN,!0,2);var Of=Se(WN,!0,2);var Lf=Se(BN,!0,2);var rM=class t{firestore=k(so);auth=k(Gi);createTournament(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=fu(this.firestore,"tournaments"),r={player1Id:e.uid,player1Email:e.email||"",status:"waiting",currentRound:1,player1Score:0,player2Score:0,rounds:this.initializeRounds(),createdAt:we.now(),updatedAt:we.now()};return(yield XN(n,r)).id})}joinTournament(e){return v(this,null,function*(){let n=this.auth.currentUser;if(!n)throw new Error("Not authenticated");let r=pu(this.firestore,"tournaments",e);yield Of(r,{player2Id:n.uid,player2Email:n.email,status:"in-progress",updatedAt:we.now()})})}makeChoice(e,n){return v(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let i=pu(this.firestore,"tournaments",e),o=yield tM(i);if(!o.exists())throw new Error("Tournament not found");let s=o.data(),a=s.currentRound-1,u=[...s.rounds];if(r.uid===s.player1Id?u[a].player1Choice=n:u[a].player2Choice=n,u[a].player1Choice&&u[a].player2Choice){let h=this.determineRoundWinner(u[a].player1Choice,u[a].player2Choice,s.player1Id,s.player2Id);u[a].winner=h,u[a].completed=!0;let p=s.player1Score,g=s.player2Score;h===s.player1Id?p++:h===s.player2Id&&g++;let y={rounds:u,player1Score:p,player2Score:g,updatedAt:we.now()};s.currentRound>=5?y.status="completed":u[a].completed&&(y.currentRound=s.currentRound+1),yield Of(i,y)}else yield Of(i,{rounds:u,updatedAt:we.now()})})}determineRoundWinner(e,n,r,i){return e===n?null:e==="rock"&&n==="scissors"||e==="paper"&&n==="rock"||e==="scissors"&&n==="paper"?r:i}initializeRounds(){return Array.from({length:5},(e,n)=>({roundNumber:n+1,player1Choice:null,player2Choice:null,winner:null,completed:!1}))}getTournament(e){return new Y(n=>{let r=pu(this.firestore,"tournaments",e),i=EI(r,o=>{o.exists()?n.next(F({id:o.id},o.data())):n.next(null)},o=>{n.error(o)});return()=>i()})}getAvailableTournaments(){return new Y(e=>{let n=fu(this.firestore,"tournaments"),r=xf(n,Lf("status","==","waiting"),kf(20)),i=EI(r,o=>{let s=o.docs.map(a=>F({id:a.id},a.data()));e.next(s)},o=>{e.error(o)});return()=>i()})}deleteTournament(e){return v(this,null,function*(){let n=pu(this.firestore,"tournaments",e);yield eM(n)})}getUserGameHistory(e){return v(this,null,function*(){let n=fu(this.firestore,"tournaments"),r=xf(n,Lf("status","==","completed"),nM("updatedAt","desc"),kf(50));return(yield _I(r)).docs.map(s=>F({id:s.id},s.data())).filter(s=>s.player1Id===e||s.player2Id===e)})}getUserStats(e,n){let r=0,i=0,o=0,s=0,a=0;return n.forEach(u=>{let l=u.player1Id===e,h=l?u.player1Score:u.player2Score,p=l?u.player2Score:u.player1Score;h>p?r++:h<p?i++:o++,s+=h,a+=p}),{totalGames:n.length,wins:r,losses:i,draws:o,winRate:n.length>0?(r/n.length*100).toFixed(1):"0.0",totalRoundsWon:s,totalRoundsLost:a}}getLeaderboardData(e){return v(this,null,function*(){let n=fu(this.firestore,"tournaments"),r=new Date;switch(e){case"day":r.setDate(r.getDate()-1);break;case"week":r.setDate(r.getDate()-7);break;case"month":r.setMonth(r.getMonth()-1);break;case"year":r.setFullYear(r.getFullYear()-1);break;case"all":r=new Date(0);break}let i=xf(n,Lf("status","==","completed"),kf(500)),a=(yield _I(i)).docs.map(l=>F({id:l.id},l.data())).filter(l=>l.updatedAt&&l.updatedAt.toDate()>=r),u=new Map;return a.forEach(l=>{if(l.player1Id&&l.player2Id!=="COMPUTER"){let h=u.get(l.player1Id)||{userId:l.player1Id,email:l.player1Email,wins:0,losses:0,draws:0,totalGames:0,roundsWon:0,roundsLost:0,winRate:0};h.totalGames++,h.roundsWon+=l.player1Score,h.roundsLost+=l.player2Score,l.player1Score>l.player2Score?h.wins++:l.player1Score<l.player2Score?h.losses++:h.draws++,h.winRate=h.wins/h.totalGames*100,u.set(l.player1Id,h)}if(l.player2Id&&l.player2Id!=="COMPUTER"){let h=u.get(l.player2Id)||{userId:l.player2Id,email:l.player2Email||"Unknown",wins:0,losses:0,draws:0,totalGames:0,roundsWon:0,roundsLost:0,winRate:0};h.totalGames++,h.roundsWon+=l.player2Score,h.roundsLost+=l.player1Score,l.player2Score>l.player1Score?h.wins++:l.player2Score<l.player1Score?h.losses++:h.draws++,h.winRate=h.wins/h.totalGames*100,u.set(l.player2Id,h)}}),Array.from(u.values()).sort((l,h)=>h.wins!==l.wins?h.wins-l.wins:h.winRate-l.winRate).slice(0,10)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{F as a,ye as b,v as c,qe as d,Pe as e,ue as f,vP as g,j as h,vl as i,B as j,hi as k,U as l,k as m,PT as n,kT as o,Ti as p,Qo as q,sd as r,$a as s,Xk as t,yt as u,vd as v,Xt as w,jm as x,Yo as y,Zo as z,Xb as A,Wa as B,Id as C,XO as D,e1 as E,t1 as F,n1 as G,qm as H,zm as I,wd as J,Gm as K,Wm as L,iC as M,a1 as N,sC as O,Td as P,cC as Q,u1 as R,lC as S,C1 as T,dC as U,Km as V,hC as W,pC as X,N1 as Y,gC as Z,O1 as _,F1 as $,qn as aa,U1 as ba,Cd as ca,Sd as da,Gn as ea,PC as fa,ML as ga,Kn as ha,My as ia,Ec as ja,kS as ka,pV as la,Fte as ma,Vte as na,Gi as oa,cre as pa,ure as qa,lre as ra,dre as sa,hre as ta,fre as ua,Oie as va,Lie as wa,rM as xa};
