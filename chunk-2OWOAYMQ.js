import{Ca as O,J as r,N as w,O as M,aa as i,ba as o,ca as p,ea as h,ga as g,ia as m,ja as l,ka as f,la as S,ya as P}from"./chunk-PZD6MWZB.js";var C=class E{constructor(a){this.router=a}SYMBOLS=["\u2694\uFE0F","\u{1F6E1}\uFE0F","\u{1F451}","\u26A1","\u{1F3C8}","\u{1F3C6}","V"];REEL_LENGTH=30;SYMBOL_HEIGHT=140;VISIBLE_SYMBOLS=3;BET_LEVELS=[1,5,10,25,50,100,250,500];PAYTABLE={"\u{1F3C6}":{3:100,4:500,5:2e3},"\u{1F3C8}":{3:50,4:150,5:500},"\u2694\uFE0F":{3:30,4:100,5:300},"\u{1F6E1}\uFE0F":{3:25,4:80,5:250},"\u{1F451}":{3:20,4:60,5:200},"\u26A1":{3:15,4:40,5:150},V:{3:10,4:30,5:100}};balance=1e3;currentBet=10;lastWin=0;isSpinning=!1;betIndex=2;showWinOverlay=!1;winTitle="";winAmount="";winningReels=new Set;reels=[];ngOnInit(){}ngAfterViewInit(){setTimeout(()=>this.initReels(),0)}initReels(){for(let a=0;a<5;a++){let t={symbols:[],element:document.getElementById(`reel${a}`),position:0};if(t.element)for(let e=0;e<this.REEL_LENGTH;e++){let n=this.SYMBOLS[Math.floor(Math.random()*this.SYMBOLS.length)];t.symbols.push(n);let s=document.createElement("div");s.className="symbol",s.textContent=n,t.element.appendChild(s)}this.reels.push(t)}}spin(){if(this.isSpinning||this.balance<this.currentBet)return;this.isSpinning=!0,this.balance-=this.currentBet,this.lastWin=0,this.winningReels.clear();let a=this.reels.map((t,e)=>new Promise(n=>{let s=2e3+e*200,c=Date.now(),d=t.position,b=5+e,u=(d+this.REEL_LENGTH*b+Math.floor(Math.random()*this.REEL_LENGTH))%this.REEL_LENGTH,x=()=>{let y=Date.now()-c,_=Math.min(y/s,1),L=1-Math.pow(1-_,3),B=(this.REEL_LENGTH*b+(u-d))*L,v=(d+B)%this.REEL_LENGTH;t.position=v,t.element&&(t.element.style.transform=`translateY(-${v*this.SYMBOL_HEIGHT}px)`),_<1?requestAnimationFrame(x):(t.position=u,t.element&&(t.element.style.transform=`translateY(-${u*this.SYMBOL_HEIGHT}px)`),n())};setTimeout(()=>x(),e*100)}));Promise.all(a).then(()=>{this.checkWin(),this.isSpinning=!1})}getVisibleSymbols(){let a=[];return this.reels.forEach(t=>{let e=[],n=Math.floor(t.position);for(let s=0;s<this.VISIBLE_SYMBOLS;s++){let c=(n+s)%this.REEL_LENGTH;e.push(t.symbols[c])}a.push(e)}),a}checkWin(){let a=this.getVisibleSymbols(),t=0,e=new Set;for(let n=0;n<this.VISIBLE_SYMBOLS;n++){let s=a.map(d=>d[n]),c=this.checkLine(s);c.amount>0&&(t+=c.amount,c.reels.forEach(d=>e.add(d)))}if(t>0){let n=t*this.currentBet;this.balance+=n,this.lastWin=n,this.winningReels=e,this.showWinAnimation(n)}}checkLine(a){let t={amount:0,reels:[]};for(let e of this.SYMBOLS){let n=0;for(let s=0;s<a.length&&a[s]===e;s++)n++;if(n>=3&&this.PAYTABLE[e]&&this.PAYTABLE[e][n]){let s=this.PAYTABLE[e][n];s>t.amount&&(t={amount:s,reels:Array.from({length:n},(c,d)=>d)})}}return t}showWinAnimation(a){a>=this.currentBet*100?this.winTitle="\u{1F3C6} MEGA WIN! \u{1F3C6}":a>=this.currentBet*50?this.winTitle="\u26A1 BIG WIN! \u26A1":this.winTitle="WIN!",this.winAmount=`$${a}`,this.showWinOverlay=!0,setTimeout(()=>{this.showWinOverlay=!1,this.winningReels.clear()},3e3)}increaseBet(){this.betIndex<this.BET_LEVELS.length-1&&(this.betIndex++,this.currentBet=this.BET_LEVELS[this.betIndex])}decreaseBet(){this.betIndex>0&&(this.betIndex--,this.currentBet=this.BET_LEVELS[this.betIndex])}maxBet(){this.betIndex=this.BET_LEVELS.length-1,this.currentBet=this.BET_LEVELS[this.betIndex]}goBack(){this.router.navigate(["/lobby"])}static \u0275fac=function(t){return new(t||E)(w(O))};static \u0275cmp=M({type:E,selectors:[["app-slots"]],decls:64,vars:22,consts:[[1,"slots-page"],[1,"slots-header"],[1,"btn-back",3,"click"],[1,"slots-container"],["id","slotMachine"],["id","winOverlay"],["id","winMessage"],[1,"win-title"],[1,"win-amount"],["id","header"],["id","logo"],["id","reelsContainer"],["id","reels"],[1,"reel"],[1,"win-frame"],["id","reel0",1,"reel-inner"],["id","reel1",1,"reel-inner"],["id","reel2",1,"reel-inner"],["id","reel3",1,"reel-inner"],["id","reel4",1,"reel-inner"],["id","controlPanel"],["id","infoDisplay"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["id","controls"],[1,"control-group"],[3,"click","disabled"],[2,"color","#999"],["id","spinButton",3,"click","disabled"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"header",1)(2,"button",2),g("click",function(){return e.goBack()}),l(3,"\u2190 Back to Lobby"),o(),i(4,"h1"),l(5,"Minnesota Vikings Slots"),o()(),i(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),l(11),o(),i(12,"div",8),l(13),o()()(),i(14,"div",9)(15,"div",10),l(16,"MINNESOTA VIKINGS SLOTS"),o()(),i(17,"div",11)(18,"div",12)(19,"div",13),p(20,"div",14)(21,"div",15),o(),i(22,"div",13),p(23,"div",14)(24,"div",16),o(),i(25,"div",13),p(26,"div",14)(27,"div",17),o(),i(28,"div",13),p(29,"div",14)(30,"div",18),o(),i(31,"div",13),p(32,"div",14)(33,"div",19),o()()(),i(34,"div",20)(35,"div",21)(36,"div",22)(37,"div",23),l(38,"Balance"),o(),i(39,"div",24),l(40),o()(),i(41,"div",22)(42,"div",23),l(43,"Bet"),o(),i(44,"div",24),l(45),o()(),i(46,"div",22)(47,"div",23),l(48,"Win"),o(),i(49,"div",24),l(50),o()()(),i(51,"div",25)(52,"div",26)(53,"button",27),g("click",function(){return e.decreaseBet()}),l(54,"-"),o(),i(55,"span",28),l(56,"BET"),o(),i(57,"button",27),g("click",function(){return e.increaseBet()}),l(58,"+"),o()(),i(59,"button",29),g("click",function(){return e.spin()}),l(60),o(),i(61,"div",26)(62,"button",27),g("click",function(){return e.maxBet()}),l(63,"MAX BET"),o()()()()()()()),t&2&&(r(8),m("show",e.showWinOverlay),r(3),f(e.winTitle),r(2),f(e.winAmount),r(6),m("winning",e.winningReels.has(0)),r(3),m("winning",e.winningReels.has(1)),r(3),m("winning",e.winningReels.has(2)),r(3),m("winning",e.winningReels.has(3)),r(3),m("winning",e.winningReels.has(4)),r(9),f(e.balance),r(5),f(e.currentBet),r(5),f(e.lastWin),r(3),h("disabled",e.isSpinning),r(4),h("disabled",e.isSpinning),r(2),h("disabled",e.isSpinning||e.balance<e.currentBet),r(),S(" ",e.isSpinning?"SPINNING...":"SPIN"," "),r(2),h("disabled",e.isSpinning))},dependencies:[P],styles:[".slots-page[_ngcontent-%COMP%]{min-height:100vh;background:#0a0a0a;padding:20px}.slots-header[_ngcontent-%COMP%]{max-width:900px;margin:0 auto 20px;display:flex;align-items:center;gap:20px}.btn-back[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4f2683,#3a1c61);color:#ffc62f;border:2px solid #FFC62F;padding:12px 24px;font-size:16px;font-weight:700;border-radius:6px;cursor:pointer;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#5a2d94,#4f2683);box-shadow:0 0 15px #ffc62f80;transform:translateY(-2px)}.slots-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ffc62f;font-size:24px;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.slots-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}#slotMachine[_ngcontent-%COMP%]{width:900px;max-width:100%;background:linear-gradient(180deg,#1a0033,#0d001a);border:3px solid #4F2683;border-radius:15px;box-shadow:0 0 40px #4f268380;overflow:hidden;margin:0 auto;position:relative}#header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4f2683,#79228b,#4f2683);padding:20px;text-align:center;border-bottom:3px solid #FFC62F}#logo[_ngcontent-%COMP%]{color:#ffc62f;font-size:32px;font-weight:700;letter-spacing:3px;text-shadow:2px 2px 4px rgba(0,0,0,.8)}#reelsContainer[_ngcontent-%COMP%]{background:#000;padding:40px 20px;position:relative}#reels[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;max-width:750px;margin:0 auto}.reel[_ngcontent-%COMP%]{width:140px;height:420px;background:linear-gradient(180deg,#1a1a1a,#0d0d0d);border:2px solid #333;border-radius:8px;position:relative;overflow:hidden;box-shadow:inset 0 0 20px #000c}.reel-inner[_ngcontent-%COMP%]{position:absolute;width:100%;transition:transform .05s linear}[_nghost-%COMP%]     .symbol{height:140px;display:flex;align-items:center;justify-content:center;font-size:80px;background:linear-gradient(180deg,#2a2a2a,#1a1a1a);border-bottom:1px solid #333}.win-frame[_ngcontent-%COMP%]{position:absolute;top:140px;left:0;right:0;height:140px;border:3px solid #FFC62F;pointer-events:none;opacity:0;transition:opacity .3s;z-index:10}.reel.winning[_ngcontent-%COMP%]   .win-frame[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_pulse .5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}#controlPanel[_ngcontent-%COMP%]{background:linear-gradient(180deg,#1a0033,#0d001a);padding:30px;border-top:2px solid #4F2683}#infoDisplay[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:25px;padding:20px;background:#0006;border-radius:8px}.info-item[_ngcontent-%COMP%]{text-align:center}.info-label[_ngcontent-%COMP%]{color:#999;font-size:12px;text-transform:uppercase;letter-spacing:1px;margin-bottom:5px}.info-value[_ngcontent-%COMP%]{color:#ffc62f;font-size:28px;font-weight:700}#controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:30px}.control-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4f2683,#3a1c61);color:#ffc62f;border:2px solid #FFC62F;padding:12px 24px;font-size:16px;font-weight:700;border-radius:6px;cursor:pointer;transition:all .2s;min-width:50px}button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(180deg,#5a2d94,#4f2683);box-shadow:0 0 15px #ffc62f80;transform:translateY(-2px)}button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}#spinButton[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ffc62f,#e6a800);color:#000;font-size:24px;padding:18px 50px;border:3px solid #fff;box-shadow:0 5px 20px #ffc62f66}#spinButton[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(180deg,#ffd454,#ffc62f);box-shadow:0 5px 30px #ffc62fb3}#winOverlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;display:none;align-items:center;justify-content:center;z-index:1000}#winOverlay.show[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_fadeIn .3s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}#winMessage[_ngcontent-%COMP%]{text-align:center;color:#ffc62f;animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.68,-.55,.265,1.55)}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}.win-title[_ngcontent-%COMP%]{font-size:48px;font-weight:700;margin-bottom:20px;text-shadow:0 0 20px rgba(255,198,47,.8)}.win-amount[_ngcontent-%COMP%]{font-size:72px;font-weight:700;color:#fff;text-shadow:0 0 30px rgba(255,198,47,1)}@media (max-width: 768px){#slotMachine[_ngcontent-%COMP%]{width:100%}.reel[_ngcontent-%COMP%]{width:18%}#controls[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.info-value[_ngcontent-%COMP%]{font-size:20px}#logo[_ngcontent-%COMP%]{font-size:24px}}"]})};export{C as SlotsComponent};
