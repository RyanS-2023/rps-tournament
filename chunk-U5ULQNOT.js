import{c as h,q as b}from"./chunk-M3WHHRWX.js";import{Aa as y,Ea as v,L as r,Q as _,W as x,X as f,Y as u,Z as E,ca as o,d as g,da as n,ia as C,ja as l,ka as m,la as a,ma as s,na as p,v as c}from"./chunk-7ZLQ5FKV.js";var P=(i,e)=>e.id,w=(i,e)=>e.roundNumber;function M(i,e){i&1&&(o(0,"div",3),a(1,"Loading your stats..."),n())}function O(i,e){i&1&&(o(0,"div",12)(1,"p"),a(2,"No games played yet"),n(),o(3,"p",14),a(4,"Start playing to see your history!"),n()())}function I(i,e){if(i&1&&(o(0,"span",27),a(1),n()),i&2){let t=e.$implicit,d=l(4);m("won",t.winner===d.currentUserId)("lost",t.winner&&t.winner!==d.currentUserId),r(),p(" ",t.roundNumber," ")}}function k(i,e){if(i&1&&(o(0,"div",16)(1,"div",17)(2,"span",18),a(3),n(),o(4,"span",19),a(5),n()(),o(6,"div",20)(7,"div",21)(8,"span",22),a(9),n(),o(10,"span",23),a(11),n()(),o(12,"span",24),a(13,"vs"),n(),o(14,"div",21)(15,"span",22),a(16),n(),o(17,"span",23),a(18),n()()(),o(19,"div",25),u(20,I,2,5,"span",26,w),n()()),i&2){let t=e.$implicit,d=l(3);m("win",d.didWinGame(t))("lose",d.didLoseGame(t)),r(2),m("win",d.didWinGame(t))("lose",d.didLoseGame(t)),r(),p(" ",d.getGameResult(t)," "),r(2),s(d.formatDate(t.updatedAt)),r(4),s(t.player1Nickname||t.player1Email),r(2),s(t.player1Score),r(5),s(t.player2Nickname||t.player2Email),r(2),s(t.player2Score),r(2),E(t.rounds)}}function T(i,e){if(i&1&&(o(0,"div",13),u(1,k,22,14,"div",15,P),n()),i&2){let t=l(2);r(),E(t.gameHistory)}}function G(i,e){if(i&1&&(o(0,"div",4)(1,"div",5)(2,"h3"),a(3,"Total Games"),n(),o(4,"p",6),a(5),n()(),o(6,"div",7)(7,"h3"),a(8,"Wins"),n(),o(9,"p",6),a(10),n()(),o(11,"div",8)(12,"h3"),a(13,"Losses"),n(),o(14,"p",6),a(15),n()(),o(16,"div",9)(17,"h3"),a(18,"Draws"),n(),o(19,"p",6),a(20),n()(),o(21,"div",10)(22,"h3"),a(23,"Win Rate"),n(),o(24,"p",6),a(25),n()(),o(26,"div",5)(27,"h3"),a(28,"Rounds Won"),n(),o(29,"p",6),a(30),n()()(),o(31,"div",11)(32,"h2"),a(33,"Game History"),n(),x(34,O,5,0,"div",12)(35,T,3,0,"div",13),n()),i&2){let t=l();r(5),s(t.stats.totalGames),r(5),s(t.stats.wins),r(5),s(t.stats.losses),r(5),s(t.stats.draws),r(5),p("",t.stats.winRate,"%"),r(5),s(t.stats.totalRoundsWon),r(4),f(t.gameHistory.length===0?34:35)}}var S=class i{router=c(v);auth=c(h);tournamentService=c(b);loading=!0;currentUserId="";gameHistory=[];stats={totalGames:0,wins:0,losses:0,draws:0,winRate:"0.0",totalRoundsWon:0,totalRoundsLost:0};ngOnInit(){return g(this,null,function*(){this.currentUserId=this.auth.currentUser?.uid||"",yield this.loadStats()})}loadStats(){return g(this,null,function*(){try{this.gameHistory=yield this.tournamentService.getUserGameHistory(this.currentUserId),this.stats=this.tournamentService.getUserStats(this.currentUserId,this.gameHistory)}catch(e){console.error("Error loading stats:",e)}finally{this.loading=!1}})}didWinGame(e){return e.player1Id===this.currentUserId?e.player1Score>e.player2Score:e.player2Score>e.player1Score}didLoseGame(e){return e.player1Id===this.currentUserId?e.player1Score<e.player2Score:e.player2Score<e.player1Score}getGameResult(e){return this.didWinGame(e)?"Win":this.didLoseGame(e)?"Loss":"Draw"}formatDate(e){if(!e)return"";let t=e.toDate();return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}goToLobby(){this.router.navigate(["/lobby"])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-stats"]],decls:9,vars:1,consts:[[1,"stats-container"],[1,"btn-back",3,"click"],[1,"stats-content"],[1,"loading"],[1,"stats-overview"],[1,"stat-card"],[1,"stat-value"],[1,"stat-card","wins"],[1,"stat-card","losses"],[1,"stat-card","draws"],[1,"stat-card","winrate"],[1,"game-history"],[1,"empty-state"],[1,"history-list"],[1,"sub-text"],[1,"game-card",3,"win","lose"],[1,"game-card"],[1,"game-header"],[1,"result-badge"],[1,"game-date"],[1,"game-details"],[1,"player-info"],[1,"player-name"],[1,"score"],[1,"vs"],[1,"rounds-detail"],[1,"round-icon",3,"won","lost"],[1,"round-icon"]],template:function(t,d){t&1&&(o(0,"div",0)(1,"header")(2,"h1"),a(3,"\u{1F4CA} Your Stats"),n(),o(4,"button",1),C("click",function(){return d.goToLobby()}),a(5,"Back to Lobby"),n()(),o(6,"div",2),x(7,M,2,0,"div",3)(8,G,36,7),n()()),t&2&&(r(7),f(d.loading?7:8))},dependencies:[y],styles:[".stats-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}h1[_ngcontent-%COMP%]{color:#fff;margin:0}.btn-back[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-back[_ngcontent-%COMP%]:hover{background:#ffffff4d}.stats-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.loading[_ngcontent-%COMP%]{background:#fff;padding:60px;border-radius:10px;text-align:center;font-size:18px;color:#666}.stats-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#666;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{margin:0;font-size:36px;font-weight:700;color:#333}.stat-card.wins[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#4caf50}.stat-card.losses[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f44336}.stat-card.draws[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#ff9800}.stat-card.winrate[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#667eea}.game-history[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:10px;box-shadow:0 4px 12px #0000001a}.game-history[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;color:#333}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:14px;margin-top:10px}.history-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.game-card[_ngcontent-%COMP%]{padding:20px;background:#f9f9f9;border-radius:8px;border-left:4px solid #e0e0e0;transition:all .3s}.game-card.win[_ngcontent-%COMP%]{border-left-color:#4caf50;background:#f1f8f4}.game-card.lose[_ngcontent-%COMP%]{border-left-color:#f44336;background:#fef5f5}.game-card[_ngcontent-%COMP%]:hover{transform:translate(5px);box-shadow:0 4px 12px #0000001a}.game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.result-badge[_ngcontent-%COMP%]{padding:5px 15px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.result-badge.win[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.result-badge.lose[_ngcontent-%COMP%]{background:#f44336;color:#fff}.game-date[_ngcontent-%COMP%]{color:#999;font-size:14px}.game-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.player-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.player-name[_ngcontent-%COMP%]{font-size:14px;color:#666}.score[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.vs[_ngcontent-%COMP%]{color:#999;font-weight:600}.rounds-detail[_ngcontent-%COMP%]{display:flex;gap:8px}.round-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;background:#e0e0e0;color:#666}.round-icon.won[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.round-icon.lost[_ngcontent-%COMP%]{background:#f44336;color:#fff}"]})};export{S as StatsComponent};
