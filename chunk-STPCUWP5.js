import{Aa as C,B as _,C as y,Ea as O,L as t,P,Q as M,ca as i,da as o,ea as m,ga as E,ia as f,ka as d,la as l,ma as u,na as S}from"./chunk-7ZLQ5FKV.js";var L=class b{constructor(s){this.router=s}SYMBOLS=["\u2694\uFE0F","\u{1F6E1}\uFE0F","\u{1F451}","\u26A1","\u{1F3C8}","\u{1F3C6}","V"];REEL_LENGTH=30;SYMBOL_HEIGHT=100;VISIBLE_SYMBOLS=3;BET_LEVELS=[1,5,10,25,50,100,250,500];PAYTABLE={"\u{1F3C6}":{3:100,4:500,5:2e3},"\u{1F3C8}":{3:50,4:150,5:500},"\u2694\uFE0F":{3:30,4:100,5:300},"\u{1F6E1}\uFE0F":{3:25,4:80,5:250},"\u{1F451}":{3:20,4:60,5:200},"\u26A1":{3:15,4:40,5:150},V:{3:10,4:30,5:100}};PAYLINES=[[0,0,0,0,0],[1,1,1,1,1],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,2,2],[2,2,1,0,0],[0,2,0,2,0],[2,0,2,0,2]];balance=1e3;currentBet=10;lastWin=0;isSpinning=!1;betIndex=2;showWinOverlay=!1;winTitle="";winAmount="";winningReels=new Set;winningLines=new Set;reels=[];ngOnInit(){}ngAfterViewInit(){setTimeout(()=>this.initReels(),0)}initReels(){for(let s=0;s<5;s++){let n={symbols:[],element:document.getElementById(`reel${s}`),position:0};if(n.element)for(let e=0;e<this.REEL_LENGTH;e++){let r=this.SYMBOLS[Math.floor(Math.random()*this.SYMBOLS.length)];n.symbols.push(r);let a=document.createElement("div");a.className="symbol",a.textContent=r,n.element.appendChild(a)}this.reels.push(n)}}spin(){if(this.isSpinning||this.balance<this.currentBet)return;this.isSpinning=!0,this.balance-=this.currentBet,this.lastWin=0,this.winningReels.clear(),this.winningLines.clear();let s=this.reels.map((n,e)=>new Promise(r=>{let a=2e3+e*200,g=Date.now(),c=n.position,h=5+e,p=(c+this.REEL_LENGTH*h+Math.floor(Math.random()*this.REEL_LENGTH))%this.REEL_LENGTH,x=()=>{let k=Date.now()-g,v=Math.min(k/a,1),B=1-Math.pow(1-v,3),I=(this.REEL_LENGTH*h+(p-c))*B,w=(c+I)%this.REEL_LENGTH;n.position=w,n.element&&(n.element.style.transform=`translateY(-${w*this.SYMBOL_HEIGHT}px)`),v<1?requestAnimationFrame(x):(n.position=p,n.element&&(n.element.style.transform=`translateY(-${p*this.SYMBOL_HEIGHT}px)`),r())};setTimeout(()=>x(),e*100)}));Promise.all(s).then(()=>{this.checkWin(),this.isSpinning=!1})}getVisibleSymbols(){let s=[];return this.reels.forEach(n=>{let e=[],r=Math.floor(n.position);for(let a=0;a<this.VISIBLE_SYMBOLS;a++){let g=(r+a)%this.REEL_LENGTH;e.push(n.symbols[g])}s.push(e)}),s}checkWin(){let s=this.getVisibleSymbols(),n=0,e=new Set,r=new Set;if(this.PAYLINES.forEach((a,g)=>{let c=a.map((p,x)=>s[x][p]),h=this.checkLine(c);h.amount>0&&(n+=h.amount,h.reels.forEach(p=>e.add(p)),r.add(g))}),n>0){let a=n*this.currentBet;this.balance+=a,this.lastWin=a,this.winningReels=e,this.winningLines=r,this.showWinAnimation(a)}}checkLine(s){let n={amount:0,reels:[]};for(let e of this.SYMBOLS){let r=0;for(let a=0;a<s.length&&s[a]===e;a++)r++;if(r>=3&&this.PAYTABLE[e]&&this.PAYTABLE[e][r]){let a=this.PAYTABLE[e][r];a>n.amount&&(n={amount:a,reels:Array.from({length:r},(g,c)=>c)})}}return n}showWinAnimation(s){s>=this.currentBet*100?this.winTitle="\u{1F3C6} MEGA WIN! \u{1F3C6}":s>=this.currentBet*50?this.winTitle="\u26A1 BIG WIN! \u26A1":this.winTitle="WIN!",this.winAmount=`$${s}`,this.showWinOverlay=!0,setTimeout(()=>{this.showWinOverlay=!1,this.winningReels.clear(),this.winningLines.clear()},3e3)}increaseBet(){this.betIndex<this.BET_LEVELS.length-1&&(this.betIndex++,this.currentBet=this.BET_LEVELS[this.betIndex])}decreaseBet(){this.betIndex>0&&(this.betIndex--,this.currentBet=this.BET_LEVELS[this.betIndex])}maxBet(){this.betIndex=this.BET_LEVELS.length-1,this.currentBet=this.BET_LEVELS[this.betIndex]}goBack(){this.router.navigate(["/lobby"])}static \u0275fac=function(n){return new(n||b)(P(O))};static \u0275cmp=M({type:b,selectors:[["app-slots"]],decls:80,vars:40,consts:[[1,"slots-page"],[1,"slots-header"],[1,"btn-back",3,"click"],[1,"slots-container"],["id","slotMachine"],["id","winOverlay"],["id","winMessage"],[1,"win-title"],[1,"win-amount"],["id","header"],["id","logo"],["id","reelsContainer"],[1,"paylines"],[1,"payline-svg"],["x1","0","y1","50","x2","100%","y2","50","stroke","#FFC62F","stroke-width","3",1,"payline"],["x1","0","y1","150","x2","100%","y2","150","stroke","#FFC62F","stroke-width","3",1,"payline"],["x1","0","y1","250","x2","100%","y2","250","stroke","#FFC62F","stroke-width","3",1,"payline"],["points","0,50 175,150 350,250 525,150 700,50","stroke","#9C27B0","stroke-width","3","fill","none",1,"payline"],["points","0,250 175,150 350,50 525,150 700,250","stroke","#00BCD4","stroke-width","3","fill","none",1,"payline"],["x1","0","y1","50","x2","100%","y2","250","stroke","#4CAF50","stroke-width","3",1,"payline"],["x1","0","y1","250","x2","100%","y2","50","stroke","#FF5722","stroke-width","3",1,"payline"],["points","0,50 140,250 280,50 420,250 560,50 700,250","stroke","#E91E63","stroke-width","3","fill","none",1,"payline"],["points","0,250 140,50 280,250 420,50 560,250 700,50","stroke","#FFC107","stroke-width","3","fill","none",1,"payline"],["id","reels"],[1,"reel"],[1,"win-frame"],["id","reel0",1,"reel-inner"],["id","reel1",1,"reel-inner"],["id","reel2",1,"reel-inner"],["id","reel3",1,"reel-inner"],["id","reel4",1,"reel-inner"],["id","controlPanel"],["id","infoDisplay"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["id","controls"],[1,"control-group"],[3,"click","disabled"],[2,"color","#999"],["id","spinButton",3,"click","disabled"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"header",1)(2,"button",2),f("click",function(){return e.goBack()}),l(3,"\u2190 Back to Lobby"),o(),i(4,"h1"),l(5,"Minnesota Vikings Slots"),o()(),i(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),l(11),o(),i(12,"div",8),l(13),o()()(),i(14,"div",9)(15,"div",10),l(16,"MINNESOTA VIKINGS SLOTS"),o()(),i(17,"div",11)(18,"div",12),_(),i(19,"svg",13),m(20,"line",14)(21,"line",15)(22,"line",16)(23,"polyline",17)(24,"polyline",18)(25,"line",19)(26,"line",20)(27,"polyline",21)(28,"polyline",22),o()(),y(),i(29,"div",23)(30,"div",24),m(31,"div",25)(32,"div",26),o(),i(33,"div",24),m(34,"div",25)(35,"div",27),o(),i(36,"div",24),m(37,"div",25)(38,"div",28),o(),i(39,"div",24),m(40,"div",25)(41,"div",29),o(),i(42,"div",24),m(43,"div",25)(44,"div",30),o()()(),i(45,"div",31)(46,"div",32)(47,"div",33)(48,"div",34),l(49,"Balance"),o(),i(50,"div",35),l(51),o()(),i(52,"div",33)(53,"div",34),l(54,"Lines"),o(),i(55,"div",35),l(56,"9"),o()(),i(57,"div",33)(58,"div",34),l(59,"Bet"),o(),i(60,"div",35),l(61),o()(),i(62,"div",33)(63,"div",34),l(64,"Win"),o(),i(65,"div",35),l(66),o()()(),i(67,"div",36)(68,"div",37)(69,"button",38),f("click",function(){return e.decreaseBet()}),l(70,"-"),o(),i(71,"span",39),l(72,"BET"),o(),i(73,"button",38),f("click",function(){return e.increaseBet()}),l(74,"+"),o()(),i(75,"button",40),f("click",function(){return e.spin()}),l(76),o(),i(77,"div",37)(78,"button",38),f("click",function(){return e.maxBet()}),l(79,"MAX BET"),o()()()()()()()),n&2&&(t(8),d("show",e.showWinOverlay),t(3),u(e.winTitle),t(2),u(e.winAmount),t(7),d("active",e.winningLines.has(0)),t(),d("active",e.winningLines.has(1)),t(),d("active",e.winningLines.has(2)),t(),d("active",e.winningLines.has(3)),t(),d("active",e.winningLines.has(4)),t(),d("active",e.winningLines.has(5)),t(),d("active",e.winningLines.has(6)),t(),d("active",e.winningLines.has(7)),t(),d("active",e.winningLines.has(8)),t(2),d("winning",e.winningReels.has(0)),t(3),d("winning",e.winningReels.has(1)),t(3),d("winning",e.winningReels.has(2)),t(3),d("winning",e.winningReels.has(3)),t(3),d("winning",e.winningReels.has(4)),t(9),u(e.balance),t(10),u(e.currentBet),t(5),u(e.lastWin),t(3),E("disabled",e.isSpinning),t(4),E("disabled",e.isSpinning),t(2),E("disabled",e.isSpinning||e.balance<e.currentBet),t(),S(" ",e.isSpinning?"SPINNING...":"SPIN"," "),t(2),E("disabled",e.isSpinning))},dependencies:[C],styles:[".slots-page[_ngcontent-%COMP%]{min-height:100vh;background:#0a0a0a;padding:15px;display:flex;flex-direction:column}.slots-header[_ngcontent-%COMP%]{max-width:700px;margin:0 auto 15px;display:flex;align-items:center;gap:15px}.btn-back[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4f2683,#3a1c61);color:#ffc62f;border:2px solid #FFC62F;padding:8px 16px;font-size:14px;font-weight:700;border-radius:6px;cursor:pointer;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:linear-gradient(180deg,#5a2d94,#4f2683);box-shadow:0 0 15px #ffc62f80;transform:translateY(-2px)}.slots-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ffc62f;font-size:20px;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.8)}.slots-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;width:100%}#slotMachine[_ngcontent-%COMP%]{width:100%;background:linear-gradient(180deg,#1a0033,#0d001a);border:3px solid #4F2683;border-radius:15px;box-shadow:0 0 40px #4f268380;overflow:hidden;position:relative}#header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4f2683,#79228b,#4f2683);padding:12px;text-align:center;border-bottom:3px solid #FFC62F}#logo[_ngcontent-%COMP%]{color:#ffc62f;font-size:20px;font-weight:700;letter-spacing:2px;text-shadow:2px 2px 4px rgba(0,0,0,.8)}#reelsContainer[_ngcontent-%COMP%]{background:#000;padding:20px 10px;position:relative}.paylines[_ngcontent-%COMP%]{position:absolute;inset:20px 10px;pointer-events:none;z-index:5}.payline-svg[_ngcontent-%COMP%]{width:100%;height:100%}.payline[_ngcontent-%COMP%]{opacity:.3;transition:all .3s;stroke-dasharray:5,5}.payline.active[_ngcontent-%COMP%]{opacity:1;stroke-width:4;filter:drop-shadow(0 0 8px currentColor);animation:_ngcontent-%COMP%_paylineGlow .5s infinite alternate}@keyframes _ngcontent-%COMP%_paylineGlow{0%{opacity:1}to{opacity:.6}}#reels[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px;max-width:680px;margin:0 auto;position:relative;z-index:10}.reel[_ngcontent-%COMP%]{width:100px;height:300px;background:linear-gradient(180deg,#1a1a1a,#0d0d0d);border:2px solid #333;border-radius:8px;position:relative;overflow:hidden;box-shadow:inset 0 0 20px #000c}.reel-inner[_ngcontent-%COMP%]{position:absolute;width:100%;transition:transform .05s linear}[_nghost-%COMP%]     .symbol{height:100px;display:flex;align-items:center;justify-content:center;font-size:60px;background:linear-gradient(180deg,#2a2a2a,#1a1a1a);border-bottom:1px solid #333}.win-frame[_ngcontent-%COMP%]{position:absolute;top:100px;left:0;right:0;height:100px;border:3px solid #FFC62F;pointer-events:none;opacity:0;transition:opacity .3s;z-index:10}.reel.winning[_ngcontent-%COMP%]   .win-frame[_ngcontent-%COMP%]{opacity:1;animation:_ngcontent-%COMP%_pulse .5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}#controlPanel[_ngcontent-%COMP%]{background:linear-gradient(180deg,#1a0033,#0d001a);padding:15px;border-top:2px solid #4F2683}#infoDisplay[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:15px;padding:12px;background:#0006;border-radius:8px;gap:5px}.info-item[_ngcontent-%COMP%]{text-align:center;flex:1}.info-label[_ngcontent-%COMP%]{color:#999;font-size:10px;text-transform:uppercase;letter-spacing:1px;margin-bottom:3px}.info-value[_ngcontent-%COMP%]{color:#ffc62f;font-size:18px;font-weight:700}#controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;flex-wrap:wrap}.control-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4f2683,#3a1c61);color:#ffc62f;border:2px solid #FFC62F;padding:8px 16px;font-size:14px;font-weight:700;border-radius:6px;cursor:pointer;transition:all .2s;min-width:40px}button[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(180deg,#5a2d94,#4f2683);box-shadow:0 0 15px #ffc62f80;transform:translateY(-2px)}button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}#spinButton[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ffc62f,#e6a800);color:#000;font-size:18px;padding:12px 35px;border:3px solid #fff;box-shadow:0 5px 20px #ffc62f66}#spinButton[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(180deg,#ffd454,#ffc62f);box-shadow:0 5px 30px #ffc62fb3}#winOverlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;display:none;align-items:center;justify-content:center;z-index:1000}#winOverlay.show[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_fadeIn .3s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}#winMessage[_ngcontent-%COMP%]{text-align:center;color:#ffc62f;animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.68,-.55,.265,1.55)}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0)}to{transform:scale(1)}}.win-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:15px;text-shadow:0 0 20px rgba(255,198,47,.8)}.win-amount[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#fff;text-shadow:0 0 30px rgba(255,198,47,1)}@media (max-width: 768px){.reel[_ngcontent-%COMP%]{width:18%;height:270px}[_nghost-%COMP%]     .symbol{height:90px;font-size:50px}.win-frame[_ngcontent-%COMP%]{top:90px;height:90px}#controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.info-value[_ngcontent-%COMP%], #logo[_ngcontent-%COMP%]{font-size:16px}}"]})};export{L as SlotsComponent};
