var yP=Object.defineProperty,vP=Object.defineProperties;var _P=Object.getOwnPropertyDescriptors;var OC=Object.getOwnPropertySymbols,EP=Object.getPrototypeOf,IP=Object.prototype.hasOwnProperty,wP=Object.prototype.propertyIsEnumerable,CP=Reflect.get;var kC=(t,e,n)=>e in t?yP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})IP.call(e,n)&&kC(t,n,e[n]);if(OC)for(var n of OC(e))wP.call(e,n)&&kC(t,n,e[n]);return t},ae=(t,e)=>vP(t,_P(e));var $r=(t,e,n)=>CP(EP(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var pg;function Sl(){return pg}function Nn(t){let e=pg;return pg=t,e}var FC=Symbol("NotFound");function Go(t){return t===FC||t?.name==="\u0275NotFound"}var It=null,Al=!1,gg=1,DP=null,wt=Symbol("SIGNAL");function X(t){let e=It;return It=t,e}function xl(){return It}var Wo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ko(t){if(Al)throw new Error("");if(It===null)return;It.consumerOnSignalRead(t);let e=It.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=It.recomputing;if(r&&(n=e!==void 0?e.nextProducer:It.producers,n!==void 0&&n.producer===t)){It.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===It&&(!r||TP(i,It)))return;let o=Yo(It),s={producer:t,consumer:It,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};It.producersTail=s,e!==void 0?e.nextProducer=s:It.producers=s,o&&UC(t,s)}function LC(){gg++}function Pl(t){if(!(Yo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gg)){if(!t.producerMustRecompute(t)&&!Xa(t)){Ml(t);return}t.producerRecomputeValue(t),Ml(t)}}function mg(t){if(t.consumers===void 0)return;let e=Al;Al=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||bP(r)}}finally{Al=e}}function yg(){return It?.consumerAllowSignalWrites!==!1}function bP(t){t.dirty=!0,mg(t),t.consumerMarkedDirty?.(t)}function Ml(t){t.dirty=!1,t.lastCleanEpoch=gg}function Qo(t){return t&&VC(t),X(t)}function VC(t){t.producersTail=void 0,t.recomputing=!0}function Ja(t,e){X(e),t&&jC(t)}function jC(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Yo(t))do n=vg(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Xa(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Pl(n),r!==n.version))return!0}return!1}function ec(t){if(Yo(t)){let e=t.producers;for(;e!==void 0;)e=vg(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function UC(t,e){let n=t.consumersTail,r=Yo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)UC(i.producer,i)}function vg(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Yo(e)){let o=e.producers;for(;o!==void 0;)o=vg(o)}return n}function Yo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Ol(t){DP?.(t)}function TP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function kl(t,e){return Object.is(t,e)}function Fl(t,e){let n=Object.create(SP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Pl(n),Ko(n),n.value===Za)throw n.error;return n.value};return r[wt]=n,Ol(n),r}var Rl=Symbol("UNSET"),Nl=Symbol("COMPUTING"),Za=Symbol("ERRORED"),SP=ae(k({},Wo),{value:Rl,dirty:!0,error:null,equal:kl,kind:"computed",producerMustRecompute(t){return t.value===Rl||t.value===Nl},producerRecomputeValue(t){if(t.value===Nl)throw new Error("");let e=t.value;t.value=Nl;let n=Qo(t),r,i=!1;try{r=t.computation(),X(null),i=e!==Rl&&e!==Za&&r!==Za&&t.equal(e,r)}catch(o){r=Za,t.error=o}finally{Ja(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function AP(){throw new Error}var BC=AP;function $C(t){BC(t)}function _g(t){BC=t}var RP=null;function Eg(t,e){let n=Object.create(Ll);n.value=t,e!==void 0&&(n.equal=e);let r=()=>HC(n);return r[wt]=n,Ol(n),[r,s=>Zo(n,s),s=>Ig(n,s)]}function HC(t){return Ko(t),t.value}function Zo(t,e){yg()||$C(t),t.equal(t.value,e)||(t.value=e,NP(t))}function Ig(t,e){yg()||$C(t),Zo(t,e(t.value))}var Ll=ae(k({},Wo),{equal:kl,value:void 0,kind:"signal"});function NP(t){t.version++,LC(),mg(t),RP?.(t)}function re(t){return typeof t=="function"}function Jo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Vl=Jo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Li(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Le=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Vl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zC(o)}catch(s){e=e??[],s instanceof Vl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Vl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)zC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Li(n,e)}remove(e){let{_finalizers:n}=this;n&&Li(n,e),e instanceof t&&e._removeParent(this)}};Le.EMPTY=(()=>{let t=new Le;return t.closed=!0,t})();var wg=Le.EMPTY;function jl(t){return t instanceof Le||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function zC(t){re(t)?t():t.unsubscribe()}var fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xo={setTimeout(t,e,...n){let{delegate:r}=Xo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Xo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ul(t){Xo.setTimeout(()=>{let{onUnhandledError:e}=fn;if(e)e(t);else throw t})}function tc(){}var qC=Cg("C",void 0,void 0);function GC(t){return Cg("E",void 0,t)}function WC(t){return Cg("N",t,void 0)}function Cg(t,e,n){return{kind:t,value:e,error:n}}var Vi=null;function es(t){if(fn.useDeprecatedSynchronousErrorHandling){let e=!Vi;if(e&&(Vi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Vi;if(Vi=null,n)throw r}}else t()}function KC(t){fn.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=t)}var ji=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,jl(e)&&e.add(this)):this.destination=PP}static create(e,n,r){return new ts(e,n,r)}next(e){this.isStopped?bg(WC(e),this):this._next(e)}error(e){this.isStopped?bg(GC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bg(qC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MP=Function.prototype.bind;function Dg(t,e){return MP.call(t,e)}var Tg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Bl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Bl(r)}else Bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Bl(n)}}},ts=class extends ji{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dg(e.next,o),error:e.error&&Dg(e.error,o),complete:e.complete&&Dg(e.complete,o)}):i=e}this.destination=new Tg(i)}};function Bl(t){fn.useDeprecatedSynchronousErrorHandling?KC(t):Ul(t)}function xP(t){throw t}function bg(t,e){let{onStoppedNotification:n}=fn;n&&Xo.setTimeout(()=>n(t,e))}var PP={closed:!0,next:tc,error:xP,complete:tc};var ns=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(t){return t}function Sg(...t){return Ag(t)}function Ag(t){return t.length===0?Ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=kP(n)?n:new ts(n,r,i);return es(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=QC(r),new r((i,o)=>{let s=new ts({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ns](){return this}pipe(...n){return Ag(n)(this)}toPromise(n){return n=QC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function QC(t){var e;return(e=t??fn.Promise)!==null&&e!==void 0?e:Promise}function OP(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function kP(t){return t&&t instanceof ji||OP(t)&&jl(t)}function Rg(t){return re(t?.lift)}function pe(t){return e=>{if(Rg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,i){return new Ng(t,e,n,r,i)}var Ng=class extends ji{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function rs(){return pe((t,e)=>{let n=null;t._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var is=class extends ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Rg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let n=this.getSubject();e.add(this.source.subscribe(he(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return rs()(this)}};var YC=Jo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class t extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new $l(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new YC}next(n){es(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){es(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){es(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?wg:(this.currentObservers=null,o.push(n),new Le(()=>{this.currentObservers=null,Li(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return t.create=(e,n)=>new $l(e,n),t})(),$l=class extends ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:wg}};var lt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mg={now(){return(Mg.delegate||Date).now()},delegate:void 0};var Hl=class extends Le{constructor(e,n){super()}schedule(e,n=0){return this}};var nc={setInterval(t,e,...n){let{delegate:r}=nc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=nc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var os=class extends Hl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return nc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&nc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Li(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ss=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ss.now=Mg.now;var as=class extends ss{constructor(e,n=ss.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var xg=new as(os);var zl=class extends os{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ql=class extends as{};var Pg=new ql(zl);var Ot=new ee(t=>t.complete());function ZC(t){return t&&re(t.schedule)}function JC(t){return t[t.length-1]}function Gl(t){return re(JC(t))?t.pop():void 0}function Hr(t){return ZC(JC(t))?t.pop():void 0}function Og(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function eD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function XC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ui(t){return this instanceof Ui?(this.v=t,this):new Ui(t)}function tD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(N){return new Promise(function(R,O){o.push([y,N,R,O])>1||u(y,N)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof Ui?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function nD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof XC=="function"?XC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Wl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Kl(t){return re(t?.then)}function Ql(t){return re(t[ns])}function Yl(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Zl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jl=FP();function Xl(t){return re(t?.[Jl])}function ed(t){return tD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ui(n.read());if(i)return yield Ui(void 0);yield yield Ui(r)}}finally{n.releaseLock()}})}function td(t){return re(t?.getReader)}function qe(t){if(t instanceof ee)return t;if(t!=null){if(Ql(t))return LP(t);if(Wl(t))return VP(t);if(Kl(t))return jP(t);if(Yl(t))return rD(t);if(Xl(t))return UP(t);if(td(t))return BP(t)}throw Zl(t)}function LP(t){return new ee(e=>{let n=t[ns]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VP(t){return new ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function jP(t){return new ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ul)})}function UP(t){return new ee(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rD(t){return new ee(e=>{$P(t,e).catch(n=>e.error(n))})}function BP(t){return rD(ed(t))}function $P(t,e){var n,r,i,o;return eD(this,void 0,void 0,function*(){try{for(n=nD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function kt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function zr(t,e=0){return pe((n,r)=>{n.subscribe(he(r,i=>kt(r,t,()=>r.next(i),e),()=>kt(r,t,()=>r.complete(),e),i=>kt(r,t,()=>r.error(i),e)))})}function qr(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function iD(t,e){return qe(t).pipe(qr(e),zr(e))}function oD(t,e){return qe(t).pipe(qr(e),zr(e))}function sD(t,e){return new ee(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function aD(t,e){return new ee(n=>{let r;return kt(n,e,()=>{r=t[Jl](),kt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function nd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ee(n=>{kt(n,e,()=>{let r=t[Symbol.asyncIterator]();kt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function cD(t,e){return nd(ed(t),e)}function uD(t,e){if(t!=null){if(Ql(t))return iD(t,e);if(Wl(t))return sD(t,e);if(Kl(t))return oD(t,e);if(Yl(t))return nd(t,e);if(Xl(t))return aD(t,e);if(td(t))return cD(t,e)}throw Zl(t)}function ke(t,e){return e?uD(t,e):qe(t)}function Y(...t){let e=Hr(t);return ke(t,e)}function cs(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new ee(e?i=>e.schedule(r,0,i):r)}function kg(t){return!!t&&(t instanceof ee||re(t.lift)&&re(t.subscribe))}var ar=Jo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(t,e){return pe((n,r)=>{let i=0;n.subscribe(he(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:HP}=Array;function zP(t,e){return HP(e)?t(...e):t(e)}function rd(t){return ue(e=>zP(t,e))}var{isArray:qP}=Array,{getPrototypeOf:GP,prototype:WP,keys:KP}=Object;function id(t){if(t.length===1){let e=t[0];if(qP(e))return{args:e,keys:null};if(QP(e)){let n=KP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function QP(t){return t&&typeof t=="object"&&GP(t)===WP}function od(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function sd(...t){let e=Hr(t),n=Gl(t),{args:r,keys:i}=id(t);if(r.length===0)return ke([],e);let o=new ee(YP(r,e,i?s=>od(i,s):Ut));return n?o.pipe(rd(n)):o}function YP(t,e,n=Ut){return r=>{lD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)lD(e,()=>{let l=ke(t[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function lD(t,e,n){t?kt(n,t,e):e()}function dD(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?T(N):u.push(N),T=N=>{o&&e.next(N),l++;let R=!1;qe(n(N,h++)).subscribe(he(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?kt(e,s,()=>T(O)):T(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(he(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Xe(t,e,n=1/0){return re(e)?Xe((r,i)=>ue((o,s)=>e(r,o,i,s))(qe(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>dD(r,i,t,n)))}function hD(t=1/0){return Xe(Ut,t)}function fD(){return hD(1)}function us(...t){return fD()(ke(t,Hr(t)))}function rc(t){return new ee(e=>{qe(t()).subscribe(e)})}function Fg(...t){let e=Gl(t),{args:n,keys:r}=id(t),i=new ee(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;qe(n[h]).subscribe(he(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?od(r,a):a),o.complete())}))}});return e?i.pipe(rd(e)):i}function nn(t,e){return pe((n,r)=>{let i=0;n.subscribe(he(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Gr(t){return pe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(he(n,void 0,void 0,s=>{o=qe(t(s,Gr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function pD(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(he(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ls(t,e){return re(e)?Xe(t,e,1):Xe(t,1)}function Wr(t){return pe((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cr(t){return t<=0?()=>Ot:pe((e,n)=>{let r=0;e.subscribe(he(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ad(t=ZP){return pe((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZP(){return new ar}function ic(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ur(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nn((i,o)=>t(i,o,r)):Ut,cr(1),n?Wr(e):ad(()=>new ar))}function ds(t){return t<=0?()=>Ot:pe((e,n)=>{let r=[];e.subscribe(he(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Lg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nn((i,o)=>t(i,o,r)):Ut,ds(1),n?Wr(e):ad(()=>new ar))}function Vg(t,e){return pe(pD(t,e,arguments.length>=2,!0))}function jg(...t){let e=Hr(t);return pe((n,r)=>{(e?us(t,n,e):us(t,n)).subscribe(r)})}function Ft(t,e){return pe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;qe(t(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function cd(t){return pe((e,n)=>{qe(t).subscribe(he(n,()=>n.complete(),tc)),!n.closed&&e.subscribe(n)})}function nt(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ut}function gD(t){let e=X(null);try{return t()}finally{X(e)}}var $i=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Jg=new $i("20.3.16");var hd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,n){super(cc(e,n)),this.code=e}};function JP(t){return`NG0${Math.abs(t)}`}function cc(t,e){return`${JP(t)}${e?": "+e:""}`}var uc=globalThis;function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("")}function vD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function dr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(dr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Xg(t,e){return t?e?`${t} ${e}`:t:e||""}var XP=_e({__forward_ref__:_e});function hr(t){return t.__forward_ref__=hr,t.toString=function(){return dr(this())},t}function dt(t){return em(t)?t():t}function em(t){return typeof t=="function"&&t.hasOwnProperty(XP)&&t.__forward_ref__===hr}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function lc(t){return eO(t,fd)}function tm(t){return lc(t)!==null}function eO(t,e){return t.hasOwnProperty(e)&&t[e]||null}function tO(t){let e=t?.[fd]??null;return e||null}function Bg(t){return t&&t.hasOwnProperty(ld)?t[ld]:null}var fd=_e({\u0275prov:_e}),ld=_e({\u0275inj:_e}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nm(t){return t&&!!t.\u0275providers}var rm=_e({\u0275cmp:_e}),im=_e({\u0275dir:_e}),om=_e({\u0275pipe:_e}),sm=_e({\u0275mod:_e}),sc=_e({\u0275fac:_e}),Wi=_e({__NG_ELEMENT_ID__:_e}),mD=_e({__NG_ENV_ID__:_e});function Ki(t){return typeof t=="string"?t:t==null?"":String(t)}function _D(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ki(t)}var ED=_e({ngErrorCode:_e}),nO=_e({ngErrorMessage:_e}),rO=_e({ngTokenPath:_e});function am(t,e){return ID("",-200,e)}function pd(t,e){throw new $(-201,!1)}function ID(t,e,n){let r=new $(e,t);return r[ED]=e,r[nO]=t,n&&(r[rO]=n),r}function iO(t){return t[ED]}var $g;function wD(){return $g}function Bt(t){let e=$g;return $g=t,e}function cm(t,e,n){let r=lc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;pd(t,"Injector")}var oO={},Bi=oO,Hg="__NG_DI_FLAG__",zg=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Hi(n)||0;try{return this.injector.get(e,r&8?null:Bi,r)}catch(i){if(Go(i))return i;throw i}}};function sO(t,e=0){let n=Sl();if(n===void 0)throw new $(-203,!1);if(n===null)return cm(t,void 0,e);{let r=aO(e),i=n.retrieve(t,r);if(Go(i)){if(r.optional)return null;throw i}return i}}function se(t,e=0){return(wD()||sO)(dt(t),e)}function M(t,e){return se(t,Hi(e))}function Hi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function aO(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function qg(t){let e=[];for(let n=0;n<t.length;n++){let r=dt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=cO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function CD(t,e){return t[Hg]=e,t.prototype[Hg]=e,t}function cO(t){return t[Hg]}function zi(t,e){let n=t.hasOwnProperty(sc);return n?t[sc]:null}function gd(t,e){t.forEach(n=>Array.isArray(n)?gd(n,e):e(n))}function um(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function DD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function bD(t,e,n){let r=fs(t,e);return r>=0?t[r|1]=n:(r=~r,DD(t,r,e,n)),r}function md(t,e){let n=fs(t,e);if(n>=0)return t[n|1]}function fs(t,e){return uO(t,e,1)}function uO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Yr={},$t=[],Zr=new H(""),lm=new H("",-1),dm=new H(""),ac=class{get(e,n=Bi){if(n===Bi){let i=ID("",-201);throw i.name="\u0275NotFound",i}return n}};function hm(t){return t[sm]||null}function Jr(t){return t[rm]||null}function fm(t){return t[im]||null}function TD(t){return t[om]||null}function pn(t){return{\u0275providers:t}}function SD(...t){return{\u0275providers:pm(!0,t),\u0275fromNgModule:!0}}function pm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return gd(e,s=>{let a=s;dd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&AD(i,o),n}function AD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];gm(i,o=>{e(o,r)})}}function dd(t,e,n,r){if(t=dt(t),!t)return!1;let i=null,o=Bg(t),s=!o&&Jr(t);if(!o&&!s){let u=t.ngModule;if(o=Bg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)dd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{gd(o.imports,h=>{dd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&AD(l,e)}if(!a){let l=zi(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:dm,useValue:i,multi:!0},i),e({provide:Zr,useValue:()=>se(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;gm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function gm(t,e){for(let n of t)nm(n)&&(n=n.\u0275providers),Array.isArray(n)?gm(n,e):e(n)}var lO=_e({provide:String,useValue:_e});function RD(t){return t!==null&&typeof t=="object"&&lO in t}function dO(t){return!!(t&&t.useExisting)}function hO(t){return!!(t&&t.useFactory)}function qi(t){return typeof t=="function"}function ND(t){return!!t.useClass}var hc=new H(""),ud={},yD={},Ug;function fc(){return Ug===void 0&&(Ug=new ac),Ug}var Ge=class{},Gi=class extends Ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Wg(e,s=>this.processProvider(s)),this.records.set(lm,hs(void 0,this)),i.has("environment")&&this.records.set(Ge,hs(void 0,this));let o=this.records.get(hc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dm,$t,{self:!0}))}retrieve(e,n){let r=Hi(n)||0;try{return this.get(e,Bi,r)}catch(i){if(Go(i))return i;throw i}}destroy(){oc(this),this._destroyed=!0;let e=X(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(e)}}onDestroy(e){return oc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){oc(this);let n=Nn(this),r=Bt(void 0),i;try{return e()}finally{Nn(n),Bt(r)}}get(e,n=Bi,r){if(oc(this),e.hasOwnProperty(mD))return e[mD](this);let i=Hi(r),o,s=Nn(this),a=Bt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=yO(e)&&lc(e);h&&this.injectableDefInScope(h)?l=hs(Gg(e),ud):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?fc():this.parent;return n=i&8&&n===Bi?null:n,u.get(e,n)}catch(u){let l=iO(u);throw l===-200||l===-201?new $(l,null):u}finally{Bt(a),Nn(s)}}resolveInjectorInitializers(){let e=X(null),n=Nn(this),r=Bt(void 0),i;try{let o=this.get(Zr,$t,{self:!0});for(let s of o)s()}finally{Nn(n),Bt(r),X(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dt(e);let n=qi(e)?e:dt(e&&e.provide),r=pO(e);if(!qi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=hs(void 0,ud,!0),i.factory=()=>qg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=X(null);try{if(n.value===yD)throw am(dr(e));return n.value===ud&&(n.value=yD,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&mO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{X(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=dt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gg(t){let e=lc(t),n=e!==null?e.factory:zi(t);if(n!==null)return n;if(t instanceof H)throw new $(204,!1);if(t instanceof Function)return fO(t);throw new $(204,!1)}function fO(t){if(t.length>0)throw new $(204,!1);let n=tO(t);return n!==null?()=>n.factory(t):()=>new t}function pO(t){if(RD(t))return hs(void 0,t.useValue);{let e=mm(t);return hs(e,ud)}}function mm(t,e,n){let r;if(qi(t)){let i=dt(t);return zi(i)||Gg(i)}else if(RD(t))r=()=>dt(t.useValue);else if(hO(t))r=()=>t.useFactory(...qg(t.deps||[]));else if(dO(t))r=(i,o)=>se(dt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=dt(t&&(t.useClass||t.provide));if(gO(t))r=()=>new i(...qg(t.deps));else return zi(i)||Gg(i)}return r}function oc(t){if(t.destroyed)throw new $(205,!1)}function hs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gO(t){return!!t.deps}function mO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function yO(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Wg(t,e){for(let n of t)Array.isArray(n)?Wg(n,e):n&&nm(n)?Wg(n.\u0275providers,e):e(n)}function tt(t,e){let n;t instanceof Gi?(oc(t),n=t):n=new zg(t);let r,i=Nn(n),o=Bt(void 0);try{return e()}finally{Nn(i),Bt(o)}}function MD(){return wD()!==void 0||Sl()!=null}var gn=0,Z=1,ie=2,rt=3,rn=4,on=5,ps=6,gs=7,Ue=8,fr=9,Pn=10,Me=11,ms=12,ym=13,Qi=14,Ht=15,Yi=16,Zi=17,Ji=18,pc=19,vm=20,lr=21,yd=22,gc=23,zt=24,vd=25,Xi=26,ht=27,xD=1,_m=6,Xr=7,mc=8,yc=9,Be=10;function On(t){return Array.isArray(t)&&typeof t[xD]=="object"}function mn(t){return Array.isArray(t)&&t[xD]===!0}function Em(t){return(t.flags&4)!==0}function ei(t){return t.componentOffset>-1}function _d(t){return(t.flags&1)===1}function kn(t){return!!t.template}function ys(t){return(t[ie]&512)!==0}function eo(t){return(t[ie]&256)===256}var PD="svg",OD="math";function sn(t){for(;Array.isArray(t);)t=t[gn];return t}function Im(t,e){return sn(e[t])}function yn(t,e){return sn(e[t.index])}function vc(t,e){return t.data[e]}function an(t,e){let n=e[t];return On(n)?n:n[gn]}function Ed(t){return(t[ie]&128)===128}function kD(t){return mn(t[rt])}function Fn(t,e){return e==null?null:t[e]}function wm(t){t[Zi]=0}function Cm(t){t[ie]&1024||(t[ie]|=1024,Ed(t)&&Ec(t))}function FD(t,e){for(;t>0;)e=e[Qi],t--;return e}function _c(t){return!!(t[ie]&9216||t[zt]?.dirty)}function Id(t){t[Pn].changeDetectionScheduler?.notify(8),t[ie]&64&&(t[ie]|=1024),_c(t)&&Ec(t)}function Ec(t){t[Pn].changeDetectionScheduler?.notify(0);let e=Kr(t);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Ed(e)));)e=Kr(e)}function Dm(t,e){if(eo(t))throw new $(911,!1);t[lr]===null&&(t[lr]=[]),t[lr].push(e)}function LD(t,e){if(t[lr]===null)return;let n=t[lr].indexOf(e);n!==-1&&t[lr].splice(n,1)}function Kr(t){let e=t[rt];return mn(e)?e[rt]:e}function VD(t){return t[gs]??=[]}function jD(t){return t.cleanup??=[]}var le={lFrame:XD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kg=!1;function UD(){return le.lFrame.elementDepthCount}function BD(){le.lFrame.elementDepthCount++}function bm(){le.lFrame.elementDepthCount--}function $D(){return le.bindingsEnabled}function HD(){return le.skipHydrationRootTNode!==null}function Tm(t){return le.skipHydrationRootTNode===t}function Sm(){le.skipHydrationRootTNode=null}function me(){return le.lFrame.lView}function Ct(){return le.lFrame.tView}function vn(t){return le.lFrame.contextLView=t,t[Ue]}function _n(t){return le.lFrame.contextLView=null,t}function Dt(){let t=Am();for(;t!==null&&t.type===64;)t=t.parent;return t}function Am(){return le.lFrame.currentTNode}function zD(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function vs(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function Rm(){return le.lFrame.isParent}function qD(){le.lFrame.isParent=!1}function Nm(){return Kg}function Mm(t){let e=Kg;return Kg=t,e}function GD(){return le.lFrame.bindingIndex}function WD(t){return le.lFrame.bindingIndex=t}function to(){return le.lFrame.bindingIndex++}function xm(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function KD(){return le.lFrame.inI18n}function QD(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,wd(e)}function YD(){return le.lFrame.currentDirectiveIndex}function wd(t){le.lFrame.currentDirectiveIndex=t}function ZD(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Pm(t){le.lFrame.currentQueryIndex=t}function vO(t){let e=t[Z];return e.type===2?e.declTNode:e.type===1?t[on]:null}function Om(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=vO(o),i===null||(o=o[Qi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=le.lFrame=JD();return r.currentTNode=e,r.lView=t,!0}function Cd(t){let e=JD(),n=t[Z];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function JD(){let t=le.lFrame,e=t===null?null:t.child;return e===null?XD(t):e}function XD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function eb(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var km=eb;function Dd(){let t=eb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function tb(t){return(le.lFrame.contextLView=FD(t,le.lFrame.contextLView))[Ue]}function pr(){return le.lFrame.selectedIndex}function ti(t){le.lFrame.selectedIndex=t}function bd(){let t=le.lFrame;return vc(t.tView,t.selectedIndex)}function nb(){return le.lFrame.currentNamespace}var rb=!0;function Td(){return rb}function Sd(t){rb=t}function Qg(t,e=null,n=null,r){let i=Fm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Fm(t,e=null,n=null,r,i=new Set){let o=[n||$t,SD(t)];return r=r||(typeof t=="object"?void 0:dr(t)),new Gi(o,e||fc(),r||null,i)}var et=class t{static THROW_IF_NOT_FOUND=Bi;static NULL=new ac;static create(e,n){if(Array.isArray(e))return Qg({name:""},n,e,"");{let r=e.name??"";return Qg({name:r},e.parent,e.providers,r)}}static \u0275prov=z({token:t,providedIn:"any",factory:()=>se(lm)});static __NG_ELEMENT_ID__=-1},ft=new H(""),ni=(()=>{class t{static __NG_ELEMENT_ID__=_O;static __NG_ENV_ID__=n=>n}return t})(),Yg=class extends ni{_lView;constructor(e){super(),this._lView=e}get destroyed(){return eo(this._lView)}onDestroy(e){let n=this._lView;return Dm(n,e),()=>LD(n,e)}};function _O(){return new Yg(me())}var Mn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},qt=new H("",{providedIn:"root",factory:()=>{let t=M(Ge),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Mn),e.handleError(n))}}}),ib={provide:Zr,useValue:()=>void M(Mn),multi:!0};function Lm(t){return typeof t=="function"&&t[wt]!==void 0}function cn(t,e){let[n,r,i]=Eg(t,e?.equal),o=n,s=o[wt];return o.set=r,o.update=i,o.asReadonly=ob.bind(o),o}function ob(){let t=this[wt];if(t.readonlyFn===void 0){let e=()=>this();e[wt]=t,t.readonlyFn=e}return t.readonlyFn}function Vm(t){return Lm(t)&&typeof t.set=="function"}var Qr=class{},Ic=new H("",{providedIn:"root",factory:()=>!1});var jm=new H(""),Um=new H(""),Ln=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new lt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ee(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})(),_s=(()=>{class t{internalPendingTasks=M(Ln);scheduler=M(Qr);errorHandler=M(qt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();function wc(...t){}var Bm=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>new Zg})}return t})(),Zg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ss(t){return{toString:t}.toString()}var Ad="__parameters__";function RO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function NO(t,e,n){return Ss(()=>{let r=RO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Ad)?u[Ad]:Object.defineProperty(u,Ad,{value:[]})[Ad];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Gt=CD(NO("Optional"),8);function MO(t){return typeof t=="function"}var kd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Lb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var vr=(()=>{let t=()=>Vb;return t.ngInherit=!0,t})();function Vb(t){return t.type.prototype.ngOnChanges&&(t.setInput=PO),xO}function xO(){let t=Ub(this),e=t?.current;if(e){let n=t.previous;if(n===Yr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function PO(t,e,n,r,i){let o=this.declaredInputs[r],s=Ub(t)||OO(t,{previous:Yr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new kd(l&&l.currentValue,n,u===Yr),Lb(t,e,i,n)}var jb="__ngSimpleChanges__";function Ub(t){return t[jb]||null}function OO(t,e){return t[jb]=e}var sb=[];var Se=function(t,e=null,n){for(let r=0;r<sb.length;r++){let i=sb[r];i(t,e,n)}};function kO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Vb(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function FO(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Md(t,e,n){Bb(t,e,3,n)}function xd(t,e,n,r){(t[ie]&3)===n&&Bb(t,e,n,r)}function $m(t,e){let n=t[ie];(n&3)===e&&(n&=16383,n+=1,t[ie]=n)}function Bb(t,e,n,r){let i=r!==void 0?t[Zi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Zi]+=65536),(a<o||o==-1)&&(LO(t,n,e,u),t[Zi]=(t[Zi]&4294901760)+u+2),u++}function ab(t,e){Se(4,t,e);let n=X(null);try{e.call(t)}finally{X(n),Se(5,t,e)}}function LO(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ie]>>14<t[Zi]>>16&&(t[ie]&3)===e&&(t[ie]+=16384,ab(a,o)):ab(a,o)}var Is=-1,ro=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function VO(t){return(t.flags&8)!==0}function jO(t){return(t.flags&16)!==0}function UO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];BO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function $b(t){return t===3||t===4||t===6}function BO(t){return t.charCodeAt(0)===64}function ws(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?cb(t,n,i,null,e[++r]):cb(t,n,i,null,null))}}return t}function cb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function Hb(t){return t!==Is}function Fd(t){return t&32767}function $O(t){return t>>16}function Ld(t,e){let n=$O(t),r=e;for(;n>0;)r=r[Qi],n--;return r}var Jm=!0;function ub(t){let e=Jm;return Jm=t,e}var HO=256,zb=HO-1,qb=5,zO=0,Vn={};function qO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Wi)&&(r=n[Wi]),r==null&&(r=n[Wi]=zO++);let i=r&zb,o=1<<i;e.data[t+(i>>qb)]|=o}function Vd(t,e){let n=Gb(t,e);if(n!==-1)return n;let r=e[Z];r.firstCreatePass&&(t.injectorIndex=e.length,Hm(r.data,t),Hm(e,null),Hm(r.blueprint,null));let i=Cy(t,e),o=t.injectorIndex;if(Hb(i)){let s=Fd(i),a=Ld(i,e),u=a[Z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Hm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Gb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Cy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Zb(i),r===null)return Is;if(n++,i=i[Qi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Is}function Xm(t,e,n){qO(t,e,n)}function GO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if($b(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Wb(t,e,n){if(n&8||t!==void 0)return t;pd(e,"NodeInjector")}function Kb(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[fr],o=Bt(void 0);try{return i?i.get(e,r,n&8):cm(e,r,n&8)}finally{Bt(o)}}return Wb(r,e,n)}function Qb(t,e,n,r=0,i){if(t!==null){if(e[ie]&2048&&!(r&2)){let s=ZO(t,e,n,r,Vn);if(s!==Vn)return s}let o=Yb(t,e,n,r,Vn);if(o!==Vn)return o}return Kb(e,n,r,i)}function Yb(t,e,n,r,i){let o=QO(n);if(typeof o=="function"){if(!Om(e,t,r))return r&1?Wb(i,n,r):Kb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))pd(n);else return s}finally{km()}}else if(typeof o=="number"){let s=null,a=Gb(t,e),u=Is,l=r&1?e[Ht][on]:null;for((a===-1||r&4)&&(u=a===-1?Cy(t,e):e[a+8],u===Is||!db(r,!1)?a=-1:(s=e[Z],a=Fd(u),e=Ld(u,e)));a!==-1;){let h=e[Z];if(lb(o,a,h.data)){let p=WO(a,e,n,s,r,l);if(p!==Vn)return p}u=e[a+8],u!==Is&&db(r,e[Z].data[a+8]===l)&&lb(o,a,e)?(s=h,a=Fd(u),e=Ld(u,e)):a=-1}}return i}function WO(t,e,n,r,i,o){let s=e[Z],a=s.data[t+8],u=r==null?ei(a)&&Jm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=KO(a,s,n,u,l);return h!==null?jd(e,s,h,a,i):Vn}function KO(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){let y=s[u];if(y&&kn(y)&&y.type===n)return u}return null}function jd(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ro){let a=o;if(a.resolving){let y=_D(s[n]);throw am(y)}let u=ub(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Bt(a.injectImpl):null,g=Om(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kO(n,s[n],e)}finally{p!==null&&Bt(p),ub(u),a.resolving=!1,km()}}return o}function QO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Wi)?t[Wi]:void 0;return typeof e=="number"?e>=0?e&zb:YO:e}function lb(t,e,n){let r=1<<t;return!!(n[e+(t>>qb)]&r)}function db(t,e){return!(t&2)&&!(t&1&&e)}var no=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Qb(this._tNode,this._lView,e,Hi(r),n)}};function YO(){return new no(Dt(),me())}function co(t){return Ss(()=>{let e=t.prototype.constructor,n=e[sc]||ey(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[sc]||ey(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ey(t){return em(t)?()=>{let e=ey(dt(t));return e&&e()}:zi(t)}function ZO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!ys(s);){let a=Yb(o,s,n,r|2,Vn);if(a!==Vn)return a;let u=o.parent;if(!u){let l=s[vm];if(l){let h=l.get(n,Vn,r);if(h!==Vn)return h}u=Zb(s),s=s[Qi]}o=u}return i}function Zb(t){let e=t[Z],n=e.type;return n===2?e.declTNode:n===1?t[on]:null}function Nc(t){return GO(Dt(),t)}function JO(){return Dy(Dt(),me())}function Dy(t,e){return new ri(yn(t,e))}var ri=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=JO}return t})();function Jb(t){return(t.flags&128)===128}var by=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(by||{}),Xb=new Map,XO=0;function ek(){return XO++}function tk(t){Xb.set(t[pc],t)}function ty(t){Xb.delete(t[pc])}var hb="__ngContext__";function Cs(t,e){On(e)?(t[hb]=e[pc],tk(e)):t[hb]=e}function eT(t){return nT(t[ms])}function tT(t){return nT(t[rn])}function nT(t){for(;t!==null&&!mn(t);)t=t[rn];return t}var ny;function Ty(t){ny=t}function rT(){if(ny!==void 0)return ny;if(typeof document<"u")return document;throw new $(210,!1)}var eh=new H("",{providedIn:"root",factory:()=>nk}),nk="ng",th=new H(""),uo=new H("",{providedIn:"platform",factory:()=>"unknown"});var nh=new H("",{providedIn:"root",factory:()=>rT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rk="h",ik="b";var iT="r";var oT="di";var sT=!1,aT=new H("",{providedIn:"root",factory:()=>sT});var ok=(t,e,n,r)=>{};function sk(t,e,n,r){ok(t,e,n,r)}function Sy(t){return(t.flags&32)===32}var ak=()=>null;function cT(t,e,n=!1){return ak(t,e,n)}function uT(t,e){let n=t.contentQueries;if(n!==null){let r=X(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Pm(o),a.contentQueries(2,e[s],s)}}}finally{X(r)}}}function ry(t,e,n){Pm(0);let r=X(null);try{e(t,n)}finally{X(r)}}function lT(t,e,n){if(Em(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{X(r)}}}var gr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(gr||{});var Rd;function ck(){if(Rd===void 0&&(Rd=null,uc.trustedTypes))try{Rd=uc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Rd}function fb(t){return ck()?.createScriptURL(t)||t}var Ud=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hd})`}};function rh(t){return t instanceof Ud?t.changingThisBreaksApplicationSecurity:t}function Ay(t,e){let n=dT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${hd})`)}return n===e}function dT(t){return t instanceof Ud&&t.getTypeName()||null}var uk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hT(t){return t=String(t),t.match(uk)?t:"unsafe:"+t}function lk(t,e){return t.createText(e)}function dk(t,e,n){t.setValue(e,n)}function fT(t,e,n){return t.createElement(e,n)}function Bd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function pT(t,e,n){t.appendChild(e,n)}function pb(t,e,n,r,i){r!==null?Bd(t,e,n,r,i):pT(t,e,n)}function gT(t,e,n,r){t.removeChild(null,e,n,r)}function hk(t,e,n){t.setAttribute(e,"style",n)}function fk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function mT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&UO(t,e,r),i!==null&&fk(t,e,i),o!==null&&hk(t,e,o)}var ih=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(ih||{});function yT(t){let e=_T();return e?e.sanitize(ih.URL,t)||"":Ay(t,"URL")?rh(t):hT(Ki(t))}function vT(t){let e=_T();if(e)return fb(e.sanitize(ih.RESOURCE_URL,t)||"");if(Ay(t,"ResourceURL"))return fb(rh(t));throw new $(904,!1)}var pk=new Set(["embed","frame","iframe","media","script"]),gk=new Set(["base","link","script"]);function mk(t,e){return e==="src"&&pk.has(t)||e==="href"&&gk.has(t)||e==="xlink:href"&&t==="script"?vT:yT}function Ry(t,e,n){return mk(e,n)(t)}function _T(){let t=me();return t&&t[Pn].sanitizer}function ET(t){return t instanceof Function?t():t}function yk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var IT="ng-template";function vk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ny(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ny(t){return t.type===4&&t.value!==IT}function _k(t,e,n){let r=t.type===4&&!n?IT:t.value;return e===r}function Ek(t,e,n){let r=4,i=t.attrs,o=i!==null?Ck(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!En(r)&&!En(u))return!1;if(s&&En(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!_k(t,u,n)||u===""&&e.length===1){if(En(r))return!1;s=!0}}else if(r&8){if(i===null||!vk(t,i,u,n)){if(En(r))return!1;s=!0}}else{let l=e[++a],h=Ik(u,i,Ny(t),n);if(h===-1){if(En(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(En(r))return!1;s=!0}}}}return En(r)||s}function En(t){return(t&1)===0}function Ik(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Dk(e,t)}function wk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Ek(t,e[r],n))return!0;return!1}function Ck(t){for(let e=0;e<t.length;e++){let n=t[e];if($b(n))return e}return t.length}function Dk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function gb(t,e){return t?":not("+e.trim()+")":e}function bk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!En(s)&&(e+=gb(o,i),i=""),r=s,o=o||!En(r);n++}return i!==""&&(e+=gb(o,i)),e}function Tk(t){return t.map(bk).join(",")}function Sk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!En(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var In={};function My(t,e,n,r,i,o,s,a,u,l,h){let p=ht+r,g=p+i,y=Ak(p,g),T=typeof l=="function"?l():l;return y[Z]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function Ak(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:In);return n}function Rk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=My(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function xy(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[gn]=i,p[ie]=r|4|128|8|64|1024,(l!==null||t&&t[ie]&2048)&&(p[ie]|=2048),wm(p),p[rt]=p[Qi]=t,p[Ue]=n,p[Pn]=s||t&&t[Pn],p[Me]=a||t&&t[Me],p[fr]=u||t&&t[fr]||null,p[on]=o,p[pc]=ek(),p[ps]=h,p[vm]=l,p[Ht]=e.type==2?t[Ht]:p,p}function Nk(t,e,n){let r=yn(e,t),i=Rk(n),o=t[Pn].rendererFactory,s=Py(t,xy(t,i,null,wT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function wT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function CT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Py(t,e){return t[ms]?t[ym][rn]=e:t[ms]=e,t[ym]=e,e}function W(t=1){DT(Ct(),me(),pr()+t,!1)}function DT(t,e,n,r){if(!r)if((e[ie]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Md(e,o,n)}else{let o=t.preOrderHooks;o!==null&&xd(e,o,0,n)}ti(n)}var oh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(oh||{});function iy(t,e,n,r){let i=X(null);try{let[o,s,a]=t.inputs[n],u=null;(s&oh.SignalBased)!==0&&(u=e[o][wt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Lb(e,u,o,r)}finally{X(i)}}var mr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(mr||{}),Mk;function Oy(t,e){return Mk(t,e)}var io=new Set,ky=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(ky||{}),Mc=new H(""),mb=new Set;function ii(t){mb.has(t)||(mb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var bT=!1,oy=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,MD()&&(this.destroyRef=M(ni,{optional:!0})??void 0,this.pendingTasks=M(Ln,{optional:!0})??void 0)}emit(e){let n=X(null);try{super.next(e)}finally{X(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=oy;function TT(t){let e,n;function r(){t=wc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yb(t){return queueMicrotask(()=>t()),()=>{t=wc}}var Fy="isAngularZone",$d=Fy+"_ID",xk=0,we=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=bT}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,kk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Pk,wc,wc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Pk={};function Ly(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ok(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){TT(()=>{t.callbackScheduled=!1,sy(t),t.isCheckStableRunning=!0,Ly(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),sy(t)}function kk(t){let e=()=>{Ok(t)},n=xk++;t._inner=t._inner.fork({name:"angular",properties:{[Fy]:!0,[$d]:n,[$d+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Fk(u))return r.invokeTask(o,s,a,u);try{return vb(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_b(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return vb(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Lk(u)&&e(),_b(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,sy(t),Ly(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function sy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _b(t){t._nesting--,Ly(t)}var Hd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Fk(t){return ST(t,"__ignore_ng_zone__")}function Lk(t){return ST(t,"__scheduler_tick__")}function ST(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var AT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=z({token:t,providedIn:"root",factory:()=>new t})}return t})();var RT=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function NT(t,e,n){let r=t.get(RT);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Vk(t,e){let n=t.get(RT);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function jk(t,e){for(let[n,r]of e)NT(t,r.animateFns)}function Eb(t,e,n,r){let i=t?.[Xi]?.enter;e!==null&&i&&i.has(n.index)&&jk(r,i)}function Es(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;mn(i)?u=i:On(i)&&(l=!0,i=i[gn]);let h=sn(i);t===0&&r!==null?(Eb(a,r,o,n),s==null?pT(e,r,h):Bd(e,r,h,s||null,!0)):t===1&&r!==null?(Eb(a,r,o,n),Bd(e,r,h,s||null,!0)):t===2?Ib(a,o,n,p=>{gT(e,h,l,p)}):t===3&&Ib(a,o,n,()=>{e.destroyNode(h)}),u!=null&&Jk(e,t,n,u,o,r,s)}}function Uk(t,e){MT(t,e),e[gn]=null,e[on]=null}function Bk(t,e,n,r,i,o){r[gn]=i,r[on]=e,ah(t,r,n,1,i,o)}function MT(t,e){e[Pn].changeDetectionScheduler?.notify(9),ah(t,e,e[Me],2,null,null)}function $k(t){let e=t[ms];if(!e)return zm(t[Z],t);for(;e;){let n=null;if(On(e))n=e[ms];else{let r=e[Be];r&&(n=r)}if(!n){for(;e&&!e[rn]&&e!==t;)On(e)&&zm(e[Z],e),e=e[rt];e===null&&(e=t),On(e)&&zm(e[Z],e),n=e&&e[rn]}e=n}}function Vy(t,e){let n=t[yc],r=n.indexOf(e);n.splice(r,1)}function sh(t,e){if(eo(e))return;let n=e[Me];n.destroyNode&&ah(t,e,n,3,null,null),$k(e)}function zm(t,e){if(eo(e))return;let n=X(null);try{e[ie]&=-129,e[ie]|=256,e[zt]&&ec(e[zt]),qk(t,e),zk(t,e),e[Z].type===1&&e[Me].destroy();let r=e[Yi];if(r!==null&&mn(e[rt])){r!==e[rt]&&Vy(r,e);let i=e[Ji];i!==null&&i.detachView(t)}ty(e)}finally{X(n)}}function Ib(t,e,n,r){let i=t?.[Xi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&io.add(t),NT(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Hk(t,r)}else t&&io.delete(t),r(!1)},i)}function Hk(t,e){let n=t[Xi]?.running;if(n){n.then(()=>{t[Xi].running=void 0,io.delete(t),e(!0)});return}e(!1)}function zk(t,e){let n=t.cleanup,r=e[gs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[gs]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[gc];if(o!==null){e[gc]=null;for(let s of o)s.destroy()}}function qk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ro)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Se(4,a,u);try{u.call(a)}finally{Se(5,a,u)}}else{Se(4,i,o);try{o.call(i)}finally{Se(5,i,o)}}}}}function Gk(t,e,n){return Wk(t,e.parent,n)}function Wk(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[gn];if(ei(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===gr.None||i===gr.Emulated)return null}return yn(r,n)}function Kk(t,e,n){return Yk(t,e,n)}function Qk(t,e,n){return t.type&40?yn(t,n):null}var Yk=Qk,wb;function jy(t,e,n,r){let i=Gk(t,r,e),o=e[Me],s=r.parent||e[on],a=Kk(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)pb(o,i,n[u],a,!1);else pb(o,i,n,a,!1);wb!==void 0&&wb(o,r,e,n,i)}function Cc(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return ay(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Cc(t,r);{let i=t[e.index];return mn(i)?ay(-1,i):sn(i)}}else{if(n&128)return Cc(t,e.next);if(n&32)return Oy(e,t)()||sn(t[e.index]);{let r=xT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kr(t[Ht]);return Cc(i,r)}else return Cc(t,e.next)}}}return null}function xT(t,e){if(e!==null){let r=t[Ht][on],i=e.projection;return r.projection[i]}return null}function ay(t,e){let n=Be+t+1;if(n<e.length){let r=e[n],i=r[Z].firstChild;if(i!==null)return Cc(r,i)}return e[Xr]}function Uy(t,e,n,r,i,o,s){for(;n!=null;){let a=r[fr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Cs(sn(u),r),n.flags|=2),!Sy(n))if(l&8)Uy(t,e,n.child,r,i,o,!1),Es(e,t,a,i,u,n,o,r);else if(l&32){let h=Oy(n,r),p;for(;p=h();)Es(e,t,a,i,p,n,o,r);Es(e,t,a,i,u,n,o,r)}else l&16?Zk(t,e,r,n,i,o):Es(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function ah(t,e,n,r,i,o){Uy(n,r,t.firstChild,e,i,o,!1)}function Zk(t,e,n,r,i,o){let s=n[Ht],u=s[on].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Es(e,t,n[fr],i,h,r,o,n)}else{let l=u,h=s[rt];Jb(r)&&(l.flags|=128),Uy(t,e,l,h,i,o,!0)}}function Jk(t,e,n,r,i,o,s){let a=r[Xr],u=sn(r);a!==u&&Es(e,t,n,o,a,i,s);for(let l=Be;l<r.length;l++){let h=r[l];ah(h[Z],h,t,e,o,a)}}function Xk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:mr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=mr.Important),t.setStyle(n,r,i,o))}}function PT(t,e,n,r,i){let o=pr(),s=r&2;try{ti(-1),s&&e.length>ht&&DT(t,e,ht,!1),Se(s?2:0,i,n),n(r,i)}finally{ti(o),Se(s?3:1,i,n)}}function OT(t,e,n){s1(t,e,n),(n.flags&64)===64&&a1(t,e,n)}function By(t,e,n=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function e1(t,e,n,r){let o=r.get(aT,sT)||n===gr.ShadowDom,s=t.selectRootElement(e,o);return t1(s),s}function t1(t){n1(t)}var n1=()=>null;function r1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function i1(t,e,n,r,i,o){let s=e[Z];if($y(t,s,e,n,r)){ei(t)&&o1(e,t.index);return}t.type&3&&(n=r1(n)),kT(t,e,n,r,i,o)}function kT(t,e,n,r,i,o){if(t.type&3){let s=yn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function o1(t,e){let n=an(e,t);n[ie]&16||(n[ie]|=64)}function s1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ei(n)&&Nk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Vd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=jd(e,t,s,n);if(Cs(u,e),o!==null&&h1(e,s-r,u,a,n,o),kn(a)){let l=an(n.index,e);l[Ue]=jd(e,t,s,n)}}}function a1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=YD();try{ti(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];wd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&c1(u,l)}}finally{ti(-1),wd(s)}}function c1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function u1(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];wk(e,o.selectors,!1)&&(r??=[],kn(o)?r.unshift(o):r.push(o))}return r}function l1(t,e,n,r,i,o){let s=yn(t,e);d1(e[Me],s,o,t.value,n,r,i)}function d1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Ki(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function h1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];iy(r,n,u,l)}}function FT(t,e,n,r,i){let o=ht+n,s=e[Z],a=i(s,e,t,r,n);e[o]=a,vs(t,!0);let u=t.type===2;return u?(mT(e[Me],a,t),(UD()===0||_d(t))&&Cs(a,e),BD()):Cs(a,e),Td()&&(!u||!Sy(t))&&jy(s,e,a,t),t}function LT(t){let e=t;return Rm()?qD():(e=e.parent,vs(e,!1)),e}function f1(t,e){let n=t[fr];if(!n)return;let r;try{r=n.get(qt,null)}catch{r=null}r?.(e)}function $y(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];iy(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];iy(h,l,r,i),a=!0}return a}function p1(t,e){let n=an(e,t),r=n[Z];g1(r,n);let i=n[gn];i!==null&&n[ps]===null&&(n[ps]=cT(i,n[fr])),Se(18),Hy(r,n,n[Ue]),Se(19,n[Ue])}function g1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hy(t,e,n){Cd(e);try{let r=t.viewQuery;r!==null&&ry(1,r,n);let i=t.template;i!==null&&PT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ji]?.finishViewCreation(t),t.staticContentQueries&&uT(t,e),t.staticViewQueries&&ry(2,t.viewQuery,n);let o=t.components;o!==null&&m1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ie]&=-5,Dd()}}function m1(t,e){for(let n=0;n<e.length;n++)p1(t,e[n])}function zy(t,e,n,r){let i=X(null);try{let o=e.tView,a=t[ie]&4096?4096:16,u=xy(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Yi]=l;let h=t[Ji];return h!==null&&(u[Ji]=h.createEmbeddedView(o)),Hy(o,u,n),u}finally{X(i)}}function bc(t,e){return!e||e.firstChild===null||Jb(t)}function Tc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(sn(o)),mn(o)&&VT(o,r);let s=n.type;if(s&8)Tc(t,e,n.child,r);else if(s&32){let a=Oy(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=xT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Kr(e[Ht]);Tc(u[Z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function VT(t,e){for(let n=Be;n<t.length;n++){let r=t[n],i=r[Z].firstChild;i!==null&&Tc(r[Z],r,i,e)}t[Xr]!==t[gn]&&e.push(t[Xr])}function jT(t){if(t[vd]!==null){for(let e of t[vd])e.impl.addSequence(e);t[vd].length=0}}var UT=[];function y1(t){return t[zt]??v1(t)}function v1(t){let e=UT.pop()??Object.create(E1);return e.lView=t,e}function _1(t){t.lView[zt]!==t&&(t.lView=null,UT.push(t))}var E1=ae(k({},Wo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ec(t.lView)},consumerOnSignalRead(){this.lView[zt]=this}});function I1(t){let e=t[zt]??Object.create(w1);return e.lView=t,e}var w1=ae(k({},Wo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Kr(t.lView);for(;e&&!BT(e[Z]);)e=Kr(e);e&&Cm(e)},consumerOnSignalRead(){this.lView[zt]=this}});function BT(t){return t.type!==2}function $T(t){if(t[gc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[gc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ie]&8192)}}var C1=100;function HT(t,e=0){let r=t[Pn].rendererFactory,i=!1;i||r.begin?.();try{D1(t,e)}finally{i||r.end?.()}}function D1(t,e){let n=Nm();try{Mm(!0),cy(t,e);let r=0;for(;_c(t);){if(r===C1)throw new $(103,!1);r++,cy(t,1)}}finally{Mm(n)}}function b1(t,e,n,r){if(eo(e))return;let i=e[ie],o=!1,s=!1;Cd(e);let a=!0,u=null,l=null;o||(BT(t)?(l=y1(e),u=Qo(l)):xl()===null?(a=!1,l=I1(e),u=Qo(l)):e[zt]&&(ec(e[zt]),e[zt]=null));try{wm(e),WD(t.bindingStartIndex),n!==null&&PT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Md(e,y,null)}else{let y=t.preOrderHooks;y!==null&&xd(e,y,0,null),$m(e,0)}if(s||T1(e),$T(e),zT(e,0),t.contentQueries!==null&&uT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Md(e,y)}else{let y=t.contentHooks;y!==null&&xd(e,y,1),$m(e,1)}A1(t,e);let p=t.components;p!==null&&GT(e,p,0);let g=t.viewQuery;if(g!==null&&ry(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Md(e,y)}else{let y=t.viewHooks;y!==null&&xd(e,y,2),$m(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yd]){for(let y of e[yd])y();e[yd]=null}o||(jT(e),e[ie]&=-73)}catch(h){throw o||Ec(e),h}finally{l!==null&&(Ja(l,u),a&&_1(l)),Dd()}}function zT(t,e){for(let n=eT(t);n!==null;n=tT(n))for(let r=Be;r<n.length;r++){let i=n[r];qT(i,e)}}function T1(t){for(let e=eT(t);e!==null;e=tT(e)){if(!(e[ie]&2))continue;let n=e[yc];for(let r=0;r<n.length;r++){let i=n[r];Cm(i)}}}function S1(t,e,n){Se(18);let r=an(e,t);qT(r,n),Se(19,r[Ue])}function qT(t,e){Ed(t)&&cy(t,e)}function cy(t,e){let r=t[Z],i=t[ie],o=t[zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xa(o)),s||=!1,o&&(o.dirty=!1),t[ie]&=-9217,s)b1(r,t,r.template,t[Ue]);else if(i&8192){let a=X(null);try{$T(t),zT(t,1);let u=r.components;u!==null&&GT(t,u,1),jT(t)}finally{X(a)}}}function GT(t,e,n){for(let r=0;r<e.length;r++)S1(t,e[r],n)}function A1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ti(~i);else{let o=i,s=n[++r],a=n[++r];QD(s,o);let u=e[o];Se(24,u),a(2,u),Se(25,u)}}}finally{ti(-1)}}function qy(t,e){let n=Nm()?64:1088;for(t[Pn].changeDetectionScheduler?.notify(e);t;){t[ie]|=n;let r=Kr(t);if(ys(t)&&!r)return t;t=r}return null}function WT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function KT(t,e){let n=Be+e;if(n<t.length)return t[n]}function ch(t,e,n,r=!0){let i=e[Z];if(R1(i,e,t,n),r){let s=ay(n,t),a=e[Me],u=a.parentNode(t[Xr]);u!==null&&Bk(i,t[on],a,e,u,s)}let o=e[ps];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function QT(t,e){let n=Sc(t,e);return n!==void 0&&sh(n[Z],n),n}function Sc(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n];if(r){let i=r[Yi];i!==null&&i!==t&&Vy(i,r),e>0&&(t[n-1][rn]=r[rn]);let o=dc(t,Be+e);Uk(r[Z],r);let s=o[Ji];s!==null&&s.detachView(o[Z]),r[rt]=null,r[rn]=null,r[ie]&=-129}return r}function R1(t,e,n,r){let i=Be+r,o=n.length;r>0&&(n[i-1][rn]=e),r<o-Be?(e[rn]=n[i],um(n,Be+r,e)):(n.push(e),e[rn]=null),e[rt]=n;let s=e[Yi];s!==null&&n!==s&&YT(s,e);let a=e[Ji];a!==null&&a.insertView(t),Id(e),e[ie]|=128}function YT(t,e){let n=t[yc],r=e[rt];if(On(r))t[ie]|=2;else{let i=r[rt][Ht];e[Ht]!==i&&(t[ie]|=2)}n===null?t[yc]=[e]:n.push(e)}var oo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Z];return Tc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ue]}set context(e){this._lView[Ue]=e}get destroyed(){return eo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rt];if(mn(e)){let n=e[mc],r=n?n.indexOf(this):-1;r>-1&&(Sc(e,r),dc(n,r))}this._attachedToViewContainer=!1}sh(this._lView[Z],this._lView)}onDestroy(e){Dm(this._lView,e)}markForCheck(){qy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Id(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,HT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ys(this._lView),n=this._lView[Yi];n!==null&&!e&&Vy(n,this._lView),MT(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=ys(this._lView),r=this._lView[Yi];r!==null&&!n&&YT(r,this._lView),Id(this._lView)}};function uh(t,e,n,r,i){let o=t.data[e];if(o===null)o=N1(t,e,n,r,i),KD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=zD();o.injectorIndex=s===null?-1:s.injectorIndex}return vs(o,!0),o}function N1(t,e,n,r,i){let o=Am(),s=Rm(),a=s?o:o&&o.parent,u=t.data[e]=x1(t,a,n,e,r,i);return M1(t,u,o,s),u}function M1(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function x1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return HD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var d7=new RegExp(`^(\\d+)*(${ik}|${rk})*(.*)`);function P1(t){let e=t[_m]??[],r=t[rt][Me],i=[];for(let o of e)o.data[oT]!==void 0?i.push(o):O1(o,r);t[_m]=i}function O1(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[iT];for(;n<i;){let o=r.nextSibling;gT(e,r,!1),r=o,n++}}}var k1=()=>null,F1=()=>null;function uy(t,e){return k1(t,e)}function ZT(t,e,n){return F1(t,e,n)}var JT=class{},lh=class{},ly=class{resolveComponentFactory(e){throw new $(917,!1)}},xc=class{static NULL=new ly},so=class{},lo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>L1()}return t})();function L1(){let t=me(),e=Dt(),n=an(e.index,t);return(On(n)?n:t)[Me]}var XT=(()=>{class t{static \u0275prov=z({token:t,providedIn:"root",factory:()=>null})}return t})();var Pd={},dy=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Pd,r);return i!==Pd||n===Pd?i:this.parentInjector.get(e,n,r)}};function zd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Xg(i,a);else if(o==2){let u=a,l=e[++s];r=Xg(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function De(t,e=0){let n=me();if(n===null)return se(t,e);let r=Dt();return Qb(r,n,dt(t),e)}function V1(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}B1(t,e,n,a,o,u,l)}o!==null&&r!==null&&j1(n,r,o)}function j1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function U1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function B1(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&kn(y)&&(u=!0,U1(t,n,g)),Xm(Vd(n,e),t,y.type)}W1(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=CT(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=ws(n.mergedAttrs,y.hostAttrs),H1(t,n,e,p,y),G1(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}$1(t,n,o)}function $1(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Cb(0,e,i,r),Cb(1,e,i,r),bb(e,r,!1);else{let o=n.get(i);Db(0,e,o,r),Db(1,e,o,r),bb(e,r,!0)}}}function Cb(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),e0(e,o)}}function Db(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),e0(e,s)}}function e0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function bb(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Ny(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function H1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=zi(i.type,!0)),s=new ro(o,kn(i),De,null);t.blueprint[r]=s,n[r]=s,z1(t,e,r,CT(t,n,i.hostVars,In),i)}function z1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;q1(s)!=a&&s.push(a),s.push(n,r,o)}}function q1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function G1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kn(e)&&(n[""]=t)}}function W1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function t0(t,e,n,r,i,o,s,a){let u=e[Z],l=u.consts,h=Fn(l,s),p=uh(u,t,n,r,h);return o&&V1(u,e,p,Fn(l,a),i),p.mergedAttrs=ws(p.mergedAttrs,p.attrs),p.attrs!==null&&zd(p,p.attrs,!1),p.mergedAttrs!==null&&zd(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function n0(t,e){FO(t,e),Em(e)&&t.queries.elementEnd(e)}function K1(t,e,n,r,i,o){let s=e.consts,a=Fn(s,i),u=uh(e,t,n,r,a);if(u.mergedAttrs=ws(u.mergedAttrs,u.attrs),o!=null){let l=Fn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&zd(u,u.attrs,!1),u.mergedAttrs!==null&&zd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function yr(t,e,n){if(n===In)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Q1(t,e,n,r){let i=yr(t,e,n);return yr(t,e+1,r)||i}function Od(t,e,n){return function r(i){let o=ei(t)?an(t.index,e):e;qy(o,5);let s=e[Ue],a=Tb(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=Tb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Tb(t,e,n,r){let i=X(null);try{return Se(6,e,n),n(r)!==!1}catch(o){return f1(t,o),!1}finally{Se(7,e,n),X(i)}}function r0(t,e,n,r,i,o,s,a){let u=_d(t),l=!1,h=null;if(!r&&u&&(h=Z1(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=yn(t,n),g=r?r(p):p;sk(n,g,o,a);let y=i.listen(g,o,a);if(!Y1(o)){let T=r?N=>r(sn(N[t.index])):t.index;i0(T,e,n,o,a,y,!1)}}return l}function Y1(t){return t.startsWith("animation")||t.startsWith("transition")}function Z1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[gs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function i0(t,e,n,r,i,o,s){let a=e.firstCreatePass?jD(e):null,u=VD(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function Sb(t,e,n,r,i,o){let s=e[n],a=e[Z],l=a.data[n].outputs[r],p=s[l].subscribe(o);i0(t.index,a,e,i,o,p,!0)}var hy=Symbol("BINDING");var qd=class extends xc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Jr(e);return new Ds(n,this.ngModule)}};function J1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&oh.SignalBased)!==0};return i&&(o.transform=i),o})}function X1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function eF(t,e,n){let r=e instanceof Ge?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new dy(n,r):n}function tF(t){let e=t.get(so,null);if(e===null)throw new $(407,!1);let n=t.get(XT,null),r=t.get(Qr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function nF(t,e){let n=o0(t);return fT(e,n,n==="svg"?PD:n==="math"?OD:null)}function o0(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ds=class extends lh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=J1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=X1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Tk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Se(22);let a=X(null);try{let u=this.componentDef,l=rF(r,u,s,o),h=eF(u,i||this.ngModule,e),p=tF(h),g=p.rendererFactory.createRenderer(null,u),y=r?e1(g,r,u.encapsulation,h):nF(u,g),T=s?.some(Ab)||o?.some(O=>typeof O!="function"&&O.bindings.some(Ab)),N=xy(null,l,null,512|wT(u),null,null,p,g,h,null,cT(y,h,!0));N[ht]=y,Cd(N);let R=null;try{let O=t0(ht,N,2,"#host",()=>l.directiveRegistry,!0,0);mT(g,y,O),Cs(y,N),OT(l,N,O),lT(l,O,N),n0(l,O),n!==void 0&&oF(O,this.ngContentSelectors,n),R=an(O.index,N),N[Ue]=R[Ue],Hy(l,N,null)}catch(O){throw R!==null&&ty(R),ty(N),O}finally{Se(23),Dd()}return new Gd(this.componentType,N,!!T)}finally{X(a)}}};function rF(t,e,n,r){let i=t?["ng-version","20.3.16"]:Sk(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[hy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[hy].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=fm(p);u.push(g)}return My(0,null,iF(o,s),1,a,u,null,null,null,[i],null)}function iF(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function Ab(t){let e=t[hy].kind;return e==="input"||e==="twoWay"}var Gd=class extends JT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=vc(n[Z],ht),this.location=Dy(this._tNode,n),this.instance=an(this._tNode.index,n)[Ue],this.hostView=this.changeDetectorRef=new oo(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=$y(r,i[Z],i,e,n);this.previousInputValues.set(e,n);let s=an(r.index,i);qy(s,1)}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Pc=(()=>{class t{static __NG_ELEMENT_ID__=sF}return t})();function sF(){let t=Dt();return cF(t,me())}var aF=Pc,s0=class extends aF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Dy(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cy(this._hostTNode,this._hostLView);if(Hb(e)){let n=Ld(e,this._hostLView),r=Fd(e),i=n[Z].data[r+8];return new no(i,n)}else return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Rb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Be}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,bc(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!MO(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Ds(Jr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(Ge,null);O&&(o=O)}let g=Jr(h.componentType??{}),y=uy(this._lContainer,g?.id??null),T=y?.firstChild??null,N=h.create(p,i,T,o,s,a);return this.insertImpl(N.hostView,l,bc(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(kD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[rt],l=new s0(u,u[on],u[rt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ch(s,i,o,r),e.attachToViewContainerRef(),um(qm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Rb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Sc(this._lContainer,n);r&&(dc(qm(this._lContainer),n),sh(r[Z],r))}detach(e){let n=this._adjustIndex(e,-1),r=Sc(this._lContainer,n);return r&&dc(qm(this._lContainer),n)!=null?new oo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Rb(t){return t[mc]}function qm(t){return t[mc]||(t[mc]=[])}function cF(t,e){let n,r=e[t.index];return mn(r)?n=r:(n=WT(r,e,null,t),e[t.index]=n,Py(e,n)),lF(n,e,t,r),new s0(n,t,e)}function uF(t,e){let n=t[Me],r=n.createComment(""),i=yn(e,t),o=n.parentNode(i);return Bd(n,o,r,n.nextSibling(i),!1),r}var lF=fF,dF=()=>!1;function hF(t,e,n){return dF(t,e,n)}function fF(t,e,n,r){if(t[Xr])return;let i;n.type&8?i=sn(r):i=uF(e,n),t[Xr]=i}var bs=class{},dh=class{};var Wd=class extends bs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new qd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=hm(e);this._bootstrapComponents=ET(o.bootstrap),this._r3Injector=Fm(e,n,[{provide:bs,useValue:this},{provide:xc,useValue:this.componentFactoryResolver},...r],dr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Kd=class extends dh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Wd(this.moduleType,e,[])}};var Ac=class extends bs{injector;componentFactoryResolver=new qd(this);instance=null;constructor(e){super();let n=new Gi([...e.providers,{provide:bs,useValue:this},{provide:xc,useValue:this.componentFactoryResolver}],e.parent||fc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Oc(t,e,n=null){return new Ac({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var pF=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=pm(!1,n.type),i=r.length>0?Oc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=z({token:t,providedIn:"environment",factory:()=>new t(se(Ge))})}return t})();function Wt(t){return Ss(()=>{let e=a0(t),n=ae(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===by.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(pF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||gr.Emulated,styles:t.styles||$t,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ii("NgStandalone"),c0(n);let r=t.dependencies;return n.directiveDefs=Nb(r,gF),n.pipeDefs=Nb(r,TD),n.id=vF(n),n})}function gF(t){return Jr(t)||fm(t)}function _r(t){return Ss(()=>({type:t.type,bootstrap:t.bootstrap||$t,declarations:t.declarations||$t,imports:t.imports||$t,exports:t.exports||$t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function mF(t,e){if(t==null)return Yr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=oh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function yF(t){if(t==null)return Yr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function pt(t){return Ss(()=>{let e=a0(t);return c0(e),e})}function a0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Yr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||$t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:mF(t.inputs,e),outputs:yF(t.outputs),debugInfo:null}}function c0(t){t.features?.forEach(e=>e(t))}function Nb(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function vF(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function _F(t){return Object.getPrototypeOf(t.prototype).constructor}function jn(t){let e=_F(t.type),n=!0,r=[t];for(;e;){let i;if(kn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Gm(t.inputs),s.declaredInputs=Gm(t.declaredInputs),s.outputs=Gm(t.outputs);let a=i.hostBindings;a&&DF(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&wF(t,u),l&&CF(t,l),EF(t,i),vD(t.outputs,i.outputs),kn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===jn&&(n=!1)}}e=Object.getPrototypeOf(e)}IF(r)}function EF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function IF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ws(i.hostAttrs,n=ws(n,i.hostAttrs))}}function Gm(t){return t===Yr?{}:t===$t?[]:t}function wF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function CF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function DF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function bF(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ws(t.mergedAttrs,t.attrs);let h=t.tView=My(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),vs(t,!1);let u=TF(n,e,t,r);Td()&&jy(n,e,u,t),Cs(u,e);let l=WT(u,e,u,t);e[r+ht]=l,Py(e,l),hF(l,t,e)}function Qd(t,e,n,r,i,o,s,a,u,l,h){let p=n+ht,g;if(e.firstCreatePass){if(g=uh(e,p,4,s||null,a||null),l!=null){let y=Fn(e.consts,l);g.localNames=[];for(let T=0;T<y.length;T+=2)g.localNames.push(y[T],-1)}}else g=e.data[p];return bF(g,t,e,n,r,i,o,u),l!=null&&By(t,g,h),g}var TF=SF;function SF(t,e,n,r){return Sd(!0),e[Me].createComment("")}var Gy=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Wy=new H("");function ho(t){return!!t&&typeof t.then=="function"}function u0(t){return!!t&&typeof t.subscribe=="function"}var l0=new H("");var Ky=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(l0,{optional:!0})??[];injector=M(et);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=tt(this.injector,i);if(ho(o))n.push(o);else if(u0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hh=new H("");function d0(){_g(()=>{let t="";throw new $(600,t)})}function h0(t){return t.isBoundToModule}var AF=10;var oi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(qt);afterRenderManager=M(AT);zonelessEnabled=M(Ic);rootEffectScheduler=M(Bm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Ln);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(n=>!n))}constructor(){M(Mc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(Ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=et.NULL){return this._injector.get(we).run(()=>{Se(10);let s=n instanceof lh;if(!this._injector.get(Ky).done){let T="";throw new $(405,T)}let u;s?u=n:u=this._injector.get(xc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=h0(u)?void 0:this._injector.get(bs),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Wy,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Dc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Se(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Se(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ky.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let n=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,X(n),this.afterTick.next(),Se(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(so,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<AF;)Se(14),this.synchronizeOnce(),Se(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!_c(i))continue;let o=r&&!this.zonelessEnabled?0:1;HT(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>_c(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Dc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(hh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Dc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function As(t,e,n,r){let i=me(),o=to();if(yr(i,o,e)){let s=Ct(),a=bd();l1(a,i,t,e,n,r)}return As}var v7=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var fy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Wm(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function RF(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Wm(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],T=Wm(s,g,u,y,n);if(T!==0){T<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,g),O=n(o,h);if(Object.is(O,R)){let G=n(u,y);Object.is(G,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Yd,i??=xb(t,o,s,n),py(t,r,o,O))t.updateValue(o,h),o++,s++;else if(i.has(O))r.set(N,t.detach(o)),s--;else{let G=t.create(o,e[o]);t.attach(o,G),o++,s++}}for(;o<=u;)Mb(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Wm(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Yd,i??=xb(t,o,s,n);let y=n(o,p);if(py(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let T=n(o,h);r.set(T,t.detach(o)),s--}}}for(;!l.done;)Mb(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function py(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Mb(t,e,n,r,i){if(py(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function xb(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Yd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Kt(t,e,n,r,i,o,s,a){ii("NgControlFlow");let u=me(),l=Ct(),h=Fn(l.consts,o);return Qd(u,l,t,e,n,r,i,h,256,s,a),Qy}function Qy(t,e,n,r,i,o,s,a){ii("NgControlFlow");let u=me(),l=Ct(),h=Fn(l.consts,o);return Qd(u,l,t,e,n,r,i,h,512,s,a),Qy}function Qt(t,e){ii("NgControlFlow");let n=me(),r=to(),i=n[r]!==In?n[r]:-1,o=i!==-1?Zd(n,ht+i):void 0,s=0;if(yr(n,r,t)){let a=X(null);try{if(o!==void 0&&QT(o,s),t!==-1){let u=ht+t,l=Zd(n,u),h=vy(n[Z],u),p=ZT(l,h,n),g=zy(n,h,e,{dehydratedView:p});ch(l,g,s,bc(h,p))}}finally{X(a)}}else if(o!==void 0){let a=KT(o,s);a!==void 0&&(a[Ue]=e)}}var gy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Be}};var my=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function kc(t,e,n,r,i,o,s,a,u,l,h,p,g){ii("NgControlFlow");let y=me(),T=Ct(),N=u!==void 0,R=me(),O=a?s.bind(R[Ht][Ue]):s,G=new my(N,O);R[ht+t]=G,Qd(y,T,t+1,e,n,r,i,Fn(T.consts,o),256),N&&Qd(y,T,t+2,u,l,h,p,Fn(T.consts,g),512)}var yy=class extends fy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Be}at(e){return this.getLView(e)[Ue].$implicit}attach(e,n){let r=n[ps];this.needsIndexUpdate||=e!==this.length,ch(this.lContainer,n,e,bc(this.templateTNode,r)),NF(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,MF(this.lContainer,e),xF(this.lContainer,e)}create(e,n){let r=uy(this.lContainer,this.templateTNode.tView.ssrId),i=zy(this.hostLView,this.templateTNode,new gy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){sh(e[Z],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ue].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ue].$index=e}getLView(e){return PF(this.lContainer,e)}};function Fc(t){let e=X(null),n=pr();try{let r=me(),i=r[Z],o=r[n],s=n+1,a=Zd(r,s);if(o.liveCollection===void 0){let l=vy(i,s);o.liveCollection=new yy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(RF(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=to(),h=u.length===0;if(yr(r,l,h)){let p=n+2,g=Zd(r,p);if(h){let y=vy(i,p),T=ZT(g,y,r),N=zy(r,y,void 0,{dehydratedView:T});ch(g,N,0,bc(y,T))}else i.firstUpdatePass&&P1(g),QT(g,0)}}}finally{X(e)}}function Zd(t,e){return t[e]}function NF(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n],i=r?r[Xi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[fr];Vk(o,i),io.delete(r),i.detachedLeaveAnimationFns=void 0}}function MF(t,e){if(t.length<=Be)return;let n=Be+e,r=t[n],i=r?r[Xi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function xF(t,e){return Sc(t,e)}function PF(t,e){return KT(t,e)}function vy(t,e){return vc(t,e)}function Pb(t,e,n,r,i){$y(e,t,n,i?"class":"style",r)}function Ce(t,e,n,r){let i=me(),o=i[Z],s=t+ht,a=o.firstCreatePass?t0(s,i,2,e,u1,$D(),n,r):o.data[s];if(FT(a,i,t,e,f0),_d(a)){let u=i[Z];OT(u,i,a),lT(u,a,i)}return r!=null&&By(i,a),Ce}function Ae(){let t=Ct(),e=Dt(),n=LT(e);return t.firstCreatePass&&n0(t,n),Tm(n)&&Sm(),bm(),n.classesWithoutHost!=null&&VO(n)&&Pb(t,n,me(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&jO(n)&&Pb(t,n,me(),n.stylesWithoutHost,!1),Ae}function Rs(t,e,n,r){return Ce(t,e,n,r),Ae(),Rs}function B(t,e,n,r){let i=me(),o=i[Z],s=t+ht,a=o.firstCreatePass?K1(s,o,2,e,n,r):o.data[s];return FT(a,i,t,e,f0),r!=null&&By(i,a),B}function j(){let t=Dt(),e=LT(t);return Tm(e)&&Sm(),bm(),j}function Lc(t,e,n,r){return B(t,e,n,r),j(),Lc}var f0=(t,e,n,r,i)=>(Sd(!0),fT(e[Me],r,nb()));function si(){return me()}function fh(t,e,n){let r=me(),i=to();if(yr(r,i,e)){let o=Ct(),s=bd();kT(s,r,t,e,r[Me],n)}return fh}var Vc="en-US";var OF=Vc;function p0(t){typeof t=="string"&&(OF=t.toLowerCase().replace(/_/g,"-"))}function wn(t,e,n){let r=me(),i=Ct(),o=Dt();return g0(i,r,r[Me],o,t,e,n),wn}function Lt(t,e,n){let r=me(),i=Ct(),o=Dt();return(o.type&3||n)&&r0(o,i,r,n,r[Me],t,e,Od(o,r,e)),Lt}function g0(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Od(r,e,o),r0(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Od(r,e,o),Sb(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Od(r,e,o),Sb(r,e,p,i,i,u)}}function xe(t=1){return tb(t)}function Nd(t,e){return t<<17|e<<2}function ao(t){return t>>17&32767}function kF(t){return(t&2)==2}function FF(t,e){return t&131071|e<<17}function _y(t){return t|2}function Ts(t){return(t&131068)>>2}function Km(t,e){return t&-131069|e<<2}function LF(t){return(t&1)===1}function Ey(t){return t|1}function VF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ao(s),u=Ts(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||fs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=ao(t[a+1]);t[r+1]=Nd(g,a),g!==0&&(t[g+1]=Km(t[g+1],r)),t[a+1]=FF(t[a+1],r)}else t[r+1]=Nd(a,0),a!==0&&(t[a+1]=Km(t[a+1],r)),a=r;else t[r+1]=Nd(u,0),a===0?a=r:t[u+1]=Km(t[u+1],r),u=r;l&&(t[r+1]=_y(t[r+1])),Ob(t,h,r,!0),Ob(t,h,r,!1),jF(e,h,t,r,o),s=Nd(a,u),o?e.classBindings=s:e.styleBindings=s}function jF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&fs(o,e)>=0&&(n[r+1]=Ey(n[r+1]))}function Ob(t,e,n,r){let i=t[n+1],o=e===null,s=r?ao(i):Ts(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];UF(u,e)&&(a=!0,t[s+1]=r?Ey(l):_y(l)),s=r?ao(l):Ts(l)}a&&(t[n+1]=r?_y(i):Ey(i))}function UF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?fs(t,e)>=0:!1}function Un(t,e){return BF(t,e,null,!0),Un}function BF(t,e,n,r){let i=me(),o=Ct(),s=xm(2);if(o.firstUpdatePass&&HF(o,t,s,r),e!==In&&yr(i,s,e)){let a=o.data[pr()];KF(o,a,i,i[Me],t,i[s+1]=QF(e,n),r,s)}}function $F(t,e){return e>=t.expandoStartIndex}function HF(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[pr()],s=$F(t,n);YF(o,r)&&e===null&&!s&&(e=!1),e=zF(i,o,e,r),VF(i,o,e,n,s,r)}}function zF(t,e,n,r){let i=ZD(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Qm(null,t,e,n,r),n=Rc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Qm(i,t,e,n,r),o===null){let u=qF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Qm(null,t,e,u[1],r),u=Rc(u,e.attrs,r),GF(t,e,r,u))}else o=WF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function qF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ts(r)!==0)return t[ao(r)]}function GF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ao(i)]=r}function WF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Rc(r,s,n)}return Rc(r,e.attrs,n)}function Qm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Rc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Rc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),bD(t,s,n?!0:e[++o]))}return t===void 0?null:t}function KF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=LF(l)?kb(u,e,n,i,Ts(l),s):void 0;if(!Jd(h)){Jd(o)||kF(l)&&(o=kb(u,null,n,i,a,s));let p=Im(pr(),n);Xk(r,s,p,i,o)}}function kb(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===In&&(g=p?$t:void 0);let y=p?md(g,r):h===r?g:void 0;if(l&&!Jd(y)&&(y=md(u,r)),Jd(y)&&(a=y,s))return a;let T=t[i+1];i=s?ao(T):Ts(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=md(u,r))}return a}function Jd(t){return t!==void 0}function QF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dr(rh(t)))),t}function YF(t,e){return(t.flags&(e?8:16))!==0}function L(t,e=""){let n=me(),r=Ct(),i=t+ht,o=r.firstCreatePass?uh(r,i,1,e,null):r.data[i],s=ZF(r,n,o,e,t);n[i]=s,Td()&&jy(r,n,s,o),vs(o,!1)}var ZF=(t,e,n,r,i)=>(Sd(!0),lk(e[Me],r));function JF(t,e,n,r=""){return yr(t,to(),n)?e+Ki(n)+r:In}function XF(t,e,n,r,i,o=""){let s=GD(),a=Q1(t,s,n,i);return xm(2),a?e+Ki(n)+r+Ki(i)+o:In}function Ke(t){return gt("",t),Ke}function gt(t,e,n){let r=me(),i=JF(r,t,e,n);return i!==In&&m0(r,pr(),i),gt}function ph(t,e,n,r,i){let o=me(),s=XF(o,t,e,n,r,i);return s!==In&&m0(o,pr(),s),ph}function m0(t,e,n){let r=Im(e,t);dk(t[Me],r,n)}function Er(t,e,n){Vm(e)&&(e=e());let r=me(),i=to();if(yr(r,i,e)){let o=Ct(),s=bd();i1(s,r,t,e,r[Me],n)}return Er}function ai(t,e){let n=Vm(t);return n&&t.set(e),n}function Ir(t,e){let n=me(),r=Ct(),i=Dt();return g0(r,n,n[Me],i,t,e),Ir}function eL(t,e,n){let r=Ct();if(r.firstCreatePass){let i=kn(t);Iy(n,r.data,r.blueprint,i,!0),Iy(e,r.data,r.blueprint,i,!1)}}function Iy(t,e,n,r,i){if(t=dt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Iy(t[o],e,n,r,i);else{let o=Ct(),s=me(),a=Dt(),u=qi(t)?t:dt(t.provide),l=mm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(qi(t)||!t.multi){let y=new ro(l,i,De,null),T=Zm(u,e,i?h:h+g,p);T===-1?(Xm(Vd(a,s),o,u),Ym(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=Zm(u,e,h+g,p),T=Zm(u,e,h,h+g),N=y>=0&&n[y],R=T>=0&&n[T];if(i&&!R||!i&&!N){Xm(Vd(a,s),o,u);let O=rL(i?nL:tL,n.length,i,r,l,t);!i&&R&&(n[T].providerFactory=O),Ym(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=y0(n[i?T:y],l,!i&&r);Ym(o,t,y>-1?y:T,O)}!i&&r&&R&&n[T].componentProviders++}}}function Ym(t,e,n,r){let i=qi(e),o=ND(e);if(i||o){let u=(o?dt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function y0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Zm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tL(t,e,n,r,i){return wy(this.multi,[])}function nL(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=jd(r,r[Z],this.providerFactory.index,i);s=u.slice(0,a),wy(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],wy(o,s);return s}function wy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function rL(t,e,n,r,i,o){let s=new ro(t,n,De,null);return s.multi=[],s.index=e,s.componentProviders=0,y0(s,i,r&&!n),s}function Ns(t,e=[]){return n=>{n.providersResolver=(r,i)=>eL(r,i?i(t):t,e)}}var Xd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Yy=(()=>{class t{compileModuleSync(n){return new Kd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=hm(n),o=ET(i.declarations).reduce((s,a)=>{let u=Jr(a);return u&&s.push(new Ds(u)),s},[]);return new Xd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var iL=(()=>{class t{zone=M(we);changeDetectionScheduler=M(Qr);applicationRef=M(oi);applicationErrorHandler=M(qt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),v0=new H("",{factory:()=>!1});function Zy({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new we(ae(k({},Xy()),{scheduleInRootZone:n})),[{provide:we,useFactory:t},{provide:Zr,multi:!0,useFactory:()=>{let r=M(iL,{optional:!0});return()=>r.initialize()}},{provide:Zr,multi:!0,useFactory:()=>{let r=M(oL);return()=>{r.initialize()}}},e===!0?{provide:jm,useValue:!0}:[],{provide:Um,useValue:n??bT},{provide:qt,useFactory:()=>{let r=M(we),i=M(Ge),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Mn),o.handleError(s))})}}}]}function Jy(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Zy({ngZoneFactory:()=>{let i=Xy(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ii("NgZone_CoalesceEvent"),new we(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return pn([{provide:v0,useValue:!0},{provide:Ic,useValue:!1},r])}function Xy(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var oL=(()=>{class t{subscription=new Le;initialized=!1;zone=M(we);pendingTasks=M(Ln);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _0=(()=>{class t{applicationErrorHandler=M(qt);appRef=M(oi);taskService=M(Ln);ngZone=M(we);zonelessEnabled=M(Ic);tracing=M(Mc,{optional:!0});disableScheduling=M(jm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($d):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Um,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Hd||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?yb:TT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($d+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sL(){return typeof $localize<"u"&&$localize.locale||Vc}var ev=new H("",{providedIn:"root",factory:()=>M(ev,{optional:!0,skipSelf:!0})||sL()});function mt(t){return gD(t)}function Ms(t,e){return Fl(t,e?.equal)}var E0=class{[wt];constructor(e){this[wt]=e}destroy(){this[wt].destroy()}};var C0=Symbol("InputSignalNode#UNSET"),IL=ae(k({},Ll),{transformFn:void 0,applyValueToInputSignal(t,e){Zo(t,e)}});function D0(t,e){let n=Object.create(IL);n.value=t,n.transformFn=e?.transform;function r(){if(Ko(n),n.value===C0){let i=null;throw new $(-950,i)}return n.value}return r[wt]=n,r}var mh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Nc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},wL=new H("");wL.__NG_ELEMENT_ID__=t=>{let e=Dt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new $(204,!1)};function I0(t,e){return D0(t,e)}function CL(t){return D0(C0,t)}var b0=(I0.required=CL,I0);var tv=new H(""),DL=new H("");function jc(t){return!t.moduleRef}function bL(t){let e=jc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(we);return n.run(()=>{jc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(qt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),jc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(tv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(tv);s.add(o),t.moduleRef.onDestroy(()=>{Dc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return SL(r,n,()=>{let o=e.get(Ln),s=o.add(),a=e.get(Ky);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(ev,Vc);if(p0(u||Vc),!e.get(DL,!0))return jc(t)?e.get(oi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(jc(t)){let h=e.get(oi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return TL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var TL;function SL(t,e,n){try{let r=n();return ho(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var gh=null;function AL(t=[],e){return et.create({name:e,providers:[{provide:hc,useValue:"platform"},{provide:tv,useValue:new Set([()=>gh=null])},...t]})}function RL(t=[]){if(gh)return gh;let e=AL(t);return gh=e,d0(),NL(e),e}function NL(t){let e=t.get(th,null);tt(t,()=>{e?.forEach(n=>n())})}function nv(){return!1}var xs=(()=>{class t{static __NG_ELEMENT_ID__=ML}return t})();function ML(t){return xL(Dt(),me(),(t&16)===16)}function xL(t,e,n){if(ei(t)&&!n){let r=an(t.index,e);return new oo(r,r)}else if(t.type&175){let r=e[Ht];return new oo(r,e)}return null}function T0(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Se(8);try{let o=i?.injector??RL(r),s=[Zy({}),{provide:Qr,useExisting:_0},ib,...n||[]],a=new Ac({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return bL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Se(9)}}function fo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var R0=null;function un(){return R0}function rv(t){R0??=t}var Bc=class{},iv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>M(N0),providedIn:"platform"})}return t})();var N0=(()=>{class t extends iv{_location;_history;_doc=M(ft);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return un().getBaseHref(this._doc)}onPopState(n){let r=un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function M0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function S0(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ci(t){return t&&t[0]!=="?"?`?${t}`:t}var Ps=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>M(P0),providedIn:"root"})}return t})(),x0=new H(""),P0=(()=>{class t extends Ps{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return M0(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ci(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ci(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ci(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(se(iv),se(x0,8))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Os=(()=>{class t{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=kL(S0(A0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ci(r))}normalize(n){return t.stripTrailingSlash(OL(this._basePath,A0(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ci(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ci(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ci;static joinWithSlash=M0;static stripTrailingSlash=S0;static \u0275fac=function(r){return new(r||t)(se(Ps))};static \u0275prov=z({token:t,factory:()=>PL(),providedIn:"root"})}return t})();function PL(){return new Os(se(Ps))}function OL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function A0(t){return t.replace(/\/index.html$/,"")}function kL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Bn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=_r({type:t});static \u0275inj=xn({})}return t})();function ov(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var $c=class{};var O0="browser";var Hc=class{_doc;constructor(e){this._doc=e}manager},yh=(()=>{class t extends Hc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(se(ft))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),_h=new H(""),lv=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof yh));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof yh);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(se(_h),se(we))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),sv="ng-app-id";function k0(t){for(let e of t)e.remove()}function F0(t,e){let n=e.createElement("style");return n.textContent=t,n}function VL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${sv}="${e}"],link[${sv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(sv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function cv(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var dv=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,VL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,F0);r?.forEach(i=>this.addUsage(i,this.external,cv))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(k0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])k0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,F0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,cv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(se(ft),se(eh),se(nh,8),se(uo))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),av={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hv=/%COMP%/g;var V0="%COMP%",jL=`_nghost-${V0}`,UL=`_ngcontent-${V0}`,BL=!0,$L=new H("",{providedIn:"root",factory:()=>BL});function HL(t){return UL.replace(hv,t)}function zL(t){return jL.replace(hv,t)}function j0(t,e){return e.map(n=>n.replace(hv,t))}var fv=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new zc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof vh?i.applyToHost(n):i instanceof qc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case gr.Emulated:o=new vh(u,l,r,this.appId,h,s,a,p,g);break;case gr.ShadowDom:return new uv(u,l,n,r,s,a,this.nonce,p,g);default:o=new qc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(se(lv),se(dv),se(eh),se($L),se(ft),se(we),se(nh),se(Mc,8))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),zc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(av[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(L0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(L0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=av[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=av[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(mr.DashCase|mr.Important)?e.style.setProperty(n,r,i&mr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&mr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=un().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function L0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var uv=class extends zc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=j0(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=cv(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qc=class extends zc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?j0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&io.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},vh=class extends qc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=HL(h),this.hostAttr=zL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Eh=class t extends Bc{supportsDOMEvents=!0;static makeCurrent(){rv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qL();return n==null?null:GL(n)}resetBaseElement(){Gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ov(document.cookie,e)}},Gc=null;function qL(){return Gc=Gc||document.head.querySelector("base"),Gc?Gc.getAttribute("href"):null}function GL(t){return new URL(t,document.baseURI).pathname}var WL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})(),U0=["alt","control","meta","shift"],KL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},B0=(()=>{class t extends Hc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>un().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),U0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=KL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),U0.forEach(s=>{if(s!==i){let a=QL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(se(ft))};static \u0275prov=z({token:t,factory:t.\u0275fac})}return t})();function pv(t,e,n){let r=k({rootComponent:t,platformRef:n?.platformRef},YL(e));return T0(r)}function YL(t){return{appProviders:[...tV,...t?.providers??[]],platformProviders:eV}}function ZL(){Eh.makeCurrent()}function JL(){return new Mn}function XL(){return Ty(document),document}var eV=[{provide:uo,useValue:O0},{provide:th,useValue:ZL,multi:!0},{provide:ft,useFactory:XL}];var tV=[{provide:hc,useValue:"root"},{provide:Mn,useFactory:JL},{provide:_h,useClass:yh,multi:!0,deps:[ft]},{provide:_h,useClass:B0,multi:!0,deps:[ft]},fv,dv,lv,{provide:so,useExisting:fv},{provide:$c,useClass:WL},[]];var $0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(se(ft))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var te="primary",au=Symbol("RouteTitle"),_v=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function mo(t){return new _v(t)}function Y0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function rV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$n(t[n],e[n]))return!1;return!0}function $n(t,e){let n=t?Ev(t):void 0,r=e?Ev(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Z0(t[i],e[i]))return!1;return!0}function Ev(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Z0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function J0(t){return t.length>0?t[t.length-1]:null}function Cr(t){return kg(t)?t:ho(t)?ke(Promise.resolve(t)):Y(t)}var iV={exact:eS,subset:tS},X0={exact:oV,subset:sV,ignored:()=>!0};function H0(t,e,n){return iV[n.paths](t.root,e.root,n.matrixParams)&&X0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function oV(t,e){return $n(t,e)}function eS(t,e,n){if(!po(t.segments,e.segments)||!Ch(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!eS(t.children[r],e.children[r],n))return!1;return!0}function sV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Z0(t[n],e[n]))}function tS(t,e,n){return nS(t,e,e.segments,n)}function nS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!po(i,n)||e.hasChildren()||!Ch(i,n,r))}else if(t.segments.length===n.length){if(!po(t.segments,n)||!Ch(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!tS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!po(t.segments,i)||!Ch(t.segments,i,r)||!t.children[te]?!1:nS(t.children[te],e,o,r)}}function Ch(t,e,n){return e.every((r,i)=>X0[n](t[i].parameters,r.parameters))}var zn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){return uV.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dh(this)}},ui=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=mo(this.parameters),this._parameterMap}toString(){return iS(this)}};function aV(t,e){return po(t,e)&&t.every((n,r)=>$n(n.parameters,e[r].parameters))}function po(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function cV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var cu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>new yo,providedIn:"root"})}return t})(),yo=class{parse(e){let n=new wv(e);return new zn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Wc(e.root,!0)}`,r=hV(e.queryParams),i=typeof e.fragment=="string"?`#${lV(e.fragment)}`:"";return`${n}${r}${i}`}},uV=new yo;function Dh(t){return t.segments.map(e=>iS(e)).join("/")}function Wc(t,e){if(!t.hasChildren())return Dh(t);if(e){let n=t.children[te]?Wc(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${Wc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cV(t,(r,i)=>i===te?[Wc(t.children[te],!1)]:[`${i}:${Wc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${Dh(t)}/${n[0]}`:`${Dh(t)}/(${n.join("//")})`}}function rS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ih(t){return rS(t).replace(/%3B/gi,";")}function lV(t){return encodeURI(t)}function Iv(t){return rS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bh(t){return decodeURIComponent(t)}function z0(t){return bh(t.replace(/\+/g,"%20"))}function iS(t){return`${Iv(t.path)}${dV(t.parameters)}`}function dV(t){return Object.entries(t).map(([e,n])=>`;${Iv(e)}=${Iv(n)}`).join("")}function hV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ih(n)}=${Ih(i)}`).join("&"):`${Ih(n)}=${Ih(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var fV=/^[^\/()?;#]+/;function gv(t){let e=t.match(fV);return e?e[0]:""}var pV=/^[^\/()?;=#]+/;function gV(t){let e=t.match(pV);return e?e[0]:""}var mV=/^[^=?&#]+/;function yV(t){let e=t.match(mV);return e?e[0]:""}var vV=/^[^&#]+/;function _V(t){let e=t.match(vV);return e?e[0]:""}var wv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ve(e,n)),r}parseSegment(){let e=gv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new ui(bh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=gV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=gv(this.remaining);i&&(r=i,this.capture(r))}e[bh(n)]=bh(r)}parseQueryParam(e){let n=yV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=_V(this.remaining);s&&(r=s,this.capture(r))}let i=z0(n),o=z0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();n[o??te]=Object.keys(s).length===1&&s[te]?s[te]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function oS(t){return t.segments.length>0?new ve([],{[te]:t}):t}function sS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=sS(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return EV(n)}function EV(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ve(t.segments.concat(e.segments),e.children)}return t}function li(t){return t instanceof zn}function aS(t,e,n=null,r=null){let i=cS(t);return uS(i,e,n,r)}function cS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=oS(r);return e??i}function uS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return mv(i,i,i,n,r);let o=IV(e);if(o.toRoot())return mv(i,i,new ve([],{}),n,r);let s=wV(o,i,t),a=s.processChildren?Qc(s.segmentGroup,s.index,o.commands):dS(s.segmentGroup,s.index,o.commands);return mv(i,s.segmentGroup,a,n,r)}function Th(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Jc(t){return typeof t=="object"&&t!=null&&t.outlets}function mv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=lS(t,e,n);let a=oS(sS(s));return new zn(a,o,i)}function lS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=lS(o,e,n)}),new ve(t.segments,r)}var Sh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Th(r[0]))throw new $(4003,!1);let i=r.find(Jc);if(i&&i!==J0(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function IV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sh(n,e,r)}var Ls=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function wV(t,e,n){if(t.isAbsolute)return new Ls(e,!0,0);if(!n)return new Ls(e,!1,NaN);if(n.parent===null)return new Ls(n,!0,0);let r=Th(t.commands[0])?0:1,i=n.segments.length-1+r;return CV(n,i,t.numberOfDoubleDots)}function CV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Ls(r,!1,i-o)}function DV(t){return Jc(t[0])?t[0].outlets:{[te]:t}}function dS(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return Qc(t,e,n);let r=bV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[te]=new ve(t.segments.slice(r.pathIndex),t.children),Qc(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?Cv(t,e,n):r.match?Qc(t,0,i):Cv(t,e,n)}function Qc(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=DV(n),i={};if(Object.keys(r).some(o=>o!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let o=Qc(t.children[te],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=dS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function bV(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Jc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!G0(u,l,s))return o;r+=2}else{if(!G0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Jc(o)){let u=TV(o.outlets);return new ve(r,u)}if(i===0&&Th(n[0])){let u=t.segments[e];r.push(new ui(u.path,q0(n[0]))),i++;continue}let s=Jc(o)?o.outlets[te]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Th(a)?(r.push(new ui(s,q0(a))),i+=2):(r.push(new ui(s,{})),i++)}return new ve(r,{})}function TV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cv(new ve([],{}),0,r))}),e}function q0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function G0(t,e,n){return t==n.path&&$n(e,n.parameters)}var Yc="imperative",it=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(it||{}),Zt=class{id;url;constructor(e,n){this.id=e,this.url=n}},vo=class extends Zt{type=it.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends Zt{urlAfterRedirects;type=it.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Mt||{}),Xc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Xc||{}),Hn=class extends Zt{reason;code;type=it.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wr=class extends Zt{reason;code;type=it.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},js=class extends Zt{error;target;type=it.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eu=class extends Zt{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class extends Zt{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rh=class extends Zt{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nh=class extends Zt{urlAfterRedirects;state;type=it.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mh=class extends Zt{urlAfterRedirects;state;type=it.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xh=class{route;type=it.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ph=class{route;type=it.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Oh=class{snapshot;type=it.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kh=class{snapshot;type=it.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fh=class{snapshot;type=it.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lh=class{snapshot;type=it.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var tu=class{},Us=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function SV(t){return!(t instanceof tu)&&!(t instanceof Us)}function AV(t,e){return t.providers&&!t._injector&&(t._injector=Oc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Cn(t){return t.outlet||te}function RV(t,e){let n=t.filter(r=>Cn(r)===e);return n.push(...t.filter(r=>Cn(r)!==e)),n}function Hs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Vh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zs(this.rootInjector)}},zs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Vh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(se(Ge))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Dv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Dv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=bv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bv(e,this._root).map(n=>n.value)}};function Dv(t,e){if(t===e.value)return e;for(let n of e.children){let r=Dv(t,n);if(r)return r}return null}function bv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=bv(t,n);if(r.length)return r.unshift(e),r}return[]}var Yt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var nu=class extends jh{snapshot;constructor(e,n){super(e),this.snapshot=n,Pv(this,e)}toString(){return this.snapshot.toString()}};function hS(t){let e=NV(t),n=new lt([new ui("",{})]),r=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new Dn(n,r,o,s,i,te,t,e.root);return a.snapshot=e.root,new nu(new Yt(a,[]),e)}function NV(t){let e={},n={},r={},o=new go([],e,r,"",n,te,t,null,{});return new ru("",new Yt(o,[]))}var Dn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[au]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>mo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>mo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Uh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&pS(i)&&(r.resolve[au]=i.title),r}var go=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[au]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ru=class extends jh{url;constructor(e,n){super(n),this.url=e,Pv(this,n)}toString(){return fS(this._root)}};function Pv(t,e){e.value._routerState=t,e.children.forEach(n=>Pv(t,n))}function fS(t){let e=t.children.length>0?` { ${t.children.map(fS).join(", ")} } `:"";return`${t.value}${e}`}function yv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$n(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),$n(e.params,n.params)||t.paramsSubject.next(n.params),rV(e.url,n.url)||t.urlSubject.next(n.url),$n(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Tv(t,e){let n=$n(t.params,e.params)&&aV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Tv(t.parent,e.parent))}function pS(t){return typeof t.title=="string"||t.title===null}var gS=new H(""),uu=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=b0();parentContexts=M(zs);location=M(Pc);changeDetector=M(xs);inputBinder=M(zh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Sv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=pt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vr]})}return t})(),Sv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Dn?this.route:e===zs?this.childContexts:e===gS?this.outletData:this.parent.get(e,n)}},zh=new H("");var Ov=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Wt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Rs(0,"router-outlet")},dependencies:[uu],encapsulation:2})}return t})();function kv(t){let e=t.children&&t.children.map(kv),n=e?ae(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=Ov),n}function MV(t,e,n){let r=iu(t,e._root,n?n._root:void 0);return new nu(r,e)}function iu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=xV(t,e,n);return new Yt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>iu(t,a)),s}}let r=PV(e.value),i=e.children.map(o=>iu(t,o));return new Yt(r,i)}}function xV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return iu(t,r,i);return iu(t,r)})}function PV(t){return new Dn(new lt(t.url),new lt(t.params),new lt(t.queryParams),new lt(t.fragment),new lt(t.data),t.outlet,t.component,t)}var Bs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},mS="ngNavigationCancelingError";function Bh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=li(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yS(!1,Mt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function yS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[mS]=!0,n.cancellationCode=e,n}function OV(t){return vS(t)&&li(t.url)}function vS(t){return!!t&&t[mS]}var kV=(t,e,n,r)=>ue(i=>(new Av(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Av=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),yv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Fs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Fs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Lh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(yv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),yv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$h=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function FV(t,e,n){let r=t._root,i=e?e._root:null;return Kc(r,i,n,[r.value])}function LV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!tm(t)?t:e.get(t):r}function Kc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fs(e);return t.children.forEach(s=>{VV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Zc(a,n.getContext(s),i)),i}function VV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=jV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $h(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Kc(t,e,a?a.children:null,r,i):Kc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Vs(a.outlet.component,s))}else s&&Zc(e,a,i),i.canActivateChecks.push(new $h(r)),o.component?Kc(t,null,a?a.children:null,r,i):Kc(t,null,n,r,i);return i}function jV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!po(t.url,e.url);case"pathParamsOrQueryParamsChange":return!po(t.url,e.url)||!$n(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tv(t,e)||!$n(t.queryParams,e.queryParams);case"paramsChange":default:return!Tv(t,e)}}function Zc(t,e,n){let r=Fs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Zc(s,e.children.getContext(o),n):Zc(s,null,n):Zc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vs(e.outlet.component,i)):n.canDeactivateChecks.push(new Vs(null,i)):n.canDeactivateChecks.push(new Vs(null,i))}function lu(t){return typeof t=="function"}function UV(t){return typeof t=="boolean"}function BV(t){return t&&lu(t.canLoad)}function $V(t){return t&&lu(t.canActivate)}function HV(t){return t&&lu(t.canActivateChild)}function zV(t){return t&&lu(t.canDeactivate)}function qV(t){return t&&lu(t.canMatch)}function _S(t){return t instanceof ar||t?.name==="EmptyError"}var wh=Symbol("INITIAL_VALUE");function $s(){return Ft(t=>sd(t.map(e=>e.pipe(cr(1),jg(wh)))).pipe(ue(e=>{for(let n of e)if(n!==!0){if(n===wh)return wh;if(n===!1||GV(n))return n}return!0}),nn(e=>e!==wh),cr(1)))}function GV(t){return li(t)||t instanceof Bs}function WV(t,e){return Xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(ae(k({},n),{guardsResult:!0})):KV(s,r,i,t).pipe(Xe(a=>a&&UV(a)?QV(r,o,t,e):Y(a)),ue(a=>ae(k({},n),{guardsResult:a})))})}function KV(t,e,n,r){return ke(t).pipe(Xe(i=>e2(i.component,i.route,n,e,r)),ur(i=>i!==!0,!0))}function QV(t,e,n,r){return ke(e).pipe(ls(i=>us(ZV(i.route.parent,r),YV(i.route,r),XV(t,i.path,n),JV(t,i.route,n))),ur(i=>i!==!0,!0))}function YV(t,e){return t!==null&&e&&e(new Fh(t)),Y(!0)}function ZV(t,e){return t!==null&&e&&e(new Oh(t)),Y(!0)}function JV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>rc(()=>{let s=Hs(e)??n,a=qs(o,s),u=$V(a)?a.canActivate(e,t):tt(s,()=>a(e,t));return Cr(u).pipe(ur())}));return Y(i).pipe($s())}function XV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>LV(s)).filter(s=>s!==null).map(s=>rc(()=>{let a=s.guards.map(u=>{let l=Hs(s.node)??n,h=qs(u,l),p=HV(h)?h.canActivateChild(r,t):tt(l,()=>h(r,t));return Cr(p).pipe(ur())});return Y(a).pipe($s())}));return Y(o).pipe($s())}function e2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=Hs(e)??i,l=qs(a,u),h=zV(l)?l.canDeactivate(t,e,n,r):tt(u,()=>l(t,e,n,r));return Cr(h).pipe(ur())});return Y(s).pipe($s())}function t2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=qs(s,t),u=BV(a)?a.canLoad(e,n):tt(t,()=>a(e,n));return Cr(u)});return Y(o).pipe($s(),ES(r))}function ES(t){return Sg(nt(e=>{if(typeof e!="boolean")throw Bh(t,e)}),ue(e=>e===!0))}function n2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=qs(s,t),u=qV(a)?a.canMatch(e,n):tt(t,()=>a(e,n));return Cr(u)});return Y(o).pipe($s(),ES(r))}var ou=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},su=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ks(t){return cs(new ou(t))}function r2(t){return cs(new $(4e3,!1))}function i2(t){return cs(yS(!1,Mt.GuardRejected))}var Rv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[te])return r2(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,o){return o2(n,i,o).pipe(ue(s=>{if(s instanceof zn)throw new su(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new su(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new zn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function o2(t,e,n){if(typeof t=="string")return Y(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Cr(tt(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Nv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function s2(t,e,n,r,i){let o=IS(t,e,n);return o.matched?(r=AV(e,r),n2(r,e,n,i).pipe(ue(s=>s===!0?o:k({},Nv)))):Y(o)}function IS(t,e,n){if(e.path==="**")return a2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},Nv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Y0)(n,t,e);if(!i)return k({},Nv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function a2(t){return{matched:!0,parameters:t.length>0?J0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function W0(t,e,n,r){return n.length>0&&l2(t,n,r)?{segmentGroup:new ve(e,u2(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&d2(t,n,r)?{segmentGroup:new ve(t.segments,c2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function c2(t,e,n,r){let i={};for(let o of n)if(qh(t,e,o)&&!r[Cn(o)]){let s=new ve([],{});i[Cn(o)]=s}return k(k({},r),i)}function u2(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&Cn(r)!==te){let i=new ve([],{});n[Cn(r)]=i}return n}function l2(t,e,n){return n.some(r=>qh(t,e,r)&&Cn(r)!==te)}function d2(t,e,n){return n.some(r=>qh(t,e,r))}function qh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function h2(t,e,n){return e.length===0&&!t.children[n]}var Mv=class{};function f2(t,e,n,r,i,o,s="emptyOnly"){return new xv(t,e,n,r,i,s,o).recognize()}var p2=31,xv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Rv(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=W0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:n,rootSnapshot:r})=>{let i=new Yt(r,n),o=new ru("",i),s=aS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new go([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ue(r=>({children:r,rootSnapshot:n})),Gr(r=>{if(r instanceof su)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ou?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof Yt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ke(o).pipe(ls(s=>{let a=r.children[s],u=RV(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Vg((s,a)=>(s.push(...a),s)),Wr(null),Lg(),Xe(s=>{if(s===null)return ks(r);let a=wS(s);return g2(a),Y(a)}))}processSegment(e,n,r,i,o,s,a){return ke(n).pipe(ls(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Gr(l=>{if(l instanceof ou)return Y(null);throw l}))),ur(u=>!!u),Gr(u=>{if(_S(u))return h2(r,i,o)?Y(new Mv):ks(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Cn(r)!==s&&(s===te||!qh(i,o,r))?ks(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):ks(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=IS(n,i,o);if(!u)return ks(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p2&&(this.allowRedirects=!1));let y=new go(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,K0(i),Cn(i),i.component??i._loadedComponent??null,i,Q0(i)),T=Uh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ft(R=>this.applyRedirects.lineralizeSegments(i,R)),Xe(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=s2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ft(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ft(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,T=new go(g,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,K0(r),Cn(r),r.component??r._loadedComponent??null,r,Q0(r)),N=Uh(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(N.params),T.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=W0(n,g,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,T).pipe(ue(J=>new Yt(T,J)));if(l.length===0&&O.length===0)return Y(new Yt(T,[]));let G=Cn(r)===o;return this.processSegment(h,l,R,O,G?te:o,!0,T).pipe(ue(J=>new Yt(T,J instanceof Yt?[J]:[])))}))):ks(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):t2(e,n,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,n).pipe(nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):i2(n))):Y({routes:[],injector:e})}};function g2(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function m2(t){let e=t.value.routeConfig;return e&&e.path===""}function wS(t){let e=[],n=new Set;for(let r of t){if(!m2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=wS(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!n.has(r))}function K0(t){return t.data||{}}function Q0(t){return t.resolve||{}}function y2(t,e,n,r,i,o){return Xe(s=>f2(t,e,n,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>ae(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function v2(t,e){return Xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of CS(u))s.add(l);let a=0;return ke(s).pipe(ls(u=>o.has(u)?_2(u,r,t,e):(u.data=Uh(u,u.parent,t).resolve,Y(void 0))),nt(()=>a++),ds(1),Xe(u=>a===s.size?Y(n):Ot))})}function CS(t){let e=t.children.map(n=>CS(n)).flat();return[t,...e]}function _2(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!pS(i)&&(o[au]=i.title),rc(()=>(t.data=Uh(t,t.parent,n).resolve,E2(o,t,e,r).pipe(ue(s=>(t._resolvedData=s,t.data=k(k({},t.data),s),null)))))}function E2(t,e,n,r){let i=Ev(t);if(i.length===0)return Y({});let o={};return ke(i).pipe(Xe(s=>I2(t[s],e,n,r).pipe(ur(),nt(a=>{if(a instanceof Bs)throw Bh(new yo,a);o[s]=a}))),ds(1),ue(()=>o),Gr(s=>_S(s)?Ot:cs(s)))}function I2(t,e,n,r){let i=Hs(e)??r,o=qs(t,i),s=o.resolve?o.resolve(e,n):tt(i,()=>o(e,n));return Cr(s)}function vv(t){return Ft(e=>{let n=t(e);return n?ke(n).pipe(ue(()=>e)):Y(e)})}var Fv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[au]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>M(DS),providedIn:"root"})}return t})(),DS=(()=>{class t extends Fv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(se($0))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gs=new H("",{providedIn:"root",factory:()=>({})}),du=new H(""),bS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Yy);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Cr(tt(n,()=>r.loadComponent())).pipe(ue(SS),Ft(AS),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ic(()=>{this.componentLoaders.delete(r)})),o=new is(i,()=>new ze).pipe(rs());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=TS(r,this.compiler,n,this.onLoadEndListener).pipe(ic(()=>{this.childrenLoaders.delete(r)})),s=new is(o,()=>new ze).pipe(rs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TS(t,e,n,r){return Cr(tt(n,()=>t.loadChildren())).pipe(ue(SS),Ft(AS),Xe(i=>i instanceof dh||Array.isArray(i)?Y(i):ke(e.compileModuleAsync(i))),ue(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(du,[],{optional:!0,self:!0}).flat()),{routes:s.map(kv),injector:o}}))}function w2(t){return t&&typeof t=="object"&&"default"in t}function SS(t){return w2(t)?t.default:t}function AS(t){return Y(t)}var Gh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>M(C2),providedIn:"root"})}return t})(),C2=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RS=new H("");var NS=new H(""),MS=(()=>{class t{currentNavigation=cn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortWithErrorSubject=new ze;configLoader=M(bS);environmentInjector=M(Ge);destroyRef=M(ni);urlSerializer=M(cu);rootContexts=M(zs);location=M(Os);inputBindingEnabled=M(zh,{optional:!0})!==null;titleStrategy=M(Fv);options=M(Gs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Gh);createViewTransition=M(RS,{optional:!0});navigationErrorHandler=M(NS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new xh(i)),r=i=>this.events.next(new Ph(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;mt(()=>{this.transitions?.next(ae(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new lt(null),this.transitions.pipe(nn(r=>r!==null),Ft(r=>{let i=!1;return Y(r).pipe(Ft(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),Ot;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ae(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new wr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Xc.IgnoredSameUrlNavigation)),o.resolve(!1),Ot;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Y(o).pipe(Ft(u=>(this.events.next(new vo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ot:Promise.resolve(u))),y2(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new eu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new vo(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let T=hS(this.rootComponentType).snapshot;return this.currentTransition=r=ae(k({},o),{targetSnapshot:T,urlAfterRedirects:l,extras:ae(k({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),Y(r)}else return this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Xc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ot}),nt(o=>{let s=new Ah(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=ae(k({},o),{guards:FV(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),WV(this.environmentInjector,o=>this.events.next(o)),nt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Bh(this.urlSerializer,o.guardsResult);let s=new Rh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),nn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mt.GuardRejected),!1)),vv(o=>{if(o.guards.canActivateChecks.length!==0)return Y(o).pipe(nt(s=>{let a=new Nh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ft(s=>{let a=!1;return Y(s).pipe(v2(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Mt.NoDataFromResolver)}}))}),nt(s=>{let a=new Mh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),vv(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Hs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(nt(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return sd(s(o.targetSnapshot.root)).pipe(Wr(null),cr(1))}),vv(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ke(a).pipe(ue(()=>r)):Y(r)}),ue(o=>{let s=MV(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ae(k({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),nt(()=>{this.events.next(new tu)}),kV(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),cr(1),cd(new ee(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(nn(()=>!i&&!r.targetRouterState),nt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mt.Aborted)}))),nt({next:o=>{i=!0,this.lastSuccessfulNavigation=mt(this.currentNavigation),this.events.next(new qn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),cd(this.transitionAbortWithErrorSubject.pipe(nt(o=>{throw o}))),ic(()=>{i||this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Gr(o=>{if(this.destroyed)return r.resolve(!1),Ot;if(i=!0,vS(o))this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),OV(o)?this.events.next(new Us(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new js(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=tt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Bs){let{message:u,cancellationCode:l}=Bh(this.urlSerializer,a);this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Us(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ot}))}))}cancelNavigationTransition(n,r,i){let o=new Hn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=mt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function D2(t){return t!==Yc}var xS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>M(b2),providedIn:"root"})}return t})(),Hh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},b2=(()=>{class t extends Hh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=co(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PS=(()=>{class t{urlSerializer=M(cu);options=M(Gs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Os);urlHandlingStrategy=M(Gh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof zn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=hS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:()=>M(T2),providedIn:"root"})}return t})(),T2=(()=>{class t extends PS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof vo?this.updateStateMemento():n instanceof wr?this.commitTransition(r):n instanceof eu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof tu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Hn&&n.code!==Mt.SupersededByNewNavigation&&n.code!==Mt.Redirect?this.restoreHistory(r):n instanceof js?this.restoreHistory(r,!0):n instanceof qn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=co(t)))(i||t)}})();static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lv(t,e){t.events.pipe(nn(n=>n instanceof qn||n instanceof Hn||n instanceof js||n instanceof wr),ue(n=>n instanceof qn||n instanceof wr?0:(n instanceof Hn?n.code===Mt.Redirect||n.code===Mt.SupersededByNewNavigation:!1)?2:1),nn(n=>n!==2),cr(1)).subscribe(()=>{e()})}var S2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Jt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Gy);stateManager=M(PS);options=M(Gs,{optional:!0})||{};pendingTasks=M(Ln);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(MS);urlSerializer=M(cu);location=M(Os);urlHandlingStrategy=M(Gh);injector=M(Ge);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(xS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(du,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(zh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Le;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=mt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hn&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qn)this.navigated=!0;else if(r instanceof Us){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||D2(i.source)},s);this.scheduleNavigation(a,Yc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}SV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(qt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return mt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(kv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=cS(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return uS(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=li(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Yc,null,r)}navigate(n,r={skipLocationChange:!1}){return R2(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(cc(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=k({},S2):r===!1?i=k({},A2):i=r,li(n))return H0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return H0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Lv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function R2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}var Ws=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=cn(null);get href(){return mt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ze;applicationErrorHandler=M(qt);options=M(Gs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new mh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof qn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(li(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:li(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(De(Jt),De(Dn),Nc("tabindex"),De(lo),De(ri),De(Ps))};static \u0275dir=pt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&wn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&As("href",i.reactiveHref(),Ry)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fo],replaceUrl:[2,"replaceUrl","replaceUrl",fo],routerLink:"routerLink"},features:[vr]})}return t})();var M2=new H("");function Vv(t,...e){return pn([{provide:du,multi:!0,useValue:t},[],{provide:Dn,useFactory:x2,deps:[Jt]},{provide:hh,multi:!0,useFactory:P2},e.map(n=>n.\u0275providers)])}function x2(t){return t.routerState.root}function P2(){let t=M(et);return e=>{let n=t.get(oi);if(e!==n.components[0])return;let r=t.get(Jt),i=t.get(O2);t.get(k2)===1&&r.initialNavigation(),t.get(F2,null,{optional:!0})?.setUpPreloading(),t.get(M2,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var O2=new H("",{factory:()=>new ze}),k2=new H("",{providedIn:"root",factory:()=>1});var F2=new H("");var OS=()=>{};var LS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},L2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Wh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):L2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Uv;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Uv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},V2=function(t){let e=LS(t);return Wh.encodeByteArray(e,!0)},fu=function(t){return V2(t).replace(/\./g,"")},Kh=function(t){try{return Wh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $v(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var j2=()=>$v().__FIREBASE_DEFAULTS__,U2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},B2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Kh(t[1]);return e&&JSON.parse(e)},Qh=()=>{try{return OS()||j2()||U2()||B2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hv=t=>{var e,n;return(n=(e=Qh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VS=t=>{let e=Hv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zv=()=>{var t;return(t=Qh())===null||t===void 0?void 0:t.config},qv=t=>{var e;return(e=Qh())===null||e===void 0?void 0:e[`_${t}`]};var _o=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function di(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Yh(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function jS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(s)),""].join(".")}var hu={};function $2(){let t={prod:[],emulator:[]};for(let e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function H2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var kS=!1;function Zh(t,e){if(typeof window>"u"||typeof document>"u"||!di(window.location.host)||hu[t]===e||hu[t]||kS)return;hu[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=$2().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{kS=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=H2(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),G=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let J=g.element;a(J),h(R,N);let be=l();u(G,O),J.append(G,T,R,be),document.body.appendChild(J)}o?(T.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function US(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function z2(){var t;let e=(t=Qh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $S(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zS(){let t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qS(){return!z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pu(){try{return typeof indexedDB=="object"}catch{return!1}}function GS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var q2="FirebaseError",Xt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bn.prototype.create)}},bn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?G2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xt(i,a,r)}};function G2(t,e){return t.replace(W2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var W2=/\{\$([^}]+)}/g;function WS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(FS(o)&&FS(s)){if(!Gn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function FS(t){return t!==null&&typeof t=="object"}function gu(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ks(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Qs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KS(t,e){let n=new Bv(t,e);return n.subscribe.bind(n)}var Bv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");K2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jv),i.error===void 0&&(i.error=jv),i.complete===void 0&&(i.complete=jv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function K2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jv(){}var nre=14400*1e3;function $e(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Eo="[DEFAULT]";var Gv=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new _o;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y2(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Q2(t){return t===Eo?void 0:t}function Y2(t){return t.instantiationMode==="EAGER"}var Jh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Gv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Z2=[],de=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(de||{}),J2={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},X2=de.INFO,ej={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},tj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=ej[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wn=class{constructor(e){this.name=e,this._logLevel=X2,this._logHandler=tj,this._userLogHandler=null,Z2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var nj=(t,e)=>e.some(n=>t instanceof n),QS,YS;function rj(){return QS||(QS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ij(){return YS||(YS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ZS=new WeakMap,Kv=new WeakMap,JS=new WeakMap,Wv=new WeakMap,Yv=new WeakMap;function oj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Kn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ZS.set(n,t)}).catch(()=>{}),Yv.set(e,t),e}function sj(t){if(Kv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Kv.set(t,e)}var Qv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XS(t){Qv=t(Qv)}function aj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xh(this),e,...n);return JS.set(r,e.sort?e.sort():[e]),Kn(r)}:ij().includes(t)?function(...e){return t.apply(Xh(this),e),Kn(ZS.get(this))}:function(...e){return Kn(t.apply(Xh(this),e))}}function cj(t){return typeof t=="function"?aj(t):(t instanceof IDBTransaction&&sj(t),nj(t,rj())?new Proxy(t,Qv):t)}function Kn(t){if(t instanceof IDBRequest)return oj(t);if(Wv.has(t))return Wv.get(t);let e=cj(t);return e!==t&&(Wv.set(t,e),Yv.set(e,t)),e}var Xh=t=>Yv.get(t);function tA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Kn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Kn(s.result),u.oldVersion,u.newVersion,Kn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var uj=["get","getKey","getAll","getAllKeys","count"],lj=["put","add","delete","clear"],Zv=new Map;function eA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zv.get(e))return Zv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=lj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||uj.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Zv.set(e,o),o}XS(t=>ae(k({},t),{get:(e,n,r)=>eA(e,n)||t.get(e,n,r),has:(e,n)=>!!eA(e,n)||t.has(e,n)}));var Xv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function dj(t){let e=t.getComponent();return e?.type==="VERSION"}var e_="@firebase/app",nA="0.13.2";var Dr=new Wn("@firebase/app"),hj="@firebase/app-compat",fj="@firebase/analytics-compat",pj="@firebase/analytics",gj="@firebase/app-check-compat",mj="@firebase/app-check",yj="@firebase/auth",vj="@firebase/auth-compat",_j="@firebase/database",Ej="@firebase/data-connect",Ij="@firebase/database-compat",wj="@firebase/functions",Cj="@firebase/functions-compat",Dj="@firebase/installations",bj="@firebase/installations-compat",Tj="@firebase/messaging",Sj="@firebase/messaging-compat",Aj="@firebase/performance",Rj="@firebase/performance-compat",Nj="@firebase/remote-config",Mj="@firebase/remote-config-compat",xj="@firebase/storage",Pj="@firebase/storage-compat",Oj="@firebase/firestore",kj="@firebase/ai",Fj="@firebase/firestore-compat",Lj="firebase",Vj="11.10.0";var t_="[DEFAULT]",jj={[e_]:"fire-core",[hj]:"fire-core-compat",[pj]:"fire-analytics",[fj]:"fire-analytics-compat",[mj]:"fire-app-check",[gj]:"fire-app-check-compat",[yj]:"fire-auth",[vj]:"fire-auth-compat",[_j]:"fire-rtdb",[Ej]:"fire-data-connect",[Ij]:"fire-rtdb-compat",[wj]:"fire-fn",[Cj]:"fire-fn-compat",[Dj]:"fire-iid",[bj]:"fire-iid-compat",[Tj]:"fire-fcm",[Sj]:"fire-fcm-compat",[Aj]:"fire-perf",[Rj]:"fire-perf-compat",[Nj]:"fire-rc",[Mj]:"fire-rc-compat",[xj]:"fire-gcs",[Pj]:"fire-gcs-compat",[Oj]:"fire-fst",[Fj]:"fire-fst-compat",[kj]:"fire-vertex","fire-js":"fire-js",[Lj]:"fire-js-all"};var mu=new Map,Uj=new Map,n_=new Map;function rA(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){let e=t.name;if(n_.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;n_.set(e,t);for(let n of mu.values())rA(n,t);for(let n of Uj.values())rA(n,t);return!0}function Ys(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vt(t){return t==null?!1:t.settings!==void 0}var Bj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new bn("app","Firebase",Bj);var r_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}};var fi=Vj;function s_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:t_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw hi.create("bad-app-name",{appName:String(i)});if(n||(n=zv()),!n)throw hi.create("no-options");let o=mu.get(i);if(o){if(Gn(n,o.options)&&Gn(r,o.config))return o;throw hi.create("duplicate-app",{appName:i})}let s=new Jh(i);for(let u of n_.values())s.addComponent(u);let a=new r_(n,r,s);return mu.set(i,a),a}function Io(t=t_){let e=mu.get(t);if(!e&&t===t_&&zv())return s_();if(!e)throw hi.create("no-app",{appName:t});return e}function ef(){return Array.from(mu.values())}function Ve(t,e,n){var r;let i=(r=jj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(a.join(" "));return}Tn(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var $j="firebase-heartbeat-database",Hj=1,yu="firebase-heartbeat-store",Jv=null;function aA(){return Jv||(Jv=tA($j,Hj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),Jv}function zj(t){return v(this,null,function*(){try{let n=(yield aA()).transaction(yu),r=yield n.objectStore(yu).get(cA(t));return yield n.done,r}catch(e){if(e instanceof Xt)Dr.warn(e.message);else{let n=hi.create("idb-get",{originalErrorMessage:e?.message});Dr.warn(n.message)}}})}function iA(t,e){return v(this,null,function*(){try{let r=(yield aA()).transaction(yu,"readwrite");yield r.objectStore(yu).put(e,cA(t)),yield r.done}catch(n){if(n instanceof Xt)Dr.warn(n.message);else{let r=hi.create("idb-set",{originalErrorMessage:n?.message});Dr.warn(r.message)}}})}function cA(t){return`${t.name}!${t.options.appId}`}var qj=1024,Gj=30,i_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new o_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Gj){let s=Kj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=oA(),{heartbeatsToSend:r,unsentEntries:i}=Wj(this._heartbeatsCache.heartbeats),o=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Dr.warn(n),""}})}};function oA(){return new Date().toISOString().substring(0,10)}function Wj(t,e=qj){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var o_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return pu()?GS().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield zj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function sA(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}function Kj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Qj(t){Tn(new xt("platform-logger",e=>new Xv(e),"PRIVATE")),Tn(new xt("heartbeat",e=>new i_(e),"PRIVATE")),Ve(e_,nA,t),Ve(e_,nA,"esm2017"),Ve("fire-js","")}Qj("");var Yj="firebase",Zj="11.10.0";Ve(Yj,Zj,"app");function uA(t){t===void 0&&(t=M(et));let e=t.get(_s);return n=>new ee(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var pi=new $i("ANGULARFIRE2_VERSION");function vu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Js=(t,e)=>{let n=e?[e]:ef(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Zs=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Zs||{}),lA=nv()&&typeof Zone<"u"?Zs.WARN:Zs.SILENT;var tf=class{zone;delegate;constructor(e,n=Pg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},gi=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(we);this.outsideAngular=n.runOutsideAngular(()=>new tf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new tf(typeof Zone>"u"?void 0:Zone.current,xg))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dA=!1;function Jj(t,e){!dA&&(lA>Zs.SILENT||nv())&&(dA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),lA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function Xj(t){let e=M(we,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function wo(t){let e=M(we,{optional:!0});return e?e.run(()=>t()):t()}var eU=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),tt(n,()=>wo(()=>t.apply(void 0,r)))),He=(t,e,n)=>(n||=e?Zs.WARN:Zs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(gi),s=M(_s),a=M(Ge)}catch{return Jj(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=wo(()=>s.add())),i[l]=eU(i[l],r,a));let u=Xj(()=>t.apply(this,i));return e?u instanceof ee?u.pipe(qr(o.outsideAngular),zr(o.insideAngular),uA(a)):u instanceof Promise?wo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>tt(a,()=>wo(()=>h(g))),g=>tt(a,()=>wo(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:wo(()=>u):u instanceof ee?u.pipe(qr(o.outsideAngular),zr(o.insideAngular)):wo(()=>u)});var br=class{constructor(e){return e}},Co=class{constructor(){return ef()}};function tU(t){return t&&t.length===1?t[0]:new br(Io())}var a_=new H("angularfire2._apps"),nU={provide:br,useFactory:tU,deps:[[new Gt,a_]]},rU={provide:Co,deps:[[new Gt,a_]]};function iU(t){return(e,n)=>{let r=n.get(uo);Ve("angularfire",pi.full,"core"),Ve("angularfire",pi.full,"app"),Ve("angular",Jg.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new br(i)}}function hA(t,...e){return pn([nU,rU,{provide:a_,useFactory:iU(t),multi:!0,deps:[we,et,gi,...e]}])}var fA=He(s_,!0);var oU=new Map,sU={activated:!1,tokenObservers:[]},aU={initialized:!1,enabled:!1};function Sn(t){return oU.get(t)||Object.assign({},sU)}function yA(){return aU}var cU="https://content-firebaseappcheck.googleapis.com/v1";var uU="exchangeDebugToken",pA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},oie=1440*60*1e3;var l_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new _o,this.pending.promise.catch(n=>{}),yield lU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new _o,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function lU(t){return new Promise(e=>{setTimeout(e,t)})}var dU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},mi=new bn("appCheck","AppCheck",dU);function vA(t){if(!Sn(t).activated)throw mi.create("use-before-activation",{appName:t.name})}function _A(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw mi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw mi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw mi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function EA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${cU}/projects/${n}/apps/${r}:${uU}?key=${i}`,body:{debug_token:e}}}var hU="firebase-app-check-database",fU=1,d_="firebase-app-check-store";var nf=null;function pU(){return nf||(nf=new Promise((t,e)=>{try{let n=indexedDB.open(hU,fU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(d_,{keyPath:"compositeKey"})}}}catch(n){e(mi.create("storage-open",{originalErrorMessage:n?.message}))}}),nf)}function gU(t,e){return mU(yU(t),e)}function mU(t,e){return v(this,null,function*(){let r=(yield pU()).transaction(d_,"readwrite"),o=r.objectStore(d_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(mi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function yU(t){return`${t.options.appId}-${t.name}`}var _u=new Wn("@firebase/app-check");function c_(t,e){return pu()?gU(t,e).catch(n=>{_u.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function IA(){return yA().enabled}function wA(){return v(this,null,function*(){let t=yA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vU={error:"UNKNOWN_ERROR"};function _U(t){return Wh.encodeString(JSON.stringify(t),!1)}function h_(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;vA(r);let i=Sn(r),o=i.token,s;if(o&&!Eu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Eu(l)?o=l:yield c_(r,void 0))}if(!e&&o&&Eu(o))return{token:o.token};let a=!1;if(IA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=_A(EA(r,yield wA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield c_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?_u.warn(l.message):n&&_u.error(l),u_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Sn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?_u.warn(l.message):n&&_u.error(l),s=l}let u;return o?s?Eu(o)?u={token:o.token,internalError:s}:u=u_(s):(u={token:o.token},i.token=o,yield c_(r,o)):u=u_(s),a&&CU(r,u),u})}function EU(t){return v(this,null,function*(){let e=t.app;vA(e);let{provider:n}=Sn(e);if(IA()){let r=yield wA(),{token:i}=yield _A(EA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function IU(t,e,n,r){let{app:i}=t,o=Sn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Eu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),gA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gA(t))}function CA(t,e){let n=Sn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function gA(t){let{app:e}=t,n=Sn(e),r=n.tokenRefresher;r||(r=wU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function wU(t){let{app:e}=t;return new l_(()=>v(null,null,function*(){let n=Sn(e),r;if(n.token?r=yield h_(t,!0):r=yield h_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Sn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},pA.RETRIAL_MIN_WAIT,pA.RETRIAL_MAX_WAIT)}function CU(t,e){let n=Sn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Eu(t){return t.expireTimeMillis-Date.now()>0}function u_(t){return{token:_U(vU),error:t}}var f_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Sn(this.app);for(let n of e)CA(this.app,n.next);return Promise.resolve()}};function DU(t,e){return new f_(t,e)}function bU(t){return{getToken:e=>h_(t,e),getLimitedUseToken:()=>EU(t),addTokenListener:e=>IU(t,"INTERNAL",e),removeTokenListener:e=>CA(t.app,e)}}var TU="@firebase/app-check",SU="0.10.1";var AU="app-check",mA="app-check-internal";function RU(){Tn(new xt(AU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return DU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(mA).initialize()})),Tn(new xt(mA,t=>{let e=t.getProvider("app-check").getImmediate();return bU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(TU,SU)}RU();var NU="app-check";var Xs=class{constructor(){return Js(NU)}};var MU=["localhost","0.0.0.0","127.0.0.1"],vie=typeof window<"u"&&MU.includes(window.location.hostname);function jA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var UA=jA,BA=new bn("auth","Firebase",jA());var uf=new Wn("@firebase/auth");function xU(t,...e){uf.logLevel<=de.WARN&&uf.warn(`Auth (${fi}): ${t}`,...e)}function of(t,...e){uf.logLevel<=de.ERROR&&uf.error(`Auth (${fi}): ${t}`,...e)}function Yn(t,...e){throw V_(t,...e)}function Do(t,...e){return V_(t,...e)}function $A(t,e,n){let r=Object.assign(Object.assign({},UA()),{[e]:n});return new bn("auth","Firebase",r).create(e,{appName:t.name})}function Ar(t){return $A(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return BA.create(t,...e)}function Q(t,e,...n){if(!t)throw V_(e,...n)}function Tr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw of(e),new Error(e)}function _i(t,e){t||Tr(e)}function y_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PU(){return DA()==="http:"||DA()==="https:"}function DA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function OU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PU()||$S()||"connection"in navigator)?navigator.onLine:!0}function kU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var bo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=US()||HS()}get(){return OU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function j_(t,e){_i(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var lf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var FU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var LU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VU=new bo(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ii(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return HA(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=gu(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return BS()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&di(t.emulatorConfig.host)&&(y.credentials="include"),lf.fetch()(yield zA(t,t.config.apiHost,n,p),y)}))})}function HA(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},FU),e);try{let i=new v_(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw rf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw $A(t,h,l);Yn(t,h)}}catch(i){if(i instanceof Xt)throw i;Yn(t,"network-request-failed",{message:String(i)})}})}function Ru(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Ii(t,e,n,r,i);return"mfaPendingCredential"in l&&Yn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function zA(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?j_(t.config,i):`${t.config.apiScheme}://${i}`;return LU.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function jU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var v_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Do(this.auth,"network-request-failed")),VU.get())})}};function rf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Do(t,e,r);return i.customData._tokenResponse=n,i}function bA(t){return t!==void 0&&t.enterprise!==void 0}var __=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function UU(t,e){return v(this,null,function*(){return Ii(t,"GET","/v2/recaptchaConfig",Ei(t,e))})}function BU(t,e){return v(this,null,function*(){return Ii(t,"POST","/v1/accounts:delete",e)})}function df(t,e){return v(this,null,function*(){return Ii(t,"POST","/v1/accounts:lookup",e)})}function wu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function U_(t,e=!1){return v(this,null,function*(){let n=$e(t),r=yield n.getIdToken(e),i=B_(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:wu(p_(i.auth_time)),issuedAtTime:wu(p_(i.iat)),expirationTime:wu(p_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function p_(t){return Number(t)*1e3}function B_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kh(n);return i?JSON.parse(i):(of("Failed to decode base64 JWT payload"),null)}catch(i){return of("Caught error parsing JWT payload as JSON",i?.toString()),null}}function TA(t){let e=B_(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Du(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Xt&&$U(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function $U({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var E_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hf(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Du(t,df(n,{idToken:r}));Q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?qA(o.providerUserInfo):[],a=HU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function $_(t){return v(this,null,function*(){let e=$e(t);yield hf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function HU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function qA(t){return t.map(e=>{var{providerId:n}=e,r=Og(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function zU(t,e){return v(this,null,function*(){let n=yield HA(t,{},()=>v(null,null,function*(){let r=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield zA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&di(t.emulatorConfig.host)&&(u.credentials="include"),lf.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function qU(t,e){return v(this,null,function*(){return Ii(t,"POST","/v2/accounts:revokeToken",Ei(t,e))})}var Cu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let n=TA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield zU(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Tr("not implemented")}};function yi(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var vi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Og(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new E_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Du(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return U_(this,e)}reload(){return $_(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield hf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Vt(this.auth.app))return Promise.reject(Ar(this.auth));let e=yield this.getIdToken();return yield Du(this,BU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,G=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:J,emailVerified:be,isAnonymous:At,providerData:Ie,stsTokenManager:C}=n;Q(J&&C,e,"internal-error");let _=Cu.fromJSON(this.name,C);Q(typeof J=="string",e,"internal-error"),yi(p,e.name),yi(g,e.name),Q(typeof be=="boolean",e,"internal-error"),Q(typeof At=="boolean",e,"internal-error"),yi(y,e.name),yi(T,e.name),yi(N,e.name),yi(R,e.name),yi(O,e.name),yi(G,e.name);let I=new t({uid:J,auth:e,email:g,emailVerified:be,displayName:p,isAnonymous:At,photoURL:T,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:O,lastLoginAt:G});return Ie&&Array.isArray(Ie)&&(I.providerData=Ie.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Cu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hf(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?qA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Cu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var SA=new Map;function Sr(t){_i(t instanceof Function,"Expected a class definition");let e=SA.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,SA.set(t,e),e)}var GU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),I_=GU;function sf(t,e,n){return`firebase:${t}:${e}:${n}`}var ff=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=sf(this.userKey,i.apiKey,o),this.fullPersistenceKey=sf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield df(this.auth,{idToken:e}).catch(()=>{});return n?vi._fromGetAccountInfoResponse(this.auth,n,e):null}return vi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Sr(I_),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Sr(I_),s=sf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield df(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield vi._fromGetAccountInfoResponse(e,g,h)}else p=vi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function AA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZA(e))return"Blackberry";if(JA(e))return"Webos";if(WA(e))return"Safari";if((e.includes("chrome/")||KA(e))&&!e.includes("edge/"))return"Chrome";if(YA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function GA(t=ot()){return/firefox\//i.test(t)}function WA(t=ot()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KA(t=ot()){return/crios\//i.test(t)}function QA(t=ot()){return/iemobile/i.test(t)}function YA(t=ot()){return/android/i.test(t)}function ZA(t=ot()){return/blackberry/i.test(t)}function JA(t=ot()){return/webos/i.test(t)}function H_(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WU(t=ot()){var e;return H_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KU(){return zS()&&document.documentMode===10}function XA(t=ot()){return H_(t)||YA(t)||JA(t)||ZA(t)||/windows phone/i.test(t)||QA(t)}function eR(t,e=[]){let n;switch(t){case"Browser":n=AA(ot());break;case"Worker":n=`${AA(ot())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fi}/${r}`}var w_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function QU(n){return v(this,arguments,function*(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",Ei(t,e))})}var YU=6,C_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:YU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var D_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pf(this),this.idTokenSubscription=new pf(this),this.beforeStateQueue=new w_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield ff.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield df(this,{idToken:e}),r=yield vi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Vt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield hf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=kU()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Vt(this.app))return Promise.reject(Ar(this));let n=e?$e(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Vt(this.app)?Promise.reject(Ar(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vt(this.app)?Promise.reject(Ar(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Sr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield QU(this),n=new C_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield qU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Sr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=yield ff.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&xU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function So(t){return $e(t)}var pf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KS(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var If={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZU(t){If=t}function tR(t){return If.loadJS(t)}function JU(){return If.recaptchaEnterpriseScript}function XU(){return If.gapiScript}function nR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var b_=class{constructor(){this.enterprise=new T_}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},T_=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var eB="recaptcha-enterprise",rR="NO_RECAPTCHA",S_=class{constructor(e){this.type=eB,this.auth=So(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){UU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new __(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;bA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(rR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new b_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&bA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=JU();u.length!==0&&(u+=a),tR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Iu(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new S_(t),s;if(i)s=rR;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function A_(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Iu(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Iu(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Iu(t,e,n);return r(t,a).catch(u=>v(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Iu(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield Iu(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function z_(t,e){let n=Ys(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Gn(o,e??{}))return i;Yn(i,"already-initialized")}return n.initialize({options:e})}function tB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Sr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function q_(t,e,n){let r=So(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=iR(e),{host:s,port:a}=nB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Gn(l,r.config.emulator)&&Gn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,di(s)?(Yh(`${o}//${s}${u}`),Zh("Auth",!0)):i||rB()}function iR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nB(t){let e=iR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:RA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:RA(s)}}}function RA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function rB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Tu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}};function iB(t,e){return v(this,null,function*(){return Ii(t,"POST","/v1/accounts:signUp",e)})}function oB(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))})}function sB(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))})}function aB(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))})}var Su=class t extends Tu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A_(e,n,"signInWithPassword",oB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sB(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A_(e,r,"signUpPassword",iB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return aB(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function g_(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))})}function cB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uB(t){let e=Ks(Qs(t)).link,n=e?Ks(Qs(e)).deep_link_id:null,r=Ks(Qs(t)).deep_link_id;return(r?Ks(Qs(r)).link:null)||r||n||e||t}var gf=class t{constructor(e){var n,r,i,o,s,a;let u=Ks(Qs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=cB((i=u.mode)!==null&&i!==void 0?i:null);Q(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=uB(e);try{return new t(n)}catch{return null}}};var oR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Su._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=gf.parseLink(r);return Q(i,"argument-error"),Su._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),mf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var R_=class extends mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function lB(t,e){return v(this,null,function*(){return Ru(t,"POST","/v1/accounts:signUp",Ei(t,e))})}var ea=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield vi._fromIdTokenResponse(e,r,i),s=NA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=NA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function NA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var N_=class t extends Xt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function sR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?N_._fromErrorAndOperation(t,o,e,r):o})}function dB(t,e,n=!1){return v(this,null,function*(){let r=yield Du(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ea._forOperation(t,"link",r)})}function hB(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Vt(r.app))return Promise.reject(Ar(r));let i="reauthenticate";try{let o=yield Du(t,sR(r,i,e,t),n);Q(o.idToken,r,"internal-error");let s=B_(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(t.uid===a,r,"user-mismatch"),ea._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Yn(r,"user-mismatch"),o}})}function aR(t,e,n=!1){return v(this,null,function*(){if(Vt(t.app))return Promise.reject(Ar(t));let r="signIn",i=yield sR(t,r,e),o=yield ea._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function G_(t,e){return v(this,null,function*(){return aR(So(t),e)})}function cR(t){return v(this,null,function*(){let e=So(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function W_(t,e,n){return v(this,null,function*(){if(Vt(t.app))return Promise.reject(Ar(t));let r=So(t),s=yield A_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lB,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&cR(t),u}),a=yield ea._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function K_(t,e,n){return Vt(t.app)?Promise.reject(Ar(t)):G_($e(t),oR.credential(e,n)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&cR(t),r}))}function Nu(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function Q_(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function Y_(t){return $e(t).signOut()}var yf="__sak";var vf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var fB=1e3,pB=10,gB=(()=>{class t extends vf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);KU()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,pB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},fB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield $r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield $r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield $r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),uR=gB;var mB=(()=>{class t extends vf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Z_=mB;function yB(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var vB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield yB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function lR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var M_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=lR("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Qn(){return window}function _B(t){Qn().location.href=t}function dR(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}function EB(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function IB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wB(){return dR()?self:null}var hR="firebaseLocalStorageDb",CB=1,_f="firebaseLocalStorage",fR="fbase_key",To=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function wf(t,e){return t.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function DB(){let t=indexedDB.deleteDatabase(hR);return new To(t).toPromise()}function x_(){let t=indexedDB.open(hR,CB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(_f,{keyPath:fR})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),yield DB(),e(yield x_()))}))})}function MA(t,e,n){return v(this,null,function*(){let r=wf(t,!0).put({[fR]:e,value:n});return new To(r).toPromise()})}function bB(t,e){return v(this,null,function*(){let n=wf(t,!1).get(e),r=yield new To(n).toPromise();return r===void 0?null:r.value})}function xA(t,e){let n=wf(t,!0).delete(e);return new To(n).toPromise()}var TB=800,SB=3,AB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield x_(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>SB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return dR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=vB._getInstance(wB()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield EB(),!this.activeServiceWorker)return;this.sender=new M_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||IB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield x_();return yield MA(n,yf,"1"),yield xA(n,yf),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>MA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>bB(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>xA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=wf(o,!1).getAll();return new To(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),TB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),pR=AB;var Tie=nR("rcb"),Sie=new bo(3e4,6e4);function RB(t,e){return e?Sr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Au=class extends Tu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return g_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return g_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return g_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function NB(t){return aR(t.auth,new Au(t),t.bypassAuthState)}function MB(t){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),hB(n,new Au(t),t.bypassAuthState)}function xB(t){return v(this,null,function*(){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),dB(n,new Au(t),t.bypassAuthState)})}var P_=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NB;case"linkViaPopup":case"linkViaRedirect":return xB;case"reauthViaPopup":case"reauthViaRedirect":return MB;default:Yn(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Aie=new bo(2e3,1e4);var PB="pendingRedirect",af=new Map,O_=class t extends P_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=af.get(this.auth._key());if(!e){try{let r=(yield OB(this.resolver,this.auth))?yield $r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return $r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,$r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function OB(t,e){return v(this,null,function*(){let n=LB(e),r=FB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function kB(t,e){af.set(t._key(),e)}function FB(t){return Sr(t._redirectPersistence)}function LB(t){return sf(PB,t.config.apiKey,t.name)}function VB(t,e,n=!1){return v(this,null,function*(){if(Vt(t.app))return Promise.reject(Ar(t));let r=So(t),i=RB(r,e),s=yield new O_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var jB=600*1e3,k_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Do(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jB&&this.cachedEventUids.clear(),this.cachedEventUids.has(PA(e))}saveEventToCache(e){this.cachedEventUids.add(PA(e)),this.lastProcessedEventTime=Date.now()}};function PA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function UB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gR(t);default:return!1}}function BB(n){return v(this,arguments,function*(t,e={}){return Ii(t,"GET","/v1/projects",e)})}var $B=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HB=/^https?/;function zB(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield BB(t);for(let n of e)try{if(qB(n))return}catch{}Yn(t,"unauthorized-domain")})}function qB(t){let e=y_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!HB.test(n))return!1;if($B.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var GB=new bo(3e4,6e4);function OA(){let t=Qn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WB(t){return new Promise((e,n)=>{var r,i,o;function s(){OA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OA(),n(Do(t,"network-request-failed"))},timeout:GB.get()})}if(!((i=(r=Qn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Qn().gapi)===null||o===void 0)&&o.load)s();else{let a=nR("iframefcb");return Qn()[a]=()=>{gapi.load?s():n(Do(t,"network-request-failed"))},tR(`${XU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw cf=null,e})}var cf=null;function KB(t){return cf=cf||WB(t),cf}var QB=new bo(5e3,15e3),YB="__/auth/iframe",ZB="emulator/auth/iframe",JB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e$(t){let e=t.config;Q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?j_(e,ZB):`https://${t.config.authDomain}/${YB}`,r={apiKey:e.apiKey,appName:t.name,v:fi},i=XB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${gu(r).slice(1)}`}function t$(t){return v(this,null,function*(){let e=yield KB(t),n=Qn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:e$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JB,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Do(t,"network-request-failed"),a=Qn().setTimeout(()=>{o(s)},QB.get());function u(){Qn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var n$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r$=500,i$=600,o$="_blank",s$="http://localhost",Ef=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function a$(t,e,n,r=r$,i=i$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},n$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ot().toLowerCase();n&&(a=KA(l)?o$:n),GA(l)&&(e=e||s$,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,T])=>`${g}${y}=${T},`,"");if(WU(l)&&a!=="_self")return c$(e||"",a),new Ef(null);let p=window.open(e||"",a,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new Ef(p)}function c$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var u$="__/auth/handler",l$="emulator/auth/handler",d$=encodeURIComponent("fac");function kA(t,e,n,r,i,o){return v(this,null,function*(){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fi,eventId:i};if(e instanceof mf){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",WS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof R_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${d$}=${encodeURIComponent(u)}`:"";return`${h$(t)}?${gu(a).slice(1)}${l}`})}function h$({config:t}){return t.emulator?j_(t,l$):`https://${t.authDomain}/${u$}`}var m_="webStorageSupport",F_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z_,this._completeRedirectFn=VB,this._overrideRedirectResult=kB}_openPopup(e,n,r,i){return v(this,null,function*(){var o;_i((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield kA(e,n,r,y_(),i);return a$(e,s,lR())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield kA(e,n,r,y_(),i);return _B(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(_i(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield t$(e),r=new k_(e);return n.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(m_,{type:m_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[m_];s!==void 0&&n(!!s),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XA()||WA()||H_()}},mR=F_;var FA="@firebase/auth",LA="1.10.8";var L_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function f$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p$(t){Tn(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eR(t)},l=new D_(r,i,o,u);return tB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new xt("auth-internal",e=>{let n=So(e.getProvider("auth").getImmediate());return(r=>new L_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(FA,LA,f$(t)),Ve(FA,LA,"esm2017")}var g$=300,m$=qv("authIdTokenMaxAge")||g$,VA=null,y$=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>m$)return;let i=n?.token;VA!==i&&(VA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function J_(t=Io()){let e=Ys(t,"auth");if(e.isInitialized())return e.getImmediate();let n=z_(t,{popupRedirectResolver:mR,persistence:[pR,uR,Z_]}),r=qv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=y$(o.toString());Q_(n,s,()=>s(n.currentUser)),Nu(n,a=>s(a))}}let i=Hv("auth");return i&&q_(n,`http://${i}`),n}function v$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Do("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",v$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p$("Browser");function _R(t){return new ee(function(e){var n=Nu(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var ER="auth",Pt=class{constructor(e){return e}},Mu=class{constructor(){return Js(ER)}};var X_=new H("angularfire2.auth-instances");function oH(t,e){let n=vu(ER,t,e);return n&&new Pt(n)}function sH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Pt(r)}}var aH={provide:Mu,deps:[[new Gt,X_]]},cH={provide:Pt,useFactory:oH,deps:[[new Gt,X_],br]};function IR(t,...e){return Ve("angularfire",pi.full,"auth"),pn([cH,aH,{provide:X_,useFactory:sH(t),multi:!0,deps:[we,et,gi,Co,[new Gt,Xs],...e]}])}var Cf=He(_R,!0);var wR=He(W_,!0,2);var CR=He(J_,!0);var DR=He(K_,!0,2);var bR=He(Y_,!0,2);var eE=()=>{let t=M(Pt),e=M(Jt);return Cf(t).pipe(ue(n=>n?!0:(e.navigate(["/login"]),!1)))};var OR=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(De(lo),De(ri))};static \u0275dir=pt({type:t})}return t})(),uH=(()=>{class t extends OR{static \u0275fac=(()=>{let n;return function(i){return(n||(n=co(t)))(i||t)}})();static \u0275dir=pt({type:t,features:[jn]})}return t})(),kR=new H("");var lH={provide:kR,useExisting:hr(()=>ia),multi:!0};function dH(){let t=un()?un().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hH=new H(""),ia=(()=>{class t extends OR{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!dH())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(De(lo),De(ri),De(hH,8))};static \u0275dir=pt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&wn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ns([lH]),jn]})}return t})();function fH(t){return t==null||pH(t)===0}function pH(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var rE=new H(""),FR=new H("");function gH(t){return fH(t.value)?{required:!0}:null}function TR(t){return null}function LR(t){return t!=null}function VR(t){return ho(t)?ke(t):t}function jR(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function UR(t,e){return e.map(n=>n(t))}function mH(t){return!t.validate}function BR(t){return t.map(e=>mH(e)?e:n=>e.validate(n))}function yH(t){if(!t)return null;let e=t.filter(LR);return e.length==0?null:function(n){return jR(UR(n,e))}}function iE(t){return t!=null?yH(BR(t)):null}function vH(t){if(!t)return null;let e=t.filter(LR);return e.length==0?null:function(n){let r=UR(n,e).map(VR);return Fg(r).pipe(ue(jR))}}function oE(t){return t!=null?vH(BR(t)):null}function SR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function _H(t){return t._rawValidators}function EH(t){return t._rawAsyncValidators}function tE(t){return t?Array.isArray(t)?t:[t]:[]}function bf(t,e){return Array.isArray(t)?t.includes(e):t===e}function AR(t,e){let n=tE(e);return tE(t).forEach(i=>{bf(n,i)||n.push(i)}),n}function RR(t,e){return tE(e).filter(n=>!bf(t,n))}var Tf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ra=class extends Tf{name;get formDirective(){return null}get path(){return null}},Lu=class extends Tf{_parent=null;name=null;valueAccessor=null},Sf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},IH={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$oe=ae(k({},IH),{"[class.ng-submitted]":"isSubmitted"}),xf=(()=>{class t extends Sf{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(De(Lu,2))};static \u0275dir=pt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Un("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[jn]})}return t})(),Pf=(()=>{class t extends Sf{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(De(ra,10))};static \u0275dir=pt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Un("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[jn]})}return t})();var xu="VALID",Df="INVALID",ta="PENDING",Pu="DISABLED",wi=class{},Af=class extends wi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ku=class extends wi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Fu=class extends wi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},na=class extends wi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},nE=class extends wi{source;constructor(e){super(),this.source=e}},Rf=class extends wi{source;constructor(e){super(),this.source=e}};function $R(t){return(Of(t)?t.validators:t)||null}function wH(t){return Array.isArray(t)?iE(t):t||null}function HR(t,e){return(Of(e)?e.asyncValidators:t)||null}function CH(t){return Array.isArray(t)?oE(t):t||null}function Of(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function DH(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")}function bH(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new $(1002,"")})}var Nf=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mt(this.statusReactive)}set status(e){mt(()=>this.statusReactive.set(e))}_status=Ms(()=>this.statusReactive());statusReactive=cn(void 0);get valid(){return this.status===xu}get invalid(){return this.status===Df}get pending(){return this.status==ta}get disabled(){return this.status===Pu}get enabled(){return this.status!==Pu}errors;get pristine(){return mt(this.pristineReactive)}set pristine(e){mt(()=>this.pristineReactive.set(e))}_pristine=Ms(()=>this.pristineReactive());pristineReactive=cn(!0);get dirty(){return!this.pristine}get touched(){return mt(this.touchedReactive)}set touched(e){mt(()=>this.touchedReactive.set(e))}_touched=Ms(()=>this.touchedReactive());touchedReactive=cn(!1);get untouched(){return!this.touched}_events=new ze;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RR(e,this._rawAsyncValidators))}hasValidator(e){return bf(this._rawValidators,e)}hasAsyncValidator(e){return bf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Fu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Fu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ku(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ku(!0,r))}markAsPending(e={}){this.status=ta;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new na(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Pu,this.errors=null,this._forEachChild(i=>{i.disable(ae(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,r)),this._events.next(new na(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xu,this._forEachChild(r=>{r.enable(ae(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xu||this.status===ta)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,n)),this._events.next(new na(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pu:xu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ta,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=VR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new na(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?Pu:this.errors?Df:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ta)?ta:this._anyControlsHaveStatus(Df)?Df:xu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ku(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Fu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Of(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=wH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=CH(this._rawAsyncValidators)}},Mf=class extends Nf{constructor(e,n,r){super($R(n),HR(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){bH(this,!0,e),Object.keys(e).forEach(r=>{DH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Rf(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sE=new H("",{providedIn:"root",factory:()=>aE}),aE="always";function TH(t,e){return[...e.path,t]}function zR(t,e,n=aE){qR(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),AH(t,e),NH(t,e),RH(t,e),SH(t,e)}function NR(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function SH(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function qR(t,e){let n=_H(t);e.validator!==null?t.setValidators(SR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=EH(t);e.asyncValidator!==null?t.setAsyncValidators(SR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();NR(e._rawValidators,i),NR(e._rawAsyncValidators,i)}function AH(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&GR(t,e)})}function RH(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&GR(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function GR(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function NH(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function MH(t,e){t==null,qR(t,e)}function xH(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function PH(t){return Object.getPrototypeOf(t.constructor)===uH}function OH(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kH(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ia?n=o:PH(o)?r=o:i=o}),i||r||n||null}var FH={provide:ra,useExisting:hr(()=>Vu)},Ou=Promise.resolve(),Vu=(()=>{class t extends ra{callSetDisabledState;get submitted(){return mt(this.submittedReactive)}_submitted=Ms(()=>this.submittedReactive());submittedReactive=cn(!1);_directives=new Set;form;ngSubmit=new We;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Mf({},iE(n),oE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ou.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),zR(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ou.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ou.then(()=>{let r=this._findContainer(n.path),i=new Mf({});MH(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ou.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Ou.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),OH(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new nE(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(De(rE,10),De(FR,10),De(sE,8))};static \u0275dir=pt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&wn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ns([FH]),jn]})}return t})();function MR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var LH=class extends Nf{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super($R(n),HR(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Of(n)&&(n.nonNullable||n.initialValueIsDefault)&&(xR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Rf(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){MR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){MR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var VH={provide:Lu,useExisting:hr(()=>ju)},PR=Promise.resolve(),ju=(()=>{class t extends Lu{_changeDetectorRef;callSetDisabledState;control=new LH;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new We;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kH(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),xH(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){zR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){PR.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&fo(r);PR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?TH(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(De(ra,9),De(rE,10),De(FR,10),De(kR,10),De(xs,8),De(sE,8))};static \u0275dir=pt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ns([VH]),jn,vr]})}return t})();var kf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=pt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var jH=(()=>{class t{_validator=TR;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):TR,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=pt({type:t,features:[vr]})}return t})();var UH={provide:rE,useExisting:hr(()=>Uu),multi:!0};var Uu=(()=>{class t extends jH{required;inputName="required";normalizeInput=fo;createValidator=n=>gH;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=co(t)))(i||t)}})();static \u0275dir=pt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&As("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ns([UH]),jn]})}return t})();var BH=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=_r({type:t});static \u0275inj=xn({})}return t})();var Ff=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:sE,useValue:n.callSetDisabledState??aE}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=_r({type:t});static \u0275inj=xn({imports:[BH]})}return t})();var Ci=class t{auth=M(Pt);router=M(Jt);user$=Cf(this.auth);signUp(e,n){return v(this,null,function*(){try{let r=yield wR(this.auth,e,n);return this.router.navigate(["/lobby"]),r}catch(r){throw new Error(r.message)}})}login(e,n){return v(this,null,function*(){try{let r=yield DR(this.auth,e,n);return this.router.navigate(["/lobby"]),r}catch(r){throw new Error(r.message)}})}logout(){return v(this,null,function*(){yield bR(this.auth),this.router.navigate(["/login"])})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};function $H(t,e){if(t&1&&(Ce(0,"div",7),L(1),Ae()),t&2){let n=xe();W(),Ke(n.errorMessage)}}var Lf=class t{authService=M(Ci);email="";password="";errorMessage="";onLogin(){return v(this,null,function*(){try{this.errorMessage="",yield this.authService.login(this.email,this.password)}catch(e){this.errorMessage=e.message}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Wt({type:t,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit"],[1,"form-group"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"error"],[1,"auth-link"],["routerLink","/signup"]],template:function(n,r){n&1&&(Ce(0,"div",0)(1,"div",1)(2,"h1"),L(3,"\u{1F3AE} RPS Tournament"),Ae(),Ce(4,"h2"),L(5,"Login"),Ae(),Ce(6,"form",2),wn("ngSubmit",function(){return r.onLogin()}),Ce(7,"div",3)(8,"label"),L(9,"Email"),Ae(),Ce(10,"input",4),Ir("ngModelChange",function(o){return ai(r.email,o)||(r.email=o),o}),Ae()(),Ce(11,"div",3)(12,"label"),L(13,"Password"),Ae(),Ce(14,"input",5),Ir("ngModelChange",function(o){return ai(r.password,o)||(r.password=o),o}),Ae()(),Ce(15,"button",6),L(16,"Login"),Ae(),Kt(17,$H,2,1,"div",7),Ae(),Ce(18,"p",8),L(19," Don't have an account? "),Ce(20,"a",9),L(21,"Sign Up"),Ae()()()()),n&2&&(W(10),Er("ngModel",r.email),W(4),Er("ngModel",r.password),W(3),Qt(r.errorMessage?17:-1))},dependencies:[Bn,Ff,kf,ia,xf,Pf,Uu,ju,Vu,Ws],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.auth-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003;width:100%;max-width:400px}h1[_ngcontent-%COMP%]{text-align:center;color:#667eea;margin-bottom:10px;font-size:2em}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#555;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:5px;font-size:16px;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px;background:#667eea;color:#fff;border:none;border-radius:5px;font-size:16px;font-weight:600;cursor:pointer;transition:background .3s}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.error[_ngcontent-%COMP%]{margin-top:15px;padding:10px;background:#fee;color:#c33;border-radius:5px;text-align:center}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:#666}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600}"]})};function HH(t,e){if(t&1&&(Ce(0,"div",8),L(1),Ae()),t&2){let n=xe();W(),Ke(n.errorMessage)}}var Vf=class t{authService=M(Ci);email="";password="";confirmPassword="";errorMessage="";onSignup(){return v(this,null,function*(){try{if(this.errorMessage="",this.password!==this.confirmPassword){this.errorMessage="Passwords do not match";return}if(this.password.length<6){this.errorMessage="Password must be at least 6 characters";return}yield this.authService.signUp(this.email,this.password)}catch(e){this.errorMessage=e.message}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Wt({type:t,selectors:[["app-signup"]],decls:26,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],[3,"ngSubmit"],[1,"form-group"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","password","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary"],[1,"error"],[1,"auth-link"],["routerLink","/login"]],template:function(n,r){n&1&&(Ce(0,"div",0)(1,"div",1)(2,"h1"),L(3,"\u{1F3AE} RPS Tournament"),Ae(),Ce(4,"h2"),L(5,"Sign Up"),Ae(),Ce(6,"form",2),wn("ngSubmit",function(){return r.onSignup()}),Ce(7,"div",3)(8,"label"),L(9,"Email"),Ae(),Ce(10,"input",4),Ir("ngModelChange",function(o){return ai(r.email,o)||(r.email=o),o}),Ae()(),Ce(11,"div",3)(12,"label"),L(13,"Password"),Ae(),Ce(14,"input",5),Ir("ngModelChange",function(o){return ai(r.password,o)||(r.password=o),o}),Ae()(),Ce(15,"div",3)(16,"label"),L(17,"Confirm Password"),Ae(),Ce(18,"input",6),Ir("ngModelChange",function(o){return ai(r.confirmPassword,o)||(r.confirmPassword=o),o}),Ae()(),Ce(19,"button",7),L(20,"Sign Up"),Ae(),Kt(21,HH,2,1,"div",8),Ae(),Ce(22,"p",9),L(23," Already have an account? "),Ce(24,"a",10),L(25,"Login"),Ae()()()()),n&2&&(W(10),Er("ngModel",r.email),W(4),Er("ngModel",r.password),W(4),Er("ngModel",r.confirmPassword),W(3),Qt(r.errorMessage?21:-1))},dependencies:[Bn,Ff,kf,ia,xf,Pf,Uu,ju,Vu,Ws],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.auth-card[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003;width:100%;max-width:400px}h1[_ngcontent-%COMP%]{text-align:center;color:#667eea;margin-bottom:10px;font-size:2em}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#555;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:5px;font-size:16px;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px;background:#667eea;color:#fff;border:none;border-radius:5px;font-size:16px;font-weight:600;cursor:pointer;transition:background .3s}.btn-primary[_ngcontent-%COMP%]:hover{background:#5568d3}.error[_ngcontent-%COMP%]{margin-top:15px;padding:10px;background:#fee;color:#c33;border-radius:5px;text-align:center}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:#666}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600}"]})};var KR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QR={};var Rr,cE;(function(){var t;function e(C,_){function I(){}I.prototype=_.prototype,C.D=_.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(w,D,S){for(var E=Array(arguments.length-2),ir=2;ir<arguments.length;ir++)E[ir-2]=arguments[ir];return _.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=C.g[0],I=C.g[1],D=C.g[2];var S=C.g[3],E=_+(S^I&(D^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^S&(I^D))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var I=_-this.blockSize,w=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=I;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<_;)if(w[D++]=C.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<_;)if(w[D++]=C[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var I=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=I&255,I/=256;for(this.u(C),C=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)C[I++]=this.g[_]>>>w&255;return C};function o(C,_){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=_(C)}function s(C,_){this.h=_;for(var I=[],w=!0,D=C.length-1;0<=D;D--){var S=C[D]|0;w&&S==_||(I[D]=S,w=!1)}this.g=I}var a={};function u(C){return-128<=C&&128>C?o(C,function(_){return new s([_|0],0>_?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return R(l(-C));for(var _=[],I=1,w=0;C>=I;w++)_[w]=C/I|0,I*=4294967296;return new s(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return R(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,D=0;D<C.length;D+=8){var S=Math.min(8,C.length-D),E=parseInt(C.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var C=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);C+=(0<=w?w:4294967296+w)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(N(this))return"-"+R(this).toString(C);for(var _=l(Math.pow(C,6)),I=this,w="";;){var D=be(I,_).g;I=O(I,D.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,T(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=O(this,C),N(C)?-1:T(C)?0:1};function R(C){for(var _=C.g.length,I=[],w=0;w<_;w++)I[w]=~C.g[w];return new s(I,~C.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],w=0,D=0;D<=_;D++){var S=w+(this.i(D)&65535)+(C.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(C,_){return C.add(R(_))}t.j=function(C){if(T(this)||T(C))return p;if(N(this))return N(C)?R(this).j(R(C)):R(R(this).j(C));if(N(C))return R(this.j(R(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var _=this.g.length+C.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<C.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,ir=C.i(D)>>>16,xa=C.i(D)&65535;I[2*w+2*D]+=E*xa,G(I,2*w+2*D),I[2*w+2*D+1]+=S*xa,G(I,2*w+2*D+1),I[2*w+2*D+1]+=E*ir,G(I,2*w+2*D+1),I[2*w+2*D+2]+=S*ir,G(I,2*w+2*D+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function G(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function J(C,_){this.g=C,this.h=_}function be(C,_){if(T(_))throw Error("division by zero");if(T(C))return new J(p,p);if(N(C))return _=be(R(C),_),new J(R(_.g),R(_.h));if(N(_))return _=be(C,R(_)),new J(R(_.g),_.h);if(30<C.g.length){if(N(C)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=_;0>=w.l(C);)I=At(I),w=At(w);var D=Ie(I,1),S=Ie(w,1);for(w=Ie(w,2),I=Ie(I,2);!T(w);){var E=S.add(w);0>=E.l(C)&&(D=D.add(I),S=E),w=Ie(w,1),I=Ie(I,1)}return _=O(C,D.j(_)),new J(D,_)}for(D=p;0<=C.l(_);){for(I=Math.max(1,Math.floor(C.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(C);)I-=w,S=l(I),E=S.j(_);T(S)&&(S=g),D=D.add(S),C=O(C,E)}return new J(D,C)}t.A=function(C){return be(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&C.i(w);return new s(I,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|C.i(w);return new s(I,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^C.i(w);return new s(I,this.h^C.h)};function At(C){for(var _=C.g.length+1,I=[],w=0;w<_;w++)I[w]=C.i(w)<<1|C.i(w-1)>>>31;return new s(I,C.h)}function Ie(C,_){var I=_>>5;_%=32;for(var w=C.g.length-I,D=[],S=0;S<w;S++)D[S]=0<_?C.i(S+I)>>>_|C.i(S+I+1)<<32-_:C.i(S+I);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cE=QR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Rr=QR.Integer=s}).apply(typeof KR<"u"?KR:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nr={};var uE,zH,oa,lE,Bu,Uf,dE,hE,fE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,A){for(var F=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)F[Te-2]=arguments[Te];return d.prototype[b].apply(m,F)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let b=c.length||0,A=m.length||0;c.length=b+A;for(let F=0;F<A;F++)c[b+F]=m[F]}else c.push(m)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function J(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function be(c){return be[" "](c),c}be[" "]=function(){};var At=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function Ie(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Hp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ir{constructor(){this.h=this.g=null}add(d,f){let m=xa.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var xa=new O(()=>new Lx,c=>c.reset());class Lx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Pa,Oa=!1,Hp=new ir,Pw=()=>{let c=a.Promise.resolve(void 0);Pa=()=>{c.then(Vx)}};var Vx=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=xa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Oa=!1};function Vr(){this.s=this.s,this.C=this.C}Vr.prototype.s=!1,Vr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var jx=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function ka(c,d){if(yt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(At){e:{try{be(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ux[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ka.aa.h.call(this)}}T(ka,yt);var Ux={2:"touch",3:"pen",4:"mouse"};ka.prototype.h=function(){ka.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),Bx=0;function $x(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++Bx,this.da=this.fa=!1}function ll(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function dl(c){this.src=c,this.g={},this.h=0}dl.prototype.add=function(c,d,f,m,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=qp(c,d,m,b);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new $x(d,this.src,A,!!m,b),d.fa=f,c.push(d)),d};function zp(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(m,b,1),A&&(ll(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function qp(c,d,f,m){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return b}return-1}var Gp="closure_lm_"+(1e6*Math.random()|0),Wp={};function Ow(c,d,f,m,b){if(m&&m.once)return Fw(c,d,f,m,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Ow(c,d[A],f,m,b);return null}return f=Zp(f),c&&c[Fa]?c.K(d,f,l(m)?!!m.capture:!!m,b):kw(c,d,f,!1,m,b)}function kw(c,d,f,m,b,A){if(!d)throw Error("Invalid event type");var F=l(b)?!!b.capture:!!b,Te=Qp(c);if(Te||(c[Gp]=Te=new dl(c)),f=Te.add(d,f,m,F,A),f.proxy)return f;if(m=Hx(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)jx||(b=F),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(Vw(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hx(){function c(f){return d.call(c.src,c.listener,f)}let d=zx;return c}function Fw(c,d,f,m,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Fw(c,d[A],f,m,b);return null}return f=Zp(f),c&&c[Fa]?c.L(d,f,l(m)?!!m.capture:!!m,b):kw(c,d,f,!0,m,b)}function Lw(c,d,f,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)Lw(c,d[A],f,m,b);else m=l(m)?!!m.capture:!!m,f=Zp(f),c&&c[Fa]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=qp(A,f,m,b),-1<f&&(ll(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Qp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=qp(d,f,m,b)),(f=-1<c?d[c]:null)&&Kp(f))}function Kp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Fa])zp(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(Vw(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Qp(d))?(zp(f,c),f.h==0&&(f.src=null,d[Gp]=null)):ll(c)}}}function Vw(c){return c in Wp?Wp[c]:Wp[c]="on"+c}function zx(c,d){if(c.da)c=!0;else{d=new ka(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Kp(c),c=f.call(m,d)}return c}function Qp(c){return c=c[Gp],c instanceof dl?c:null}var Yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zp(c){return typeof c=="function"?c:(c[Yp]||(c[Yp]=function(d){return c.handleEvent(d)}),c[Yp])}function vt(){Vr.call(this),this.i=new dl(this),this.M=this,this.F=null}T(vt,Vr),vt.prototype[Fa]=!0,vt.prototype.removeEventListener=function(c,d,f,m){Lw(this,c,d,f,m)};function Rt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new yt(d,c);else if(d instanceof yt)d.target=d.target||c;else{var b=d;d=new yt(m,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];b=hl(F,m,!0,d)&&b}if(F=d.g=c,b=hl(F,m,!0,d)&&b,b=hl(F,m,!1,d)&&b,f)for(A=0;A<f.length;A++)F=d.g=f[A],b=hl(F,m,!1,d)&&b}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)ll(f[m]);delete c.g[d],c.h--}}this.F=null},vt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},vt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function hl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var Te=F.listener,ut=F.ha||F.src;F.fa&&zp(c.i,F),b=Te.call(ut,m)!==!1&&b}}return b&&!m.defaultPrevented}function jw(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Uw(c){c.g=jw(()=>{c.g=null,c.i&&(c.i=!1,Uw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class qx extends Vr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Uw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function La(c){Vr.call(this),this.h=c,this.g={}}T(La,Vr);var Bw=[];function $w(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&Kp(d)},c),c.g={}}La.prototype.N=function(){La.aa.N.call(this),$w(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jp=a.JSON.stringify,Gx=a.JSON.parse,Wx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xp(){}Xp.prototype.h=null;function Hw(c){return c.h||(c.h=c.i())}function zw(){}var Va={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eg(){yt.call(this,"d")}T(eg,yt);function tg(){yt.call(this,"c")}T(tg,yt);var Pi={},qw=null;function fl(){return qw=qw||new vt}Pi.La="serverreachability";function Gw(c){yt.call(this,Pi.La,c)}T(Gw,yt);function ja(c){let d=fl();Rt(d,new Gw(d))}Pi.STAT_EVENT="statevent";function Ww(c,d){yt.call(this,Pi.STAT_EVENT,c),this.stat=d}T(Ww,yt);function Nt(c){let d=fl();Rt(d,new Ww(d,c))}Pi.Ma="timingevent";function Kw(c,d){yt.call(this,Pi.Ma,c),this.size=d}T(Kw,yt);function Ua(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ba(){this.g=!0}Ba.prototype.xa=function(){this.g=!1};function Kx(c,d,f,m,b,A){c.info(function(){if(c.g)if(A)for(var F="",Te=A.split("&"),ut=0;ut<Te.length;ut++){var ye=Te[ut].split("=");if(1<ye.length){var _t=ye[0];ye=ye[1];var Et=_t.split("_");F=2<=Et.length&&Et[1]=="type"?F+(_t+"="+ye+"&"):F+(_t+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+F})}function Qx(c,d,f,m,b,A,F){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+F})}function $o(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Zx(c,f)+(m?" "+m:"")})}function Yx(c,d){c.info(function(){return"TIMEOUT: "+d})}Ba.prototype.info=function(){};function Zx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<b.length;F++)b[F]=""}}}}return Jp(f)}catch{return d}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ng;function gl(){}T(gl,Xp),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},ng=new gl;function jr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new La(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yw}function Yw(){this.i=null,this.g="",this.h=!1}var Zw={},rg={};function ig(c,d,f){c.L=1,c.v=_l(or(d)),c.m=f,c.P=!0,Jw(c,null)}function Jw(c,d){c.F=Date.now(),ml(c),c.A=or(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),hC(f.i,"t",m),c.C=0,f=c.j.J,c.h=new Yw,c.g=NC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new qx(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(Bw[0]=b.toString()),b=Bw);for(var A=0;A<b.length;A++){var F=Ow(f,b[A],m||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ja(),Kx(c.i,c.u,c.A,c.l,c.R,c.m)}jr.prototype.ca=function(c){c=c.target;let d=this.M;d&&sr(c)==3?d.j():this.Y(c)},jr.prototype.Y=function(c){try{if(c==this.g)e:{let Et=sr(this.g);var d=this.g.Ba();let qo=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||_C(this.g)))){this.J||Et!=4||d==7||(d==8||0>=qo?ja(3):ja(2)),og(this);var f=this.g.Z();this.X=f;t:if(Xw(this)){var m=_C(this.g);c="";var b=m.length,A=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),$a(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,Qx(this.i,this.u,this.A,this.l,this.R,Et,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ut=this.g;if((Te=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Te)){var ye=Te;break t}}ye=null}if(f=ye)$o(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sg(this,f);else{this.o=!1,this.s=3,Nt(12),Oi(this),$a(this);break e}}if(this.P){f=!0;let hn;for(;!this.J&&this.C<F.length;)if(hn=Jx(this,F),hn==rg){Et==4&&(this.s=4,Nt(14),f=!1),$o(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Zw){this.s=4,Nt(15),$o(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else $o(this.i,this.l,hn,null),sg(this,hn);if(Xw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||F.length!=0||this.h.h||(this.s=1,Nt(16),f=!1),this.o=this.o&&f,!f)$o(this.i,this.l,F,"[Invalid Chunked Response]"),Oi(this),$a(this);else if(0<F.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),hg(_t),_t.M=!0,Nt(11))}}else $o(this.i,this.l,F,null),sg(this,F);Et==4&&Oi(this),this.o&&!this.J&&(Et==4?TC(this.j,this):(this.o=!1,ml(this)))}else gP(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),Oi(this),$a(this)}}}catch{}finally{}};function Xw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Jx(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?rg:(f=Number(d.substring(f,m)),isNaN(f)?Zw:(m+=1,m+f>d.length?rg:(d=d.slice(m,m+f),c.C=m+f,d)))}jr.prototype.cancel=function(){this.J=!0,Oi(this)};function ml(c){c.S=Date.now()+c.I,eC(c,c.I)}function eC(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ua(g(c.ba,c),d)}function og(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Yx(this.i,this.A),this.L!=2&&(ja(),Nt(17)),Oi(this),this.s=2,$a(this)):eC(this,this.S-c)};function $a(c){c.j.G==0||c.J||TC(c.j,c)}function Oi(c){og(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,$w(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function sg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||ag(f.h,c))){if(!c.K&&ag(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Dl(f),wl(f);else break e;dg(f),Nt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ua(g(f.Za,f),6e3));if(1>=rC(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fi(f,11)}else if((c.K||f.g==c)&&Dl(f),!G(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ye=b[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let _t=ye[3];_t!=null&&(f.la=_t,f.j.info("VER="+f.la));let Et=ye[4];Et!=null&&(f.Aa=Et,f.j.info("SVER="+f.Aa));let qo=ye[5];qo!=null&&typeof qo=="number"&&0<qo&&(m=1.5*qo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let hn=c.g;if(hn){let Tl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tl){var A=m.h;A.g||Tl.indexOf("spdy")==-1&&Tl.indexOf("quic")==-1&&Tl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(cg(A,A.h),A.h=null))}if(m.D){let fg=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;fg&&(m.ya=fg,Ne(m.I,m.D,fg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var F=c;if(m.qa=RC(m,m.J?m.ia:null,m.W),F.K){iC(m.h,F);var Te=F,ut=m.L;ut&&(Te.I=ut),Te.B&&(og(Te),ml(Te)),m.g=F}else DC(m);0<f.i.length&&Cl(f)}else ye[0]!="stop"&&ye[0]!="close"||Fi(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Fi(f,7):lg(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}ja(4)}catch{}}var Xx=class{constructor(c,d){this.g=c,this.map=d}};function tC(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function rC(c){return c.h?1:c.g?c.g.size:0}function ag(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function cg(c,d){c.g?c.g.add(d):c.h=d}function iC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}tC.prototype.cancel=function(){if(this.i=oC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function oC(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function eP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function tP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function sC(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=tP(c),m=eP(c),b=m.length,A=0;A<b;A++)d.call(void 0,m[A],f&&f[A],c)}var aC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var A=c[f].substring(0,m);b=c[f].substring(m+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ki(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ki){this.h=c.h,yl(this,c.j),this.o=c.o,this.g=c.g,vl(this,c.s),this.l=c.l;var d=c.i,f=new qa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),cC(this,f),this.m=c.m}else c&&(d=String(c).match(aC))?(this.h=!1,yl(this,d[1]||"",!0),this.o=Ha(d[2]||""),this.g=Ha(d[3]||"",!0),vl(this,d[4]),this.l=Ha(d[5]||"",!0),cC(this,d[6]||"",!0),this.m=Ha(d[7]||"")):(this.h=!1,this.i=new qa(null,this.h))}ki.prototype.toString=function(){var c=[],d=this.j;d&&c.push(za(d,uC,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(za(d,uC,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(za(f,f.charAt(0)=="/"?oP:iP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",za(f,aP)),c.join("")};function or(c){return new ki(c)}function yl(c,d,f){c.j=f?Ha(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function vl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function cC(c,d,f){d instanceof qa?(c.i=d,cP(c.i,c.h)):(f||(d=za(d,sP)),c.i=new qa(d,c.h))}function Ne(c,d,f){c.i.set(d,f)}function _l(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ha(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function za(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,rP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var uC=/[#\/\?@]/g,iP=/[#\?:]/g,oP=/[#\?]/g,sP=/[#\?@]/g,aP=/#/g;function qa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ur(c){c.g||(c.g=new Map,c.h=0,c.i&&nP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=qa.prototype,t.add=function(c,d){Ur(this),this.i=null,c=Ho(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function lC(c,d){Ur(c),d=Ho(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function dC(c,d){return Ur(c),d=Ho(c,d),c.g.has(d)}t.forEach=function(c,d){Ur(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},t.na=function(){Ur(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let A=0;A<b.length;A++)f.push(d[m])}return f},t.V=function(c){Ur(this);let d=[];if(typeof c=="string")dC(this,c)&&(d=d.concat(this.g.get(Ho(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Ur(this),this.i=null,c=Ho(this,c),dC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function hC(c,d,f){lC(c,d),0<f.length&&(c.i=null,c.g.set(Ho(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),F=this.V(m);for(m=0;m<F.length;m++){var b=A;F[m]!==""&&(b+="="+encodeURIComponent(String(F[m]))),c.push(b)}}return this.i=c.join("&")};function Ho(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function cP(c,d){d&&!c.j&&(Ur(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(lC(this,m),hC(this,b,f))},c)),c.j=d}function uP(c,d){let f=new Ba;if(a.Image){let m=new Image;m.onload=y(Br,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Br,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Br,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Br,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function lP(c,d){let f=new Ba,m=new AbortController,b=setTimeout(()=>{m.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Br(f,"TestPingServer: error",!1,d)})}function Br(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function dP(){this.g=new Wx}function hP(c,d,f){let m=f||"";try{sC(c,function(b,A){let F=b;l(b)&&(F=Jp(b)),d.push(m+A+"="+encodeURIComponent(F))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Ga(c){this.l=c.Ub||null,this.j=c.eb||!1}T(Ga,Xp),Ga.prototype.g=function(){return new El(this.l,this.j)},Ga.prototype.i=(function(c){return function(){return c}})({});function El(c,d){vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(El,vt),t=El.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ka(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Wa(this):Ka(this),this.readyState==3&&fC(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Wa(this))},t.Qa=function(c){this.g&&(this.response=c,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ka(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ka(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function pC(c){let d="";return Ie(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function ug(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=pC(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ne(c,d,f))}function Fe(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Fe,vt);var fP=/^https?$/i,pP=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ng.g(),this.v=this.o?Hw(this.o):Hw(ng),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){gC(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pP,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vC(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){gC(this,A)}};function gC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,mC(c),Il(c)}function mC(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),Il(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yC(this):this.bb())},t.bb=function(){yC(this)};function yC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||sr(c)!=4||c.Z()!=2)){if(c.u&&sr(c)==4)jw(c.Ea,0,c);else if(Rt(c,"readystatechange"),sr(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=F===0){var b=String(c.D).match(aC)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!fP.test(b?b.toLowerCase():"")}f=m}if(f)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var A=2<sr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",mC(c)}}finally{Il(c)}}}}function Il(c,d){if(c.g){vC(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Rt(c,"ready");try{f.onreadystatechange=m}catch{}}}function vC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function sr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Gx(d)}};function _C(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gP(c){let d={};c=(c.g&&2<=sr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(G(c[m]))continue;var f=D(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}C(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function EC(c){this.Aa=0,this.i=[],this.j=new Ba,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qa("baseRetryDelayMs",5e3,c),this.cb=Qa("retryDelaySeedMs",1e4,c),this.Wa=Qa("forwardChannelMaxRetries",2,c),this.wa=Qa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new tC(c&&c.concurrentRequestLimit),this.Da=new dP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=EC.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Nt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=RC(this,null,this.W),Cl(this)};function lg(c){if(IC(c),c.G==3){var d=c.U++,f=or(c.I);if(Ne(f,"SID",c.K),Ne(f,"RID",d),Ne(f,"TYPE","terminate"),Ya(c,f),d=new jr(c,c.j,d),d.L=2,d.v=_l(or(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=NC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ml(d)}AC(c)}function wl(c){c.g&&(hg(c),c.g.cancel(),c.g=null)}function IC(c){wl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Dl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cl(c){if(!nC(c.h)&&!c.s){c.s=!0;var d=c.Ga;Pa||Pw(),Oa||(Pa(),Oa=!0),Hp.add(d,c),c.B=0}}function mP(c,d){return rC(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ua(g(c.Ga,c,d),SC(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new jr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=CC(this,b,d),f=or(this.I),Ne(f,"RID",c),Ne(f,"CVER",22),this.D&&Ne(f,"X-HTTP-Session-Id",this.D),Ya(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(pC(A)))+"&"+d:this.m&&ug(f,this.m,A)),cg(this.h,b),this.Ua&&Ne(f,"TYPE","init"),this.P?(Ne(f,"$req",d),Ne(f,"SID","null"),b.T=!0,ig(b,f,null)):ig(b,f,d),this.G=2}}else this.G==3&&(c?wC(this,c):this.i.length==0||nC(this.h)||wC(this))};function wC(c,d){var f;d?f=d.l:f=c.U++;let m=or(c.I);Ne(m,"SID",c.K),Ne(m,"RID",f),Ne(m,"AID",c.T),Ya(c,m),c.m&&c.o&&ug(m,c.m,c.o),f=new jr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=CC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),cg(c.h,f),ig(f,m,d)}function Ya(c,d){c.H&&Ie(c.H,function(f,m){Ne(d,m,f)}),c.l&&sC({},function(f,m){Ne(d,m,f)})}function CC(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=b[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let Te=!0;for(let ut=0;ut<f;ut++){let ye=b[ut].g,_t=b[ut].map;if(ye-=A,0>ye)A=Math.max(0,b[ut].g-100),Te=!1;else try{hP(_t,F,"req"+ye+"_")}catch{m&&m(_t)}}if(Te){m=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function DC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Pa||Pw(),Oa||(Pa(),Oa=!0),Hp.add(d,c),c.v=0}}function dg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ua(g(c.Fa,c),SC(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,bC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ua(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),wl(this),bC(this))};function hg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bC(c){c.g=new jr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=or(c.qa);Ne(d,"RID","rpc"),Ne(d,"SID",c.K),Ne(d,"AID",c.T),Ne(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(d,"TO",c.ja),Ne(d,"TYPE","xmlhttp"),Ya(c,d),c.m&&c.o&&ug(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=_l(or(d)),f.m=null,f.P=!0,Jw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,wl(this),dg(this),Nt(19))};function Dl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function TC(c,d){var f=null;if(c.g==d){Dl(c),hg(c),c.g=null;var m=2}else if(ag(c.h,d))f=d.D,iC(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=fl(),Rt(m,new Kw(m,f)),Cl(c)}else DC(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&mP(c,d)||m==2&&dg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Fi(c,5);break;case 4:Fi(c,10);break;case 3:Fi(c,6);break;default:Fi(c,2)}}}function SC(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Fi(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new ki(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yl(m,"https"),_l(m),b?uP(m.toString(),f):lP(m.toString(),f)}else Nt(2);c.G=0,c.l&&c.l.sa(d),AC(c),IC(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function AC(c){if(c.G=0,c.ka=[],c.l){let d=oC(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function RC(c,d,f){var m=f instanceof ki?or(f):new ki(f);if(m.g!="")d&&(m.g=d+"."+m.g),vl(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new ki(null);m&&yl(A,m),d&&(A.g=d),b&&vl(A,b),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Ne(m,f,d),Ne(m,"VER",c.la),Ya(c,m),m}function NC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Fe(new Ga({eb:f})):new Fe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function MC(){}t=MC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bl(){}bl.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){vt.call(this),this.g=new EC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new zo(this)}T(jt,vt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){lg(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Jp(c),c=f);d.i.push(new Xx(d.Ya++,c)),d.G==3&&Cl(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,lg(this.g),delete this.g,jt.aa.N.call(this)};function xC(c){eg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(xC,eg);function PC(){tg.call(this),this.status=1}T(PC,tg);function zo(c){this.g=c}T(zo,MC),zo.prototype.ua=function(){Rt(this.g,"a")},zo.prototype.ta=function(c){Rt(this.g,new xC(c))},zo.prototype.sa=function(c){Rt(this.g,new PC)},zo.prototype.ra=function(){Rt(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,fE=Nr.createWebChannelTransport=function(){return new bl},hE=Nr.getStatEventTarget=function(){return fl()},dE=Nr.Event=Pi,Uf=Nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,Bu=Nr.ErrorCode=pl,Qw.COMPLETE="complete",lE=Nr.EventType=Qw,zw.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",vt.prototype.listen=vt.prototype.K,oa=Nr.WebChannel=zw,zH=Nr.FetchXmlHttpFactory=Ga,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,uE=Nr.XhrIo=Fe}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});var YR="@firebase/firestore",ZR="4.8.0";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var Sa="11.10.0";var xo=new Wn("@firebase/firestore");function sa(){return xo.logLevel}function U(t,...e){if(xo.logLevel<=de.DEBUG){let n=e.map(tw);xo.debug(`Firestore (${Sa}): ${t}`,...n)}}function xr(t,...e){if(xo.logLevel<=de.ERROR){let n=e.map(tw);xo.error(`Firestore (${Sa}): ${t}`,...n)}}function Ai(t,...e){if(xo.logLevel<=de.WARN){let n=e.map(tw);xo.warn(`Firestore (${Sa}): ${t}`,...n)}}function tw(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,HN(t,r,n)}function HN(t,e,n){let r=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xr(r),new Error(r)}function Ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||HN(e,i,r)}function ne(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Xt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}},_E=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},EE=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Wf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new st(e)}},IE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},wE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new IE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Kf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},CE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Kf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function zN(){return new TextEncoder}var Wu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=qH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function DE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ce(r,i);{let o=zN(),s=GH(o.encode(JR(t,n)),o.encode(JR(e,n)));return s!==0?s:ce(r,i)}}n+=r>65535?2:1}return ce(t.length,e.length)}function JR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function GH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function pa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var XR="__name__",Qf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ce(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):DE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}},Oe=class t extends Qf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},WH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tn=class t extends Qf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return WH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===XR}static keyField(){return new t([XR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new V(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Oe.fromString(e))}static fromName(e){return new t(Oe.fromString(e).popFirst(5))}static empty(){return new t(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Oe(e.slice()))}};function qN(t,e,n){if(!n)throw new V(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KH(t,e,n,r){if(e===!0&&r===!0)throw new V(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eN(t){if(!q.isDocumentKey(t))throw new V(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tN(t){if(q.isDocumentKey(t))throw new V(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Np(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Np(t);throw new V(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function QH(t,e){if(e<=0)throw new V(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Je(t,e){let n={typeString:t};return e&&(n.value=e),n}function ol(t,e){if(!GN(t))throw new V(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(x.INVALID_ARGUMENT,n);return!0}var nN=-62135596800,rN=1e6,Re=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rN);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nN)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rN}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ol(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-nN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Je("string",Re._jsonSchemaVersion),seconds:Je("number"),nanoseconds:Je("number")};var oe=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Re(0,0))}static max(){return new t(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ku=-1,bE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};bE.UNKNOWN_ID=-1;function YH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new Po(i,q.empty(),e)}function ZH(t){return new Po(t.readTime,t.key,Ku)}var Po=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(oe.min(),q.empty(),Ku)}static max(){return new t(oe.max(),q.empty(),Ku)}};function JH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var XH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",TE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Aa(t){return v(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==XH)throw t;U("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function e4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ra(t){return t.name==="IndexedDbTransactionError"}var nw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),rw=-1;function Mp(t){return t==null}function Qu(t){return t===0&&1/t==-1/0}function t4(t){return typeof t=="number"&&Number.isInteger(t)&&!Qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var WN="";function n4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iN(e)),e=r4(t.get(n),e);return iN(e)}function r4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case WN:n+="";break;default:n+=o}}return n}function iN(t){return t+WN+""}var i4="remoteDocuments",KN="owner";var QN="mutationQueues";var YN="mutations";var ZN="documentMutations",o4="remoteDocumentsV14";var JN="remoteDocumentGlobal";var XN="targets";var eM="targetDocuments";var tM="targetGlobal",nM="collectionParents";var rM="clientMetadata";var iM="bundles";var oM="namedQueries";var s4="indexConfiguration";var a4="indexState";var c4="indexEntries";var sM="documentOverlays";var u4="globals";var l4=[QN,YN,ZN,i4,XN,KN,tM,eM,rM,JN,nM,iM,oM],bse=[...l4,sM],d4=[QN,YN,ZN,o4,XN,KN,tM,eM,rM,JN,nM,iM,oM,sM],h4=d4,f4=[...h4,s4,a4,c4];var Tse=[...f4,u4];function oN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var je=class t{constructor(e,n){this.comparator=e,this.root=n||Xn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new la(this.root,e,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new la(this.root,e,this.comparator,!0)}},la=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yf(this.data.getIterator())}getIteratorFrom(e){return new Yf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Yf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var dn=class t{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(tn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Zf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var St=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};St.EMPTY_BYTE_STRING=new St("");var p4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ee(!!t,39018),typeof t=="string"){let e=0,n=p4.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}var cM="server_timestamp",uM="__type__",lM="__previous_value__",dM="__local_write_time__";function iw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uM])===null||n===void 0?void 0:n.stringValue)===cM}function xp(t){let e=t.mapValue.fields[lM];return iw(e)?xp(e):e}function Yu(t){let e=Pr(t.mapValue.fields[dM].timestampValue);return new Re(e.seconds,e.nanos)}var SE=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Jf="(default)",Xf=class t{constructor(e,n){this.projectId=e,this.database=n||Jf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ow="__type__",hM="__max__",Bf={mapValue:{fields:{__type__:{stringValue:hM}}}},sw="__vector__",ga="value";function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iw(t)?4:pM(t)?9007199254740991:fM(t)?10:11:K(28295,{value:t})}function nr(t,e){if(t===e)return!0;let n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Pr(i.timestampValue),a=Pr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Or(i.bytesValue).isEqual(Or(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Pe(i.doubleValue),a=Pe(o.doubleValue);return s===a?Qu(s)===Qu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return pa(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(oN(s)!==oN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!nr(s[u],a[u])))return!1;return!0})(t,e);default:return K(52216,{left:t})}}function Zu(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function ma(t,e){if(t===e)return 0;let n=Ri(t),r=Ri(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Pe(o.integerValue||o.doubleValue),u=Pe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return sN(t.timestampValue,e.timestampValue);case 4:return sN(Yu(t),Yu(e));case 5:return DE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Or(o),u=Or(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ce(a[l],u[l]);if(h!==0)return h}return ce(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ce(Pe(o.latitude),Pe(s.latitude));return a!==0?a:ce(Pe(o.longitude),Pe(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return aN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[ga])===null||a===void 0?void 0:a.arrayValue,T=(u=g[ga])===null||u===void 0?void 0:u.arrayValue,N=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:aN(y,T)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Bf.mapValue&&s===Bf.mapValue)return 0;if(o===Bf.mapValue)return 1;if(s===Bf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=DE(u[p],h[p]);if(g!==0)return g;let y=ma(a[u[p]],l[h[p]]);if(y!==0)return y}return ce(u.length,h.length)})(t.mapValue,e.mapValue);default:throw K(23264,{le:n})}}function sN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=Pr(t),r=Pr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function aN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ma(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function ya(t){return AE(t)}function AE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Pr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Or(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return q.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=AE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${AE(n.fields[s])}`;return i+"}"})(t.mapValue):K(61005,{value:t})}function zf(t){switch(Ri(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=xp(t);return e?16+zf(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+zf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return xi(r.fields,(o,s)=>{i+=o.length+zf(s)}),i})(t.mapValue);default:throw K(13486,{value:t})}}function cN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function RE(t){return!!t&&"integerValue"in t}function aw(t){return!!t&&"arrayValue"in t}function uN(t){return!!t&&"nullValue"in t}function lN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qf(t){return!!t&&"mapValue"in t}function fM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ow])===null||n===void 0?void 0:n.stringValue)===sw}function Hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hM}var Ase={mapValue:{fields:{[ow]:{stringValue:sw},[ga]:{arrayValue:{}}}}};var en=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(n)}setAll(e){let n=tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Hu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());qf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Hu(this.value))}};function gM(t){let e=[];return xi(t.fields,(n,r)=>{let i=new tn([n]);if(qf(r)){let o=gM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new dn(e)}var An=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,oe.min(),oe.min(),oe.min(),en.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,oe.min(),oe.min(),en.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,oe.min(),oe.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var va=class{constructor(e,n){this.position=e,this.inclusive=n}};function dN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=ma(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}var _a=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function g4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ep=class{},Ze=class t extends ep{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ME(e,n,r):n==="array-contains"?new OE(e,r):n==="in"?new kE(e,r):n==="not-in"?new FE(e,r):n==="array-contains-any"?new LE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xE(e,r):new PE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ma(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rn=class t extends ep{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return mM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function mM(t){return t.op==="and"}function yM(t){return m4(t)&&mM(t)}function m4(t){for(let e of t.filters)if(e instanceof Rn)return!1;return!0}function NE(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(yM(t))return t.filters.map(e=>NE(e)).join(",");{let e=t.filters.map(n=>NE(n)).join(",");return`${t.op}(${e})`}}function vM(t,e){return t instanceof Ze?(function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&nr(r.value,i.value)})(t,e):t instanceof Rn?(function(r,i){return i instanceof Rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&vM(s,i.filters[a]),!0):!1})(t,e):void K(19439)}function _M(t){return t instanceof Ze?(function(n){return`${n.field.canonicalString()} ${n.op} ${ya(n.value)}`})(t):t instanceof Rn?(function(n){return n.op.toString()+" {"+n.getFilters().map(_M).join(" ,")+"}"})(t):"Filter"}var ME=class extends Ze{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},xE=class extends Ze{constructor(e,n){super(e,"in",n),this.keys=EM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},PE=class extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=EM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function EM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var OE=class extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return aw(n)&&Zu(n.arrayValue,this.value)}},kE=class extends Ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Zu(this.value.arrayValue,n)}},FE=class extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zu(this.value.arrayValue,n)}},LE=class extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!aw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zu(this.value.arrayValue,r))}};var VE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function fN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new VE(t,e,n,r,i,o,s)}function cw(t){let e=ne(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>NE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Mp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ya(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ya(r)).join(",")),e.Pe=n}return e.Pe}function uw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hN(t.startAt,e.startAt)&&hN(t.endAt,e.endAt)}function jE(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Oo=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function y4(t,e,n,r,i,o,s,a){return new Oo(t,e,n,r,i,o,s,a)}function Pp(t){return new Oo(t)}function pN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IM(t){return t.collectionGroup!==null}function zu(t){let e=ne(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new at(tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new _a(o,r))}),n.has(tn.keyField().canonicalString())||e.Te.push(new _a(tn.keyField(),r))}return e.Te}function er(t){let e=ne(t);return e.Ie||(e.Ie=v4(e,zu(t))),e.Ie}function v4(t,e){if(t.limitType==="F")return fN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _a(i.field,o)});let n=t.endAt?new va(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new va(t.startAt.position,t.startAt.inclusive):null;return fN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function UE(t,e){let n=t.filters.concat([e]);return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tp(t,e,n){return new Oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Op(t,e){return uw(er(t),er(e))&&t.limitType===e.limitType}function wM(t){return`${cw(er(t))}|lt:${t.limitType}`}function aa(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_M(i)).join(", ")}]`),Mp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ya(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ya(i)).join(",")),`Target(${r})`})(er(t))}; limitType=${t.limitType})`}function kp(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of zu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=dN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,zu(r),i)||r.endAt&&!(function(s,a,u){let l=dN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,zu(r),i))})(t,e)}function _4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CM(t){return(e,n)=>{let r=!1;for(let i of zu(t)){let o=E4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function E4(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ma(u,l):K(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}var kr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return aM(this.inner)}size(){return this.innerSize}};var I4=new je(q.comparator);function Fr(){return I4}var DM=new je(q.comparator);function $u(...t){let e=DM;for(let n of t)e=e.insert(n.key,n);return e}function bM(t){let e=DM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ao(){return qu()}function TM(){return qu()}function qu(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}var w4=new je(q.comparator),C4=new at(q.comparator);function fe(...t){let e=C4;for(let n of t)e=e.add(n);return e}var D4=new at(ce);function b4(){return D4}function lw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qu(e)?"-0":e}}function SM(t){return{integerValue:""+t}}function T4(t,e){return t4(e)?SM(e):lw(t,e)}var Ea=class{constructor(){this._=void 0}};function S4(t,e,n){return t instanceof Ia?(function(i,o){let s={fields:{[uM]:{stringValue:cM},[dM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&iw(o)&&(o=xp(o)),o&&(s.fields[lM]=o),{mapValue:s}})(n,e):t instanceof ko?RM(t,e):t instanceof Fo?NM(t,e):(function(i,o){let s=AM(i,o),a=gN(s)+gN(i.Ee);return RE(s)&&RE(i.Ee)?SM(a):lw(i.serializer,a)})(t,e)}function A4(t,e,n){return t instanceof ko?RM(t,e):t instanceof Fo?NM(t,e):n}function AM(t,e){return t instanceof wa?(function(r){return RE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ia=class extends Ea{},ko=class extends Ea{constructor(e){super(),this.elements=e}};function RM(t,e){let n=MM(e);for(let r of t.elements)n.some(i=>nr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Fo=class extends Ea{constructor(e){super(),this.elements=e}};function NM(t,e){let n=MM(e);for(let r of t.elements)n=n.filter(i=>!nr(i,r));return{arrayValue:{values:n}}}var wa=class extends Ea{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function gN(t){return Pe(t.integerValue||t.doubleValue)}function MM(t){return aw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function R4(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ko&&i instanceof ko||r instanceof Fo&&i instanceof Fo?pa(r.elements,i.elements,nr):r instanceof wa&&i instanceof wa?nr(r.Ee,i.Ee):r instanceof Ia&&i instanceof Ia})(t.transform,e.transform)}var BE=class{constructor(e,n){this.version=e,this.transformResults=n}},Mr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ca=class{};function xM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ju(t.key,Mr.none()):new Lo(t.key,t.data,Mr.none());{let n=t.data,r=en.empty(),i=new at(tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rr(t.key,r,new dn(i.toArray()),Mr.none())}}function N4(t,e,n){t instanceof Lo?(function(i,o,s){let a=i.value.clone(),u=yN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof rr?(function(i,o,s){if(!Gf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=yN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(PM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Gu(t,e,n,r){return t instanceof Lo?(function(o,s,a,u){if(!Gf(o.precondition,s))return a;let l=o.value.clone(),h=vN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof rr?(function(o,s,a,u){if(!Gf(o.precondition,s))return a;let l=vN(o.fieldTransforms,u,s),h=s.data;return h.setAll(PM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Gf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function M4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=AM(r.transform,i||null);o!=null&&(n===null&&(n=en.empty()),n.set(r.field,o))}return n||null}function mN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pa(r,i,(o,s)=>R4(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Lo=class extends Ca{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rr=class extends Ca{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function yN(t,e,n){let r=new Map;Ee(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,A4(s,a,n[i]))}return r}function vN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,S4(o,s,e))}return r}var Ju=class extends Ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$E=class extends Ca{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var HE=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&N4(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=TM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=xM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(n,r)=>mN(n,r))&&pa(this.baseMutations,e.baseMutations,(n,r)=>mN(n,r))}},zE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return w4})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var qE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var GE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Qe,ge;function x4(t){switch(t){case x.OK:return K(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function OM(t){if(t===void 0)return xr("GRPC error has no .code"),x.UNKNOWN;switch(t){case Qe.OK:return x.OK;case Qe.CANCELLED:return x.CANCELLED;case Qe.UNKNOWN:return x.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return x.INTERNAL;case Qe.UNAVAILABLE:return x.UNAVAILABLE;case Qe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Qe.NOT_FOUND:return x.NOT_FOUND;case Qe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Qe.ABORTED:return x.ABORTED;case Qe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Qe.DATA_LOSS:return x.DATA_LOSS;default:return K(39323,{code:t})}}(ge=Qe||(Qe={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var _N=null;var P4=new Rr([4294967295,4294967295],0);function EN(t){let e=zN().encode(t),n=new cE;return n.update(e),new Uint8Array(n.digest())}function IN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([i,o],0)]}var WE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ro(`Invalid padding: ${n}`);if(r<0)throw new Ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Rr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Rr.fromNumber(r)));return i.compare(P4)===1&&(i=new Rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=EN(e),[r,i]=IN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=EN(e),[r,i]=IN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var np=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Xu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(oe.min(),i,new je(ce),Fr(),fe())}},Xu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,fe(),fe(),fe())}};var da=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},rp=class{constructor(e,n){this.targetId=e,this.De=n}},ip=class{constructor(e,n,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},op=class{constructor(){this.ve=0,this.Ce=wN(),this.Fe=St.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new Xu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=wN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},KE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Fr(),this.je=$f(),this.Je=$f(),this.He=new je(ce)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(jE(o))if(r===0){let s=new q(o.path);this.Xe(n,s,An.newNoDocument(s,oe.min()))}else Ee(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}_N?.ct((function(h,p,g,y,T){var N,R,O,G,J,be;let At={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Ie=p.unchangedNames;return Ie&&(At.bloomFilter={applied:T===0,hashCount:(N=Ie?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(G=(O=(R=Ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&G!==void 0?G:0,padding:(be=(J=Ie?.bits)===null||J===void 0?void 0:J.padding)!==null&&be!==void 0?be:0,mightContain:C=>{var _;return(_=y?.mightContain(C))!==null&&_!==void 0&&_}}),At})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Or(r).toUint8Array()}catch(u){if(u instanceof Zf)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new WE(s,i,o)}catch(u){return Ai(u instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&jE(a.target)){let u=new q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,An.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new np(e,n,this.He,this.ze,r);return this.ze=Fr(),this.je=$f(),this.Je=$f(),this.He=new je(ce),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new op,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new at(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new at(ce),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new op),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function $f(){return new je(q.comparator)}function wN(){return new je(q.comparator)}var O4={asc:"ASCENDING",desc:"DESCENDING"},k4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F4={and:"AND",or:"OR"},QE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function YE(t,e){return t.useProto3Json||Mp(e)?e:{value:e}}function sp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function L4(t,e){return sp(t,e.toTimestamp())}function tr(t){return Ee(!!t,49232),oe.fromTimestamp((function(n){let r=Pr(n);return new Re(r.seconds,r.nanos)})(t))}function dw(t,e){return ZE(t,e).canonicalString()}function ZE(t,e){let n=(function(i){return new Oe(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function FM(t){let e=Oe.fromString(t);return Ee(BM(e),10190,{key:e.toString()}),e}function JE(t,e){return dw(t.databaseId,e.path)}function pE(t,e){let n=FM(e);if(n.get(1)!==t.databaseId.projectId)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(VM(n))}function LM(t,e){return dw(t.databaseId,e)}function V4(t){let e=FM(t);return e.length===4?Oe.emptyPath():VM(e)}function XE(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VM(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CN(t,e,n){return{name:JE(t,e),fields:n.value.mapValue.fields}}function j4(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),St.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),St.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?x.UNKNOWN:OM(l.code);return new V(h,l.message||"")})(s);n=new ip(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pE(t,r.document.name),o=tr(r.document.updateTime),s=r.document.createTime?tr(r.document.createTime):oe.min(),a=new en({mapValue:{fields:r.document.fields}}),u=An.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new da(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pE(t,r.document),o=r.readTime?tr(r.readTime):oe.min(),s=An.newNoDocument(i,o),a=r.removedTargetIds||[];n=new da([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pE(t,r.document),o=r.removedTargetIds||[];n=new da([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new GE(i,o),a=r.targetId;n=new rp(a,s)}}return n}function U4(t,e){let n;if(e instanceof Lo)n={update:CN(t,e.key,e.value)};else if(e instanceof Ju)n={delete:JE(t,e.key)};else if(e instanceof rr)n={update:CN(t,e.key,e.data),updateMask:Q4(e.fieldMask)};else{if(!(e instanceof $E))return K(16599,{Rt:e.type});n={verify:JE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ia)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ko)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:L4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)})(t,e.precondition)),n}function B4(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?tr(i.updateTime):tr(o);return s.isEqual(oe.min())&&(s=tr(o)),new BE(s,i.transformResults||[])})(n,e))):[]}function $4(t,e){return{documents:[LM(t,e.path)]}}function H4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LM(t,i);let o=(function(l){if(l.length!==0)return UM(Rn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:ca(g.field),direction:G4(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=YE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function z4(t){let e=V4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=jM(p);return g instanceof Rn&&yM(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(T){return new _a(ua(T.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Mp(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new va(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new va(y,g)})(n.endAt)),y4(e,i,s,o,a,"F",u,l)}function q4(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jM(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ua(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ua(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ua(n.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ua(n.unaryFilter.field);return Ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ze.create(ua(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Rn.create(n.compositeFilter.filters.map(r=>jM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}})(n.compositeFilter.op))})(t):K(30097,{filter:t})}function G4(t){return O4[t]}function W4(t){return k4[t]}function K4(t){return F4[t]}function ca(t){return{fieldPath:t.canonicalString()}}function ua(t){return tn.fromServerFormat(t.fieldPath)}function UM(t){return t instanceof Ze?(function(n){if(n.op==="=="){if(lN(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NAN"}};if(uN(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lN(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NAN"}};if(uN(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(n.field),op:W4(n.op),value:n.value}}})(t):t instanceof Rn?(function(n){let r=n.getFilters().map(i=>UM(i));return r.length===1?r[0]:{compositeFilter:{op:K4(n.op),filters:r}}})(t):K(54877,{filter:t})}function Q4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var el=class t{constructor(e,n,r,i,o=oe.min(),s=oe.min(),a=St.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var eI=class{constructor(e){this.gt=e}};function Y4(t){let e=z4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tp(e,e.limit,"L"):e}var ap=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Pe(e.integerValue));else if("doubleValue"in e){let r=Pe(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Qu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Pr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Or(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?pM(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):fM(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):K(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=ga,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Pe(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),q.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};ap.Ut=new ap;var tI=class{constructor(){this.Dn=new nI}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Po.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},nI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Oe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Oe.comparator)).toArray()}};var Rse=new Uint8Array(0);var DN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$M=41943040,ln=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln($M,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var tl=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var bN="LruGarbageCollector",Z4=1048576;function TN([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var rI=class{constructor(e){this.Tr=e,this.buffer=new at(TN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();TN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},iI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){U(bN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ra(n)?U(bN,"Ignoring IndexedDB error during garbage collection: ",n):yield Aa(n)}yield this.Rr(3e5)}))}},oI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(nw.ue);let r=new rI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(DN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),sa()<=de.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function J4(t,e){return new oI(t,e)}var sI=class{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var aI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var cI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gu(r.mutation,i,dn.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){let i=Ao();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=$u();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ao();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Fr(),s=qu(),a=(function(){return qu()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof rr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Gu(h.mutation,l,h.mutation.getFieldMask(),Re.now())):s.set(l.key,dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new aI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=qu(),i=new je((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||dn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=TM();h.forEach(g=>{if(!o.has(g)){let y=xM(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Ao()),a=Ku,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:bM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=$u();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=$u();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,g){return new Oo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,An.newInvalidDocument(h)))});let a=$u();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Gu(h.mutation,l,dn.empty(),Re.now()),kp(n,l)&&(a=a.insert(u,l))}),a})}};var uI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:tr(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:Y4(i.bundledQuery),readTime:tr(i.readTime)}})(n)),P.resolve()}};var lI=class{constructor(){this.overlays=new je(q.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ao();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Ao(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ao(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ao(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new qE(n,r));let o=this.kr.get(n);o===void 0&&(o=fe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var dI=class{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var nl=class{constructor(){this.qr=new at(Ye.Qr),this.$r=new at(Ye.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ye(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new q(new Oe([])),r=new Ye(n,e),i=new Ye(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new q(new Oe([])),r=new Ye(n,e),i=new Ye(n,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ye(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return q.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||q.comparator(e.key,n.key)}};var hI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new at(Ye.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new HE(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ye(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?rw:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ce);return n.forEach(i=>{let o=new Ye(i,0),s=new Ye(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new Ye(new q(o),0),a=new at(ce);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Ye(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ye(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var fI=class{constructor(e){this.ni=e,this.docs=(function(){return new je(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():An.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Fr(),s=n.path,a=new q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||JH(ZH(h),r)<=0||(i.has(h.key)||kp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pI(this)}getSize(e){return P.resolve(this.size)}},pI=class extends sI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var gI=class{constructor(e){this.persistence=e,this.ii=new kr(n=>cw(n),uw),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.si=0,this.oi=new nl,this.targetCount=0,this._i=tl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var cp=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new nw(0),this.ci=!1,this.ci=!0,this.li=new dI,this.referenceDelegate=e(this),this.hi=new gI(this),this.indexManager=new tI,this.remoteDocumentCache=(function(i){return new fI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new eI(n),this.Ti=new uI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new hI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new mI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},mI=class extends TE{constructor(e){super(),this.currentSequenceNumber=e}},yI=class t{constructor(e){this.persistence=e,this.Ai=new nl,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=q.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,oe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},up=class t{constructor(e,n){this.persistence=e,this.gi=new kr(r=>n4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=J4(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zf(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var vI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=fe(),i=fe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var _I=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var EI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return qS()?8:e4(ot())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new _I;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(sa()<=de.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(sa()<=de.DEBUG&&U("QueryEngine","Query:",aa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(sa()<=de.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(n))):P.resolve())}ps(e,n){if(pN(n))return P.resolve(null);let r=er(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tp(n,null,"F"),r=er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,tp(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return pN(n)||i.isEqual(oe.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(sa()<=de.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aa(n)),this.vs(e,s,n,YH(i,Ku)).next(a=>a))})}bs(e,n){let r=new at(CM(e));return n.forEach((i,o)=>{kp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return sa()<=de.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",aa(n)),this.gs.getDocumentsMatchingQuery(e,n,Po.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var hw="LocalStore",X4=3e8,II=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new je(ce),this.Ms=new kr(o=>cw(o),uw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function e3(t,e,n,r){return new II(t,e,n,r)}function HM(t,e){return v(this,null,function*(){let n=ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function t3(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(N=>{let R=l.docVersions.get(T);Ee(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zM(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function n3(t,e){let n=ne(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(St.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=X4?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=Fr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(r3(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(oe.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function r3(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Fr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):U(hw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function i3(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function o3(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new el(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function wI(t,e,n){return v(this,null,function*(){let r=ne(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ra(s))throw s;U(hw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function SN(t,e,n){let r=ne(t),i=oe.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ne(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,er(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:oe.min(),n?o:fe())).next(a=>(s3(r,_4(e),a),{documents:a,qs:o})))}function s3(t,e,n){let r=t.xs.get(e)||oe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var lp=class{constructor(){this.activeTargetIds=b4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var CI=class{constructor(){this.Fo=new lp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DI=class{xo(e){}shutdown(){}};var AN="ConnectivityMonitor",dp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){U(AN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){U(AN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hf=null;function bI(){return Hf===null?Hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hf++,"0x"+Hf.toString(16)}var gE="RestConnection",a3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},TI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Jf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=bI(),a=this.Go(e,n.toUriEncodedString());U(gE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=di(l);return this.jo(e,a,u,r,h).then(p=>(U(gE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ai(gE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=a3[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var SI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Tt="WebChannelConnection",AI=class extends TI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=bI();return new Promise((a,u)=>{let l=new uE;l.setWithCredentials(!0),l.listenOnce(lE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bu.NO_ERROR:let p=l.getResponseJson();U(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Bu.TIMEOUT:U(Tt,`RPC '${e}' ${s} timed out`),u(new V(x.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:let g=l.getStatus();if(U(Tt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let N=(function(O){let G=O.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(G)>=0?G:x.UNKNOWN})(T.status);u(new V(N,T.message))}else u(new V(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(x.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{U(Tt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);U(Tt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=bI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fE(),a=hE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");U(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,T=new SI({Ho:R=>{y?U(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(U(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),U(Tt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,O,G)=>{R.listen(O,J=>{try{G(J)}catch(be){setTimeout(()=>{throw be},0)}})};return N(p,oa.EventType.OPEN,()=>{y||(U(Tt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),N(p,oa.EventType.CLOSE,()=>{y||(y=!0,U(Tt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),N(p,oa.EventType.ERROR,R=>{y||(y=!0,Ai(Tt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),T.__(new V(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,oa.EventType.MESSAGE,R=>{var O;if(!y){let G=R.data[0];Ee(!!G,16349);let J=G,be=J?.error||((O=J[0])===null||O===void 0?void 0:O.error);if(be){U(Tt,`RPC '${e}' stream ${i} received error:`,be);let At=be.status,Ie=(function(I){let w=Qe[I];if(w!==void 0)return OM(w)})(At),C=be.message;Ie===void 0&&(Ie=x.INTERNAL,C="Unknown error status: "+At+" with message "+be.message),y=!0,T.__(new V(Ie,C)),p.close()}else U(Tt,`RPC '${e}' stream ${i} received:`,G),T.a_(G)}}),N(a,dE.STAT_EVENT,R=>{R.stat===Uf.PROXY?U(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Uf.NOPROXY&&U(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function mE(){return typeof document<"u"?document:null}function Fp(t){return new QE(t,!0)}var hp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var RN="PersistentStream",fp=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new hp(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new V(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return U(RN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(U(RN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},RI=class extends fp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=j4(this.serializer,e),r=(function(o){if(!("targetChange"in o))return oe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?tr(s.readTime):oe.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=XE(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=jE(u)?{documents:$4(o,u)}:{query:H4(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=kM(o,s.resumeToken);let l=YE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=sp(o,s.snapshotVersion.toTimestamp());let l=YE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=q4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=XE(this.serializer),n.removeTarget=e,this.k_(n)}},NI=class extends fp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=B4(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=XE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>U4(this.serializer,r))};this.k_(n)}};var MI=class{},xI=class extends MI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,ZE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(x.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,ZE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(x.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},PI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(xr(n),this._a=!1):U("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Vo="RemoteStore",OI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Uo(this)&&(U(Vo,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=ne(u);l.Ia.add(4),yield sl(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Lp(l)})})(this))}))}),this.Aa=new PI(r,i)}};function Lp(t){return v(this,null,function*(){if(Uo(t))for(let e of t.da)yield e(!0)})}function sl(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function qM(t,e){let n=ne(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),mw(n)?gw(n):Na(n).x_()&&pw(n,e))}function fw(t,e){let n=ne(t),r=Na(n);n.Ta.delete(e),r.x_()&&GM(n,e),n.Ta.size===0&&(r.x_()?r.B_():Uo(n)&&n.Aa.set("Unknown"))}function pw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).H_(e)}function GM(t,e){t.Ra.$e(e),Na(t).Y_(e)}function gw(t){t.Ra=new KE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.Aa.aa()}function mw(t){return Uo(t)&&!Na(t).M_()&&t.Ta.size>0}function Uo(t){return ne(t).Ia.size===0}function WM(t){t.Ra=void 0}function c3(t){return v(this,null,function*(){t.Aa.set("Online")})}function u3(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{pw(t,e)})})}function l3(t,e){return v(this,null,function*(){WM(t),mw(t)?(t.Aa.la(e),gw(t)):t.Aa.set("Unknown")})}function d3(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof ip&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){U(Vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pp(t,r)}else if(e instanceof da?t.Ra.Ye(e):e instanceof rp?t.Ra.it(e):t.Ra.et(e),!n.isEqual(oe.min()))try{let r=yield zM(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(St.EMPTY_BYTE_STRING,h.snapshotVersion)),GM(o,u);let p=new el(h.target,u,l,h.sequenceNumber);pw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){U(Vo,"Failed to raise snapshot:",r),yield pp(t,r)}})}function pp(t,e,n){return v(this,null,function*(){if(!Ra(e))throw e;t.Ia.add(1),yield sl(t),t.Aa.set("Offline"),n||(n=()=>zM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){U(Vo,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Lp(t)}))})}function KM(t,e){return e().catch(n=>pp(t,n,e))}function Vp(t){return v(this,null,function*(){let e=ne(t),n=Ni(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:rw;for(;h3(e);)try{let i=yield i3(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,f3(e,i)}catch(i){yield pp(e,i)}QM(e)&&YM(e)})}function h3(t){return Uo(t)&&t.Pa.length<10}function f3(t,e){t.Pa.push(e);let n=Ni(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function QM(t){return Uo(t)&&!Ni(t).M_()&&t.Pa.length>0}function YM(t){Ni(t).start()}function p3(t){return v(this,null,function*(){Ni(t).na()})}function g3(t){return v(this,null,function*(){let e=Ni(t);for(let n of t.Pa)e.X_(n.mutations)})}function m3(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=zE.from(r,e,n);yield KM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Vp(t)})}function y3(t,e){return v(this,null,function*(){e&&Ni(t).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return x4(s)&&s!==x.ABORTED})(i.code)){let o=r.Pa.shift();Ni(r).N_(),yield KM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Vp(r)}})})(t,e)),QM(t)&&YM(t)})}function NN(t,e){return v(this,null,function*(){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),U(Vo,"RemoteStore received new credentials");let r=Uo(n);n.Ia.add(3),yield sl(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Lp(n)})}function v3(t,e){return v(this,null,function*(){let n=ne(t);e?(n.Ia.delete(2),yield Lp(n)):e||(n.Ia.add(2),yield sl(n),n.Aa.set("Unknown"))})}function Na(t){return t.Va||(t.Va=(function(n,r,i){let o=ne(n);return o.ia(),new RI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:c3.bind(null,t),e_:u3.bind(null,t),n_:l3.bind(null,t),J_:d3.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),mw(t)?gw(t):t.Aa.set("Unknown")):(yield t.Va.stop(),WM(t))}))),t.Va}function Ni(t){return t.ma||(t.ma=(function(n,r,i){let o=ne(n);return o.ia(),new NI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:p3.bind(null,t),n_:y3.bind(null,t),ea:g3.bind(null,t),ta:m3.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield Vp(t)):(yield t.ma.stop(),t.Pa.length>0&&(U(Vo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var kI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yw(t,e){if(xr("AsyncQueue",`${e}: ${t}`),Ra(t))return new V(x.UNAVAILABLE,`${e}: ${t}`);throw t}var gp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=$u(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var mp=class{constructor(){this.fa=new je(q.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Da=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,gp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var FI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},LI=class{constructor(){this.queries=MN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ne(n),o=i.queries;i.queries=MN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new V(x.ABORTED,"Firestore shutting down"))}};function MN(){return new kr(t=>wM(t),Op)}function ZM(t,e){return v(this,null,function*(){let n=ne(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new FI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=yw(s,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&vw(n)})}function JM(t,e){return v(this,null,function*(){let n=ne(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function _3(t,e){let n=ne(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&vw(n)}function E3(t,e,n){let r=ne(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function vw(t){t.Da.forEach(e=>{e.next()})}var VI,xN;(xN=VI||(VI={})).Fa="default",xN.Cache="cache";var yp=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==VI.Cache}};var vp=class{constructor(e){this.key=e}},_p=class{constructor(e){this.key=e}},jI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=CM(e),this.eu=new gp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new mp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=kp(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?T!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,T){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:R})}};return N(y)-N(T)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Da(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new _p(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new vp(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Da.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},_w="SyncEngine",UI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},BI=class{constructor(e){this.key=e,this.lu=!1}},$I=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new kr(a=>wM(a),Op),this.Tu=new Map,this.Iu=new Set,this.du=new je(q.comparator),this.Eu=new Map,this.Au=new nl,this.Ru={},this.Vu=new Map,this.mu=tl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function I3(t,e,n=!0){return v(this,null,function*(){let r=ix(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield XM(r,e,n,!0),i})}function w3(t,e){return v(this,null,function*(){let n=ix(t);yield XM(n,e,!0,!1)})}function XM(t,e,n,r){return v(this,null,function*(){let i=yield o3(t.localStore,er(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield C3(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&qM(t.remoteStore,i),a})}function C3(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,g,y)=>(function(N,R,O,G){return v(this,null,function*(){let J=R.view.nu(O);J.Ds&&(J=yield SN(N.localStore,R.query,!1).then(({documents:C})=>R.view.nu(C,J)));let be=G&&G.targetChanges.get(R.targetId),At=G&&G.targetMismatches.get(R.targetId)!=null,Ie=R.view.applyChanges(J,N.isPrimaryClient,be,At);return ON(N,R.targetId,Ie._u),Ie.snapshot})})(t,p,g,y);let o=yield SN(t.localStore,e,!0),s=new jI(e,o.qs),a=s.nu(o.documents),u=Xu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);ON(t,n,l._u);let h=new UI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function D3(t,e,n){return v(this,null,function*(){let r=ne(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Op(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fw(r.remoteStore,i.targetId),HI(r,i.targetId)}).catch(Aa))):(HI(r,i.targetId),yield wI(r.localStore,i.targetId,!0))})}function b3(t,e){return v(this,null,function*(){let n=ne(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fw(n.remoteStore,r.targetId))})}function T3(t,e,n){return v(this,null,function*(){let r=P3(t);try{let i=yield(function(s,a){let u=ne(s),l=Re.now(),h=a.reduce((y,T)=>y.add(T.key),fe()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Fr(),N=fe();return u.Os.getEntries(y,h).next(R=>{T=R,T.forEach((O,G)=>{G.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(R=>{p=R;let O=[];for(let G of a){let J=M4(G,p.get(G.key).overlayedDocument);J!=null&&O.push(new rr(G.key,J,gM(J.value.mapValue),Mr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{g=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:g.batchId,changes:bM(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new je(ce)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield al(r,i.changes),yield Vp(r.remoteStore)}catch(i){let o=yw(i,"Failed to persist write");n.reject(o)}})}function ex(t,e){return v(this,null,function*(){let n=ne(t);try{let r=yield n3(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),yield al(n,r,e)}catch(r){yield Aa(r)}})}function PN(t,e,n){let r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&vw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function S3(t,e,n){return v(this,null,function*(){let r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new je(q.comparator);s=s.insert(o,An.newNoDocument(o,oe.min()));let a=fe().add(o),u=new np(oe.min(),new Map,new je(ce),s,a);yield ex(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Ew(r)}else yield wI(r.localStore,e,!1).then(()=>HI(r,e,n)).catch(Aa)})}function A3(t,e){return v(this,null,function*(){let n=ne(t),r=e.batch.batchId;try{let i=yield t3(n.localStore,e);nx(n,r,null),tx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield al(n,i)}catch(i){yield Aa(i)}})}function R3(t,e,n){return v(this,null,function*(){let r=ne(t);try{let i=yield(function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);nx(r,e,n),tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield al(r,i)}catch(i){yield Aa(i)}})}function tx(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function nx(t,e,n){let r=ne(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function HI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||rx(t,r)})}function rx(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(fw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ew(t))}function ON(t,e,n){for(let r of n)r instanceof vp?(t.Au.addReference(r.key,e),N3(t,r)):r instanceof _p?(U(_w,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||rx(t,r.key)):K(19791,{yu:r})}function N3(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(U(_w,"New document in limbo: "+n),t.Iu.add(r),Ew(t))}function Ew(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new q(Oe.fromString(e)),r=t.mu.next();t.Eu.set(r,new BI(n)),t.du=t.du.insert(n,r),qM(t.remoteStore,new el(er(Pp(n.path)),r,"TargetPurposeLimboResolution",nw.ue))}}function al(t,e,n){return v(this,null,function*(){let r=ne(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=vI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let h=ne(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Ra(p))throw p;U(hw,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),T=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(g,N)}}})})(r.localStore,o))})}function M3(t,e){return v(this,null,function*(){let n=ne(t);if(!n.currentUser.isEqual(e)){U(_w,"User change. New user:",e.toKey());let r=yield HM(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new V(x.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield al(n,r.Bs)}})}function x3(t,e){let n=ne(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function ix(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S3.bind(null,e),e.hu.J_=_3.bind(null,e.eventManager),e.hu.pu=E3.bind(null,e.eventManager),e}function P3(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R3.bind(null,e),e}var ox=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Fp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return e3(this.persistence,new EI,n.initialUser,this.serializer)}Du(n){return new cp(yI.Vi,this.serializer)}bu(n){return new CI}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),zI=class extends ox{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ee(this.persistence.referenceDelegate instanceof up,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new iI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new cp(r=>up.Vi(r,n),this.serializer)}};var O3=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>PN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M3.bind(null,this.syncEngine),yield v3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new LI})()}createDatastore(n){let r=Fp(n.databaseInfo.databaseId),i=(function(s){return new AI(s)})(n.databaseInfo);return(function(s,a,u,l){return new xI(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new OI(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>PN(this.syncEngine,r,0),(function(){return dp.C()?new dp:new DI})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new $I(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield(function(o){return v(this,null,function*(){let s=ne(o);U(Vo,"RemoteStore shutting down."),s.Ia.add(5),yield sl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Ep=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Mi="FirestoreClient",qI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=Wu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){U(Mi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U(Mi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=yw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yE(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),U(Mi,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield HM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ai("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{U("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ai("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function kN(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield k3(t);U(Mi,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>NN(e.remoteStore,i)),t._onlineComponents=e})}function k3(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U(Mi,"Using user provided OfflineComponentProvider");try{yield yE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),yield yE(t,new ox)}}else U(Mi,"Using default OfflineComponentProvider"),yield yE(t,new zI(void 0));return t._offlineComponents})}function sx(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(U(Mi,"Using user provided OnlineComponentProvider"),yield kN(t,t._uninitializedComponentsProvider._online)):(U(Mi,"Using default OnlineComponentProvider"),yield kN(t,new O3))),t._onlineComponents})}function F3(t){return sx(t).then(e=>e.syncEngine)}function GI(t){return v(this,null,function*(){let e=yield sx(t),n=e.eventManager;return n.onListen=I3.bind(null,e.syncEngine),n.onUnlisten=D3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=w3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b3.bind(null,e.syncEngine),n})}function L3(t,e,n={}){let r=new Zn;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new Ep({next:g=>{h.Ou(),s.enqueueAndForget(()=>JM(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new V(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new V(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new yp(Pp(a.path),h,{includeMetadataChanges:!0,ka:!0});return ZM(o,p)})(yield GI(t),t.asyncQueue,e,n,r)})),r.promise}function ax(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var FN=new Map;var cx="firestore.googleapis.com",LN=!0,Ip=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cx,this.ssl=LN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:LN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$M;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z4)throw new V(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ba=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ip({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ip(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vE;switch(r.type){case"firstParty":return new wE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=FN.get(n);r&&(U("ComponentProvider","Removing Datastore"),FN.delete(n),r.terminate())})(this),Promise.resolve()}};function ux(t,e,n,r={}){var i;t=Jn(t,ba);let o=di(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Yh(`https://${u}`),Zh("Firestore",!0)),s.host!==cx&&s.host!==u&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Gn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=st.MOCK_USER;else{h=jS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new V(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new st(g)}t._authCredentials=new _E(new Wf(h,p))}}var jo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ct=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ol(n,t._jsonSchema))return new t(e,r||null,new q(Oe.fromString(n.referencePath)))}};ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:Je("string",ct._jsonSchemaVersion),referencePath:Je("string")};var Di=class t extends jo{constructor(e,n,r){super(e,n,Pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function lx(t,e,...n){if(t=$e(t),qN("collection","path",e),t instanceof ba){let r=Oe.fromString(e,...n);return tN(r),new Di(t,null,r)}{if(!(t instanceof ct||t instanceof Di))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return tN(r),new Di(t.firestore,null,r)}}function Iw(t,e,...n){if(t=$e(t),arguments.length===1&&(e=Wu.newId()),qN("doc","path",e),t instanceof ba){let r=Oe.fromString(e,...n);return eN(r),new ct(t,null,new q(r))}{if(!(t instanceof ct||t instanceof Di))throw new V(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Oe.fromString(e,...n));return eN(r),new ct(t.firestore,t instanceof Di?t.converter:null,new q(r))}}var VN="AsyncQueue",wp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new hp(this,"async_queue_retry"),this.oc=()=>{let r=mE();r&&U(VN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=mE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=mE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Zn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ra(e))throw e;U(VN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,xr("INTERNAL UNHANDLED ERROR: ",jN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=kI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:jN(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function jN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function UN(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Lr=class extends ba{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new wp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new wp(e),this._firestoreClient=void 0,yield e}})}};function dx(t,e){let n=typeof t=="object"?t:Io(),r=typeof t=="string"?t:e||Jf,i=Ys(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=VS("firestore");o&&ux(i,...o)}return i}function ww(t){if(t._terminated)throw new V(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||V3(t),t._firestoreClient}function V3(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new SE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ax(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new qI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var bi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(St.fromBase64String(e))}catch(n){throw new V(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ol(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};bi._jsonSchemaVersion="firestore/bytes/1.0",bi._jsonSchema={type:Je("string",bi._jsonSchemaVersion),bytes:Je("string")};var Ta=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rl=class{constructor(e){this._methodName=e}};var Ti=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(ol(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:Je("string",Ti._jsonSchemaVersion),latitude:Je("number"),longitude:Je("number")};var Si=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ol(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:Je("string",Si._jsonSchemaVersion),vectorValues:Je("object")};var j3=/^__.*__$/,WI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lo(e,this.data,n,this.fieldTransforms)}},Cp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function hx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:t})}}var KI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return bp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hx(this.Ec)&&j3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},QI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fp(e)}Dc(e,n,r,i=!1){return new KI({Ec:e,methodName:n,bc:r,path:tn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Cw(t){let e=t._freezeSettings(),n=Fp(t._databaseId);return new QI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U3(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Dw("Data must be an object, but it was:",s,r);let a=fx(r,s),u,l;if(o.merge)u=new dn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=YI(e,p,n);if(!s.contains(g))throw new V(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gx(h,g)||h.push(g)}u=new dn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new WI(new en(a),u,l)}var Dp=class t extends rl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function B3(t,e,n,r){let i=t.Dc(1,e,n);Dw("Data must be an object, but it was:",i,r);let o=[],s=en.empty();xi(r,(u,l)=>{let h=bw(e,u,n);l=$e(l);let p=i.gc(h);if(l instanceof Dp)o.push(h);else{let g=cl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new dn(o);return new Cp(s,a,i.fieldTransforms)}function $3(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[YI(e,r,n)],u=[i];if(o.length%2!=0)throw new V(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(YI(e,o[g])),u.push(o[g+1]);let l=[],h=en.empty();for(let g=a.length-1;g>=0;--g)if(!gx(l,a[g])){let y=a[g],T=u[g];T=$e(T);let N=s.gc(y);if(T instanceof Dp)l.push(y);else{let R=cl(T,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new dn(l);return new Cp(h,p,s.fieldTransforms)}function H3(t,e,n,r=!1){return cl(n,t.Dc(r?4:3,e))}function cl(t,e){if(px(t=$e(t)))return Dw("Unsupported field value:",e,t),fx(t,e);if(t instanceof rl)return(function(r,i){if(!hx(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=cl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Re.fromDate(r);return{timestampValue:sp(i.serializer,o)}}if(r instanceof Re){let o=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sp(i.serializer,o)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bi)return{bytesValue:kM(i.serializer,r._byteString)};if(r instanceof ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Si)return(function(s,a){return{mapValue:{fields:{[ow]:{stringValue:sw},[ga]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return lw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Np(r)}`)})(t,e)}function fx(t,e){let n={};return aM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(t,(r,i)=>{let o=cl(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function px(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof Ti||t instanceof bi||t instanceof ct||t instanceof rl||t instanceof Si)}function Dw(t,e,n){if(!px(n)||!GN(n)){let r=Np(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function YI(t,e,n){if((e=$e(e))instanceof Ta)return e._internalPath;if(typeof e=="string")return bw(t,e);throw bp("Field path arguments must be of type string or ",t,!1,void 0,n)}var z3=new RegExp("[~\\*/\\[\\]]");function bw(t,e,n){if(e.search(z3)>=0)throw bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ta(...e.split("."))._internalPath}catch{throw bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(x.INVALID_ARGUMENT,a+t+u)}function gx(t,e){return t.some(n=>n.isEqual(e))}var Tp=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Tw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ZI=class extends Tp{data(){return super.data()}};function Tw(t,e){return typeof e=="string"?bw(t,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}function q3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var il=class{},Sp=class extends il{};function mx(t,e,...n){let r=[];e instanceof il&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof JI).length,a=o.filter(u=>u instanceof Ap).length;if(s>1||s>0&&a>0)throw new V(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Ap=class t extends Sp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return _x(e._query,n),new jo(e.firestore,e.converter,UE(e._query,n))}_parse(e){let n=Cw(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$N(p,h);let T=[];for(let N of p)T.push(BN(u,o,N));g={arrayValue:{values:T}}}else g=BN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$N(p,h),g=H3(a,s,p,h==="in"||h==="not-in");return Ze.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function yx(t,e,n){let r=e,i=Tw("where",t);return Ap._create(i,r,n)}var JI=class t extends il{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)_x(s,u),s=UE(s,u)})(e._query,n),new jo(e.firestore,e.converter,UE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var XI=class t extends Sp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new jo(e.firestore,e.converter,tp(e._query,this._limit,this._limitType))}};function vx(t){return QH("limit",t),XI._create("limit",t,"F")}function BN(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new V(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IM(e)&&n.indexOf("/")!==-1)throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Oe.fromString(n));if(!q.isDocumentKey(r))throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cN(t,new q(r))}if(n instanceof ct)return cN(t,n._key);throw new V(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Np(n)}.`)}function $N(t,e){if(!Array.isArray(t)||t.length===0)throw new V(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _x(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ew=class{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return xi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ga].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pe(s.doubleValue));return new Si(o)}convertGeoPoint(e){return new Ti(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=xp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){let n=Pr(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Oe.fromString(e);Ee(BM(r),9688,{name:e});let i=new Xf(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function G3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var No=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mo=class t extends Tp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Tw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:Je("string",Mo._jsonSchemaVersion),bundleSource:Je("string","DocumentSnapshot"),bundleName:Je("string"),bundle:Je("string")};var ha=class extends Mo{data(e={}){return super.data(e)}},fa=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new No(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ha(this._firestore,this._userDataWriter,r.key,r,new No(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new No(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new No(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:W3(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function W3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}function Ex(t){t=Jn(t,ct);let e=Jn(t.firestore,Lr);return L3(ww(e),t._key).then(n=>bx(e,t,n))}fa._jsonSchemaVersion="firestore/querySnapshot/1.0",fa._jsonSchema={type:Je("string",fa._jsonSchemaVersion),bundleSource:Je("string","QuerySnapshot"),bundleName:Je("string"),bundle:Je("string")};var Rp=class extends ew{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}};function Ix(t,e,n,...r){t=Jn(t,ct);let i=Jn(t.firestore,Lr),o=Cw(i),s;return s=typeof(e=$e(e))=="string"||e instanceof Ta?$3(o,"updateDoc",t._key,e,n,r):B3(o,"updateDoc",t._key,e),Sw(i,[s.toMutation(t._key,Mr.exists(!0))])}function wx(t){return Sw(Jn(t.firestore,Lr),[new Ju(t._key,Mr.none())])}function Cx(t,e){let n=Jn(t.firestore,Lr),r=Iw(t),i=G3(t.converter,e);return Sw(n,[U3(Cw(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}function Dx(t,...e){var n,r,i;t=$e(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||UN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(UN(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof ct)l=Jn(t.firestore,Lr),h=Pp(t._key.path),u={next:p=>{e[s]&&e[s](bx(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Jn(t,jo);l=Jn(p.firestore,Lr),h=p._query;let g=new Rp(l);u={next:y=>{e[s]&&e[s](new fa(l,g,p,y))},error:e[s+1],complete:e[s+2]},q3(t._query)}return(function(g,y,T,N){let R=new Ep(N),O=new yp(y,R,T);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return ZM(yield GI(g),O)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return JM(yield GI(g),O)}))}})(ww(l),h,a,u)}function Sw(t,e){return(function(r,i){let o=new Zn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return T3(yield F3(r),i,o)})),o.promise})(ww(t),e)}function bx(t,e,n){let r=n.docs.get(e._key),i=new Rp(t);return new Mo(t,i,e._key,r,new No(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Sa=i})(fi),Tn(new xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Lr(new EE(r.getProvider("auth-internal")),new CE(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ve(YR,ZR,e),Ve(YR,ZR,"esm2017")})();var Bo=class{constructor(e){return e}},Tx="firestore",Aw=class{constructor(){return Js(Tx)}};var Rw=new H("angularfire2.firestore-instances");function K3(t,e){let n=vu(Tx,t,e);return n&&new Bo(n)}function Q3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bo(r)}}var Y3={provide:Aw,deps:[[new Gt,Rw]]},Z3={provide:Bo,useFactory:K3,deps:[[new Gt,Rw],br]};function Sx(t,...e){return Ve("angularfire",pi.full,"fst"),pn([Z3,Y3,{provide:Rw,useFactory:Q3(t),multi:!0,deps:[we,et,gi,Co,[new Gt,Mu],[new Gt,Xs],...e]}])}var Ax=He(Cx,!0,2);var Nw=He(lx,!0,2);var Rx=He(wx,!0,2);var ul=He(Iw,!0,2);var Nx=He(Ex,!0);var Mx=He(dx,!0);var xx=He(vx,!0,2);var Mw=He(Dx,!0);var Px=He(mx,!0,2);var jp=He(Ix,!0,2);var Ox=He(yx,!0,2);var Ma=class t{firestore=M(Bo);auth=M(Pt);createTournament(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=Nw(this.firestore,"tournaments"),r={player1Id:e.uid,player1Email:e.email||"",status:"waiting",currentRound:1,player1Score:0,player2Score:0,rounds:this.initializeRounds(),createdAt:Re.now(),updatedAt:Re.now()};return(yield Ax(n,r)).id})}joinTournament(e){return v(this,null,function*(){let n=this.auth.currentUser;if(!n)throw new Error("Not authenticated");let r=ul(this.firestore,"tournaments",e);yield jp(r,{player2Id:n.uid,player2Email:n.email,status:"in-progress",updatedAt:Re.now()})})}makeChoice(e,n){return v(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let i=ul(this.firestore,"tournaments",e),o=yield Nx(i);if(!o.exists())throw new Error("Tournament not found");let s=o.data(),a=s.currentRound-1,u=[...s.rounds];if(r.uid===s.player1Id?u[a].player1Choice=n:u[a].player2Choice=n,u[a].player1Choice&&u[a].player2Choice){let h=this.determineRoundWinner(u[a].player1Choice,u[a].player2Choice,s.player1Id,s.player2Id);u[a].winner=h,u[a].completed=!0;let p=s.player1Score,g=s.player2Score;h===s.player1Id?p++:h===s.player2Id&&g++;let y={rounds:u,player1Score:p,player2Score:g,updatedAt:Re.now()};s.currentRound>=5?y.status="completed":u[a].completed&&(y.currentRound=s.currentRound+1),yield jp(i,y)}else yield jp(i,{rounds:u,updatedAt:Re.now()})})}determineRoundWinner(e,n,r,i){return e===n?null:e==="rock"&&n==="scissors"||e==="paper"&&n==="rock"||e==="scissors"&&n==="paper"?r:i}initializeRounds(){return Array.from({length:5},(e,n)=>({roundNumber:n+1,player1Choice:null,player2Choice:null,winner:null,completed:!1}))}getTournament(e){return new ee(n=>{let r=ul(this.firestore,"tournaments",e),i=Mw(r,o=>{o.exists()?n.next(k({id:o.id},o.data())):n.next(null)},o=>{n.error(o)});return()=>i()})}getAvailableTournaments(){return new ee(e=>{let n=Nw(this.firestore,"tournaments"),r=Px(n,Ox("status","==","waiting"),xx(20)),i=Mw(r,o=>{let s=o.docs.map(a=>k({id:a.id},a.data()));e.next(s)},o=>{e.error(o)});return()=>i()})}deleteTournament(e){return v(this,null,function*(){let n=ul(this.firestore,"tournaments",e);yield Rx(n)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var J3=(t,e)=>e.id;function X3(t,e){t&1&&(B(0,"div",7)(1,"p"),L(2,"No tournaments available"),j(),B(3,"p",9),L(4,"Create one to get started!"),j()())}function e6(t,e){if(t&1){let n=si();B(0,"button",15),Lt("click",function(){vn(n);let i=xe().$implicit,o=xe(2);return _n(o.cancelTournament(i.id))}),L(1," Cancel "),j()}}function t6(t,e){if(t&1){let n=si();B(0,"button",16),Lt("click",function(){vn(n);let i=xe().$implicit,o=xe(2);return _n(o.joinTournament(i.id))}),L(1," Join "),j()}}function n6(t,e){if(t&1&&(B(0,"div",10)(1,"div",11)(2,"h3"),L(3),j(),B(4,"p"),L(5,"Waiting for opponent..."),j(),B(6,"small"),L(7),j()(),B(8,"div",12),Kt(9,e6,2,0,"button",13)(10,t6,2,0,"button",14),j()()),t&2){let n=e.$implicit,r=xe(2);W(3),Ke(n.player1Email),W(4),gt("Created ",r.getTimeAgo(n.createdAt)),W(2),Qt(n.player1Id===r.currentUserId?9:10)}}function r6(t,e){if(t&1&&(B(0,"div",8),kc(1,n6,11,3,"div",10,J3),j()),t&2){let n=xe();W(),Fc(n.tournaments)}}var Up=class t{authService=M(Ci);tournamentService=M(Ma);router=M(Jt);auth=M(Pt);tournaments=[];creating=!1;userEmail="";currentUserId="";subscription;ngOnInit(){this.userEmail=this.auth.currentUser?.email||"",this.currentUserId=this.auth.currentUser?.uid||"",this.subscription=this.tournamentService.getAvailableTournaments().subscribe({next:e=>{this.tournaments=e},error:e=>{console.error("Error loading tournaments:",e)}})}ngOnDestroy(){this.subscription?.unsubscribe()}createTournament(){return v(this,null,function*(){this.creating=!0;try{let e=yield this.tournamentService.createTournament();this.router.navigate(["/game",e])}catch(e){console.error("Error creating tournament:",e),alert("Failed to create tournament")}finally{this.creating=!1}})}joinTournament(e){return v(this,null,function*(){try{yield this.tournamentService.joinTournament(e),this.router.navigate(["/game",e])}catch(n){console.error("Error joining tournament:",n),alert("Failed to join tournament")}})}cancelTournament(e){return v(this,null,function*(){if(confirm("Are you sure you want to cancel this tournament?"))try{yield this.tournamentService.deleteTournament(e)}catch(n){console.error("Error canceling tournament:",n),alert("Failed to cancel tournament")}})}getTimeAgo(e){if(!e)return"just now";let n=Math.floor((Date.now()-e.toDate().getTime())/1e3);if(n<60)return"just now";let r=Math.floor(n/60);return r<60?`${r}m ago`:`${Math.floor(r/60)}h ago`}logout(){this.authService.logout()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Wt({type:t,selectors:[["app-lobby"]],decls:22,vars:4,consts:[[1,"lobby-container"],[1,"user-info"],[1,"btn-logout",3,"click"],[1,"lobby-content"],[1,"create-section"],[1,"btn-create",3,"click","disabled"],[1,"tournaments-section"],[1,"empty-state"],[1,"tournaments-list"],[1,"sub-text"],[1,"tournament-card"],[1,"tournament-info"],[1,"tournament-actions"],[1,"btn-cancel"],[1,"btn-join"],[1,"btn-cancel",3,"click"],[1,"btn-join",3,"click"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"header")(2,"h1"),L(3,"\u{1F3C6} RPS Tournament Lobby"),j(),B(4,"div",1)(5,"span"),L(6),j(),B(7,"button",2),Lt("click",function(){return r.logout()}),L(8,"Logout"),j()()(),B(9,"div",3)(10,"div",4)(11,"h2"),L(12,"Create New Tournament"),j(),B(13,"p"),L(14,"Start a new tournament and wait for an opponent to join"),j(),B(15,"button",5),Lt("click",function(){return r.createTournament()}),L(16),j()(),B(17,"div",6)(18,"h2"),L(19,"Available Tournaments"),j(),Kt(20,X3,5,0,"div",7)(21,r6,3,0,"div",8),j()()()),n&2&&(W(6),Ke(r.userEmail),W(9),fh("disabled",r.creating),W(),gt(" ",r.creating?"Creating...":"Create Tournament"," "),W(4),Qt(r.tournaments.length===0?20:21))},dependencies:[Bn],styles:[".lobby-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}header[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}h1[_ngcontent-%COMP%]{color:#fff;margin:0}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;color:#fff}.btn-logout[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff4d}.lobby-content[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.create-section[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003;text-align:center;margin-bottom:30px}.create-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;color:#333}.create-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.btn-create[_ngcontent-%COMP%]{padding:15px 40px;background:#667eea;color:#fff;border:none;border-radius:5px;font-size:18px;font-weight:600;cursor:pointer;transition:background .3s}.btn-create[_ngcontent-%COMP%]:hover:not(:disabled){background:#5568d3}.btn-create[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.tournaments-section[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003}.tournaments-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:14px;margin-top:10px}.tournaments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.tournament-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#f5f5f5;border-radius:8px;border:2px solid #e0e0e0;transition:all .3s}.tournament-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea33}.tournament-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.tournament-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.tournament-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.btn-join[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:10px 30px;border:none;border-radius:5px;font-weight:600;cursor:pointer;transition:all .3s}.btn-join[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-join[_ngcontent-%COMP%]:hover{background:#45a049}.btn-cancel[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background:#da190b}"]})};var i6=(t,e)=>e.roundNumber;function o6(t,e){t&1&&(B(0,"div",2),L(1,"Loading tournament..."),j())}function s6(t,e){if(t&1){let n=si();B(0,"div",3)(1,"h2"),L(2,"Waiting for opponent..."),j(),B(3,"p"),L(4),j(),Lc(5,"div",6),B(6,"button",7),Lt("click",function(){vn(n);let i=xe();return _n(i.exitGame())}),L(7,"Cancel Tournament"),j()()}if(t&2){let n=xe();W(4),gt("Tournament created by ",n.tournament.player1Email)}}function a6(t,e){t&1&&(B(0,"span",11),L(1,"\u{1F3C6}"),j())}function c6(t,e){t&1&&(B(0,"span",11),L(1,"\u{1F3C6}"),j())}function u6(t,e){if(t&1&&(B(0,"div",14)(1,"span"),L(2),j(),B(3,"span"),L(4),j(),B(5,"span"),L(6),j()()),t&2){let n=e.$implicit,r=xe(2);W(2),gt("Round ",n.roundNumber,":"),W(2),ph("",r.getIcon(n.player1Choice)," vs ",r.getIcon(n.player2Choice)),W(),Un("win",n.winner===r.currentUserId)("lose",n.winner&&n.winner!==r.currentUserId&&n.winner!=="draw"),W(),gt(" ",r.getRoundResult(n)," ")}}function l6(t,e){if(t&1){let n=si();B(0,"div",4)(1,"h2"),L(2,"Tournament Complete!"),j(),B(3,"div",8)(4,"div",9)(5,"h3"),L(6),j(),B(7,"p",10),L(8),j(),Kt(9,a6,2,0,"span",11),j(),B(10,"div",12),L(11,"VS"),j(),B(12,"div",9)(13,"h3"),L(14),j(),B(15,"p",10),L(16),j(),Kt(17,c6,2,0,"span",11),j()(),B(18,"div",13)(19,"h3"),L(20,"Round Summary"),j(),kc(21,u6,7,8,"div",14,i6),j(),B(23,"button",15),Lt("click",function(){vn(n);let i=xe();return _n(i.exitGame())}),L(24,"Back to Lobby"),j()()}if(t&2){let n=xe();W(4),Un("winner",n.isPlayer1Winner()),W(2),Ke(n.tournament.player1Email),W(2),Ke(n.tournament.player1Score),W(),Qt(n.isPlayer1Winner()?9:-1),W(3),Un("winner",n.isPlayer2Winner()),W(2),Ke(n.tournament.player2Email),W(2),Ke(n.tournament.player2Score),W(),Qt(n.isPlayer2Winner()?17:-1),W(4),Fc(n.tournament.rounds)}}function d6(t,e){if(t&1&&(B(0,"div",18)(1,"h3"),L(2,"Waiting for opponent..."),j(),B(3,"p"),L(4),j(),Lc(5,"div",6),j()),t&2){let n=xe(2);W(4),gt("You chose: ",n.getIcon(n.getCurrentPlayerChoice()))}}function h6(t,e){if(t&1&&(B(0,"div",19)(1,"h3"),L(2),j(),B(3,"div",21)(4,"div",22)(5,"div",23),L(6),j(),B(7,"p"),L(8),j()(),B(9,"div",24),L(10,"VS"),j(),B(11,"div",22)(12,"div",23),L(13),j(),B(14,"p"),L(15),j()()(),B(16,"p",25),L(17),j(),B(18,"p",26),L(19),j()()),t&2){let n,r,i,o=xe(2);W(2),gt("Round ",o.tournament.currentRound-1," Result"),W(4),Ke(o.getIcon((n=o.getPreviousRound())==null?null:n.player1Choice)),W(2),Ke(o.tournament.player1Email),W(5),Ke(o.getIcon((r=o.getPreviousRound())==null?null:r.player2Choice)),W(2),Ke(o.tournament.player2Email),W(),Un("win",o.didCurrentPlayerWinPreviousRound())("lose",!o.didCurrentPlayerWinPreviousRound()&&((i=o.getPreviousRound())==null?null:i.winner)),W(),gt(" ",o.getRoundResultText()," "),W(2),gt("Ready for Round ",o.tournament.currentRound,"?")}}function f6(t,e){if(t&1){let n=si();B(0,"div",20)(1,"h3"),L(2,"Make your choice:"),j(),B(3,"div",27)(4,"button",28),Lt("click",function(){vn(n);let i=xe(2);return _n(i.makeChoice("rock"))}),B(5,"span",23),L(6,"\u270A"),j(),B(7,"span"),L(8,"Rock"),j()(),B(9,"button",28),Lt("click",function(){vn(n);let i=xe(2);return _n(i.makeChoice("paper"))}),B(10,"span",23),L(11,"\u270B"),j(),B(12,"span"),L(13,"Paper"),j()(),B(14,"button",28),Lt("click",function(){vn(n);let i=xe(2);return _n(i.makeChoice("scissors"))}),B(15,"span",23),L(16,"\u270C\uFE0F"),j(),B(17,"span"),L(18,"Scissors"),j()()()()}}function p6(t,e){if(t&1&&(B(0,"div",5)(1,"div",16)(2,"div",17)(3,"span"),L(4,"Round:"),j(),B(5,"strong"),L(6),j()(),B(7,"div",17)(8,"span"),L(9),j(),B(10,"strong"),L(11),j()(),B(12,"div",17)(13,"span"),L(14),j(),B(15,"strong"),L(16),j()()(),Kt(17,d6,6,1,"div",18)(18,h6,20,11,"div",19)(19,f6,19,0,"div",20),j()),t&2){let n=xe();W(6),gt("",n.tournament.currentRound," / 5"),W(3),gt("",n.tournament.player1Email,":"),W(2),Ke(n.tournament.player1Score),W(3),gt("",n.tournament.player2Email,":"),W(2),Ke(n.tournament.player2Score),W(),Qt(n.hasCurrentPlayerMadeChoice()?17:n.isRoundComplete()&&n.tournament.currentRound<=5?18:19)}}var Bp=class t{tournamentService=M(Ma);route=M(Dn);router=M(Jt);auth=M(Pt);tournament=null;tournamentId="";currentUserId="";subscription;ngOnInit(){this.currentUserId=this.auth.currentUser?.uid||"",this.tournamentId=this.route.snapshot.paramMap.get("tournamentId")||"",this.tournamentId&&(this.subscription=this.tournamentService.getTournament(this.tournamentId).subscribe({next:e=>{this.tournament=e,e||(alert("Tournament not found"),this.router.navigate(["/lobby"]))},error:e=>{console.error("Error loading tournament:",e),this.router.navigate(["/lobby"])}}))}ngOnDestroy(){this.subscription?.unsubscribe()}makeChoice(e){return v(this,null,function*(){try{yield this.tournamentService.makeChoice(this.tournamentId,e)}catch(n){console.error("Error making choice:",n),alert("Failed to make choice")}})}hasCurrentPlayerMadeChoice(){if(!this.tournament)return!1;let e=this.tournament.rounds[this.tournament.currentRound-1];return e?this.currentUserId===this.tournament.player1Id?!!e.player1Choice:!!e.player2Choice:!1}getCurrentPlayerChoice(){if(!this.tournament)return null;let e=this.tournament.rounds[this.tournament.currentRound-1];return this.currentUserId===this.tournament.player1Id?e.player1Choice:e.player2Choice}isRoundComplete(){if(!this.tournament||this.tournament.currentRound===1)return!1;let e=this.tournament.rounds[this.tournament.currentRound-2],n=this.tournament.rounds[this.tournament.currentRound-1];return e?.completed&&!n?.player1Choice&&!n?.player2Choice}getPreviousRound(){return!this.tournament||this.tournament.currentRound===1?null:this.tournament.rounds[this.tournament.currentRound-2]}didCurrentPlayerWinPreviousRound(){return this.getPreviousRound()?.winner===this.currentUserId}getRoundResultText(){let e=this.getPreviousRound();return e?e.winner?e.winner===this.currentUserId?"You Win!":"You Lose!":"It's a Draw!":""}isPlayer1Winner(){return this.tournament?this.tournament.player1Score>this.tournament.player2Score:!1}isPlayer2Winner(){return this.tournament?this.tournament.player2Score>this.tournament.player1Score:!1}getRoundResult(e){return e.winner?e.winner===this.currentUserId?"Won":"Lost":"Draw"}getIcon(e){return e&&{rock:"\u270A",paper:"\u270B",scissors:"\u270C\uFE0F"}[e]||"?"}exitGame(){this.tournament?.status==="waiting"&&this.tournament.player1Id===this.currentUserId?confirm("Cancel this tournament?")&&(this.tournamentService.deleteTournament(this.tournamentId),this.router.navigate(["/lobby"])):this.router.navigate(["/lobby"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Wt({type:t,selectors:[["app-game"]],decls:10,vars:1,consts:[[1,"game-container"],[1,"btn-exit",3,"click"],[1,"loading"],[1,"waiting-screen"],[1,"end-screen"],[1,"game-screen"],[1,"spinner"],[1,"btn-cancel",3,"click"],[1,"final-score"],[1,"player-card"],[1,"score"],[1,"trophy"],[1,"vs"],[1,"rounds-summary"],[1,"round-summary-item"],[1,"btn-lobby",3,"click"],[1,"scoreboard"],[1,"score-item"],[1,"waiting-choice"],[1,"round-result"],[1,"choice-buttons"],[1,"choices"],[1,"choice-display"],[1,"icon"],[1,"vs-text"],[1,"result-text"],[1,"next-round-text"],[1,"buttons"],[1,"btn-choice",3,"click"]],template:function(n,r){n&1&&(B(0,"div",0)(1,"header")(2,"h1"),L(3,"\u{1F3C6} RPS Tournament"),j(),B(4,"button",1),Lt("click",function(){return r.exitGame()}),L(5,"Exit to Lobby"),j()(),Kt(6,o6,2,0,"div",2)(7,s6,8,1,"div",3)(8,l6,25,10,"div",4)(9,p6,20,6,"div",5),j()),n&2&&(W(6),Qt(r.tournament?r.tournament.status==="waiting"?7:r.tournament.status==="completed"?8:9:6))},dependencies:[Bn],styles:[".game-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:900px;margin:0 auto 30px}h1[_ngcontent-%COMP%]{color:#fff;margin:0}.btn-exit[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-exit[_ngcontent-%COMP%]:hover{background:#ffffff4d}.loading[_ngcontent-%COMP%], .waiting-screen[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%], .game-screen[_ngcontent-%COMP%]{background:#fff;max-width:900px;margin:0 auto;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003}.loading[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#666}.waiting-screen[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%]{text-align:center}.waiting-screen[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .end-screen[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:30px auto}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn-cancel[_ngcontent-%COMP%], .btn-lobby[_ngcontent-%COMP%]{padding:12px 30px;background:#f44336;color:#fff;border:none;border-radius:5px;font-weight:600;cursor:pointer;margin-top:20px}.btn-lobby[_ngcontent-%COMP%]{background:#667eea}.btn-cancel[_ngcontent-%COMP%]:hover{background:#da190b}.btn-lobby[_ngcontent-%COMP%]:hover{background:#5568d3}.scoreboard[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:40px;padding:20px;background:#f5f5f5;border-radius:10px}.score-item[_ngcontent-%COMP%]{text-align:center}.score-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#666;margin-bottom:5px;font-size:14px}.score-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:24px;color:#333}.choice-buttons[_ngcontent-%COMP%]{text-align:center}.choice-buttons[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:30px;color:#333}.buttons[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;flex-wrap:wrap}.btn-choice[_ngcontent-%COMP%]{padding:30px;background:#fff;border:3px solid #667eea;border-radius:10px;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;align-items:center;gap:10px;min-width:120px}.btn-choice[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;transform:translateY(-5px);box-shadow:0 8px 16px #667eea4d}.btn-choice[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:48px}.waiting-choice[_ngcontent-%COMP%]{text-align:center;padding:40px}.waiting-choice[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:20px}.waiting-choice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:48px;margin:20px 0}.round-result[_ngcontent-%COMP%]{text-align:center}.choices[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:40px;margin:30px 0;flex-wrap:wrap}.choice-display[_ngcontent-%COMP%]{text-align:center}.choice-display[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:72px;margin-bottom:10px}.choice-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666}.vs-text[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#666}.result-text[_ngcontent-%COMP%]{font-size:28px;font-weight:600;margin:30px 0}.result-text.win[_ngcontent-%COMP%]{color:#4caf50}.result-text.lose[_ngcontent-%COMP%]{color:#f44336}.next-round-text[_ngcontent-%COMP%]{font-size:18px;color:#667eea;font-weight:600;margin-top:20px;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.final-score[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:40px;margin:40px 0;flex-wrap:wrap}.player-card[_ngcontent-%COMP%]{text-align:center;padding:30px 40px;background:#f5f5f5;border-radius:10px;border:3px solid transparent;position:relative;min-width:200px}.player-card.winner[_ngcontent-%COMP%]{border-color:gold;background:linear-gradient(135deg,#fff9e6,#ffe6b3)}.player-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;color:#333;font-size:16px}.player-card[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{font-size:48px;font-weight:600;margin:0;color:#667eea}.player-card[_ngcontent-%COMP%]   .trophy[_ngcontent-%COMP%]{font-size:32px;position:absolute;top:-15px;right:-15px}.vs[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#666}.rounds-summary[_ngcontent-%COMP%]{margin:40px 0;padding:20px;background:#f9f9f9;border-radius:8px}.rounds-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center}.round-summary-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;margin-bottom:10px;background:#fff;border-radius:5px;font-size:18px}.round-summary-item[_ngcontent-%COMP%]   .win[_ngcontent-%COMP%]{color:#4caf50;font-weight:600}.round-summary-item[_ngcontent-%COMP%]   .lose[_ngcontent-%COMP%]{color:#f44336;font-weight:600}"]})};var kx=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Lf},{path:"signup",component:Vf},{path:"lobby",component:Up,canActivate:[eE]},{path:"game/:tournamentId",component:Bp,canActivate:[eE]}];var xw={production:!1,firebase:{apiKey:"AIzaSyBS4LyOOgYPDyELp1rO71_O_5LvIlGnxtA",authDomain:"rps-tournament-1bb74.firebaseapp.com",projectId:"rps-tournament-1bb74",storageBucket:"rps-tournament-1bb74.firebasestorage.app",messagingSenderId:"47415856051",appId:"1:47415856051:web:9b22366ff988dc31a3d9c6"}};console.log("Firebase config:",xw.firebase);var Fx={providers:[Jy({eventCoalescing:!0}),Vv(kx),hA(()=>fA(xw.firebase)),IR(()=>CR()),Sx(()=>Mx())]};var $p=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Wt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Rs(0,"router-outlet")},dependencies:[uu],encapsulation:2})};console.log("Starting app...");pv($p,Fx).then(()=>console.log("App bootstrapped successfully")).catch(t=>{console.error("Bootstrap error:",t)});
