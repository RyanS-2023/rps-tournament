import{a as k}from"./chunk-75NLLDXB.js";import{a as S}from"./chunk-KPJUD5VV.js";import"./chunk-EXYLIBEK.js";import{C as E,I as f,J as _,K as v,L as y,P as o,Q as e,S as x,T as M,Ua as w,V as m,W as l,Y as i,Z as C,_ as h,c as u,ka as O,n as s,oa as P,p as b,q as g,x as c}from"./chunk-UKGZAEMS.js";var L=(a,t)=>t.id;function j(a,t){a&1&&(o(0,"div",9)(1,"p"),i(2,"No tournaments available"),e(),o(3,"p",11),i(4,"Create one to get started!"),e()())}function I(a,t){if(a&1){let n=x();o(0,"button",17),m("click",function(){b(n);let d=l().$implicit,p=l(2);return g(p.cancelTournament(d.id))}),i(1," Cancel "),e()}}function D(a,t){if(a&1){let n=x();o(0,"button",18),m("click",function(){b(n);let d=l().$implicit,p=l(2);return g(p.joinTournament(d.id))}),i(1," Join "),e()}}function F(a,t){if(a&1&&(o(0,"div",12)(1,"div",13)(2,"h3"),i(3),e(),o(4,"p"),i(5,"Waiting for opponent..."),e(),o(6,"small"),i(7),e()(),o(8,"div",14),f(9,I,2,0,"button",15)(10,D,2,0,"button",16),e()()),a&2){let n=t.$implicit,r=l(2);c(3),C(n.player1Email),c(4),h("Created ",r.getTimeAgo(n.createdAt)),c(2),_(n.player1Id===r.currentUserId?9:10)}}function A(a,t){if(a&1&&(o(0,"div",10),v(1,F,11,3,"div",12,L),e()),a&2){let n=l();c(),y(n.tournaments)}}var T=class a{authService=s(k);tournamentService=s(S);router=s(P);auth=s(w);tournaments=[];creating=!1;userEmail="";currentUserId="";subscription;ngOnInit(){this.userEmail=this.auth.currentUser?.email||"",this.currentUserId=this.auth.currentUser?.uid||"",this.subscription=this.tournamentService.getAvailableTournaments().subscribe({next:t=>{this.tournaments=t},error:t=>{console.error("Error loading tournaments:",t)}})}ngOnDestroy(){this.subscription?.unsubscribe()}createTournament(){return u(this,null,function*(){this.creating=!0;try{let t=yield this.tournamentService.createTournament();this.router.navigate(["/game",t])}catch(t){console.error("Error creating tournament:",t),alert("Failed to create tournament")}finally{this.creating=!1}})}joinTournament(t){return u(this,null,function*(){try{yield this.tournamentService.joinTournament(t),this.router.navigate(["/game",t])}catch(n){console.error("Error joining tournament:",n),alert("Failed to join tournament")}})}cancelTournament(t){return u(this,null,function*(){if(confirm("Are you sure you want to cancel this tournament?"))try{yield this.tournamentService.deleteTournament(t)}catch(n){console.error("Error canceling tournament:",n),alert("Failed to cancel tournament")}})}getTimeAgo(t){if(!t)return"just now";let n=Math.floor((Date.now()-t.toDate().getTime())/1e3);if(n<60)return"just now";let r=Math.floor(n/60);return r<60?`${r}m ago`:`${Math.floor(r/60)}h ago`}logout(){this.authService.logout()}viewStats(){this.router.navigate(["/stats"])}viewLeaderboard(){this.router.navigate(["/leaderboard"])}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=E({type:a,selectors:[["app-lobby"]],decls:26,vars:4,consts:[[1,"lobby-container"],[1,"user-info"],[1,"btn-stats",3,"click"],[1,"btn-logout",3,"click"],[1,"btn-leaderboard",3,"click"],[1,"lobby-content"],[1,"create-section"],[1,"btn-create",3,"click","disabled"],[1,"tournaments-section"],[1,"empty-state"],[1,"tournaments-list"],[1,"sub-text"],[1,"tournament-card"],[1,"tournament-info"],[1,"tournament-actions"],[1,"btn-cancel"],[1,"btn-join"],[1,"btn-cancel",3,"click"],[1,"btn-join",3,"click"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"header")(2,"h1"),i(3,"\u{1F3C6} RPS Tournament Lobby"),e(),o(4,"div",1)(5,"span"),i(6),e(),o(7,"button",2),m("click",function(){return r.viewStats()}),i(8,"Stats"),e(),o(9,"button",3),m("click",function(){return r.logout()}),i(10,"Logout"),e(),o(11,"button",4),m("click",function(){return r.viewLeaderboard()}),i(12,"Leaderboard"),e()()(),o(13,"div",5)(14,"div",6)(15,"h2"),i(16,"Create New Tournament"),e(),o(17,"p"),i(18,"Start a new tournament and wait for an opponent to join"),e(),o(19,"button",7),m("click",function(){return r.createTournament()}),i(20),e()(),o(21,"div",8)(22,"h2"),i(23,"Available Tournaments"),e(),f(24,j,5,0,"div",9)(25,A,3,0,"div",10),e()()()),n&2&&(c(6),C(r.userEmail),c(13),M("disabled",r.creating),c(),h(" ",r.creating?"Creating...":"Create Tournament"," "),c(4),_(r.tournaments.length===0?24:25))},dependencies:[O],styles:[".lobby-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}header[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}h1[_ngcontent-%COMP%]{color:#fff;margin:0}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;color:#fff}.btn-logout[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff4d}.btn-stats[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-stats[_ngcontent-%COMP%]:hover{background:#ffffff4d}.btn-leaderboard[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-leaderboard[_ngcontent-%COMP%]:hover{background:#ffffff4d}.lobby-content[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.create-section[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003;text-align:center;margin-bottom:30px}.create-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;color:#333}.create-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px}.btn-create[_ngcontent-%COMP%]{padding:15px 40px;background:#667eea;color:#fff;border:none;border-radius:5px;font-size:18px;font-weight:600;cursor:pointer;transition:background .3s}.btn-create[_ngcontent-%COMP%]:hover:not(:disabled){background:#5568d3}.btn-create[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.tournaments-section[_ngcontent-%COMP%]{background:#fff;padding:40px;border-radius:10px;box-shadow:0 10px 40px #0003}.tournaments-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:14px;margin-top:10px}.tournaments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.tournament-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background:#f5f5f5;border-radius:8px;border:2px solid #e0e0e0;transition:all .3s}.tournament-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea33}.tournament-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#333}.tournament-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.tournament-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.btn-join[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:10px 30px;border:none;border-radius:5px;font-weight:600;cursor:pointer;transition:all .3s}.btn-join[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-join[_ngcontent-%COMP%]:hover{background:#45a049}.btn-cancel[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background:#da190b}"]})};export{T as LobbyComponent};
