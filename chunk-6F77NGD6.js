import{D as x,Da as k,E as u,F as E,G as M,L as n,M as i,N as y,O as C,R as s,S as m,U as r,V as b,W as v,c as g,ga as O,ka as w,m as _,n as f,o as p,pa as P,t as l,x as h}from"./chunk-QSXJF5PL.js";var T=(o,t)=>t.id;function S(o,t){o&1&&(n(0,"div",3),y(1,"div",6),n(2,"p"),r(3,"Loading friends..."),i()())}function R(o,t){o&1&&(n(0,"div",8)(1,"p"),r(2,"You haven't added any friends yet"),i(),n(3,"p",10),r(4,"Add friends after playing games together!"),i()())}function D(o,t){if(o&1){let e=C();n(0,"div",11)(1,"div",12)(2,"span",13),r(3,"\u{1F464}"),i(),n(4,"div",14)(5,"span",15),r(6),i(),n(7,"span",16),r(8),i()()(),n(9,"button",17),s("click",function(){let d=f(e).$implicit,c=m(3);return p(c.confirmRemoveFriend(d))}),r(10," Remove "),i()()}if(o&2){let e=t.$implicit,a=m(3);l(6),b(e.friendNickname),l(2),v("Added ",a.formatDate(e.addedAt))}}function V(o,t){if(o&1&&(n(0,"div",9),E(1,D,11,2,"div",11,T),i()),o&2){let e=m(2);l(),M(e.friends)}}function I(o,t){if(o&1&&(n(0,"div",4)(1,"div",7)(2,"h2"),r(3),i()(),x(4,R,5,0,"div",8)(5,V,3,0,"div",9),i()),o&2){let e=m();l(3),v("Your Friends (",e.friends.length,")"),l(),u(e.friends.length===0?4:5)}}function L(o,t){if(o&1){let e=C();n(0,"div",18),s("click",function(){f(e);let d=m();return p(d.cancelRemove())}),n(1,"div",19),s("click",function(d){return f(e),p(d.stopPropagation())}),n(2,"h3"),r(3,"Remove Friend?"),i(),n(4,"p"),r(5,"Are you sure you want to remove "),n(6,"strong"),r(7),i(),r(8," from your friends list?"),i(),n(9,"div",20)(10,"button",21),s("click",function(){f(e);let d=m();return p(d.cancelRemove())}),r(11,"Cancel"),i(),n(12,"button",22),s("click",function(){f(e);let d=m();return p(d.removeFriend())}),r(13,"Remove"),i()()()()}if(o&2){let e=m();l(7),b(e.friendToRemove==null?null:e.friendToRemove.friendEmail)}}var F=class o{router=_(w);auth=_(P);tournamentService=_(k);loading=!0;friends=[];showConfirmModal=!1;friendToRemove=null;ngOnInit(){return g(this,null,function*(){yield this.loadFriends()})}loadFriends(){return g(this,null,function*(){let t=this.auth.currentUser?.uid;if(t)try{this.friends=yield this.tournamentService.getFriends(t)}catch(e){console.error("Error loading friends:",e)}finally{this.loading=!1}})}confirmRemoveFriend(t){this.friendToRemove=t,this.showConfirmModal=!0}cancelRemove(){this.showConfirmModal=!1,this.friendToRemove=null}removeFriend(){return g(this,null,function*(){if(this.friendToRemove)try{yield this.tournamentService.removeFriend(this.friendToRemove.friendId),this.showConfirmModal=!1,this.friendToRemove=null,yield this.loadFriends()}catch(t){console.error("Error removing friend:",t),alert("Failed to remove friend")}})}formatDate(t){if(!t)return"";let e=t.toDate(),d=Math.abs(new Date().getTime()-e.getTime()),c=Math.ceil(d/(1e3*60*60*24));return c===0?"today":c===1?"yesterday":c<7?`${c} days ago`:c<30?`${Math.floor(c/7)} weeks ago`:c<365?`${Math.floor(c/30)} months ago`:`${Math.floor(c/365)} years ago`}goToLobby(){this.router.navigate(["/lobby"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-friends"]],decls:10,vars:2,consts:[[1,"friends-container"],[1,"btn-back",3,"click"],[1,"friends-content"],[1,"loading"],[1,"friends-card"],[1,"modal-overlay"],[1,"spinner"],[1,"friends-header"],[1,"empty-state"],[1,"friends-list"],[1,"sub-text"],[1,"friend-item"],[1,"friend-info"],[1,"friend-icon"],[1,"friend-details"],[1,"friend-name"],[1,"friend-date"],[1,"btn-remove",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-actions"],[1,"btn-cancel-modal",3,"click"],[1,"btn-confirm-remove",3,"click"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"header")(2,"h1"),r(3,"\u{1F465} Friends"),i(),n(4,"button",1),s("click",function(){return a.goToLobby()}),r(5,"Back to Lobby"),i()(),n(6,"div",2),x(7,S,4,0,"div",3)(8,I,6,2,"div",4),i(),x(9,L,14,1,"div",5),i()),e&2&&(l(7),u(a.loading?7:8),l(2),u(a.showConfirmModal?9:-1))},dependencies:[O],styles:[".friends-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}header[_ngcontent-%COMP%]{max-width:800px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}h1[_ngcontent-%COMP%]{color:#fff;margin:0}.btn-back[_ngcontent-%COMP%]{padding:10px 20px;background:#fff3;color:#fff;border:2px solid white;border-radius:5px;cursor:pointer;font-weight:600}.btn-back[_ngcontent-%COMP%]:hover{background:#ffffff4d}.friends-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.loading[_ngcontent-%COMP%]{background:#fff;padding:60px;border-radius:10px;text-align:center}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.friends-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 10px 40px #0003;overflow:hidden}.friends-header[_ngcontent-%COMP%]{padding:25px 30px;border-bottom:2px solid #f0f0f0}.friends-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:14px;margin-top:10px}.friends-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.friend-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;border-bottom:1px solid #f0f0f0;transition:background .3s}.friend-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.friend-item[_ngcontent-%COMP%]:hover{background:#f9f9f9}.friend-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.friend-icon[_ngcontent-%COMP%]{font-size:32px;width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:#e3f2fd;border-radius:50%}.friend-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.friend-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.friend-date[_ngcontent-%COMP%]{font-size:13px;color:#999}.btn-remove[_ngcontent-%COMP%]{padding:8px 20px;background:#f44336;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:600;transition:background .3s}.btn-remove[_ngcontent-%COMP%]:hover{background:#da190b}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:10px;max-width:400px;width:100%;box-shadow:0 10px 40px #0000004d}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 25px;color:#666;line-height:1.5}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.btn-cancel-modal[_ngcontent-%COMP%], .btn-confirm-remove[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-weight:600;transition:background .3s}.btn-cancel-modal[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-cancel-modal[_ngcontent-%COMP%]:hover{background:#d0d0d0}.btn-confirm-remove[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-confirm-remove[_ngcontent-%COMP%]:hover{background:#da190b}"]})};export{F as FriendsComponent};
