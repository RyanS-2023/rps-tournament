var HM=Object.defineProperty,qM=Object.defineProperties;var zM=Object.getOwnPropertyDescriptors;var bw=Object.getOwnPropertySymbols,GM=Object.getPrototypeOf,WM=Object.prototype.hasOwnProperty,KM=Object.prototype.propertyIsEnumerable,QM=Reflect.get;var Cw=(t,e,n)=>e in t?HM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})WM.call(e,n)&&Cw(t,n,e[n]);if(bw)for(var n of bw(e))KM.call(e,n)&&Cw(t,n,e[n]);return t},ye=(t,e)=>qM(t,zM(e));var mr=(t,e,n)=>QM(GM(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var fp;function Fu(){return fp}function un(t){let e=fp;return fp=t,e}var Sw=Symbol("NotFound");function mo(t){return t===Sw||t?.name==="\u0275NotFound"}var ut=null,Vu=!1,pp=1,YM=null,lt=Symbol("SIGNAL");function Q(t){let e=ut;return ut=t,e}function $u(){return ut}var yo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vo(t){if(Vu)throw new Error("");if(ut===null)return;ut.consumerOnSignalRead(t);let e=ut.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=ut.recomputing;if(r&&(n=e!==void 0?e.nextProducer:ut.producers,n!==void 0&&n.producer===t)){ut.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===ut&&(!r||JM(i,ut)))return;let o=Eo(ut),s={producer:t,consumer:ut,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};ut.producersTail=s,e!==void 0?e.nextProducer=s:ut.producers=s,o&&Mw(t,s)}function Aw(){pp++}function Hu(t){if(!(Eo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===pp)){if(!t.producerMustRecompute(t)&&!ga(t)){Bu(t);return}t.producerRecomputeValue(t),Bu(t)}}function gp(t){if(t.consumers===void 0)return;let e=Vu;Vu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||ZM(r)}}finally{Vu=e}}function mp(){return ut?.consumerAllowSignalWrites!==!1}function ZM(t){t.dirty=!0,gp(t),t.consumerMarkedDirty?.(t)}function Bu(t){t.dirty=!1,t.lastCleanEpoch=pp}function _o(t){return t&&Rw(t),Q(t)}function Rw(t){t.producersTail=void 0,t.recomputing=!0}function pa(t,e){Q(e),t&&Nw(t)}function Nw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Eo(t))do n=yp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ga(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Hu(n),r!==n.version))return!0}return!1}function ma(t){if(Eo(t)){let e=t.producers;for(;e!==void 0;)e=yp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Mw(t,e){let n=t.consumersTail,r=Eo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Mw(i.producer,i)}function yp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Eo(e)){let o=e.producers;for(;o!==void 0;)o=yp(o)}return n}function Eo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function qu(t){YM?.(t)}function JM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function zu(t,e){return Object.is(t,e)}function Gu(t,e){let n=Object.create(XM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Hu(n),vo(n),n.value===fa)throw n.error;return n.value};return r[lt]=n,qu(n),r}var ju=Symbol("UNSET"),Uu=Symbol("COMPUTING"),fa=Symbol("ERRORED"),XM=ye(F({},yo),{value:ju,dirty:!0,error:null,equal:zu,kind:"computed",producerMustRecompute(t){return t.value===ju||t.value===Uu},producerRecomputeValue(t){if(t.value===Uu)throw new Error("");let e=t.value;t.value=Uu;let n=_o(t),r,i=!1;try{r=t.computation(),Q(null),i=e!==ju&&e!==fa&&r!==fa&&t.equal(e,r)}catch(o){r=fa,t.error=o}finally{pa(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function eP(){throw new Error}var Pw=eP;function kw(t){Pw(t)}function vp(t){Pw=t}var tP=null;function _p(t,e){let n=Object.create(Wu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>xw(n);return r[lt]=n,qu(n),[r,s=>Io(n,s),s=>Ep(n,s)]}function xw(t){return vo(t),t.value}function Io(t,e){mp()||kw(t),t.equal(t.value,e)||(t.value=e,nP(t))}function Ep(t,e){mp()||kw(t),Io(t,e(t.value))}var Wu=ye(F({},yo),{equal:zu,value:void 0,kind:"signal"});function nP(t){t.version++,Aw(),gp(t),tP?.(t)}function X(t){return typeof t=="function"}function wo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ku=wo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Ku?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ow(o)}catch(s){e=e??[],s instanceof Ku?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ku(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ow(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ai(n,e)}remove(e){let{_finalizers:n}=this;n&&ai(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Ip=Re.EMPTY;function Qu(t){return t instanceof Re||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function Ow(t){X(t)?t():t.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var To={setTimeout(t,e,...n){let{delegate:r}=To;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=To;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Yu(t){To.setTimeout(()=>{let{onUnhandledError:e}=Gt;if(e)e(t);else throw t})}function ya(){}var Lw=wp("C",void 0,void 0);function Fw(t){return wp("E",void 0,t)}function Vw(t){return wp("N",t,void 0)}function wp(t,e,n){return{kind:t,value:e,error:n}}var ci=null;function Do(t){if(Gt.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ci;if(ci=null,n)throw r}}else t()}function jw(t){Gt.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=t)}var ui=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qu(e)&&e.add(this)):this.destination=oP}static create(e,n,r){return new bo(e,n,r)}next(e){this.isStopped?Dp(Vw(e),this):this._next(e)}error(e){this.isStopped?Dp(Fw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Dp(Lw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rP=Function.prototype.bind;function Tp(t,e){return rP.call(t,e)}var bp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Zu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Zu(r)}else Zu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Zu(n)}}},bo=class extends ui{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tp(e.next,o),error:e.error&&Tp(e.error,o),complete:e.complete&&Tp(e.complete,o)}):i=e}this.destination=new bp(i)}};function Zu(t){Gt.useDeprecatedSynchronousErrorHandling?jw(t):Yu(t)}function iP(t){throw t}function Dp(t,e){let{onStoppedNotification:n}=Gt;n&&To.setTimeout(()=>n(t,e))}var oP={closed:!0,next:ya,error:iP,complete:ya};var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ct(t){return t}function Cp(...t){return Sp(t)}function Sp(t){return t.length===0?Ct:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=aP(n)?n:new bo(n,r,i);return Do(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Uw(r),new r((i,o)=>{let s=new bo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Co](){return this}pipe(...n){return Sp(n)(this)}toPromise(n){return n=Uw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Uw(t){var e;return(e=t??Gt.Promise)!==null&&e!==void 0?e:Promise}function sP(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function aP(t){return t&&t instanceof ui||sP(t)&&Qu(t)}function Ap(t){return X(t?.lift)}function ce(t){return e=>{if(Ap(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Rp(t,e,n,r,i)}var Rp=class extends ui{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function So(){return ce((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ao=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ap(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return So()(this)}};var Bw=wo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ju(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Bw}next(n){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ip:(this.currentObservers=null,o.push(n),new Re(()=>{this.currentObservers=null,ai(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new Ju(e,n),t})(),Ju=class extends ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ip}};var et=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Np={now(){return(Np.delegate||Date).now()},delegate:void 0};var Xu=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var va={setInterval(t,e,...n){let{delegate:r}=va;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=va;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ro=class extends Xu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return va.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&va.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var No=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};No.now=Np.now;var Mo=class extends No{constructor(e,n=No.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Mp=new Mo(Ro);var el=class extends Ro{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var tl=class extends Mo{};var Pp=new tl(el);var Et=new Y(t=>t.complete());function $w(t){return t&&X(t.schedule)}function Hw(t){return t[t.length-1]}function nl(t){return X(Hw(t))?t.pop():void 0}function yr(t){return $w(Hw(t))?t.pop():void 0}function kp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function qw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(t){return this instanceof li?(this.v=t,this):new li(t)}function Gw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,x){o.push([y,N,R,x])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof li?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ww(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qw=="function"?qw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var rl=t=>t&&typeof t.length=="number"&&typeof t!="function";function il(t){return X(t?.then)}function ol(t){return X(t[Co])}function sl(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function al(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cl=cP();function ul(t){return X(t?.[cl])}function ll(t){return Gw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield li(n.read());if(i)return yield li(void 0);yield yield li(r)}}finally{n.releaseLock()}})}function dl(t){return X(t?.getReader)}function Le(t){if(t instanceof Y)return t;if(t!=null){if(ol(t))return uP(t);if(rl(t))return lP(t);if(il(t))return dP(t);if(sl(t))return Kw(t);if(ul(t))return hP(t);if(dl(t))return fP(t)}throw al(t)}function uP(t){return new Y(e=>{let n=t[Co]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lP(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function dP(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Yu)})}function hP(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Kw(t){return new Y(e=>{pP(t,e).catch(n=>e.error(n))})}function fP(t){return Kw(ll(t))}function pP(t,e){var n,r,i,o;return zw(this,void 0,void 0,function*(){try{for(n=Ww(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function It(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function vr(t,e=0){return ce((n,r)=>{n.subscribe(se(r,i=>It(r,t,()=>r.next(i),e),()=>It(r,t,()=>r.complete(),e),i=>It(r,t,()=>r.error(i),e)))})}function _r(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Qw(t,e){return Le(t).pipe(_r(e),vr(e))}function Yw(t,e){return Le(t).pipe(_r(e),vr(e))}function Zw(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Jw(t,e){return new Y(n=>{let r;return It(n,e,()=>{r=t[cl](),It(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function hl(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{It(n,e,()=>{let r=t[Symbol.asyncIterator]();It(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xw(t,e){return hl(ll(t),e)}function eT(t,e){if(t!=null){if(ol(t))return Qw(t,e);if(rl(t))return Zw(t,e);if(il(t))return Yw(t,e);if(sl(t))return hl(t,e);if(ul(t))return Jw(t,e);if(dl(t))return Xw(t,e)}throw al(t)}function Pe(t,e){return e?eT(t,e):Le(t)}function G(...t){let e=yr(t);return Pe(t,e)}function Po(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function xp(t){return!!t&&(t instanceof Y||X(t.lift)&&X(t.subscribe))}var Fn=wo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(t,e){return ce((n,r)=>{let i=0;n.subscribe(se(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:gP}=Array;function mP(t,e){return gP(e)?t(...e):t(e)}function fl(t){return ue(e=>mP(t,e))}var{isArray:yP}=Array,{getPrototypeOf:vP,prototype:_P,keys:EP}=Object;function pl(t){if(t.length===1){let e=t[0];if(yP(e))return{args:e,keys:null};if(IP(e)){let n=EP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IP(t){return t&&typeof t=="object"&&vP(t)===_P}function gl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ml(...t){let e=yr(t),n=nl(t),{args:r,keys:i}=pl(t);if(r.length===0)return Pe([],e);let o=new Y(wP(r,e,i?s=>gl(i,s):Ct));return n?o.pipe(fl(n)):o}function wP(t,e,n=Ct){return r=>{tT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)tT(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(se(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tT(t,e,n){t?It(n,t,e):e()}function nT(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Le(n(N,h++)).subscribe(se(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?It(e,s,()=>C(x)):C(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(se(e,y,()=>{p=!0,g()})),()=>{a?.()}}function $e(t,e,n=1/0){return X(e)?$e((r,i)=>ue((o,s)=>e(r,o,i,s))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>nT(r,i,t,n)))}function rT(t=1/0){return $e(Ct,t)}function iT(){return rT(1)}function ko(...t){return iT()(Pe(t,yr(t)))}function _a(t){return new Y(e=>{Le(t()).subscribe(e)})}function TP(...t){let e=nl(t),{args:n,keys:r}=pl(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Le(n[h]).subscribe(se(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?gl(r,a):a),o.complete())}))}});return e?i.pipe(fl(e)):i}function Vt(t,e){return ce((n,r)=>{let i=0;n.subscribe(se(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Er(t){return ce((e,n)=>{let r=null,i=!1,o;r=e.subscribe(se(n,void 0,void 0,s=>{o=Le(t(s,Er(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function oT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(se(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function xo(t,e){return X(e)?$e(t,e,1):$e(t,1)}function Ir(t){return ce((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Vn(t){return t<=0?()=>Et:ce((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function yl(t=DP){return ce((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function DP(){return new Fn}function Ea(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,o)=>t(i,o,r)):Ct,Vn(1),n?Ir(e):yl(()=>new Fn))}function Oo(t){return t<=0?()=>Et:ce((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Op(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,o)=>t(i,o,r)):Ct,Oo(1),n?Ir(e):yl(()=>new Fn))}function Lp(t,e){return ce(oT(t,e,arguments.length>=2,!0))}function Fp(...t){let e=yr(t);return ce((n,r)=>{(e?ko(t,n,e):ko(t,n)).subscribe(r)})}function wt(t,e){return ce((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(se(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(t(u,h)).subscribe(i=se(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vl(t){return ce((e,n)=>{Le(t).subscribe(se(n,()=>n.complete(),ya)),!n.closed&&e.subscribe(n)})}function Ge(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ct}function sT(t){let e=Q(null);try{return t()}finally{Q(e)}}var Fo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Yp=new Fo("20.3.16");var wl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(Da(e,n)),this.code=e}};function bP(t){return`NG0${Math.abs(t)}`}function Da(t,e){return`${bP(t)}${e?": "+e:""}`}var ba=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("")}function uT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Bn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Bn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Zp(t,e){return t?e?`${t} ${e}`:t:e||""}var CP=pe({__forward_ref__:pe});function Tl(t){return t.__forward_ref__=Tl,t.toString=function(){return Bn(this())},t}function tt(t){return Jp(t)?t():t}function Jp(t){return typeof t=="function"&&t.hasOwnProperty(CP)&&t.__forward_ref__===Tl}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ca(t){return SP(t,Dl)}function Xp(t){return Ca(t)!==null}function SP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function AP(t){let e=t?.[Dl]??null;return e||null}function jp(t){return t&&t.hasOwnProperty(El)?t[El]:null}var Dl=pe({\u0275prov:pe}),El=pe({\u0275inj:pe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eg(t){return t&&!!t.\u0275providers}var tg=pe({\u0275cmp:pe}),ng=pe({\u0275dir:pe}),rg=pe({\u0275pipe:pe}),ig=pe({\u0275mod:pe}),wa=pe({\u0275fac:pe}),yi=pe({__NG_ELEMENT_ID__:pe}),aT=pe({__NG_ENV_ID__:pe});function vi(t){return typeof t=="string"?t:t==null?"":String(t)}function lT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():vi(t)}var dT=pe({ngErrorCode:pe}),RP=pe({ngErrorMessage:pe}),NP=pe({ngTokenPath:pe});function og(t,e){return hT("",-200,e)}function bl(t,e){throw new j(-201,!1)}function hT(t,e,n){let r=new j(e,t);return r[dT]=e,r[RP]=t,n&&(r[NP]=n),r}function MP(t){return t[dT]}var Up;function fT(){return Up}function St(t){let e=Up;return Up=t,e}function sg(t,e,n){let r=Ca(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;bl(t,"Injector")}var PP={},di=PP,Bp="__NG_DI_FLAG__",$p=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=hi(n)||0;try{return this.injector.get(e,r&8?null:di,r)}catch(i){if(mo(i))return i;throw i}}};function kP(t,e=0){let n=Fu();if(n===void 0)throw new j(-203,!1);if(n===null)return sg(t,void 0,e);{let r=xP(e),i=n.retrieve(t,r);if(mo(i)){if(r.optional)return null;throw i}return i}}function ne(t,e=0){return(fT()||kP)(tt(t),e)}function k(t,e){return ne(t,hi(e))}function hi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function xP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Hp(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=OP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function pT(t,e){return t[Bp]=e,t.prototype[Bp]=e,t}function OP(t){return t[Bp]}function fi(t,e){let n=t.hasOwnProperty(wa);return n?t[wa]:null}function Cl(t,e){t.forEach(n=>Array.isArray(n)?Cl(n,e):e(n))}function ag(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Sa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function mT(t,e,n){let r=Vo(t,e);return r>=0?t[r|1]=n:(r=~r,gT(t,r,e,n)),r}function Sl(t,e){let n=Vo(t,e);if(n>=0)return t[n|1]}function Vo(t,e){return LP(t,e,1)}function LP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Dr={},At=[],br=new U(""),cg=new U("",-1),ug=new U(""),Ta=class{get(e,n=di){if(n===di){let i=hT("",-201);throw i.name="\u0275NotFound",i}return n}};function lg(t){return t[ig]||null}function Cr(t){return t[tg]||null}function dg(t){return t[ng]||null}function yT(t){return t[rg]||null}function Wt(t){return{\u0275providers:t}}function vT(...t){return{\u0275providers:hg(!0,t),\u0275fromNgModule:!0}}function hg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Cl(e,s=>{let a=s;Il(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_T(i,o),n}function _T(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fg(i,o=>{e(o,r)})}}function Il(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=jp(t),s=!o&&Cr(t);if(!o&&!s){let u=t.ngModule;if(o=jp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Il(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Cl(o.imports,h=>{Il(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&_T(l,e)}if(!a){let l=fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:At},i),e({provide:ug,useValue:i,multi:!0},i),e({provide:br,useValue:()=>ne(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;fg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fg(t,e){for(let n of t)eg(n)&&(n=n.\u0275providers),Array.isArray(n)?fg(n,e):e(n)}var FP=pe({provide:String,useValue:pe});function ET(t){return t!==null&&typeof t=="object"&&FP in t}function VP(t){return!!(t&&t.useExisting)}function jP(t){return!!(t&&t.useFactory)}function pi(t){return typeof t=="function"}function IT(t){return!!t.useClass}var Aa=new U(""),_l={},cT={},Vp;function Ra(){return Vp===void 0&&(Vp=new Ta),Vp}var Fe=class{},gi=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,zp(e,s=>this.processProvider(s)),this.records.set(cg,Lo(void 0,this)),i.has("environment")&&this.records.set(Fe,Lo(void 0,this));let o=this.records.get(Aa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ug,At,{self:!0}))}retrieve(e,n){let r=hi(n)||0;try{return this.get(e,di,r)}catch(i){if(mo(i))return i;throw i}}destroy(){Ia(this),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return Ia(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ia(this);let n=un(this),r=St(void 0),i;try{return e()}finally{un(n),St(r)}}get(e,n=di,r){if(Ia(this),e.hasOwnProperty(aT))return e[aT](this);let i=hi(r),o,s=un(this),a=St(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=qP(e)&&Ca(e);h&&this.injectableDefInScope(h)?l=Lo(qp(e),_l):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ra():this.parent;return n=i&8&&n===di?null:n,u.get(e,n)}catch(u){let l=MP(u);throw l===-200||l===-201?new j(l,null):u}finally{St(a),un(s)}}resolveInjectorInitializers(){let e=Q(null),n=un(this),r=St(void 0),i;try{let o=this.get(br,At,{self:!0});for(let s of o)s()}finally{un(n),St(r),Q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Bn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tt(e);let n=pi(e)?e:tt(e&&e.provide),r=BP(e);if(!pi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Lo(void 0,_l,!0),i.factory=()=>Hp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Q(null);try{if(n.value===cT)throw og(Bn(e));return n.value===_l&&(n.value=cT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&HP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function qp(t){let e=Ca(t),n=e!==null?e.factory:fi(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return UP(t);throw new j(204,!1)}function UP(t){if(t.length>0)throw new j(204,!1);let n=AP(t);return n!==null?()=>n.factory(t):()=>new t}function BP(t){if(ET(t))return Lo(void 0,t.useValue);{let e=pg(t);return Lo(e,_l)}}function pg(t,e,n){let r;if(pi(t)){let i=tt(t);return fi(i)||qp(i)}else if(ET(t))r=()=>tt(t.useValue);else if(jP(t))r=()=>t.useFactory(...Hp(t.deps||[]));else if(VP(t))r=(i,o)=>ne(tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=tt(t&&(t.useClass||t.provide));if($P(t))r=()=>new i(...Hp(t.deps));else return fi(i)||qp(i)}return r}function Ia(t){if(t.destroyed)throw new j(205,!1)}function Lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $P(t){return!!t.deps}function HP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function qP(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function zp(t,e){for(let n of t)Array.isArray(n)?zp(n,e):n&&eg(n)?zp(n.\u0275providers,e):e(n)}function He(t,e){let n;t instanceof gi?(Ia(t),n=t):n=new $p(t);let r,i=un(n),o=St(void 0);try{return e()}finally{un(i),St(o)}}function wT(){return fT()!==void 0||Fu()!=null}var Kt=0,W=1,ee=2,We=3,jt=4,Ut=5,jo=6,Uo=7,ke=8,$n=9,dn=10,De=11,Bo=12,gg=13,_i=14,Rt=15,Ei=16,Ii=17,wi=18,Na=19,mg=20,Un=21,Al=22,Ma=23,Nt=24,Rl=25,Ti=26,nt=27,TT=1,yg=6,Sr=7,Pa=8,ka=9,xe=10;function hn(t){return Array.isArray(t)&&typeof t[TT]=="object"}function Qt(t){return Array.isArray(t)&&t[TT]===!0}function vg(t){return(t.flags&4)!==0}function Ar(t){return t.componentOffset>-1}function Nl(t){return(t.flags&1)===1}function fn(t){return!!t.template}function $o(t){return(t[ee]&512)!==0}function Di(t){return(t[ee]&256)===256}var DT="svg",bT="math";function Bt(t){for(;Array.isArray(t);)t=t[Kt];return t}function _g(t,e){return Bt(e[t])}function Yt(t,e){return Bt(e[t.index])}function xa(t,e){return t.data[e]}function $t(t,e){let n=e[t];return hn(n)?n:n[Kt]}function Ml(t){return(t[ee]&128)===128}function CT(t){return Qt(t[We])}function pn(t,e){return e==null?null:t[e]}function Eg(t){t[Ii]=0}function Ig(t){t[ee]&1024||(t[ee]|=1024,Ml(t)&&La(t))}function ST(t,e){for(;t>0;)e=e[_i],t--;return e}function Oa(t){return!!(t[ee]&9216||t[Nt]?.dirty)}function Pl(t){t[dn].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Oa(t)&&La(t)}function La(t){t[dn].changeDetectionScheduler?.notify(0);let e=wr(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!Ml(e)));)e=wr(e)}function wg(t,e){if(Di(t))throw new j(911,!1);t[Un]===null&&(t[Un]=[]),t[Un].push(e)}function AT(t,e){if(t[Un]===null)return;let n=t[Un].indexOf(e);n!==-1&&t[Un].splice(n,1)}function wr(t){let e=t[We];return Qt(e)?e[We]:e}function RT(t){return t[Uo]??=[]}function NT(t){return t.cleanup??=[]}var ie={lFrame:GT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Gp=!1;function MT(){return ie.lFrame.elementDepthCount}function PT(){ie.lFrame.elementDepthCount++}function Tg(){ie.lFrame.elementDepthCount--}function kT(){return ie.bindingsEnabled}function xT(){return ie.skipHydrationRootTNode!==null}function Dg(t){return ie.skipHydrationRootTNode===t}function bg(){ie.skipHydrationRootTNode=null}function le(){return ie.lFrame.lView}function rt(){return ie.lFrame.tView}function OT(t){return ie.lFrame.contextLView=t,t[ke]}function LT(t){return ie.lFrame.contextLView=null,t}function dt(){let t=Cg();for(;t!==null&&t.type===64;)t=t.parent;return t}function Cg(){return ie.lFrame.currentTNode}function FT(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ho(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function Sg(){return ie.lFrame.isParent}function VT(){ie.lFrame.isParent=!1}function Ag(){return Gp}function Rg(t){let e=Gp;return Gp=t,e}function jT(){return ie.lFrame.bindingIndex}function UT(t){return ie.lFrame.bindingIndex=t}function Rr(){return ie.lFrame.bindingIndex++}function Ng(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function BT(){return ie.lFrame.inI18n}function $T(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,kl(e)}function HT(){return ie.lFrame.currentDirectiveIndex}function kl(t){ie.lFrame.currentDirectiveIndex=t}function qT(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Mg(t){ie.lFrame.currentQueryIndex=t}function zP(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[Ut]:null}function Pg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=zP(o),i===null||(o=o[_i],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ie.lFrame=zT();return r.currentTNode=e,r.lView=t,!0}function xl(t){let e=zT(),n=t[W];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zT(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?GT(t):e}function GT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function WT(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kg=WT;function Ol(){let t=WT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function KT(t){return(ie.lFrame.contextLView=ST(t,ie.lFrame.contextLView))[ke]}function Hn(){return ie.lFrame.selectedIndex}function Nr(t){ie.lFrame.selectedIndex=t}function Fa(){let t=ie.lFrame;return xa(t.tView,t.selectedIndex)}function QT(){return ie.lFrame.currentNamespace}var YT=!0;function Ll(){return YT}function Fl(t){YT=t}function Wp(t,e=null,n=null,r){let i=xg(t,e,n,r);return i.resolveInjectorInitializers(),i}function xg(t,e=null,n=null,r,i=new Set){let o=[n||At,vT(t)];return r=r||(typeof t=="object"?void 0:Bn(t)),new gi(o,e||Ra(),r||null,i)}var Ke=class t{static THROW_IF_NOT_FOUND=di;static NULL=new Ta;static create(e,n){if(Array.isArray(e))return Wp({name:""},n,e,"");{let r=e.name??"";return Wp({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>ne(cg)});static __NG_ELEMENT_ID__=-1},it=new U(""),bi=(()=>{class t{static __NG_ELEMENT_ID__=GP;static __NG_ENV_ID__=n=>n}return t})(),Kp=class extends bi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Di(this._lView)}onDestroy(e){let n=this._lView;return wg(n,e),()=>AT(n,e)}};function GP(){return new Kp(le())}var ln=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Mt=new U("",{providedIn:"root",factory:()=>{let t=k(Fe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(ln),e.handleError(n))}}}),ZT={provide:br,useValue:()=>void k(ln),multi:!0};function Og(t){return typeof t=="function"&&t[lt]!==void 0}function Ci(t,e){let[n,r,i]=_p(t,e?.equal),o=n,s=o[lt];return o.set=r,o.update=i,o.asReadonly=JT.bind(o),o}function JT(){let t=this[lt];if(t.readonlyFn===void 0){let e=()=>this();e[lt]=t,t.readonlyFn=e}return t.readonlyFn}function Lg(t){return Og(t)&&typeof t.set=="function"}var Tr=class{},Va=new U("",{providedIn:"root",factory:()=>!1});var Fg=new U(""),Vg=new U(""),gn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),qo=(()=>{class t{internalPendingTasks=k(gn);scheduler=k(Tr);errorHandler=k(Mt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();function ja(...t){}var jg=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new Qp})}return t})(),Qp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Jo(t){return{toString:t}.toString()}var Vl="__parameters__";function nk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rk(t,e,n){return Jo(()=>{let r=nk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Vl)?u[Vl]:Object.defineProperty(u,Vl,{value:[]})[Vl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Pt=pT(rk("Optional"),8);function ik(t){return typeof t=="function"}var zl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ND(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Xo=(()=>{let t=()=>MD;return t.ngInherit=!0,t})();function MD(t){return t.type.prototype.ngOnChanges&&(t.setInput=sk),ok}function ok(){let t=kD(this),e=t?.current;if(e){let n=t.previous;if(n===Dr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sk(t,e,n,r,i){let o=this.declaredInputs[r],s=kD(t)||ak(t,{previous:Dr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new zl(l&&l.currentValue,n,u===Dr),ND(t,e,i,n)}var PD="__ngSimpleChanges__";function kD(t){return t[PD]||null}function ak(t,e){return t[PD]=e}var XT=[];var we=function(t,e=null,n){for(let r=0;r<XT.length;r++){let i=XT[r];i(t,e,n)}};function ck(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function uk(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Bl(t,e,n){xD(t,e,3,n)}function $l(t,e,n,r){(t[ee]&3)===n&&xD(t,e,n,r)}function Ug(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function xD(t,e,n,r){let i=r!==void 0?t[Ii]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ii]+=65536),(a<o||o==-1)&&(lk(t,n,e,u),t[Ii]=(t[Ii]&4294901760)+u+2),u++}function eD(t,e){we(4,t,e);let n=Q(null);try{e.call(t)}finally{Q(n),we(5,t,e)}}function lk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ee]>>14<t[Ii]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,eD(a,o)):eD(a,o)}var Go=-1,Ai=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function dk(t){return(t.flags&8)!==0}function hk(t){return(t.flags&16)!==0}function fk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];pk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function OD(t){return t===3||t===4||t===6}function pk(t){return t.charCodeAt(0)===64}function Wo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?tD(t,n,i,null,e[++r]):tD(t,n,i,null,null))}}return t}function tD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function LD(t){return t!==Go}function Gl(t){return t&32767}function gk(t){return t>>16}function Wl(t,e){let n=gk(t),r=e;for(;n>0;)r=r[_i],n--;return r}var Yg=!0;function nD(t){let e=Yg;return Yg=t,e}var mk=256,FD=mk-1,VD=5,yk=0,mn={};function vk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yi)&&(r=n[yi]),r==null&&(r=n[yi]=yk++);let i=r&FD,o=1<<i;e.data[t+(i>>VD)]|=o}function Kl(t,e){let n=jD(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,Bg(r.data,t),Bg(e,null),Bg(r.blueprint,null));let i=Im(t,e),o=t.injectorIndex;if(LD(i)){let s=Gl(i),a=Wl(i,e),u=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Bg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Im(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=qD(i),r===null)return Go;if(n++,i=i[_i],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Go}function Zg(t,e,n){vk(t,e,n)}function _k(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(OD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function UD(t,e,n){if(n&8||t!==void 0)return t;bl(e,"NodeInjector")}function BD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[$n],o=St(void 0);try{return i?i.get(e,r,n&8):sg(e,r,n&8)}finally{St(o)}}return UD(r,e,n)}function $D(t,e,n,r=0,i){if(t!==null){if(e[ee]&2048&&!(r&2)){let s=Dk(t,e,n,r,mn);if(s!==mn)return s}let o=HD(t,e,n,r,mn);if(o!==mn)return o}return BD(e,n,r,i)}function HD(t,e,n,r,i){let o=wk(n);if(typeof o=="function"){if(!Pg(e,t,r))return r&1?UD(i,n,r):BD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))bl(n);else return s}finally{kg()}}else if(typeof o=="number"){let s=null,a=jD(t,e),u=Go,l=r&1?e[Rt][Ut]:null;for((a===-1||r&4)&&(u=a===-1?Im(t,e):e[a+8],u===Go||!iD(r,!1)?a=-1:(s=e[W],a=Gl(u),e=Wl(u,e)));a!==-1;){let h=e[W];if(rD(o,a,h.data)){let p=Ek(a,e,n,s,r,l);if(p!==mn)return p}u=e[a+8],u!==Go&&iD(r,e[W].data[a+8]===l)&&rD(o,a,e)?(s=h,a=Gl(u),e=Wl(u,e)):a=-1}}return i}function Ek(t,e,n,r,i,o){let s=e[W],a=s.data[t+8],u=r==null?Ar(a)&&Yg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Ik(a,s,n,u,l);return h!==null?Ql(e,s,h,a,i):mn}function Ik(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&fn(y)&&y.type===n)return u}return null}function Ql(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ai){let a=o;if(a.resolving){let y=lT(s[n]);throw og(y)}let u=nD(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?St(a.injectImpl):null,g=Pg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&ck(n,s[n],e)}finally{p!==null&&St(p),nD(u),a.resolving=!1,kg()}}return o}function wk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yi)?t[yi]:void 0;return typeof e=="number"?e>=0?e&FD:Tk:e}function rD(t,e,n){let r=1<<t;return!!(n[e+(t>>VD)]&r)}function iD(t,e){return!(t&2)&&!(t&1&&e)}var Si=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return $D(this._tNode,this._lView,e,hi(r),n)}};function Tk(){return new Si(dt(),le())}function ld(t){return Jo(()=>{let e=t.prototype.constructor,n=e[wa]||Jg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[wa]||Jg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Jg(t){return Jp(t)?()=>{let e=Jg(tt(t));return e&&e()}:fi(t)}function Dk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!$o(s);){let a=HD(o,s,n,r|2,mn);if(a!==mn)return a;let u=o.parent;if(!u){let l=s[mg];if(l){let h=l.get(n,mn,r);if(h!==mn)return h}u=qD(s),s=s[_i]}o=u}return i}function qD(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[Ut]:null}function Wa(t){return _k(dt(),t)}function bk(){return wm(dt(),le())}function wm(t,e){return new Ka(Yt(t,e))}var Ka=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=bk}return t})();function zD(t){return(t.flags&128)===128}var Tm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Tm||{}),GD=new Map,Ck=0;function Sk(){return Ck++}function Ak(t){GD.set(t[Na],t)}function Xg(t){GD.delete(t[Na])}var oD="__ngContext__";function Ko(t,e){hn(e)?(t[oD]=e[Na],Ak(e)):t[oD]=e}function WD(t){return QD(t[Bo])}function KD(t){return QD(t[jt])}function QD(t){for(;t!==null&&!Qt(t);)t=t[jt];return t}var em;function Dm(t){em=t}function YD(){if(em!==void 0)return em;if(typeof document<"u")return document;throw new j(210,!1)}var dd=new U("",{providedIn:"root",factory:()=>Rk}),Rk="ng",hd=new U(""),ki=new U("",{providedIn:"platform",factory:()=>"unknown"});var fd=new U("",{providedIn:"root",factory:()=>YD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Nk="h",Mk="b";var ZD="r";var JD="di";var XD=!1,eb=new U("",{providedIn:"root",factory:()=>XD});var Pk=(t,e,n,r)=>{};function kk(t,e,n,r){Pk(t,e,n,r)}function bm(t){return(t.flags&32)===32}var xk=()=>null;function tb(t,e,n=!1){return xk(t,e,n)}function nb(t,e){let n=t.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Mg(o),a.contentQueries(2,e[s],s)}}}finally{Q(r)}}}function tm(t,e,n){Mg(0);let r=Q(null);try{e(t,n)}finally{Q(r)}}function rb(t,e,n){if(vg(e)){let r=Q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Q(r)}}}var qn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(qn||{});var jl;function Ok(){if(jl===void 0&&(jl=null,ba.trustedTypes))try{jl=ba.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return jl}function sD(t){return Ok()?.createScriptURL(t)||t}var Yl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wl})`}};function pd(t){return t instanceof Yl?t.changingThisBreaksApplicationSecurity:t}function Cm(t,e){let n=ib(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${wl})`)}return n===e}function ib(t){return t instanceof Yl&&t.getTypeName()||null}var Lk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ob(t){return t=String(t),t.match(Lk)?t:"unsafe:"+t}function Fk(t,e){return t.createText(e)}function Vk(t,e,n){t.setValue(e,n)}function sb(t,e,n){return t.createElement(e,n)}function Zl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ab(t,e,n){t.appendChild(e,n)}function aD(t,e,n,r,i){r!==null?Zl(t,e,n,r,i):ab(t,e,n)}function cb(t,e,n,r){t.removeChild(null,e,n,r)}function jk(t,e,n){t.setAttribute(e,"style",n)}function Uk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ub(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&fk(t,e,r),i!==null&&Uk(t,e,i),o!==null&&jk(t,e,o)}var gd=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(gd||{});function lb(t){let e=hb();return e?e.sanitize(gd.URL,t)||"":Cm(t,"URL")?pd(t):ob(vi(t))}function db(t){let e=hb();if(e)return sD(e.sanitize(gd.RESOURCE_URL,t)||"");if(Cm(t,"ResourceURL"))return sD(pd(t));throw new j(904,!1)}var Bk=new Set(["embed","frame","iframe","media","script"]),$k=new Set(["base","link","script"]);function Hk(t,e){return e==="src"&&Bk.has(t)||e==="href"&&$k.has(t)||e==="xlink:href"&&t==="script"?db:lb}function Sm(t,e,n){return Hk(e,n)(t)}function hb(){let t=le();return t&&t[dn].sanitizer}function fb(t){return t instanceof Function?t():t}function qk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var pb="ng-template";function zk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&qk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Am(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Am(t){return t.type===4&&t.value!==pb}function Gk(t,e,n){let r=t.type===4&&!n?pb:t.value;return e===r}function Wk(t,e,n){let r=4,i=t.attrs,o=i!==null?Yk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Zt(r)&&!Zt(u))return!1;if(s&&Zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Gk(t,u,n)||u===""&&e.length===1){if(Zt(r))return!1;s=!0}}else if(r&8){if(i===null||!zk(t,i,u,n)){if(Zt(r))return!1;s=!0}}else{let l=e[++a],h=Kk(u,i,Am(t),n);if(h===-1){if(Zt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;s=!0}}}}return Zt(r)||s}function Zt(t){return(t&1)===0}function Kk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Zk(e,t)}function Qk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wk(t,e[r],n))return!0;return!1}function Yk(t){for(let e=0;e<t.length;e++){let n=t[e];if(OD(n))return e}return t.length}function Zk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function cD(t,e){return t?":not("+e.trim()+")":e}function Jk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zt(s)&&(e+=cD(o,i),i=""),r=s,o=o||!Zt(r);n++}return i!==""&&(e+=cD(o,i)),e}function Xk(t){return t.map(Jk).join(",")}function ex(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Zt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Jt={};function Rm(t,e,n,r,i,o,s,a,u,l,h){let p=nt+r,g=p+i,y=tx(p,g),C=typeof l=="function"?l():l;return y[W]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function tx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jt);return n}function nx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Rm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Nm(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Kt]=i,p[ee]=r|4|128|8|64|1024,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),Eg(p),p[We]=p[_i]=t,p[ke]=n,p[dn]=s||t&&t[dn],p[De]=a||t&&t[De],p[$n]=u||t&&t[$n]||null,p[Ut]=o,p[Na]=Sk(),p[jo]=h,p[mg]=l,p[Rt]=e.type==2?t[Rt]:p,p}function rx(t,e,n){let r=Yt(e,t),i=nx(n),o=t[dn].rendererFactory,s=Mm(t,Nm(t,i,null,gb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function gb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function mb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mm(t,e){return t[Bo]?t[gg][jt]=e:t[Bo]=e,t[gg]=e,e}function ix(t=1){yb(rt(),le(),Hn()+t,!1)}function yb(t,e,n,r){if(!r)if((e[ee]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Bl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&$l(e,o,0,n)}Nr(n)}var md=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(md||{});function nm(t,e,n,r){let i=Q(null);try{let[o,s,a]=t.inputs[n],u=null;(s&md.SignalBased)!==0&&(u=e[o][lt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):ND(e,u,o,r)}finally{Q(i)}}var zn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(zn||{}),ox;function Pm(t,e){return ox(t,e)}var Ri=new Set,km=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(km||{}),Qa=new U(""),uD=new Set;function Mr(t){uD.has(t)||(uD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var vb=!1,rm=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,wT()&&(this.destroyRef=k(bi,{optional:!0})??void 0,this.pendingTasks=k(gn,{optional:!0})??void 0)}emit(e){let n=Q(null);try{super.next(e)}finally{Q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},yt=rm;function _b(t){let e,n;function r(){t=ja;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function lD(t){return queueMicrotask(()=>t()),()=>{t=ja}}var xm="isAngularZone",Jl=xm+"_ID",sx=0,ve=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new yt(!1);onMicrotaskEmpty=new yt(!1);onStable=new yt(!1);onError=new yt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=vb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ux(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ax,ja,ja);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ax={};function Om(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){_b(()=>{t.callbackScheduled=!1,im(t),t.isCheckStableRunning=!0,Om(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),im(t)}function ux(t){let e=()=>{cx(t)},n=sx++;t._inner=t._inner.fork({name:"angular",properties:{[xm]:!0,[Jl]:n,[Jl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(lx(u))return r.invokeTask(o,s,a,u);try{return dD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),hD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return dD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!dx(u)&&e(),hD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,im(t),Om(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function im(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function dD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function hD(t){t._nesting--,Om(t)}var Xl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new yt;onMicrotaskEmpty=new yt;onStable=new yt;onError=new yt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function lx(t){return Eb(t,"__ignore_ng_zone__")}function dx(t){return Eb(t,"__scheduler_tick__")}function Eb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ib=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var wb=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Tb(t,e,n){let r=t.get(wb);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function hx(t,e){let n=t.get(wb);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function fx(t,e){for(let[n,r]of e)Tb(t,r.animateFns)}function fD(t,e,n,r){let i=t?.[Ti]?.enter;e!==null&&i&&i.has(n.index)&&fx(r,i)}function zo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Qt(i)?u=i:hn(i)&&(l=!0,i=i[Kt]);let h=Bt(i);t===0&&r!==null?(fD(a,r,o,n),s==null?ab(e,r,h):Zl(e,r,h,s||null,!0)):t===1&&r!==null?(fD(a,r,o,n),Zl(e,r,h,s||null,!0)):t===2?pD(a,o,n,p=>{cb(e,h,l,p)}):t===3&&pD(a,o,n,()=>{e.destroyNode(h)}),u!=null&&Cx(e,t,n,u,o,r,s)}}function px(t,e){Db(t,e),e[Kt]=null,e[Ut]=null}function gx(t,e,n,r,i,o){r[Kt]=i,r[Ut]=e,vd(t,r,n,1,i,o)}function Db(t,e){e[dn].changeDetectionScheduler?.notify(9),vd(t,e,e[De],2,null,null)}function mx(t){let e=t[Bo];if(!e)return $g(t[W],t);for(;e;){let n=null;if(hn(e))n=e[Bo];else{let r=e[xe];r&&(n=r)}if(!n){for(;e&&!e[jt]&&e!==t;)hn(e)&&$g(e[W],e),e=e[We];e===null&&(e=t),hn(e)&&$g(e[W],e),n=e&&e[jt]}e=n}}function Lm(t,e){let n=t[ka],r=n.indexOf(e);n.splice(r,1)}function yd(t,e){if(Di(e))return;let n=e[De];n.destroyNode&&vd(t,e,n,3,null,null),mx(e)}function $g(t,e){if(Di(e))return;let n=Q(null);try{e[ee]&=-129,e[ee]|=256,e[Nt]&&ma(e[Nt]),_x(t,e),vx(t,e),e[W].type===1&&e[De].destroy();let r=e[Ei];if(r!==null&&Qt(e[We])){r!==e[We]&&Lm(r,e);let i=e[wi];i!==null&&i.detachView(t)}Xg(e)}finally{Q(n)}}function pD(t,e,n,r){let i=t?.[Ti];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Ri.add(t),Tb(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),yx(t,r)}else t&&Ri.delete(t),r(!1)},i)}function yx(t,e){let n=t[Ti]?.running;if(n){n.then(()=>{t[Ti].running=void 0,Ri.delete(t),e(!0)});return}e(!1)}function vx(t,e){let n=t.cleanup,r=e[Uo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Uo]=null);let i=e[Un];if(i!==null){e[Un]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ma];if(o!==null){e[Ma]=null;for(let s of o)s.destroy()}}function _x(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ai)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];we(4,a,u);try{u.call(a)}finally{we(5,a,u)}}else{we(4,i,o);try{o.call(i)}finally{we(5,i,o)}}}}}function Ex(t,e,n){return Ix(t,e.parent,n)}function Ix(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Kt];if(Ar(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===qn.None||i===qn.Emulated)return null}return Yt(r,n)}function wx(t,e,n){return Dx(t,e,n)}function Tx(t,e,n){return t.type&40?Yt(t,n):null}var Dx=Tx,gD;function Fm(t,e,n,r){let i=Ex(t,r,e),o=e[De],s=r.parent||e[Ut],a=wx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)aD(o,i,n[u],a,!1);else aD(o,i,n,a,!1);gD!==void 0&&gD(o,r,e,n,i)}function Ua(t,e){if(e!==null){let n=e.type;if(n&3)return Yt(e,t);if(n&4)return om(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ua(t,r);{let i=t[e.index];return Qt(i)?om(-1,i):Bt(i)}}else{if(n&128)return Ua(t,e.next);if(n&32)return Pm(e,t)()||Bt(t[e.index]);{let r=bb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=wr(t[Rt]);return Ua(i,r)}else return Ua(t,e.next)}}}return null}function bb(t,e){if(e!==null){let r=t[Rt][Ut],i=e.projection;return r.projection[i]}return null}function om(t,e){let n=xe+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return Ua(r,i)}return e[Sr]}function Vm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[$n];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Ko(Bt(u),r),n.flags|=2),!bm(n))if(l&8)Vm(t,e,n.child,r,i,o,!1),zo(e,t,a,i,u,n,o,r);else if(l&32){let h=Pm(n,r),p;for(;p=h();)zo(e,t,a,i,p,n,o,r);zo(e,t,a,i,u,n,o,r)}else l&16?bx(t,e,r,n,i,o):zo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function vd(t,e,n,r,i,o){Vm(n,r,t.firstChild,e,i,o,!1)}function bx(t,e,n,r,i,o){let s=n[Rt],u=s[Ut].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];zo(e,t,n[$n],i,h,r,o,n)}else{let l=u,h=s[We];zD(r)&&(l.flags|=128),Vm(t,e,l,h,i,o,!0)}}function Cx(t,e,n,r,i,o,s){let a=r[Sr],u=Bt(r);a!==u&&zo(e,t,n,o,a,i,s);for(let l=xe;l<r.length;l++){let h=r[l];vd(h[W],h,t,e,o,a)}}function Sx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:zn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=zn.Important),t.setStyle(n,r,i,o))}}function Cb(t,e,n,r,i){let o=Hn(),s=r&2;try{Nr(-1),s&&e.length>nt&&yb(t,e,nt,!1),we(s?2:0,i,n),n(r,i)}finally{Nr(o),we(s?3:1,i,n)}}function Sb(t,e,n){kx(t,e,n),(n.flags&64)===64&&xx(t,e,n)}function jm(t,e,n=Yt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Ax(t,e,n,r){let o=r.get(eb,XD)||n===qn.ShadowDom,s=t.selectRootElement(e,o);return Rx(s),s}function Rx(t){Nx(t)}var Nx=()=>null;function Mx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ab(t,e,n,r,i,o){let s=e[W];if(Um(t,s,e,n,r)){Ar(t)&&Px(e,t.index);return}t.type&3&&(n=Mx(n)),Rb(t,e,n,r,i,o)}function Rb(t,e,n,r,i,o){if(t.type&3){let s=Yt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Px(t,e){let n=$t(e,t);n[ee]&16||(n[ee]|=64)}function kx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ar(n)&&rx(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Kl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Ql(e,t,s,n);if(Ko(u,e),o!==null&&jx(e,s-r,u,a,n,o),fn(a)){let l=$t(n.index,e);l[ke]=Ql(e,t,s,n)}}}function xx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=HT();try{Nr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];kl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ox(u,l)}}finally{Nr(-1),kl(s)}}function Ox(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Lx(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Qk(e,o.selectors,!1)&&(r??=[],fn(o)?r.unshift(o):r.push(o))}return r}function Fx(t,e,n,r,i,o){let s=Yt(t,e);Vx(e[De],s,o,t.value,n,r,i)}function Vx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?vi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function jx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];nm(r,n,u,l)}}function Nb(t,e,n,r,i){let o=nt+n,s=e[W],a=i(s,e,t,r,n);e[o]=a,Ho(t,!0);let u=t.type===2;return u?(ub(e[De],a,t),(MT()===0||Nl(t))&&Ko(a,e),PT()):Ko(a,e),Ll()&&(!u||!bm(t))&&Fm(s,e,a,t),t}function Mb(t){let e=t;return Sg()?VT():(e=e.parent,Ho(e,!1)),e}function Ux(t,e){let n=t[$n];if(!n)return;let r;try{r=n.get(Mt,null)}catch{r=null}r?.(e)}function Um(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];nm(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];nm(h,l,r,i),a=!0}return a}function Bx(t,e){let n=$t(e,t),r=n[W];$x(r,n);let i=n[Kt];i!==null&&n[jo]===null&&(n[jo]=tb(i,n[$n])),we(18),Bm(r,n,n[ke]),we(19,n[ke])}function $x(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Bm(t,e,n){xl(e);try{let r=t.viewQuery;r!==null&&tm(1,r,n);let i=t.template;i!==null&&Cb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[wi]?.finishViewCreation(t),t.staticContentQueries&&nb(t,e),t.staticViewQueries&&tm(2,t.viewQuery,n);let o=t.components;o!==null&&Hx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,Ol()}}function Hx(t,e){for(let n=0;n<e.length;n++)Bx(t,e[n])}function $m(t,e,n,r){let i=Q(null);try{let o=e.tView,a=t[ee]&4096?4096:16,u=Nm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ei]=l;let h=t[wi];return h!==null&&(u[wi]=h.createEmbeddedView(o)),Bm(o,u,n),u}finally{Q(i)}}function $a(t,e){return!e||e.firstChild===null||zD(t)}function Ha(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Bt(o)),Qt(o)&&Pb(o,r);let s=n.type;if(s&8)Ha(t,e,n.child,r);else if(s&32){let a=Pm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=bb(e,n);if(Array.isArray(a))r.push(...a);else{let u=wr(e[Rt]);Ha(u[W],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Pb(t,e){for(let n=xe;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&Ha(r[W],r,i,e)}t[Sr]!==t[Kt]&&e.push(t[Sr])}function kb(t){if(t[Rl]!==null){for(let e of t[Rl])e.impl.addSequence(e);t[Rl].length=0}}var xb=[];function qx(t){return t[Nt]??zx(t)}function zx(t){let e=xb.pop()??Object.create(Wx);return e.lView=t,e}function Gx(t){t.lView[Nt]!==t&&(t.lView=null,xb.push(t))}var Wx=ye(F({},yo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{La(t.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function Kx(t){let e=t[Nt]??Object.create(Qx);return e.lView=t,e}var Qx=ye(F({},yo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=wr(t.lView);for(;e&&!Ob(e[W]);)e=wr(e);e&&Ig(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function Ob(t){return t.type!==2}function Lb(t){if(t[Ma]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ma])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ee]&8192)}}var Yx=100;function Fb(t,e=0){let r=t[dn].rendererFactory,i=!1;i||r.begin?.();try{Zx(t,e)}finally{i||r.end?.()}}function Zx(t,e){let n=Ag();try{Rg(!0),sm(t,e);let r=0;for(;Oa(t);){if(r===Yx)throw new j(103,!1);r++,sm(t,1)}}finally{Rg(n)}}function Jx(t,e,n,r){if(Di(e))return;let i=e[ee],o=!1,s=!1;xl(e);let a=!0,u=null,l=null;o||(Ob(t)?(l=qx(e),u=_o(l)):$u()===null?(a=!1,l=Kx(e),u=_o(l)):e[Nt]&&(ma(e[Nt]),e[Nt]=null));try{Eg(e),UT(t.bindingStartIndex),n!==null&&Cb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Bl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&$l(e,y,0,null),Ug(e,0)}if(s||Xx(e),Lb(e),Vb(e,0),t.contentQueries!==null&&nb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Bl(e,y)}else{let y=t.contentHooks;y!==null&&$l(e,y,1),Ug(e,1)}tO(t,e);let p=t.components;p!==null&&Ub(e,p,0);let g=t.viewQuery;if(g!==null&&tm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Bl(e,y)}else{let y=t.viewHooks;y!==null&&$l(e,y,2),Ug(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Al]){for(let y of e[Al])y();e[Al]=null}o||(kb(e),e[ee]&=-73)}catch(h){throw o||La(e),h}finally{l!==null&&(pa(l,u),a&&Gx(l)),Ol()}}function Vb(t,e){for(let n=WD(t);n!==null;n=KD(n))for(let r=xe;r<n.length;r++){let i=n[r];jb(i,e)}}function Xx(t){for(let e=WD(t);e!==null;e=KD(e)){if(!(e[ee]&2))continue;let n=e[ka];for(let r=0;r<n.length;r++){let i=n[r];Ig(i)}}}function eO(t,e,n){we(18);let r=$t(e,t);jb(r,n),we(19,r[ke])}function jb(t,e){Ml(t)&&sm(t,e)}function sm(t,e){let r=t[W],i=t[ee],o=t[Nt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ga(o)),s||=!1,o&&(o.dirty=!1),t[ee]&=-9217,s)Jx(r,t,r.template,t[ke]);else if(i&8192){let a=Q(null);try{Lb(t),Vb(t,1);let u=r.components;u!==null&&Ub(t,u,1),kb(t)}finally{Q(a)}}}function Ub(t,e,n){for(let r=0;r<e.length;r++)eO(t,e[r],n)}function tO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Nr(~i);else{let o=i,s=n[++r],a=n[++r];$T(s,o);let u=e[o];we(24,u),a(2,u),we(25,u)}}}finally{Nr(-1)}}function Hm(t,e){let n=Ag()?64:1088;for(t[dn].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=wr(t);if($o(t)&&!r)return t;t=r}return null}function Bb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function $b(t,e){let n=xe+e;if(n<t.length)return t[n]}function _d(t,e,n,r=!0){let i=e[W];if(nO(i,e,t,n),r){let s=om(n,t),a=e[De],u=a.parentNode(t[Sr]);u!==null&&gx(i,t[Ut],a,e,u,s)}let o=e[jo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Hb(t,e){let n=qa(t,e);return n!==void 0&&yd(n[W],n),n}function qa(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n];if(r){let i=r[Ei];i!==null&&i!==t&&Lm(i,r),e>0&&(t[n-1][jt]=r[jt]);let o=Sa(t,xe+e);px(r[W],r);let s=o[wi];s!==null&&s.detachView(o[W]),r[We]=null,r[jt]=null,r[ee]&=-129}return r}function nO(t,e,n,r){let i=xe+r,o=n.length;r>0&&(n[i-1][jt]=e),r<o-xe?(e[jt]=n[i],ag(n,xe+r,e)):(n.push(e),e[jt]=null),e[We]=n;let s=e[Ei];s!==null&&n!==s&&qb(s,e);let a=e[wi];a!==null&&a.insertView(t),Pl(e),e[ee]|=128}function qb(t,e){let n=t[ka],r=e[We];if(hn(r))t[ee]|=2;else{let i=r[We][Rt];e[Rt]!==i&&(t[ee]|=2)}n===null?t[ka]=[e]:n.push(e)}var Ni=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[W];return Ha(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return Di(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(Qt(e)){let n=e[Pa],r=n?n.indexOf(this):-1;r>-1&&(qa(e,r),Sa(n,r))}this._attachedToViewContainer=!1}yd(this._lView[W],this._lView)}onDestroy(e){wg(this._lView,e)}markForCheck(){Hm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Pl(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,Fb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=$o(this._lView),n=this._lView[Ei];n!==null&&!e&&Lm(n,this._lView),Db(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=$o(this._lView),r=this._lView[Ei];r!==null&&!n&&qb(r,this._lView),Pl(this._lView)}};function Ed(t,e,n,r,i){let o=t.data[e];if(o===null)o=rO(t,e,n,r,i),BT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=FT();o.injectorIndex=s===null?-1:s.injectorIndex}return Ho(o,!0),o}function rO(t,e,n,r,i){let o=Cg(),s=Sg(),a=s?o:o&&o.parent,u=t.data[e]=oO(t,a,n,e,r,i);return iO(t,u,o,s),u}function iO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function oO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return xT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var J9=new RegExp(`^(\\d+)*(${Mk}|${Nk})*(.*)`);function sO(t){let e=t[yg]??[],r=t[We][De],i=[];for(let o of e)o.data[JD]!==void 0?i.push(o):aO(o,r);t[yg]=i}function aO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[ZD];for(;n<i;){let o=r.nextSibling;cb(e,r,!1),r=o,n++}}}var cO=()=>null,uO=()=>null;function am(t,e){return cO(t,e)}function zb(t,e,n){return uO(t,e,n)}var Gb=class{},Id=class{},cm=class{resolveComponentFactory(e){throw new j(917,!1)}},Ya=class{static NULL=new cm},Mi=class{},wd=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>lO()}return t})();function lO(){let t=le(),e=dt(),n=$t(e.index,t);return(hn(n)?n:t)[De]}var Wb=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var Hl={},um=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Hl,r);return i!==Hl||n===Hl?i:this.parentInjector.get(e,n,r)}};function ed(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Zp(i,a);else if(o==2){let u=a,l=e[++s];r=Zp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Xt(t,e=0){let n=le();if(n===null)return ne(t,e);let r=dt();return $D(r,n,tt(t),e)}function dO(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}pO(t,e,n,a,o,u,l)}o!==null&&r!==null&&hO(n,r,o)}function hO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function fO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function pO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&fn(y)&&(u=!0,fO(t,n,g)),Zg(Kl(n,e),t,y.type)}EO(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=mb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Wo(n.mergedAttrs,y.hostAttrs),mO(t,n,e,p,y),_O(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}gO(t,n,o)}function gO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))mD(0,e,i,r),mD(1,e,i,r),vD(e,r,!1);else{let o=n.get(i);yD(0,e,o,r),yD(1,e,o,r),vD(e,r,!0)}}}function mD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Kb(e,o)}}function yD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Kb(e,s)}}function Kb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function vD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Am(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function mO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=fi(i.type,!0)),s=new Ai(o,fn(i),Xt,null);t.blueprint[r]=s,n[r]=s,yO(t,e,r,mb(t,n,i.hostVars,Jt),i)}function yO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vO(s)!=a&&s.push(a),s.push(n,r,o)}}function vO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _O(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;fn(e)&&(n[""]=t)}}function EO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qb(t,e,n,r,i,o,s,a){let u=e[W],l=u.consts,h=pn(l,s),p=Ed(u,t,n,r,h);return o&&dO(u,e,p,pn(l,a),i),p.mergedAttrs=Wo(p.mergedAttrs,p.attrs),p.attrs!==null&&ed(p,p.attrs,!1),p.mergedAttrs!==null&&ed(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Yb(t,e){uk(t,e),vg(e)&&t.queries.elementEnd(e)}function IO(t,e,n,r,i,o){let s=e.consts,a=pn(s,i),u=Ed(e,t,n,r,a);if(u.mergedAttrs=Wo(u.mergedAttrs,u.attrs),o!=null){let l=pn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&ed(u,u.attrs,!1),u.mergedAttrs!==null&&ed(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function yn(t,e,n){if(n===Jt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function wO(t,e,n,r){let i=yn(t,e,n);return yn(t,e+1,r)||i}function ql(t,e,n){return function r(i){let o=Ar(t)?$t(t.index,e):e;Hm(o,5);let s=e[ke],a=_D(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=_D(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function _D(t,e,n,r){let i=Q(null);try{return we(6,e,n),n(r)!==!1}catch(o){return Ux(t,o),!1}finally{we(7,e,n),Q(i)}}function Zb(t,e,n,r,i,o,s,a){let u=Nl(t),l=!1,h=null;if(!r&&u&&(h=DO(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Yt(t,n),g=r?r(p):p;kk(n,g,o,a);let y=i.listen(g,o,a);if(!TO(o)){let C=r?N=>r(Bt(N[t.index])):t.index;Jb(C,e,n,o,a,y,!1)}}return l}function TO(t){return t.startsWith("animation")||t.startsWith("transition")}function DO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Uo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Jb(t,e,n,r,i,o,s){let a=e.firstCreatePass?NT(e):null,u=RT(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function ED(t,e,n,r,i,o){let s=e[n],a=e[W],l=a.data[n].outputs[r],p=s[l].subscribe(o);Jb(t.index,a,e,i,o,p,!0)}var lm=Symbol("BINDING");var td=class extends Ya{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Cr(e);return new Qo(n,this.ngModule)}};function bO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&md.SignalBased)!==0};return i&&(o.transform=i),o})}function CO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function SO(t,e,n){let r=e instanceof Fe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new um(n,r):n}function AO(t){let e=t.get(Mi,null);if(e===null)throw new j(407,!1);let n=t.get(Wb,null),r=t.get(Tr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function RO(t,e){let n=Xb(t);return sb(e,n,n==="svg"?DT:n==="math"?bT:null)}function Xb(t){return(t.selectors[0][0]||"div").toLowerCase()}var Qo=class extends Id{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=bO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=CO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Xk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){we(22);let a=Q(null);try{let u=this.componentDef,l=NO(r,u,s,o),h=SO(u,i||this.ngModule,e),p=AO(h),g=p.rendererFactory.createRenderer(null,u),y=r?Ax(g,r,u.encapsulation,h):RO(u,g),C=s?.some(ID)||o?.some(x=>typeof x!="function"&&x.bindings.some(ID)),N=Nm(null,l,null,512|gb(u),null,null,p,g,h,null,tb(y,h,!0));N[nt]=y,xl(N);let R=null;try{let x=Qb(nt,N,2,"#host",()=>l.directiveRegistry,!0,0);ub(g,y,x),Ko(y,N),Sb(l,N,x),rb(l,x,N),Yb(l,x),n!==void 0&&PO(x,this.ngContentSelectors,n),R=$t(x.index,N),N[ke]=R[ke],Bm(l,N,null)}catch(x){throw R!==null&&Xg(R),Xg(N),x}finally{we(23),Ol()}return new nd(this.componentType,N,!!C)}finally{Q(a)}}};function NO(t,e,n,r){let i=t?["ng-version","20.3.16"]:ex(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[lm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[lm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=dg(p);u.push(g)}return Rm(0,null,MO(o,s),1,a,u,null,null,null,[i],null)}function MO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function ID(t){let e=t[lm].kind;return e==="input"||e==="twoWay"}var nd=class extends Gb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=xa(n[W],nt),this.location=wm(this._tNode,n),this.instance=$t(this._tNode.index,n)[ke],this.hostView=this.changeDetectorRef=new Ni(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Um(r,i[W],i,e,n);this.previousInputValues.set(e,n);let s=$t(r.index,i);Hm(s,1)}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Za=(()=>{class t{static __NG_ELEMENT_ID__=kO}return t})();function kO(){let t=dt();return OO(t,le())}var xO=Za,eC=class extends xO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return wm(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){let e=Im(this._hostTNode,this._hostLView);if(LD(e)){let n=Wl(e,this._hostLView),r=Gl(e),i=n[W].data[r+8];return new Si(i,n)}else return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=wD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=am(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,$a(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!ik(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Qo(Cr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Fe,null);x&&(o=x)}let g=Cr(h.componentType??{}),y=am(this._lContainer,g?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,$a(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(CT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[We],l=new eC(u,u[Ut],u[We]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return _d(s,i,o,r),e.attachToViewContainerRef(),ag(Hg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=wD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=qa(this._lContainer,n);r&&(Sa(Hg(this._lContainer),n),yd(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=qa(this._lContainer,n);return r&&Sa(Hg(this._lContainer),n)!=null?new Ni(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function wD(t){return t[Pa]}function Hg(t){return t[Pa]||(t[Pa]=[])}function OO(t,e){let n,r=e[t.index];return Qt(r)?n=r:(n=Bb(r,e,null,t),e[t.index]=n,Mm(e,n)),FO(n,e,t,r),new eC(n,t,e)}function LO(t,e){let n=t[De],r=n.createComment(""),i=Yt(e,t),o=n.parentNode(i);return Zl(n,o,r,n.nextSibling(i),!1),r}var FO=UO,VO=()=>!1;function jO(t,e,n){return VO(t,e,n)}function UO(t,e,n,r){if(t[Sr])return;let i;n.type&8?i=Bt(r):i=LO(e,n),t[Sr]=i}var Yo=class{},Td=class{};var rd=class extends Yo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new td(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=lg(e);this._bootstrapComponents=fb(o.bootstrap),this._r3Injector=xg(e,n,[{provide:Yo,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver},...r],Bn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},id=class extends Td{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new rd(this.moduleType,e,[])}};var za=class extends Yo{injector;componentFactoryResolver=new td(this);instance=null;constructor(e){super();let n=new gi([...e.providers,{provide:Yo,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],e.parent||Ra(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ja(t,e,n=null){return new za({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var BO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=hg(!1,n.type),i=r.length>0?Ja([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(ne(Fe))})}return t})();function qm(t){return Jo(()=>{let e=tC(t),n=ye(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Tm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(BO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||qn.Emulated,styles:t.styles||At,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Mr("NgStandalone"),nC(n);let r=t.dependencies;return n.directiveDefs=TD(r,$O),n.pipeDefs=TD(r,yT),n.id=zO(n),n})}function $O(t){return Cr(t)||dg(t)}function es(t){return Jo(()=>({type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function HO(t,e){if(t==null)return Dr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=md.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function qO(t){if(t==null)return Dr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ts(t){return Jo(()=>{let e=tC(t);return nC(e),e})}function tC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Dr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:HO(t.inputs,e),outputs:qO(t.outputs),debugInfo:null}}function nC(t){t.features?.forEach(e=>e(t))}function TD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function zO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function GO(t){return Object.getPrototypeOf(t.prototype).constructor}function rC(t){let e=GO(t.type),n=!0,r=[t];for(;e;){let i;if(fn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=qg(t.inputs),s.declaredInputs=qg(t.declaredInputs),s.outputs=qg(t.outputs);let a=i.hostBindings;a&&ZO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&QO(t,u),l&&YO(t,l),WO(t,i),uT(t.outputs,i.outputs),fn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===rC&&(n=!1)}}e=Object.getPrototypeOf(e)}KO(r)}function WO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function KO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wo(i.hostAttrs,n=Wo(n,i.hostAttrs))}}function qg(t){return t===Dr?{}:t===At?[]:t}function QO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function YO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function ZO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function JO(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Wo(t.mergedAttrs,t.attrs);let h=t.tView=Rm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ho(t,!1);let u=XO(n,e,t,r);Ll()&&Fm(n,e,u,t),Ko(u,e);let l=Bb(u,e,u,t);e[r+nt]=l,Mm(e,l),jO(l,t,e)}function od(t,e,n,r,i,o,s,a,u,l,h){let p=n+nt,g;if(e.firstCreatePass){if(g=Ed(e,p,4,s||null,a||null),l!=null){let y=pn(e.consts,l);g.localNames=[];for(let C=0;C<y.length;C+=2)g.localNames.push(y[C],-1)}}else g=e.data[p];return JO(g,t,e,n,r,i,o,u),l!=null&&jm(t,g,h),g}var XO=e1;function e1(t,e,n,r){return Fl(!0),e[De].createComment("")}var zm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Gm=new U("");function Xa(t){return!!t&&typeof t.then=="function"}function iC(t){return!!t&&typeof t.subscribe=="function"}var oC=new U("");var Wm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(oC,{optional:!0})??[];injector=k(Ke);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=He(this.injector,i);if(Xa(o))n.push(o);else if(iC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Dd=new U("");function sC(){vp(()=>{let t="";throw new j(600,t)})}function aC(t){return t.isBoundToModule}var t1=10;var xi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Mt);afterRenderManager=k(Ib);zonelessEnabled=k(Va);rootEffectScheduler=k(jg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(gn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(n=>!n))}constructor(){k(Qa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ke.NULL){return this._injector.get(ve).run(()=>{we(10);let s=n instanceof Id;if(!this._injector.get(Wm).done){let C="";throw new j(405,C)}let u;s?u=n:u=this._injector.get(Ya).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=aC(u)?void 0:this._injector.get(Yo),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Gm,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Ba(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),we(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){we(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(km.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=Q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Q(n),this.afterTick.next(),we(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<t1;)we(14),this.synchronizeOnce(),we(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Oa(i))continue;let o=r&&!this.zonelessEnabled?0:1;Fb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Oa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ba(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Dd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ba(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ba(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function bd(t,e,n,r){let i=le(),o=Rr();if(yn(i,o,e)){let s=rt(),a=Fa();Fx(a,i,t,e,n,r)}return bd}var o8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var dm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function zg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function n1(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=zg(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],C=zg(s,g,u,y,n);if(C!==0){C<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,g),x=n(o,h);if(Object.is(x,R)){let H=n(u,y);Object.is(H,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new sd,i??=bD(t,o,s,n),hm(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(N,t.detach(o)),s--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,s++}}for(;o<=u;)DD(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=zg(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new sd,i??=bD(t,o,s,n);let y=n(o,p);if(hm(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let C=n(o,h);r.set(C,t.detach(o)),s--}}}for(;!l.done;)DD(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function hm(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function DD(t,e,n,r,i){if(hm(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function bD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var sd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function r1(t,e,n,r,i,o,s,a){Mr("NgControlFlow");let u=le(),l=rt(),h=pn(l.consts,o);return od(u,l,t,e,n,r,i,h,256,s,a),Km}function Km(t,e,n,r,i,o,s,a){Mr("NgControlFlow");let u=le(),l=rt(),h=pn(l.consts,o);return od(u,l,t,e,n,r,i,h,512,s,a),Km}function i1(t,e){Mr("NgControlFlow");let n=le(),r=Rr(),i=n[r]!==Jt?n[r]:-1,o=i!==-1?ad(n,nt+i):void 0,s=0;if(yn(n,r,t)){let a=Q(null);try{if(o!==void 0&&Hb(o,s),t!==-1){let u=nt+t,l=ad(n,u),h=mm(n[W],u),p=zb(l,h,n),g=$m(n,h,e,{dehydratedView:p});_d(l,g,s,$a(h,p))}}finally{Q(a)}}else if(o!==void 0){let a=$b(o,s);a!==void 0&&(a[ke]=e)}}var fm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-xe}};var pm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function o1(t,e,n,r,i,o,s,a,u,l,h,p,g){Mr("NgControlFlow");let y=le(),C=rt(),N=u!==void 0,R=le(),x=a?s.bind(R[Rt][ke]):s,H=new pm(N,x);R[nt+t]=H,od(y,C,t+1,e,n,r,i,pn(C.consts,o),256),N&&od(y,C,t+2,u,l,h,p,pn(C.consts,g),512)}var gm=class extends dm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-xe}at(e){return this.getLView(e)[ke].$implicit}attach(e,n){let r=n[jo];this.needsIndexUpdate||=e!==this.length,_d(this.lContainer,n,e,$a(this.templateTNode,r)),a1(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,c1(this.lContainer,e),u1(this.lContainer,e)}create(e,n){let r=am(this.lContainer,this.templateTNode.tView.ssrId),i=$m(this.hostLView,this.templateTNode,new fm(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){yd(e[W],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[ke].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return l1(this.lContainer,e)}};function s1(t){let e=Q(null),n=Hn();try{let r=le(),i=r[W],o=r[n],s=n+1,a=ad(r,s);if(o.liveCollection===void 0){let l=mm(i,s);o.liveCollection=new gm(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(n1(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Rr(),h=u.length===0;if(yn(r,l,h)){let p=n+2,g=ad(r,p);if(h){let y=mm(i,p),C=zb(g,y,r),N=$m(r,y,void 0,{dehydratedView:C});_d(g,N,0,$a(y,C))}else i.firstUpdatePass&&sO(g),Hb(g,0)}}}finally{Q(e)}}function ad(t,e){return t[e]}function a1(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[Ti]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[$n];hx(o,i),Ri.delete(r),i.detachedLeaveAnimationFns=void 0}}function c1(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[Ti]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function u1(t,e){return qa(t,e)}function l1(t,e){return $b(t,e)}function mm(t,e){return xa(t,e)}function cC(t,e,n){let r=le(),i=Rr();if(yn(r,i,e)){let o=rt(),s=Fa();Ab(s,r,t,e,r[De],n)}return cC}function CD(t,e,n,r,i){Um(e,t,n,i?"class":"style",r)}function Qm(t,e,n,r){let i=le(),o=i[W],s=t+nt,a=o.firstCreatePass?Qb(s,i,2,e,Lx,kT(),n,r):o.data[s];if(Nb(a,i,t,e,lC),Nl(a)){let u=i[W];Sb(u,i,a),rb(u,a,i)}return r!=null&&jm(i,a),Qm}function Ym(){let t=rt(),e=dt(),n=Mb(e);return t.firstCreatePass&&Yb(t,n),Dg(n)&&bg(),Tg(),n.classesWithoutHost!=null&&dk(n)&&CD(t,n,le(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&hk(n)&&CD(t,n,le(),n.stylesWithoutHost,!1),Ym}function Cd(t,e,n,r){return Qm(t,e,n,r),Ym(),Cd}function Zm(t,e,n,r){let i=le(),o=i[W],s=t+nt,a=o.firstCreatePass?IO(s,o,2,e,n,r):o.data[s];return Nb(a,i,t,e,lC),r!=null&&jm(i,a),Zm}function Jm(){let t=dt(),e=Mb(t);return Dg(e)&&bg(),Tg(),Jm}function uC(t,e,n,r){return Zm(t,e,n,r),Jm(),uC}var lC=(t,e,n,r,i)=>(Fl(!0),sb(e[De],r,QT()));function d1(){return le()}function dC(t,e,n){let r=le(),i=Rr();if(yn(r,i,e)){let o=rt(),s=Fa();Rb(s,r,t,e,r[De],n)}return dC}var ec="en-US";var h1=ec;function hC(t){typeof t=="string"&&(h1=t.toLowerCase().replace(/_/g,"-"))}function Sd(t,e,n){let r=le(),i=rt(),o=dt();return pC(i,r,r[De],o,t,e,n),Sd}function fC(t,e,n){let r=le(),i=rt(),o=dt();return(o.type&3||n)&&Zb(o,i,r,n,r[De],t,e,ql(o,r,e)),fC}function pC(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=ql(r,e,o),Zb(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=ql(r,e,o),ED(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=ql(r,e,o),ED(r,e,p,i,i,u)}}function f1(t=1){return KT(t)}function Ul(t,e){return t<<17|e<<2}function Pi(t){return t>>17&32767}function p1(t){return(t&2)==2}function g1(t,e){return t&131071|e<<17}function ym(t){return t|2}function Zo(t){return(t&131068)>>2}function Gg(t,e){return t&-131069|e<<2}function m1(t){return(t&1)===1}function vm(t){return t|1}function y1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Pi(s),u=Zo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Vo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Pi(t[a+1]);t[r+1]=Ul(g,a),g!==0&&(t[g+1]=Gg(t[g+1],r)),t[a+1]=g1(t[a+1],r)}else t[r+1]=Ul(a,0),a!==0&&(t[a+1]=Gg(t[a+1],r)),a=r;else t[r+1]=Ul(u,0),a===0?a=r:t[u+1]=Gg(t[u+1],r),u=r;l&&(t[r+1]=ym(t[r+1])),SD(t,h,r,!0),SD(t,h,r,!1),v1(e,h,t,r,o),s=Ul(a,u),o?e.classBindings=s:e.styleBindings=s}function v1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Vo(o,e)>=0&&(n[r+1]=vm(n[r+1]))}function SD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Pi(i):Zo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];_1(u,e)&&(a=!0,t[s+1]=r?vm(l):ym(l)),s=r?Pi(l):Zo(l)}a&&(t[n+1]=r?ym(i):vm(i))}function _1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vo(t,e)>=0:!1}function gC(t,e){return E1(t,e,null,!0),gC}function E1(t,e,n,r){let i=le(),o=rt(),s=Ng(2);if(o.firstUpdatePass&&w1(o,t,s,r),e!==Jt&&yn(i,s,e)){let a=o.data[Hn()];S1(o,a,i,i[De],t,i[s+1]=A1(e,n),r,s)}}function I1(t,e){return e>=t.expandoStartIndex}function w1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Hn()],s=I1(t,n);R1(o,r)&&e===null&&!s&&(e=!1),e=T1(i,o,e,r),y1(i,o,e,n,s,r)}}function T1(t,e,n,r){let i=qT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Wg(null,t,e,n,r),n=Ga(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Wg(i,t,e,n,r),o===null){let u=D1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Wg(null,t,e,u[1],r),u=Ga(u,e.attrs,r),b1(t,e,r,u))}else o=C1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function D1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Zo(r)!==0)return t[Pi(r)]}function b1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Pi(i)]=r}function C1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ga(r,s,n)}return Ga(r,e.attrs,n)}function Wg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ga(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ga(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),mT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function S1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=m1(l)?AD(u,e,n,i,Zo(l),s):void 0;if(!cd(h)){cd(o)||p1(l)&&(o=AD(u,null,n,i,a,s));let p=_g(Hn(),n);Sx(r,s,p,i,o)}}function AD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Jt&&(g=p?At:void 0);let y=p?Sl(g,r):h===r?g:void 0;if(l&&!cd(y)&&(y=Sl(u,r)),cd(y)&&(a=y,s))return a;let C=t[i+1];i=s?Pi(C):Zo(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Sl(u,r))}return a}function cd(t){return t!==void 0}function A1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Bn(pd(t)))),t}function R1(t,e){return(t.flags&(e?8:16))!==0}function N1(t,e=""){let n=le(),r=rt(),i=t+nt,o=r.firstCreatePass?Ed(r,i,1,e,null):r.data[i],s=M1(r,n,o,e,t);n[i]=s,Ll()&&Fm(r,n,s,o),Ho(o,!1)}var M1=(t,e,n,r,i)=>(Fl(!0),Fk(e[De],r));function P1(t,e,n,r=""){return yn(t,Rr(),n)?e+vi(n)+r:Jt}function k1(t,e,n,r,i,o=""){let s=jT(),a=wO(t,s,n,i);return Ng(2),a?e+vi(n)+r+vi(i)+o:Jt}function mC(t){return Xm("",t),mC}function Xm(t,e,n){let r=le(),i=P1(r,t,e,n);return i!==Jt&&vC(r,Hn(),i),Xm}function yC(t,e,n,r,i){let o=le(),s=k1(o,t,e,n,r,i);return s!==Jt&&vC(o,Hn(),s),yC}function vC(t,e,n){let r=_g(e,t);Vk(t[De],r,n)}function _C(t,e,n){Lg(e)&&(e=e());let r=le(),i=Rr();if(yn(r,i,e)){let o=rt(),s=Fa();Ab(s,r,t,e,r[De],n)}return _C}function x1(t,e){let n=Lg(t);return n&&t.set(e),n}function EC(t,e){let n=le(),r=rt(),i=dt();return pC(r,n,n[De],i,t,e),EC}function O1(t,e,n){let r=rt();if(r.firstCreatePass){let i=fn(t);_m(n,r.data,r.blueprint,i,!0),_m(e,r.data,r.blueprint,i,!1)}}function _m(t,e,n,r,i){if(t=tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)_m(t[o],e,n,r,i);else{let o=rt(),s=le(),a=dt(),u=pi(t)?t:tt(t.provide),l=pg(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(pi(t)||!t.multi){let y=new Ai(l,i,Xt,null),C=Qg(u,e,i?h:h+g,p);C===-1?(Zg(Kl(a,s),o,u),Kg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=Qg(u,e,h+g,p),C=Qg(u,e,h,h+g),N=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!N){Zg(Kl(a,s),o,u);let x=V1(i?F1:L1,n.length,i,r,l,t);!i&&R&&(n[C].providerFactory=x),Kg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=IC(n[i?C:y],l,!i&&r);Kg(o,t,y>-1?y:C,x)}!i&&r&&R&&n[C].componentProviders++}}}function Kg(t,e,n,r){let i=pi(e),o=IT(e);if(i||o){let u=(o?tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function IC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Qg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function L1(t,e,n,r,i){return Em(this.multi,[])}function F1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Ql(r,r[W],this.providerFactory.index,i);s=u.slice(0,a),Em(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Em(o,s);return s}function Em(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function V1(t,e,n,r,i,o){let s=new Ai(t,n,Xt,null);return s.multi=[],s.index=e,s.componentProviders=0,IC(s,i,r&&!n),s}function j1(t,e=[]){return n=>{n.providersResolver=(r,i)=>O1(r,i?i(t):t,e)}}var ud=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ey=(()=>{class t{compileModuleSync(n){return new id(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=lg(n),o=fb(i.declarations).reduce((s,a)=>{let u=Cr(a);return u&&s.push(new Qo(u)),s},[]);return new ud(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var U1=(()=>{class t{zone=k(ve);changeDetectionScheduler=k(Tr);applicationRef=k(xi);applicationErrorHandler=k(Mt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wC=new U("",{factory:()=>!1});function ty({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(ye(F({},ny()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:br,multi:!0,useFactory:()=>{let r=k(U1,{optional:!0});return()=>r.initialize()}},{provide:br,multi:!0,useFactory:()=>{let r=k($1);return()=>{r.initialize()}}},e===!0?{provide:Fg,useValue:!0}:[],{provide:Vg,useValue:n??vb},{provide:Mt,useFactory:()=>{let r=k(ve),i=k(Fe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(ln),o.handleError(s))})}}}]}function B1(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=ty({ngZoneFactory:()=>{let i=ny(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Mr("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Wt([{provide:wC,useValue:!0},{provide:Va,useValue:!1},r])}function ny(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var $1=(()=>{class t{subscription=new Re;initialized=!1;zone=k(ve);pendingTasks=k(gn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var TC=(()=>{class t{applicationErrorHandler=k(Mt);appRef=k(xi);taskService=k(gn);ngZone=k(ve);zonelessEnabled=k(Va);tracing=k(Qa,{optional:!0});disableScheduling=k(Fg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Vg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?lD:_b;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function H1(){return typeof $localize<"u"&&$localize.locale||ec}var ry=new U("",{providedIn:"root",factory:()=>k(ry,{optional:!0,skipSelf:!0})||H1()});function Gn(t){return sT(t)}function q1(t,e){return Gu(t,e?.equal)}var DC=class{[lt];constructor(e){this[lt]=e}destroy(){this[lt].destroy()}};var CC=Symbol("InputSignalNode#UNSET"),sL=ye(F({},Wu),{transformFn:void 0,applyValueToInputSignal(t,e){Io(t,e)}});function SC(t,e){let n=Object.create(sL);n.value=t,n.transformFn=e?.transform;function r(){if(vo(n),n.value===CC){let i=null;throw new j(-950,i)}return n.value}return r[lt]=n,r}var Rd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Wa(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},aL=new U("");aL.__NG_ELEMENT_ID__=t=>{let e=dt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function bC(t,e){return SC(t,e)}function cL(t){return SC(CC,t)}var AC=(bC.required=cL,bC);var iy=new U(""),uL=new U("");function tc(t){return!t.moduleRef}function lL(t){let e=tc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{tc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Mt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),tc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(iy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(iy);s.add(o),t.moduleRef.onDestroy(()=>{Ba(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return hL(r,n,()=>{let o=e.get(gn),s=o.add(),a=e.get(Wm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(ry,ec);if(hC(u||ec),!e.get(uL,!0))return tc(t)?e.get(xi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(tc(t)){let h=e.get(xi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return dL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var dL;function hL(t,e,n){try{let r=n();return Xa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Ad=null;function fL(t=[],e){return Ke.create({name:e,providers:[{provide:Aa,useValue:"platform"},{provide:iy,useValue:new Set([()=>Ad=null])},...t]})}function pL(t=[]){if(Ad)return Ad;let e=fL(t);return Ad=e,sC(),gL(e),e}function gL(t){let e=t.get(hd,null);He(t,()=>{e?.forEach(n=>n())})}function oy(){return!1}var Nd=(()=>{class t{static __NG_ELEMENT_ID__=mL}return t})();function mL(t){return yL(dt(),le(),(t&16)===16)}function yL(t,e,n){if(Ar(t)&&!n){let r=$t(t.index,e);return new Ni(r,r)}else if(t.type&175){let r=e[Rt];return new Ni(r,e)}return null}function RC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;we(8);try{let o=i?.injector??pL(r),s=[ty({}),{provide:Tr,useExisting:TC},ZT,...n||[]],a=new za({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return lL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{we(9)}}function Md(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var PC=null;function Kn(){return PC}function sy(t){PC??=t}var nc=class{},ay=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(kC),providedIn:"platform"})}return t})();var kC=(()=>{class t extends ay{_location;_history;_doc=k(it);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(n){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function xC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function NC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Pr(t){return t&&t[0]!=="?"?`?${t}`:t}var ns=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(LC),providedIn:"root"})}return t})(),OC=new U(""),LC=(()=>{class t extends ns{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return xC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(ay),ne(OC,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rs=(()=>{class t{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=EL(NC(MC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Pr(r))}normalize(n){return t.stripTrailingSlash(_L(this._basePath,MC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Pr;static joinWithSlash=xC;static stripTrailingSlash=NC;static \u0275fac=function(r){return new(r||t)(ne(ns))};static \u0275prov=B({token:t,factory:()=>vL(),providedIn:"root"})}return t})();function vL(){return new rs(ne(ns))}function _L(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function MC(t){return t.replace(/\/index.html$/,"")}function EL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var FC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=es({type:t});static \u0275inj=mi({})}return t})();function cy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var rc=class{};var VC="browser";var ic=class{_doc;constructor(e){this._doc=e}manager},Pd=(()=>{class t extends ic{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ne(it))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),xd=new U(""),fy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Pd));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Pd);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne(xd),ne(ve))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),uy="ng-app-id";function jC(t){for(let e of t)e.remove()}function UC(t,e){let n=e.createElement("style");return n.textContent=t,n}function TL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${uy}="${e}"],link[${uy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(uy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function dy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var py=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,TL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,UC);r?.forEach(i=>this.addUsage(i,this.external,dy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(jC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])jC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,UC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,dy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(it),ne(dd),ne(fd,8),ne(ki))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),ly={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gy=/%COMP%/g;var $C="%COMP%",DL=`_nghost-${$C}`,bL=`_ngcontent-${$C}`,CL=!0,SL=new U("",{providedIn:"root",factory:()=>CL});function AL(t){return bL.replace(gy,t)}function RL(t){return DL.replace(gy,t)}function HC(t,e){return e.map(n=>n.replace(gy,t))}var my=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new oc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof kd?i.applyToHost(n):i instanceof sc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case qn.Emulated:o=new kd(u,l,r,this.appId,h,s,a,p,g);break;case qn.ShadowDom:return new hy(u,l,n,r,s,a,this.nonce,p,g);default:o=new sc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ne(fy),ne(py),ne(dd),ne(SL),ne(it),ne(ve),ne(fd),ne(Qa,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),oc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(ly[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(BC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(BC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=ly[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ly[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zn.DashCase|zn.Important)?e.style.setProperty(n,r,i&zn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Kn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function BC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hy=class extends oc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=HC(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=dy(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sc=class extends oc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?HC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ri.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},kd=class extends sc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=AL(h),this.hostAttr=RL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Od=class t extends nc{supportsDOMEvents=!0;static makeCurrent(){sy(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=NL();return n==null?null:ML(n)}resetBaseElement(){ac=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cy(document.cookie,e)}},ac=null;function NL(){return ac=ac||document.head.querySelector("base"),ac?ac.getAttribute("href"):null}function ML(t){return new URL(t,document.baseURI).pathname}var PL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),qC=["alt","control","meta","shift"],kL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},zC=(()=>{class t extends ic{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=kL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qC.forEach(s=>{if(s!==i){let a=xL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(it))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function OL(t,e,n){let r=F({rootComponent:t,platformRef:n?.platformRef},LL(e));return RC(r)}function LL(t){return{appProviders:[...BL,...t?.providers??[]],platformProviders:UL}}function FL(){Od.makeCurrent()}function VL(){return new ln}function jL(){return Dm(document),document}var UL=[{provide:ki,useValue:VC},{provide:hd,useValue:FL,multi:!0},{provide:it,useFactory:jL}];var BL=[{provide:Aa,useValue:"root"},{provide:ln,useFactory:VL},{provide:xd,useClass:Pd,multi:!0,deps:[it]},{provide:xd,useClass:zC,multi:!0,deps:[it]},my,py,fy,{provide:Mi,useExisting:my},{provide:rc,useClass:PL},[]];var GC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(it))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z="primary",wc=Symbol("RouteTitle"),Iy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fi(t){return new Iy(t)}function eS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function HL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vn(t[n],e[n]))return!1;return!0}function vn(t,e){let n=t?wy(t):void 0,r=e?wy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!tS(t[i],e[i]))return!1;return!0}function wy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function tS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function nS(t){return t.length>0?t[t.length-1]:null}function Zn(t){return xp(t)?t:Xa(t)?Pe(Promise.resolve(t)):G(t)}var qL={exact:iS,subset:oS},rS={exact:zL,subset:GL,ignored:()=>!0};function WC(t,e,n){return qL[n.paths](t.root,e.root,n.matrixParams)&&rS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function zL(t,e){return vn(t,e)}function iS(t,e,n){if(!Oi(t.segments,e.segments)||!Vd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!iS(t.children[r],e.children[r],n))return!1;return!0}function GL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>tS(t[n],e[n]))}function oS(t,e,n){return sS(t,e,e.segments,n)}function sS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Oi(i,n)||e.hasChildren()||!Vd(i,n,r))}else if(t.segments.length===n.length){if(!Oi(t.segments,n)||!Vd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!oS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Oi(t.segments,i)||!Vd(t.segments,i,r)||!t.children[Z]?!1:sS(t.children[Z],e,o,r)}}function Vd(t,e,n){return e.every((r,i)=>rS[n](t[i].parameters,r.parameters))}var En=class{root;queryParams;fragment;_queryParamMap;constructor(e=new fe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){return QL.serialize(this)}},fe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jd(this)}},kr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fi(this.parameters),this._parameterMap}toString(){return cS(this)}};function WL(t,e){return Oi(t,e)&&t.every((n,r)=>vn(n.parameters,e[r].parameters))}function Oi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function KL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var Tc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new Vi,providedIn:"root"})}return t})(),Vi=class{parse(e){let n=new Dy(e);return new En(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${cc(e.root,!0)}`,r=JL(e.queryParams),i=typeof e.fragment=="string"?`#${YL(e.fragment)}`:"";return`${n}${r}${i}`}},QL=new Vi;function jd(t){return t.segments.map(e=>cS(e)).join("/")}function cc(t,e){if(!t.hasChildren())return jd(t);if(e){let n=t.children[Z]?cc(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${cc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=KL(t,(r,i)=>i===Z?[cc(t.children[Z],!1)]:[`${i}:${cc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${jd(t)}/${n[0]}`:`${jd(t)}/(${n.join("//")})`}}function aS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ld(t){return aS(t).replace(/%3B/gi,";")}function YL(t){return encodeURI(t)}function Ty(t){return aS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ud(t){return decodeURIComponent(t)}function KC(t){return Ud(t.replace(/\+/g,"%20"))}function cS(t){return`${Ty(t.path)}${ZL(t.parameters)}`}function ZL(t){return Object.entries(t).map(([e,n])=>`;${Ty(e)}=${Ty(n)}`).join("")}function JL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ld(n)}=${Ld(i)}`).join("&"):`${Ld(n)}=${Ld(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var XL=/^[^\/()?;#]+/;function yy(t){let e=t.match(XL);return e?e[0]:""}var eF=/^[^\/()?;=#]+/;function tF(t){let e=t.match(eF);return e?e[0]:""}var nF=/^[^=?&#]+/;function rF(t){let e=t.match(nF);return e?e[0]:""}var iF=/^[^&#]+/;function oF(t){let e=t.match(iF);return e?e[0]:""}var Dy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new fe(e,n)),r}parseSegment(){let e=yy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new kr(Ud(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=tF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=yy(this.remaining);i&&(r=i,this.capture(r))}e[Ud(n)]=Ud(r)}parseQueryParam(e){let n=rF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=oF(this.remaining);s&&(r=s,this.capture(r))}let i=KC(n),o=KC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=yy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new fe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function uS(t){return t.segments.length>0?new fe([],{[Z]:t}):t}function lS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=lS(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new fe(t.segments,e);return sF(n)}function sF(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new fe(t.segments.concat(e.segments),e.children)}return t}function xr(t){return t instanceof En}function dS(t,e,n=null,r=null){let i=hS(t);return fS(i,e,n,r)}function hS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new fe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=uS(r);return e??i}function fS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return vy(i,i,i,n,r);let o=aF(e);if(o.toRoot())return vy(i,i,new fe([],{}),n,r);let s=cF(o,i,t),a=s.processChildren?lc(s.segmentGroup,s.index,o.commands):gS(s.segmentGroup,s.index,o.commands);return vy(i,s.segmentGroup,a,n,r)}function Bd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function fc(t){return typeof t=="object"&&t!=null&&t.outlets}function vy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=pS(t,e,n);let a=uS(lS(s));return new En(a,o,i)}function pS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=pS(o,e,n)}),new fe(t.segments,r)}var $d=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Bd(r[0]))throw new j(4003,!1);let i=r.find(fc);if(i&&i!==nS(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function aF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new $d(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new $d(n,e,r)}var ss=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function cF(t,e,n){if(t.isAbsolute)return new ss(e,!0,0);if(!n)return new ss(e,!1,NaN);if(n.parent===null)return new ss(n,!0,0);let r=Bd(t.commands[0])?0:1,i=n.segments.length-1+r;return uF(n,i,t.numberOfDoubleDots)}function uF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ss(r,!1,i-o)}function lF(t){return fc(t[0])?t[0].outlets:{[Z]:t}}function gS(t,e,n){if(t??=new fe([],{}),t.segments.length===0&&t.hasChildren())return lc(t,e,n);let r=dF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new fe(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new fe(t.segments.slice(r.pathIndex),t.children),lc(o,0,i)}else return r.match&&i.length===0?new fe(t.segments,{}):r.match&&!t.hasChildren()?by(t,e,n):r.match?lc(t,0,i):by(t,e,n)}function lc(t,e,n){if(n.length===0)return new fe(t.segments,{});{let r=lF(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=lc(t.children[Z],e,n);return new fe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=gS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new fe(t.segments,i)}}function dF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(fc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!YC(u,l,s))return o;r+=2}else{if(!YC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function by(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(fc(o)){let u=hF(o.outlets);return new fe(r,u)}if(i===0&&Bd(n[0])){let u=t.segments[e];r.push(new kr(u.path,QC(n[0]))),i++;continue}let s=fc(o)?o.outlets[Z]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Bd(a)?(r.push(new kr(s,QC(a))),i+=2):(r.push(new kr(s,{})),i++)}return new fe(r,{})}function hF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=by(new fe([],{}),0,r))}),e}function QC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function YC(t,e,n){return t==n.path&&vn(e,n.parameters)}var dc="imperative",Qe=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Qe||{}),xt=class{id;url;constructor(e,n){this.id=e,this.url=n}},ji=class extends xt{type=Qe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},In=class extends xt{urlAfterRedirects;type=Qe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(vt||{}),pc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(pc||{}),_n=class extends xt{reason;code;type=Qe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qn=class extends xt{reason;code;type=Qe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},cs=class extends xt{error;target;type=Qe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gc=class extends xt{urlAfterRedirects;state;type=Qe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hd=class extends xt{urlAfterRedirects;state;type=Qe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qd=class extends xt{urlAfterRedirects;state;shouldActivate;type=Qe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zd=class extends xt{urlAfterRedirects;state;type=Qe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gd=class extends xt{urlAfterRedirects;state;type=Qe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wd=class{route;type=Qe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Kd=class{route;type=Qe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qd=class{snapshot;type=Qe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yd=class{snapshot;type=Qe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zd=class{snapshot;type=Qe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jd=class{snapshot;type=Qe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var mc=class{},us=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function fF(t){return!(t instanceof mc)&&!(t instanceof us)}function pF(t,e){return t.providers&&!t._injector&&(t._injector=Ja(t.providers,e,`Route: ${t.path}`)),t._injector??e}function en(t){return t.outlet||Z}function gF(t,e){let n=t.filter(r=>en(r)===e);return n.push(...t.filter(r=>en(r)!==e)),n}function hs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Xd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return hs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new fs(this.rootInjector)}},fs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Xd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(Fe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Cy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Cy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Sy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Sy(e,this._root).map(n=>n.value)}};function Cy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Cy(t,n);if(r)return r}return null}function Sy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Sy(t,n);if(r.length)return r.unshift(e),r}return[]}var kt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function os(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var yc=class extends eh{snapshot;constructor(e,n){super(e),this.snapshot=n,Oy(this,e)}toString(){return this.snapshot.toString()}};function mS(t){let e=mF(t),n=new et([new kr("",{})]),r=new et({}),i=new et({}),o=new et({}),s=new et(""),a=new Yn(n,r,o,s,i,Z,t,e.root);return a.snapshot=e.root,new yc(new kt(a,[]),e)}function mF(t){let e={},n={},r={},o=new Li([],e,r,"",n,Z,t,null,{});return new vc("",new kt(o,[]))}var Yn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[wc]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>Fi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>Fi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function th(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&vS(i)&&(r.resolve[wc]=i.title),r}var Li=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},vc=class extends eh{url;constructor(e,n){super(n),this.url=e,Oy(this,n)}toString(){return yS(this._root)}};function Oy(t,e){e.value._routerState=t,e.children.forEach(n=>Oy(t,n))}function yS(t){let e=t.children.length>0?` { ${t.children.map(yS).join(", ")} } `:"";return`${t.value}${e}`}function _y(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),vn(e.params,n.params)||t.paramsSubject.next(n.params),HL(e.url,n.url)||t.urlSubject.next(n.url),vn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ay(t,e){let n=vn(t.params,e.params)&&WL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ay(t.parent,e.parent))}function vS(t){return typeof t.title=="string"||t.title===null}var _S=new U(""),Ly=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new yt;deactivateEvents=new yt;attachEvents=new yt;detachEvents=new yt;routerOutletData=AC();parentContexts=k(fs);location=k(Za);changeDetector=k(Nd);inputBinder=k(oh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Ry(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ts({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Xo]})}return t})(),Ry=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Yn?this.route:e===fs?this.childContexts:e===_S?this.outletData:this.parent.get(e,n)}},oh=new U("");var Fy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=qm({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Cd(0,"router-outlet")},dependencies:[Ly],encapsulation:2})}return t})();function Vy(t){let e=t.children&&t.children.map(Vy),n=e?ye(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=Fy),n}function yF(t,e,n){let r=_c(t,e._root,n?n._root:void 0);return new yc(r,e)}function _c(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=vF(t,e,n);return new kt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>_c(t,a)),s}}let r=_F(e.value),i=e.children.map(o=>_c(t,o));return new kt(r,i)}}function vF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return _c(t,r,i);return _c(t,r)})}function _F(t){return new Yn(new et(t.url),new et(t.params),new et(t.queryParams),new et(t.fragment),new et(t.data),t.outlet,t.component,t)}var ls=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},ES="ngNavigationCancelingError";function nh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=xr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=IS(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function IS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ES]=!0,n.cancellationCode=e,n}function EF(t){return wS(t)&&xr(t.url)}function wS(t){return!!t&&t[ES]}var IF=(t,e,n,r)=>ue(i=>(new Ny(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ny=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),_y(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=os(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=os(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=os(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Jd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Yd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(_y(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),_y(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},rh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},as=class{component;route;constructor(e,n){this.component=e,this.route=n}};function wF(t,e,n){let r=t._root,i=e?e._root:null;return uc(r,i,n,[r.value])}function TF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ps(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Xp(t)?t:e.get(t):r}function uc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=os(e);return t.children.forEach(s=>{DF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>hc(a,n.getContext(s),i)),i}function DF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=bF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new rh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?uc(t,e,a?a.children:null,r,i):uc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new as(a.outlet.component,s))}else s&&hc(e,a,i),i.canActivateChecks.push(new rh(r)),o.component?uc(t,null,a?a.children:null,r,i):uc(t,null,n,r,i);return i}function bF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Oi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Oi(t.url,e.url)||!vn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ay(t,e)||!vn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ay(t,e)}}function hc(t,e,n){let r=os(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?hc(s,e.children.getContext(o),n):hc(s,null,n):hc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new as(e.outlet.component,i)):n.canDeactivateChecks.push(new as(null,i)):n.canDeactivateChecks.push(new as(null,i))}function Dc(t){return typeof t=="function"}function CF(t){return typeof t=="boolean"}function SF(t){return t&&Dc(t.canLoad)}function AF(t){return t&&Dc(t.canActivate)}function RF(t){return t&&Dc(t.canActivateChild)}function NF(t){return t&&Dc(t.canDeactivate)}function MF(t){return t&&Dc(t.canMatch)}function TS(t){return t instanceof Fn||t?.name==="EmptyError"}var Fd=Symbol("INITIAL_VALUE");function ds(){return wt(t=>ml(t.map(e=>e.pipe(Vn(1),Fp(Fd)))).pipe(ue(e=>{for(let n of e)if(n!==!0){if(n===Fd)return Fd;if(n===!1||PF(n))return n}return!0}),Vt(e=>e!==Fd),Vn(1)))}function PF(t){return xr(t)||t instanceof ls}function kF(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(ye(F({},n),{guardsResult:!0})):xF(s,r,i,t).pipe($e(a=>a&&CF(a)?OF(r,o,t,e):G(a)),ue(a=>ye(F({},n),{guardsResult:a})))})}function xF(t,e,n,r){return Pe(t).pipe($e(i=>UF(i.component,i.route,n,e,r)),jn(i=>i!==!0,!0))}function OF(t,e,n,r){return Pe(e).pipe(xo(i=>ko(FF(i.route.parent,r),LF(i.route,r),jF(t,i.path,n),VF(t,i.route,n))),jn(i=>i!==!0,!0))}function LF(t,e){return t!==null&&e&&e(new Zd(t)),G(!0)}function FF(t,e){return t!==null&&e&&e(new Qd(t)),G(!0)}function VF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>_a(()=>{let s=hs(e)??n,a=ps(o,s),u=AF(a)?a.canActivate(e,t):He(s,()=>a(e,t));return Zn(u).pipe(jn())}));return G(i).pipe(ds())}function jF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>TF(s)).filter(s=>s!==null).map(s=>_a(()=>{let a=s.guards.map(u=>{let l=hs(s.node)??n,h=ps(u,l),p=RF(h)?h.canActivateChild(r,t):He(l,()=>h(r,t));return Zn(p).pipe(jn())});return G(a).pipe(ds())}));return G(o).pipe(ds())}function UF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=hs(e)??i,l=ps(a,u),h=NF(l)?l.canDeactivate(t,e,n,r):He(u,()=>l(t,e,n,r));return Zn(h).pipe(jn())});return G(s).pipe(ds())}function BF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=ps(s,t),u=SF(a)?a.canLoad(e,n):He(t,()=>a(e,n));return Zn(u)});return G(o).pipe(ds(),DS(r))}function DS(t){return Cp(Ge(e=>{if(typeof e!="boolean")throw nh(t,e)}),ue(e=>e===!0))}function $F(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=ps(s,t),u=MF(a)?a.canMatch(e,n):He(t,()=>a(e,n));return Zn(u)});return G(o).pipe(ds(),DS(r))}var Ec=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ic=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function is(t){return Po(new Ec(t))}function HF(t){return Po(new j(4e3,!1))}function qF(t){return Po(IS(!1,vt.GuardRejected))}var My=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[Z])return HF(`${e.redirectTo}`);i=i.children[Z]}}applyRedirectCommands(e,n,r,i,o){return zF(n,i,o).pipe(ue(s=>{if(s instanceof En)throw new Ic(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ic(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new En(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new fe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function zF(t,e,n){if(typeof t=="string")return G(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Zn(He(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Py={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GF(t,e,n,r,i){let o=bS(t,e,n);return o.matched?(r=pF(e,r),$F(r,e,n,i).pipe(ue(s=>s===!0?o:F({},Py)))):G(o)}function bS(t,e,n){if(e.path==="**")return WF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Py):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eS)(n,t,e);if(!i)return F({},Py);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function WF(t){return{matched:!0,parameters:t.length>0?nS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ZC(t,e,n,r){return n.length>0&&YF(t,n,r)?{segmentGroup:new fe(e,QF(r,new fe(n,t.children))),slicedSegments:[]}:n.length===0&&ZF(t,n,r)?{segmentGroup:new fe(t.segments,KF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new fe(t.segments,t.children),slicedSegments:n}}function KF(t,e,n,r){let i={};for(let o of n)if(sh(t,e,o)&&!r[en(o)]){let s=new fe([],{});i[en(o)]=s}return F(F({},r),i)}function QF(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&en(r)!==Z){let i=new fe([],{});n[en(r)]=i}return n}function YF(t,e,n){return n.some(r=>sh(t,e,r)&&en(r)!==Z)}function ZF(t,e,n){return n.some(r=>sh(t,e,r))}function sh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function JF(t,e,n){return e.length===0&&!t.children[n]}var ky=class{};function XF(t,e,n,r,i,o,s="emptyOnly"){return new xy(t,e,n,r,i,s,o).recognize()}var eV=31,xy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new My(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=ZC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:n,rootSnapshot:r})=>{let i=new kt(r,n),o=new vc("",i),s=dS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Li([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,n).pipe(ue(r=>({children:r,rootSnapshot:n})),Er(r=>{if(r instanceof Ic)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ec?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof kt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(xo(s=>{let a=r.children[s],u=gF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Lp((s,a)=>(s.push(...a),s)),Ir(null),Op(),$e(s=>{if(s===null)return is(r);let a=CS(s);return tV(a),G(a)}))}processSegment(e,n,r,i,o,s,a){return Pe(n).pipe(xo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Er(l=>{if(l instanceof Ec)return G(null);throw l}))),jn(u=>!!u),Er(u=>{if(TS(u))return JF(r,i,o)?G(new ky):is(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return en(r)!==s&&(s===Z||!sh(i,o,r))?is(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):is(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=bS(n,i,o);if(!u)return is(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>eV&&(this.allowRedirects=!1));let y=new Li(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,JC(i),en(i),i.component??i._loadedComponent??null,i,XC(i)),C=th(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(wt(R=>this.applyRedirects.lineralizeSegments(i,R)),$e(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=GF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(wt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(wt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,C=new Li(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,JC(r),en(r),r.component??r._loadedComponent??null,r,XC(r)),N=th(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=ZC(n,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(ue(K=>new kt(C,K)));if(l.length===0&&x.length===0)return G(new kt(C,[]));let H=en(r)===o;return this.processSegment(h,l,R,x,H?Z:o,!0,C).pipe(ue(K=>new kt(C,K instanceof kt?[K]:[])))}))):is(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):BF(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(Ge(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):qF(n))):G({routes:[],injector:e})}};function tV(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function nV(t){let e=t.value.routeConfig;return e&&e.path===""}function CS(t){let e=[],n=new Set;for(let r of t){if(!nV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=CS(r.children);e.push(new kt(r.value,i))}return e.filter(r=>!n.has(r))}function JC(t){return t.data||{}}function XC(t){return t.resolve||{}}function rV(t,e,n,r,i,o){return $e(s=>XF(t,e,n,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>ye(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function iV(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of SS(u))s.add(l);let a=0;return Pe(s).pipe(xo(u=>o.has(u)?oV(u,r,t,e):(u.data=th(u,u.parent,t).resolve,G(void 0))),Ge(()=>a++),Oo(1),$e(u=>a===s.size?G(n):Et))})}function SS(t){let e=t.children.map(n=>SS(n)).flat();return[t,...e]}function oV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!vS(i)&&(o[wc]=i.title),_a(()=>(t.data=th(t,t.parent,n).resolve,sV(o,t,e,r).pipe(ue(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function sV(t,e,n,r){let i=wy(t);if(i.length===0)return G({});let o={};return Pe(i).pipe($e(s=>aV(t[s],e,n,r).pipe(jn(),Ge(a=>{if(a instanceof ls)throw nh(new Vi,a);o[s]=a}))),Oo(1),ue(()=>o),Er(s=>TS(s)?Et:Po(s)))}function aV(t,e,n,r){let i=hs(e)??r,o=ps(t,i),s=o.resolve?o.resolve(e,n):He(i,()=>o(e,n));return Zn(s)}function Ey(t){return wt(e=>{let n=t(e);return n?Pe(n).pipe(ue(()=>e)):G(e)})}var jy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[wc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(AS),providedIn:"root"})}return t})(),AS=(()=>{class t extends jy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(GC))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gs=new U("",{providedIn:"root",factory:()=>({})}),bc=new U(""),RS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(ey);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zn(He(n,()=>r.loadComponent())).pipe(ue(MS),wt(PS),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ea(()=>{this.componentLoaders.delete(r)})),o=new Ao(i,()=>new ze).pipe(So());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=NS(r,this.compiler,n,this.onLoadEndListener).pipe(Ea(()=>{this.childrenLoaders.delete(r)})),s=new Ao(o,()=>new ze).pipe(So());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NS(t,e,n,r){return Zn(He(n,()=>t.loadChildren())).pipe(ue(MS),wt(PS),$e(i=>i instanceof Td||Array.isArray(i)?G(i):Pe(e.compileModuleAsync(i))),ue(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(bc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vy),injector:o}}))}function cV(t){return t&&typeof t=="object"&&"default"in t}function MS(t){return cV(t)?t.default:t}function PS(t){return G(t)}var ah=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(uV),providedIn:"root"})}return t})(),uV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kS=new U("");var xS=new U(""),OS=(()=>{class t{currentNavigation=Ci(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortWithErrorSubject=new ze;configLoader=k(RS);environmentInjector=k(Fe);destroyRef=k(bi);urlSerializer=k(Tc);rootContexts=k(fs);location=k(rs);inputBindingEnabled=k(oh,{optional:!0})!==null;titleStrategy=k(jy);options=k(gs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(ah);createViewTransition=k(kS,{optional:!0});navigationErrorHandler=k(xS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Wd(i)),r=i=>this.events.next(new Kd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Gn(()=>{this.transitions?.next(ye(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new et(null),this.transitions.pipe(Vt(r=>r!==null),wt(r=>{let i=!1;return G(r).pipe(wt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Qn(o.id,this.urlSerializer.serialize(o.rawUrl),"",pc.IgnoredSameUrlNavigation)),o.resolve(!1),Et;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(wt(u=>(this.events.next(new ji(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Et:Promise.resolve(u))),rV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new gc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new ji(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=mS(this.rootComponentType).snapshot;return this.currentTransition=r=ye(F({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:ye(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),G(r)}else return this.events.next(new Qn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",pc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Et}),Ge(o=>{let s=new Hd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=ye(F({},o),{guards:wF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),kF(this.environmentInjector,o=>this.events.next(o)),Ge(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw nh(this.urlSerializer,o.guardsResult);let s=new qd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Vt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",vt.GuardRejected),!1)),Ey(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(Ge(s=>{let a=new zd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),wt(s=>{let a=!1;return G(s).pipe(iV(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",vt.NoDataFromResolver)}}))}),Ge(s=>{let a=new Gd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Ey(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=hs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ge(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return ml(s(o.targetSnapshot.root)).pipe(Ir(null),Vn(1))}),Ey(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Pe(a).pipe(ue(()=>r)):G(r)}),ue(o=>{let s=yF(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ge(()=>{this.events.next(new mc)}),IF(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Vn(1),vl(new Y(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Vt(()=>!i&&!r.targetRouterState),Ge(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vt.Aborted)}))),Ge({next:o=>{i=!0,this.lastSuccessfulNavigation=Gn(this.currentNavigation),this.events.next(new In(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),vl(this.transitionAbortWithErrorSubject.pipe(Ge(o=>{throw o}))),Ea(()=>{i||this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Er(o=>{if(this.destroyed)return r.resolve(!1),Et;if(i=!0,wS(o))this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),EF(o)?this.events.next(new us(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new cs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ls){let{message:u,cancellationCode:l}=nh(this.urlSerializer,a);this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new us(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Et}))}))}cancelNavigationTransition(n,r,i){let o=new _n(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Gn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lV(t){return t!==dc}var LS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(dV),providedIn:"root"})}return t})(),ih=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},dV=(()=>{class t extends ih{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ld(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),FS=(()=>{class t{urlSerializer=k(Tc);options=k(gs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(rs);urlHandlingStrategy=k(ah);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new En;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof En?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=mS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(hV),providedIn:"root"})}return t})(),hV=(()=>{class t extends FS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ji?this.updateStateMemento():n instanceof Qn?this.commitTransition(r):n instanceof gc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof mc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _n&&n.code!==vt.SupersededByNewNavigation&&n.code!==vt.Redirect?this.restoreHistory(r):n instanceof cs?this.restoreHistory(r,!0):n instanceof In&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ld(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uy(t,e){t.events.pipe(Vt(n=>n instanceof In||n instanceof _n||n instanceof cs||n instanceof Qn),ue(n=>n instanceof In||n instanceof Qn?0:(n instanceof _n?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?2:1),Vt(n=>n!==2),Vn(1)).subscribe(()=>{e()})}var fV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cc=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(zm);stateManager=k(FS);options=k(gs,{optional:!0})||{};pendingTasks=k(gn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(OS);urlSerializer=k(Tc);location=k(rs);urlHandlingStrategy=k(ah);injector=k(Fe);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(LS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(bc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(oh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Gn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof _n&&r.code!==vt.Redirect&&r.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof In)this.navigated=!0;else if(r instanceof us){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lV(i.source)},s);this.scheduleNavigation(a,dc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),dc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Mt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Gn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Vy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=hS(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return fS(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=xr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,dc,null,r)}navigate(n,r={skipLocationChange:!1}){return gV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Da(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},fV):r===!1?i=F({},pV):i=r,xr(n))return WC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return WC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Uy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var VS=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ci(null);get href(){return Gn(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ze;applicationErrorHandler=k(Mt);options=k(gs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Rd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof In&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(xr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:xr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Xt(Cc),Xt(Yn),Wa("tabindex"),Xt(wd),Xt(Ka),Xt(ns))};static \u0275dir=ts({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Sd("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&bd("href",i.reactiveHref(),Sm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Md],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Md],replaceUrl:[2,"replaceUrl","replaceUrl",Md],routerLink:"routerLink"},features:[Xo]})}return t})();var yV=new U("");function vV(t,...e){return Wt([{provide:bc,multi:!0,useValue:t},[],{provide:Yn,useFactory:_V,deps:[Cc]},{provide:Dd,multi:!0,useFactory:EV},e.map(n=>n.\u0275providers)])}function _V(t){return t.routerState.root}function EV(){let t=k(Ke);return e=>{let n=t.get(xi);if(e!==n.components[0])return;let r=t.get(Cc),i=t.get(IV);t.get(wV)===1&&r.initialNavigation(),t.get(TV,null,{optional:!0})?.setUpPreloading(),t.get(yV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var IV=new U("",{factory:()=>new ze}),wV=new U("",{providedIn:"root",factory:()=>1});var TV=new U("");var jS=()=>{};var $S=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ch={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($S(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new $y;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},$y=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},bV=function(t){let e=$S(t);return ch.encodeByteArray(e,!0)},Ac=function(t){return bV(t).replace(/\./g,"")},uh=function(t){try{return ch.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CV=()=>qy().__FIREBASE_DEFAULTS__,SV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&uh(t[1]);return e&&JSON.parse(e)},lh=()=>{try{return jS()||CV()||SV()||AV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zy=t=>{var e,n;return(n=(e=lh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HS=t=>{let e=zy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gy=()=>{var t;return(t=lh())===null||t===void 0?void 0:t.config},Wy=t=>{var e;return(e=lh())===null||e===void 0?void 0:e[`_${t}`]};var Ui=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Or(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function dh(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function qS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ac(JSON.stringify(n)),Ac(JSON.stringify(s)),""].join(".")}var Sc={};function RV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Sc))Sc[e]?t.emulator.push(e):t.prod.push(e);return t}function NV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var US=!1;function hh(t,e){if(typeof window>"u"||typeof document>"u"||!Or(window.location.host)||Sc[t]===e||Sc[t]||US)return;Sc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=RV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{US=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=NV(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),H=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let K=g.element;a(K),h(R,N);let Ee=l();u(H,x),K.append(H,C,R,Ee),document.body.appendChild(K)}o?(C.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function MV(){var t;let e=(t=lh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QS(){let t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YS(){return!MV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rc(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var PV="FirebaseError",Ot=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}},tn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?kV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ot(i,a,r)}};function kV(t,e){return t.replace(xV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var xV=/\{\$([^}]+)}/g;function JS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(BS(o)&&BS(s)){if(!wn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function BS(t){return t!==null&&typeof t=="object"}function Nc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ms(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ys(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XS(t,e){let n=new Hy(t,e);return n.subscribe.bind(n)}var Hy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=By),i.error===void 0&&(i.error=By),i.complete===void 0&&(i.complete=By);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function OV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function By(){}var Hee=14400*1e3;function Oe(t){return t&&t._delegate?t._delegate:t}var _t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Bi="[DEFAULT]";var Ky=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ui;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FV(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LV(t){return t===Bi?void 0:t}function FV(t){return t.instantiationMode==="EAGER"}var fh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ky(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var VV=[],oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(oe||{}),jV={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},UV=oe.INFO,BV={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},$V=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=BV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tn=class{constructor(e){this.name=e,this._logLevel=UV,this._logHandler=$V,this._userLogHandler=null,VV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var HV=(t,e)=>e.some(n=>t instanceof n),eA,tA;function qV(){return eA||(eA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zV(){return tA||(tA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nA=new WeakMap,Yy=new WeakMap,rA=new WeakMap,Qy=new WeakMap,Jy=new WeakMap;function GV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Dn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&nA.set(n,t)}).catch(()=>{}),Jy.set(e,t),e}function WV(t){if(Yy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Yy.set(t,e)}var Zy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iA(t){Zy=t(Zy)}function KV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ph(this),e,...n);return rA.set(r,e.sort?e.sort():[e]),Dn(r)}:zV().includes(t)?function(...e){return t.apply(ph(this),e),Dn(nA.get(this))}:function(...e){return Dn(t.apply(ph(this),e))}}function QV(t){return typeof t=="function"?KV(t):(t instanceof IDBTransaction&&WV(t),HV(t,qV())?new Proxy(t,Zy):t)}function Dn(t){if(t instanceof IDBRequest)return GV(t);if(Qy.has(t))return Qy.get(t);let e=QV(t);return e!==t&&(Qy.set(t,e),Jy.set(e,t)),e}var ph=t=>Jy.get(t);function sA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Dn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Dn(s.result),u.oldVersion,u.newVersion,Dn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var YV=["get","getKey","getAll","getAllKeys","count"],ZV=["put","add","delete","clear"],Xy=new Map;function oA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xy.get(e))return Xy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ZV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YV.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Xy.set(e,o),o}iA(t=>ye(F({},t),{get:(e,n,r)=>oA(e,n)||t.get(e,n,r),has:(e,n)=>!!oA(e,n)||t.has(e,n)}));var tv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function JV(t){let e=t.getComponent();return e?.type==="VERSION"}var nv="@firebase/app",aA="0.13.2";var Jn=new Tn("@firebase/app"),XV="@firebase/app-compat",e2="@firebase/analytics-compat",t2="@firebase/analytics",n2="@firebase/app-check-compat",r2="@firebase/app-check",i2="@firebase/auth",o2="@firebase/auth-compat",s2="@firebase/database",a2="@firebase/data-connect",c2="@firebase/database-compat",u2="@firebase/functions",l2="@firebase/functions-compat",d2="@firebase/installations",h2="@firebase/installations-compat",f2="@firebase/messaging",p2="@firebase/messaging-compat",g2="@firebase/performance",m2="@firebase/performance-compat",y2="@firebase/remote-config",v2="@firebase/remote-config-compat",_2="@firebase/storage",E2="@firebase/storage-compat",I2="@firebase/firestore",w2="@firebase/ai",T2="@firebase/firestore-compat",D2="firebase",b2="11.10.0";var rv="[DEFAULT]",C2={[nv]:"fire-core",[XV]:"fire-core-compat",[t2]:"fire-analytics",[e2]:"fire-analytics-compat",[r2]:"fire-app-check",[n2]:"fire-app-check-compat",[i2]:"fire-auth",[o2]:"fire-auth-compat",[s2]:"fire-rtdb",[a2]:"fire-data-connect",[c2]:"fire-rtdb-compat",[u2]:"fire-fn",[l2]:"fire-fn-compat",[d2]:"fire-iid",[h2]:"fire-iid-compat",[f2]:"fire-fcm",[p2]:"fire-fcm-compat",[g2]:"fire-perf",[m2]:"fire-perf-compat",[y2]:"fire-rc",[v2]:"fire-rc-compat",[_2]:"fire-gcs",[E2]:"fire-gcs-compat",[I2]:"fire-fst",[T2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[D2]:"fire-js-all"};var Mc=new Map,S2=new Map,iv=new Map;function cA(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nn(t){let e=t.name;if(iv.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;iv.set(e,t);for(let n of Mc.values())cA(n,t);for(let n of S2.values())cA(n,t);return!0}function vs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tt(t){return t==null?!1:t.settings!==void 0}var A2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new tn("app","Firebase",A2);var ov=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};var Fr=b2;function cv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:rv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=Gy()),!n)throw Lr.create("no-options");let o=Mc.get(i);if(o){if(wn(n,o.options)&&wn(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}let s=new fh(i);for(let u of iv.values())s.addComponent(u);let a=new ov(n,r,s);return Mc.set(i,a),a}function $i(t=rv){let e=Mc.get(t);if(!e&&t===rv&&Gy())return cv();if(!e)throw Lr.create("no-app",{appName:t});return e}function gh(){return Array.from(Mc.values())}function Ne(t,e,n){var r;let i=(r=C2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}nn(new _t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var R2="firebase-heartbeat-database",N2=1,Pc="firebase-heartbeat-store",ev=null;function hA(){return ev||(ev=sA(R2,N2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),ev}function M2(t){return v(this,null,function*(){try{let n=(yield hA()).transaction(Pc),r=yield n.objectStore(Pc).get(fA(t));return yield n.done,r}catch(e){if(e instanceof Ot)Jn.warn(e.message);else{let n=Lr.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}})}function uA(t,e){return v(this,null,function*(){try{let r=(yield hA()).transaction(Pc,"readwrite");yield r.objectStore(Pc).put(e,fA(t)),yield r.done}catch(n){if(n instanceof Ot)Jn.warn(n.message);else{let r=Lr.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(r.message)}}})}function fA(t){return`${t.name}!${t.options.appId}`}var P2=1024,k2=30,sv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new av(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>k2){let s=O2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=lA(),{heartbeatsToSend:r,unsentEntries:i}=x2(this._heartbeatsCache.heartbeats),o=Ac(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Jn.warn(n),""}})}};function lA(){return new Date().toISOString().substring(0,10)}function x2(t,e=P2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),dA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var av=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Rc()?ZS().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield M2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function dA(t){return Ac(JSON.stringify({version:2,heartbeats:t})).length}function O2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function L2(t){nn(new _t("platform-logger",e=>new tv(e),"PRIVATE")),nn(new _t("heartbeat",e=>new sv(e),"PRIVATE")),Ne(nv,aA,t),Ne(nv,aA,"esm2017"),Ne("fire-js","")}L2("");var F2="firebase",V2="11.10.0";Ne(F2,V2,"app");function pA(t){t===void 0&&(t=k(Ke));let e=t.get(qo);return n=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Vr=new Fo("ANGULARFIRE2_VERSION");function kc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Es=(t,e)=>{let n=e?[e]:gh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},_s=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(_s||{}),gA=oy()&&typeof Zone<"u"?_s.WARN:_s.SILENT;var mh=class{zone;delegate;constructor(e,n=Pp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},jr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(ve);this.outsideAngular=n.runOutsideAngular(()=>new mh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new mh(typeof Zone>"u"?void 0:Zone.current,Mp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mA=!1;function j2(t,e){!mA&&(gA>_s.SILENT||oy())&&(mA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),gA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function U2(t){let e=k(ve,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Hi(t){let e=k(ve,{optional:!0});return e?e.run(()=>t()):t()}var B2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),He(n,()=>Hi(()=>t.apply(void 0,r)))),be=(t,e,n)=>(n||=e?_s.WARN:_s.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(jr),s=k(qo),a=k(Fe)}catch{return j2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Hi(()=>s.add())),i[l]=B2(i[l],r,a));let u=U2(()=>t.apply(this,i));return e?u instanceof Y?u.pipe(_r(o.outsideAngular),vr(o.insideAngular),pA(a)):u instanceof Promise?Hi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>He(a,()=>Hi(()=>h(g))),g=>He(a,()=>Hi(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Hi(()=>u):u instanceof Y?u.pipe(_r(o.outsideAngular),vr(o.insideAngular)):Hi(()=>u)});var Xn=class{constructor(e){return e}},qi=class{constructor(){return gh()}};function $2(t){return t&&t.length===1?t[0]:new Xn($i())}var uv=new U("angularfire2._apps"),H2={provide:Xn,useFactory:$2,deps:[[new Pt,uv]]},q2={provide:qi,deps:[[new Pt,uv]]};function z2(t){return(e,n)=>{let r=n.get(ki);Ne("angularfire",Vr.full,"core"),Ne("angularfire",Vr.full,"app"),Ne("angular",Yp.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Xn(i)}}function Vte(t,...e){return Wt([H2,q2,{provide:uv,useFactory:z2(t),multi:!0,deps:[ve,Ke,jr,...e]}])}var jte=be(cv,!0);var G2=new Map,W2={activated:!1,tokenObservers:[]},K2={initialized:!1,enabled:!1};function rn(t){return G2.get(t)||Object.assign({},W2)}function EA(){return K2}var Q2="https://content-firebaseappcheck.googleapis.com/v1";var Y2="exchangeDebugToken",yA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Kte=1440*60*1e3;var hv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new Ui,this.pending.promise.catch(n=>{}),yield Z2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ui,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Z2(t){return new Promise(e=>{setTimeout(e,t)})}var J2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ur=new tn("appCheck","AppCheck",J2);function IA(t){if(!rn(t).activated)throw Ur.create("use-before-activation",{appName:t.name})}function wA(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Ur.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ur.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ur.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ur.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function TA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Q2}/projects/${n}/apps/${r}:${Y2}?key=${i}`,body:{debug_token:e}}}var X2="firebase-app-check-database",ej=1,fv="firebase-app-check-store";var yh=null;function tj(){return yh||(yh=new Promise((t,e)=>{try{let n=indexedDB.open(X2,ej);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ur.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fv,{keyPath:"compositeKey"})}}}catch(n){e(Ur.create("storage-open",{originalErrorMessage:n?.message}))}}),yh)}function nj(t,e){return rj(ij(t),e)}function rj(t,e){return v(this,null,function*(){let r=(yield tj()).transaction(fv,"readwrite"),o=r.objectStore(fv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ur.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function ij(t){return`${t.options.appId}-${t.name}`}var xc=new Tn("@firebase/app-check");function lv(t,e){return Rc()?nj(t,e).catch(n=>{xc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function DA(){return EA().enabled}function bA(){return v(this,null,function*(){let t=EA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var oj={error:"UNKNOWN_ERROR"};function sj(t){return ch.encodeString(JSON.stringify(t),!1)}function pv(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;IA(r);let i=rn(r),o=i.token,s;if(o&&!Oc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Oc(l)?o=l:yield lv(r,void 0))}if(!e&&o&&Oc(o))return{token:o.token};let a=!1;if(DA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=wA(TA(r,yield bA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield lv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xc.warn(l.message):n&&xc.error(l),dv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield rn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xc.warn(l.message):n&&xc.error(l),s=l}let u;return o?s?Oc(o)?u={token:o.token,internalError:s}:u=dv(s):(u={token:o.token},i.token=o,yield lv(r,o)):u=dv(s),a&&lj(r,u),u})}function aj(t){return v(this,null,function*(){let e=t.app;IA(e);let{provider:n}=rn(e);if(DA()){let r=yield bA(),{token:i}=yield wA(TA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function cj(t,e,n,r){let{app:i}=t,o=rn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Oc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),vA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>vA(t))}function CA(t,e){let n=rn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function vA(t){let{app:e}=t,n=rn(e),r=n.tokenRefresher;r||(r=uj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function uj(t){let{app:e}=t;return new hv(()=>v(null,null,function*(){let n=rn(e),r;if(n.token?r=yield pv(t,!0):r=yield pv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=rn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},yA.RETRIAL_MIN_WAIT,yA.RETRIAL_MAX_WAIT)}function lj(t,e){let n=rn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Oc(t){return t.expireTimeMillis-Date.now()>0}function dv(t){return{token:sj(oj),error:t}}var gv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=rn(this.app);for(let n of e)CA(this.app,n.next);return Promise.resolve()}};function dj(t,e){return new gv(t,e)}function hj(t){return{getToken:e=>pv(t,e),getLimitedUseToken:()=>aj(t),addTokenListener:e=>cj(t,"INTERNAL",e),removeTokenListener:e=>CA(t.app,e)}}var fj="@firebase/app-check",pj="0.10.1";var gj="app-check",_A="app-check-internal";function mj(){nn(new _t(gj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return dj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(_A).initialize()})),nn(new _t(_A,t=>{let e=t.getProvider("app-check").getImmediate();return hj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(fj,pj)}mj();var yj="app-check";var Is=class{constructor(){return Es(yj)}};var vj=["localhost","0.0.0.0","127.0.0.1"],ane=typeof window<"u"&&vj.includes(window.location.hostname);function $A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HA=$A,qA=new tn("auth","Firebase",$A());var Th=new Tn("@firebase/auth");function _j(t,...e){Th.logLevel<=oe.WARN&&Th.warn(`Auth (${Fr}): ${t}`,...e)}function _h(t,...e){Th.logLevel<=oe.ERROR&&Th.error(`Auth (${Fr}): ${t}`,...e)}function Cn(t,...e){throw Uv(t,...e)}function zi(t,...e){return Uv(t,...e)}function zA(t,e,n){let r=Object.assign(Object.assign({},HA()),{[e]:n});return new tn("auth","Firebase",r).create(e,{appName:t.name})}function nr(t){return zA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qA.create(t,...e)}function z(t,e,...n){if(!t)throw Uv(e,...n)}function er(t){let e="INTERNAL ASSERTION FAILED: "+t;throw _h(e),new Error(e)}function Hr(t,e){t||er(e)}function _v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ej(){return SA()==="http:"||SA()==="https:"}function SA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Ij(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ej()||WS()||"connection"in navigator)?navigator.onLine:!0}function wj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Gi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=zS()||KS()}get(){return Ij()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Bv(t,e){Hr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Dh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Tj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Dj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bj=new Gi(3e4,6e4);function qr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function zr(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return GA(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Nc(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return GS()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Or(t.emulatorConfig.host)&&(y.credentials="include"),Dh.fetch()(yield WA(t,t.config.apiHost,n,p),y)}))})}function GA(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Tj),e);try{let i=new Ev(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw vh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw vh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw vh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw zA(t,h,l);Cn(t,h)}}catch(i){if(i instanceof Ot)throw i;Cn(t,"network-request-failed",{message:String(i)})}})}function qc(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield zr(t,e,n,r,i);return"mfaPendingCredential"in l&&Cn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function WA(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Bv(t.config,i):`${t.config.apiScheme}://${i}`;return Dj.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Cj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ev=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),bj.get())})}};function vh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=zi(t,e,r);return i.customData._tokenResponse=n,i}function AA(t){return t!==void 0&&t.enterprise!==void 0}var Iv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Cj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Sj(t,e){return v(this,null,function*(){return zr(t,"GET","/v2/recaptchaConfig",qr(t,e))})}function Aj(t,e){return v(this,null,function*(){return zr(t,"POST","/v1/accounts:delete",e)})}function bh(t,e){return v(this,null,function*(){return zr(t,"POST","/v1/accounts:lookup",e)})}function Fc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $v(t,e=!1){return v(this,null,function*(){let n=Oe(t),r=yield n.getIdToken(e),i=Hv(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Fc(mv(i.auth_time)),issuedAtTime:Fc(mv(i.iat)),expirationTime:Fc(mv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function mv(t){return Number(t)*1e3}function Hv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{let i=uh(n);return i?JSON.parse(i):(_h("Failed to decode base64 JWT payload"),null)}catch(i){return _h("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RA(t){let e=Hv(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function jc(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ot&&Rj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Rj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var wv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Uc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fc(this.lastLoginAt),this.creationTime=Fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ch(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield jc(t,bh(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KA(o.providerUserInfo):[],a=Nj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Uc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function qv(t){return v(this,null,function*(){let e=Oe(t);yield Ch(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Nj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KA(t){return t.map(e=>{var{providerId:n}=e,r=kp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Mj(t,e){return v(this,null,function*(){let n=yield GA(t,{},()=>v(null,null,function*(){let r=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield WA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Or(t.emulatorConfig.host)&&(u.credentials="include"),Dh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Pj(t,e){return v(this,null,function*(){return zr(t,"POST","/v2/accounts:revokeToken",qr(t,e))})}var Vc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=RA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Mj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return er("not implemented")}};function Br(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var $r=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Uc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield jc(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return $v(this,e)}reload(){return qv(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ch(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Tt(this.auth.app))return Promise.reject(nr(this.auth));let e=yield this.getIdToken();return yield jc(this,Aj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:Ee,isAnonymous:pt,providerData:me,stsTokenManager:T}=n;z(K&&T,e,"internal-error");let _=Vc.fromJSON(this.name,T);z(typeof K=="string",e,"internal-error"),Br(p,e.name),Br(g,e.name),z(typeof Ee=="boolean",e,"internal-error"),z(typeof pt=="boolean",e,"internal-error"),Br(y,e.name),Br(C,e.name),Br(N,e.name),Br(R,e.name),Br(x,e.name),Br(H,e.name);let I=new t({uid:K,auth:e,email:g,emailVerified:Ee,displayName:p,isAnonymous:pt,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:x,lastLoginAt:H});return me&&Array.isArray(me)&&(I.providerData=me.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Vc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ch(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?KA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Vc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Uc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var NA=new Map;function tr(t){Hr(t instanceof Function,"Expected a class definition");let e=NA.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,NA.set(t,e),e)}var kj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Tv=kj;function Eh(t,e,n){return`firebase:${t}:${e}:${n}`}var Sh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Eh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Eh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield bh(this.auth,{idToken:e}).catch(()=>{});return n?$r._fromGetAccountInfoResponse(this.auth,n,e):null}return $r._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(tr(Tv),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||tr(Tv),s=Eh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield bh(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield $r._fromGetAccountInfoResponse(e,g,h)}else p=$r._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function MA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e0(e))return"Blackberry";if(t0(e))return"Webos";if(YA(e))return"Safari";if((e.includes("chrome/")||ZA(e))&&!e.includes("edge/"))return"Chrome";if(XA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function QA(t=Ye()){return/firefox\//i.test(t)}function YA(t=Ye()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZA(t=Ye()){return/crios\//i.test(t)}function JA(t=Ye()){return/iemobile/i.test(t)}function XA(t=Ye()){return/android/i.test(t)}function e0(t=Ye()){return/blackberry/i.test(t)}function t0(t=Ye()){return/webos/i.test(t)}function zv(t=Ye()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xj(t=Ye()){var e;return zv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Oj(){return QS()&&document.documentMode===10}function n0(t=Ye()){return zv(t)||XA(t)||t0(t)||e0(t)||/windows phone/i.test(t)||JA(t)}function r0(t,e=[]){let n;switch(t){case"Browser":n=MA(Ye());break;case"Worker":n=`${MA(Ye())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fr}/${r}`}var Dv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Lj(n){return v(this,arguments,function*(t,e={}){return zr(t,"GET","/v2/passwordPolicy",qr(t,e))})}var Fj=6,bv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Fj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Cv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ah(this),this.idTokenSubscription=new Ah(this),this.beforeStateQueue=new Dv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Sh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield bh(this,{idToken:e}),r=yield $r._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Tt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ch(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=wj()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Tt(this.app))return Promise.reject(nr(this));let n=e?Oe(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Tt(this.app)?Promise.reject(nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tt(this.app)?Promise.reject(nr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(tr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Lj(this),n=new bv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Pj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&tr(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield Sh.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Tt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_j(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ki(t){return Oe(t)}var Ah=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=XS(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Oh={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vj(t){Oh=t}function i0(t){return Oh.loadJS(t)}function jj(){return Oh.recaptchaEnterpriseScript}function Uj(){return Oh.gapiScript}function o0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Sv=class{constructor(){this.enterprise=new Av}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Av=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var Bj="recaptcha-enterprise",s0="NO_RECAPTCHA",Rv=class{constructor(e){this.type=Bj,this.auth=Ki(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){Sj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Iv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;AA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(s0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&AA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=jj();u.length!==0&&(u+=a),i0(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Lc(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new Rv(t),s;if(i)s=s0;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Nv(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Lc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Lc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Lc(t,e,n);return r(t,a).catch(u=>v(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Lc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield Lc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function Gv(t,e){let n=vs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(wn(o,e??{}))return i;Cn(i,"already-initialized")}return n.initialize({options:e})}function $j(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Wv(t,e,n){let r=Ki(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=a0(e),{host:s,port:a}=Hj(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(wn(l,r.config.emulator)&&wn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Or(s)?(dh(`${o}//${s}${u}`),hh("Auth",!0)):i||qj()}function a0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Hj(t){let e=a0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:PA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:PA(s)}}}function PA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function qj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Bc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}};function zj(t,e){return v(this,null,function*(){return zr(t,"POST","/v1/accounts:signUp",e)})}function Gj(t,e){return v(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithPassword",qr(t,e))})}function Wj(t,e){return v(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))})}function Kj(t,e){return v(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))})}var $c=class t extends Bc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nv(e,n,"signInWithPassword",Gj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Wj(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nv(e,r,"signUpPassword",zj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Kj(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function yv(t,e){return v(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithIdp",qr(t,e))})}function Qj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yj(t){let e=ms(ys(t)).link,n=e?ms(ys(e)).deep_link_id:null,r=ms(ys(t)).deep_link_id;return(r?ms(ys(r)).link:null)||r||n||e||t}var Rh=class t{constructor(e){var n,r,i,o,s,a;let u=ms(ys(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Qj((i=u.mode)!==null&&i!==void 0?i:null);z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=Yj(e);try{return new t(n)}catch{return null}}};var c0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return $c._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Rh.parseLink(r);return z(i,"argument-error"),$c._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Nh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Mv=class extends Nh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Zj(t,e){return v(this,null,function*(){return qc(t,"POST","/v1/accounts:signUp",qr(t,e))})}var ws=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield $r._fromIdTokenResponse(e,r,i),s=kA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=kA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function kA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Pv=class t extends Ot{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function u0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Pv._fromErrorAndOperation(t,o,e,r):o})}function Jj(t,e,n=!1){return v(this,null,function*(){let r=yield jc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ws._forOperation(t,"link",r)})}function Xj(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Tt(r.app))return Promise.reject(nr(r));let i="reauthenticate";try{let o=yield jc(t,u0(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=Hv(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(t.uid===a,r,"user-mismatch"),ws._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Cn(r,"user-mismatch"),o}})}function l0(t,e,n=!1){return v(this,null,function*(){if(Tt(t.app))return Promise.reject(nr(t));let r="signIn",i=yield u0(t,r,e),o=yield ws._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Kv(t,e){return v(this,null,function*(){return l0(Ki(t),e)})}function d0(t){return v(this,null,function*(){let e=Ki(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Qv(t,e,n){return v(this,null,function*(){if(Tt(t.app))return Promise.reject(nr(t));let r=Ki(t),s=yield Nv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zj,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&d0(t),u}),a=yield ws._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Yv(t,e,n){return Tt(t.app)?Promise.reject(nr(t)):Kv(Oe(t),c0.credential(e,n)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&d0(t),r}))}function zc(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function Zv(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function Jv(t){return Oe(t).signOut()}var Mh="__sak";var Ph=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var eU=1e3,tU=10,nU=(()=>{class t extends Ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Oj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,tU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},eU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield mr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield mr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield mr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),h0=nU;var rU=(()=>{class t extends Ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Xv=rU;function iU(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var oU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield iU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function f0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var kv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=f0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function bn(){return window}function sU(t){bn().location.href=t}function p0(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}function aU(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function cU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uU(){return p0()?self:null}var g0="firebaseLocalStorageDb",lU=1,kh="firebaseLocalStorage",m0="fbase_key",Wi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Lh(t,e){return t.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function dU(){let t=indexedDB.deleteDatabase(g0);return new Wi(t).toPromise()}function xv(){let t=indexedDB.open(g0,lU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(kh,{keyPath:m0})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(kh)?e(r):(r.close(),yield dU(),e(yield xv()))}))})}function xA(t,e,n){return v(this,null,function*(){let r=Lh(t,!0).put({[m0]:e,value:n});return new Wi(r).toPromise()})}function hU(t,e){return v(this,null,function*(){let n=Lh(t,!1).get(e),r=yield new Wi(n).toPromise();return r===void 0?null:r.value})}function OA(t,e){let n=Lh(t,!0).delete(e);return new Wi(n).toPromise()}var fU=800,pU=3,gU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield xv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>pU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return p0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=oU._getInstance(uU()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield aU(),!this.activeServiceWorker)return;this.sender=new kv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||cU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield xv();return yield xA(n,Mh,"1"),yield OA(n,Mh),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>xA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>hU(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>OA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=Lh(o,!1).getAll();return new Wi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),fU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),y0=gU;var gne=o0("rcb"),mne=new Gi(3e4,6e4);function mU(t,e){return e?tr(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Hc=class extends Bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function yU(t){return l0(t.auth,new Hc(t),t.bypassAuthState)}function vU(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),Xj(n,new Hc(t),t.bypassAuthState)}function _U(t){return v(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),Jj(n,new Hc(t),t.bypassAuthState)})}var Ov=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yU;case"linkViaPopup":case"linkViaRedirect":return _U;case"reauthViaPopup":case"reauthViaRedirect":return vU;default:Cn(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var yne=new Gi(2e3,1e4);var EU="pendingRedirect",Ih=new Map,Lv=class t extends Ov{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Ih.get(this.auth._key());if(!e){try{let r=(yield IU(this.resolver,this.auth))?yield mr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ih.set(this.auth._key(),e)}return this.bypassAuthState||Ih.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return mr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,mr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function IU(t,e){return v(this,null,function*(){let n=DU(e),r=TU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function wU(t,e){Ih.set(t._key(),e)}function TU(t){return tr(t._redirectPersistence)}function DU(t){return Eh(EU,t.config.apiKey,t.name)}function bU(t,e,n=!1){return v(this,null,function*(){if(Tt(t.app))return Promise.reject(nr(t));let r=Ki(t),i=mU(r,e),s=yield new Lv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var CU=600*1e3,Fv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!v0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CU&&this.cachedEventUids.clear(),this.cachedEventUids.has(LA(e))}saveEventToCache(e){this.cachedEventUids.add(LA(e)),this.lastProcessedEventTime=Date.now()}};function LA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function v0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function SU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v0(t);default:return!1}}function AU(n){return v(this,arguments,function*(t,e={}){return zr(t,"GET","/v1/projects",e)})}var RU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NU=/^https?/;function MU(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield AU(t);for(let n of e)try{if(PU(n))return}catch{}Cn(t,"unauthorized-domain")})}function PU(t){let e=_v(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!NU.test(n))return!1;if(RU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var kU=new Gi(3e4,6e4);function FA(){let t=bn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xU(t){return new Promise((e,n)=>{var r,i,o;function s(){FA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FA(),n(zi(t,"network-request-failed"))},timeout:kU.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=bn().gapi)===null||o===void 0)&&o.load)s();else{let a=o0("iframefcb");return bn()[a]=()=>{gapi.load?s():n(zi(t,"network-request-failed"))},i0(`${Uj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw wh=null,e})}var wh=null;function OU(t){return wh=wh||xU(t),wh}var LU=new Gi(5e3,15e3),FU="__/auth/iframe",VU="emulator/auth/iframe",jU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BU(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Bv(e,VU):`https://${t.config.authDomain}/${FU}`,r={apiKey:e.apiKey,appName:t.name,v:Fr},i=UU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Nc(r).slice(1)}`}function $U(t){return v(this,null,function*(){let e=yield OU(t),n=bn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:BU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jU,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=zi(t,"network-request-failed"),a=bn().setTimeout(()=>{o(s)},LU.get());function u(){bn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var HU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qU=500,zU=600,GU="_blank",WU="http://localhost",xh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function KU(t,e,n,r=qU,i=zU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},HU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ye().toLowerCase();n&&(a=ZA(l)?GU:n),QA(l)&&(e=e||WU,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(xj(l)&&a!=="_self")return QU(e||"",a),new xh(null);let p=window.open(e||"",a,h);z(p,t,"popup-blocked");try{p.focus()}catch{}return new xh(p)}function QU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var YU="__/auth/handler",ZU="emulator/auth/handler",JU=encodeURIComponent("fac");function VA(t,e,n,r,i,o){return v(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fr,eventId:i};if(e instanceof Nh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",JS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Mv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${JU}=${encodeURIComponent(u)}`:"";return`${XU(t)}?${Nc(a).slice(1)}${l}`})}function XU({config:t}){return t.emulator?Bv(t,ZU):`https://${t.authDomain}/${YU}`}var vv="webStorageSupport",Vv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xv,this._completeRedirectFn=bU,this._overrideRedirectResult=wU}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Hr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield VA(e,n,r,_v(),i);return KU(e,s,f0())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield VA(e,n,r,_v(),i);return sU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Hr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield $U(e),r=new Fv(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vv,{type:vv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[vv];s!==void 0&&n(!!s),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return n0()||YA()||zv()}},_0=Vv;var jA="@firebase/auth",UA="1.10.8";var jv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function eB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tB(t){nn(new _t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r0(t)},l=new Cv(r,i,o,u);return $j(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nn(new _t("auth-internal",e=>{let n=Ki(e.getProvider("auth").getImmediate());return(r=>new jv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(jA,UA,eB(t)),Ne(jA,UA,"esm2017")}var nB=300,rB=Wy("authIdTokenMaxAge")||nB,BA=null,iB=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rB)return;let i=n?.token;BA!==i&&(BA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function e_(t=$i()){let e=vs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Gv(t,{popupRedirectResolver:_0,persistence:[y0,h0,Xv]}),r=Wy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=iB(o.toString());Zv(n,s,()=>s(n.currentUser)),zc(n,a=>s(a))}}let i=zy("auth");return i&&Wv(n,`http://${i}`),n}function oB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Vj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=zi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",oB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tB("Browser");function w0(t){return new Y(function(e){var n=zc(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var T0="auth",Qi=class{constructor(e){return e}},Gc=class{constructor(){return Es(T0)}};var t_=new U("angularfire2.auth-instances");function GB(t,e){let n=kc(T0,t,e);return n&&new Qi(n)}function WB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qi(r)}}var KB={provide:Gc,deps:[[new Pt,t_]]},QB={provide:Qi,useFactory:GB,deps:[[new Pt,t_],Xn]};function ure(t,...e){return Ne("angularfire",Vr.full,"auth"),Wt([QB,KB,{provide:t_,useFactory:WB(t),multi:!0,deps:[ve,Ke,jr,qi,[new Pt,Is],...e]}])}var lre=be(w0,!0);var dre=be(Qv,!0,2);var hre=be(e_,!0);var fre=be(Yv,!0,2);var pre=be(Jv,!0,2);var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b0={};var rr,n_;(function(){var t;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,S){for(var E=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)E[xn-2]=arguments[xn];return _.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],D=T.g[2];var S=T.g[3],E=_+(S^I&(D^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^S&(I^D))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,w=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(w[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<_;)if(w[D++]=T[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)T[I++]=this.g[_]>>>w&255;return T};function o(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function s(T,_){this.h=_;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;w&&S==_||(I[D]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var _=[],I=1,w=0;T>=I;w++)_[w]=T/I|0,I*=4294967296;return new s(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return R(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var _=l(Math.pow(T,6)),I=this,w="";;){var D=Ee(I,_).g;I=x(I,D.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:C(T)?0:1};function R(T){for(var _=T.g.length,I=[],w=0;w<_;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=_;D++){var S=w+(this.i(D)&65535)+(T.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(T,_){return T.add(R(_))}t.j=function(T){if(C(this)||C(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,xn=T.i(D)>>>16,Ks=T.i(D)&65535;I[2*w+2*D]+=E*Ks,H(I,2*w+2*D),I[2*w+2*D+1]+=S*Ks,H(I,2*w+2*D+1),I[2*w+2*D+1]+=E*xn,H(I,2*w+2*D+1),I[2*w+2*D+2]+=S*xn,H(I,2*w+2*D+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function H(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function K(T,_){this.g=T,this.h=_}function Ee(T,_){if(C(_))throw Error("division by zero");if(C(T))return new K(p,p);if(N(T))return _=Ee(R(T),_),new K(R(_.g),R(_.h));if(N(_))return _=Ee(T,R(_)),new K(R(_.g),_.h);if(30<T.g.length){if(N(T)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=_;0>=w.l(T);)I=pt(I),w=pt(w);var D=me(I,1),S=me(w,1);for(w=me(w,2),I=me(I,2);!C(w);){var E=S.add(w);0>=E.l(T)&&(D=D.add(I),S=E),w=me(w,1),I=me(I,1)}return _=x(T,D.j(_)),new K(D,_)}for(D=p;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(_);C(S)&&(S=g),D=D.add(S),T=x(T,E)}return new K(D,T)}t.A=function(T){return Ee(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function pt(T){for(var _=T.g.length+1,I=[],w=0;w<_;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function me(T,_){var I=_>>5;_%=32;for(var w=T.g.length-I,D=[],S=0;S<w;S++)D[S]=0<_?T.i(S+I)>>>_|T.i(S+I+1)<<32-_:T.i(S+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,n_=b0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,rr=b0.Integer=s}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var r_,YB,Ts,i_,Wc,Vh,o_,s_,a_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fh=="object"&&Fh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,A){for(var O=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)O[Ie-2]=arguments[Ie];return d.prototype[b].apply(m,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let b=c.length||0,A=m.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ee(c){return Ee[" "](c),c}Ee[" "]=function(){};var pt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function me(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=$f;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class xn{constructor(){this.h=this.g=null}add(d,f){let m=Ks.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ks=new x(()=>new uM,c=>c.reset());class uM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qs,Ys=!1,$f=new xn,DI=()=>{let c=a.Promise.resolve(void 0);Qs=()=>{c.then(lM)}};var lM=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ks;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ys=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var dM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Zs(c,d){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(pt){e:{try{Ee(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:hM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Zs.aa.h.call(this)}}C(Zs,ot);var hM={2:"touch",3:"pen",4:"mouse"};Zs.prototype.h=function(){Zs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Js="closure_listenable_"+(1e6*Math.random()|0),fM=0;function pM(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++fM,this.da=this.fa=!1}function Eu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Iu(c){this.src=c,this.g={},this.h=0}Iu.prototype.add=function(c,d,f,m,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=qf(c,d,m,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new pM(d,this.src,A,!!m,b),d.fa=f,c.push(d)),d};function Hf(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(m,b,1),A&&(Eu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function qf(c,d,f,m){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return b}return-1}var zf="closure_lm_"+(1e6*Math.random()|0),Gf={};function bI(c,d,f,m,b){if(m&&m.once)return SI(c,d,f,m,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)bI(c,d[A],f,m,b);return null}return f=Yf(f),c&&c[Js]?c.K(d,f,l(m)?!!m.capture:!!m,b):CI(c,d,f,!1,m,b)}function CI(c,d,f,m,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ie=Kf(c);if(Ie||(c[zf]=Ie=new Iu(c)),f=Ie.add(d,f,m,O,A),f.proxy)return f;if(m=gM(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)dM||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(RI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function gM(){function c(f){return d.call(c.src,c.listener,f)}let d=mM;return c}function SI(c,d,f,m,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)SI(c,d[A],f,m,b);return null}return f=Yf(f),c&&c[Js]?c.L(d,f,l(m)?!!m.capture:!!m,b):CI(c,d,f,!0,m,b)}function AI(c,d,f,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)AI(c,d[A],f,m,b);else m=l(m)?!!m.capture:!!m,f=Yf(f),c&&c[Js]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=qf(A,f,m,b),-1<f&&(Eu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Kf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=qf(d,f,m,b)),(f=-1<c?d[c]:null)&&Wf(f))}function Wf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Js])Hf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(RI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Kf(d))?(Hf(f,c),f.h==0&&(f.src=null,d[zf]=null)):Eu(c)}}}function RI(c){return c in Gf?Gf[c]:Gf[c]="on"+c}function mM(c,d){if(c.da)c=!0;else{d=new Zs(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Wf(c),c=f.call(m,d)}return c}function Kf(c){return c=c[zf],c instanceof Iu?c:null}var Qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yf(c){return typeof c=="function"?c:(c[Qf]||(c[Qf]=function(d){return c.handleEvent(d)}),c[Qf])}function st(){hr.call(this),this.i=new Iu(this),this.M=this,this.F=null}C(st,hr),st.prototype[Js]=!0,st.prototype.removeEventListener=function(c,d,f,m){AI(this,c,d,f,m)};function gt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new ot(d,c);else if(d instanceof ot)d.target=d.target||c;else{var b=d;d=new ot(m,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=wu(O,m,!0,d)&&b}if(O=d.g=c,b=wu(O,m,!0,d)&&b,b=wu(O,m,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=wu(O,m,!1,d)&&b}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Eu(f[m]);delete c.g[d],c.h--}}this.F=null},st.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},st.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function wu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ie=O.listener,Xe=O.ha||O.src;O.fa&&Hf(c.i,O),b=Ie.call(Xe,m)!==!1&&b}}return b&&!m.defaultPrevented}function NI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function MI(c){c.g=NI(()=>{c.g=null,c.i&&(c.i=!1,MI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class yM extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:MI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(c){hr.call(this),this.h=c,this.g={}}C(Xs,hr);var PI=[];function kI(c){me(c.g,function(d,f){this.g.hasOwnProperty(f)&&Wf(d)},c),c.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),kI(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zf=a.JSON.stringify,vM=a.JSON.parse,_M=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Jf(){}Jf.prototype.h=null;function xI(c){return c.h||(c.h=c.i())}function OI(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xf(){ot.call(this,"d")}C(Xf,ot);function ep(){ot.call(this,"c")}C(ep,ot);var ri={},LI=null;function Tu(){return LI=LI||new st}ri.La="serverreachability";function FI(c){ot.call(this,ri.La,c)}C(FI,ot);function ta(c){let d=Tu();gt(d,new FI(d))}ri.STAT_EVENT="statevent";function VI(c,d){ot.call(this,ri.STAT_EVENT,c),this.stat=d}C(VI,ot);function mt(c){let d=Tu();gt(d,new VI(d,c))}ri.Ma="timingevent";function jI(c,d){ot.call(this,ri.Ma,c),this.size=d}C(jI,ot);function na(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ra(){this.g=!0}ra.prototype.xa=function(){this.g=!1};function EM(c,d,f,m,b,A){c.info(function(){if(c.g)if(A)for(var O="",Ie=A.split("&"),Xe=0;Xe<Ie.length;Xe++){var he=Ie[Xe].split("=");if(1<he.length){var at=he[0];he=he[1];var ct=at.split("_");O=2<=ct.length&&ct[1]=="type"?O+(at+"="+he+"&"):O+(at+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function IM(c,d,f,m,b,A,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function ho(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+TM(c,f)+(m?" "+m:"")})}function wM(c,d){c.info(function(){return"TIMEOUT: "+d})}ra.prototype.info=function(){};function TM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return Zf(f)}catch{return d}}var Du={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},UI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tp;function bu(){}C(bu,Jf),bu.prototype.g=function(){return new XMLHttpRequest},bu.prototype.i=function(){return{}},tp=new bu;function fr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new BI}function BI(){this.i=null,this.g="",this.h=!1}var $I={},np={};function rp(c,d,f){c.L=1,c.v=Ru(On(d)),c.m=f,c.P=!0,HI(c,null)}function HI(c,d){c.F=Date.now(),Cu(c),c.A=On(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),rw(f.i,"t",m),c.C=0,f=c.j.J,c.h=new BI,c.g=Iw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new yM(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(PI[0]=b.toString()),b=PI);for(var A=0;A<b.length;A++){var O=bI(f,b[A],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ta(),EM(c.i,c.u,c.A,c.l,c.R,c.m)}fr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Ln(c)==3?d.j():this.Y(c)},fr.prototype.Y=function(c){try{if(c==this.g)e:{let ct=Ln(this.g);var d=this.g.Ba();let go=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||lw(this.g)))){this.J||ct!=4||d==7||(d==8||0>=go?ta(3):ta(2)),ip(this);var f=this.g.Z();this.X=f;t:if(qI(this)){var m=lw(this.g);c="";var b=m.length,A=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),ia(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,IM(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Xe=this.g;if((Ie=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ie)){var he=Ie;break t}}he=null}if(f=he)ho(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,op(this,f);else{this.o=!1,this.s=3,mt(12),ii(this),ia(this);break e}}if(this.P){f=!0;let zt;for(;!this.J&&this.C<O.length;)if(zt=DM(this,O),zt==np){ct==4&&(this.s=4,mt(14),f=!1),ho(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==$I){this.s=4,mt(15),ho(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else ho(this.i,this.l,zt,null),op(this,zt);if(qI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||O.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)ho(this.i,this.l,O,"[Invalid Chunked Response]"),ii(this),ia(this);else if(0<O.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),dp(at),at.M=!0,mt(11))}}else ho(this.i,this.l,O,null),op(this,O);ct==4&&ii(this),this.o&&!this.J&&(ct==4?yw(this.j,this):(this.o=!1,Cu(this)))}else BM(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),ii(this),ia(this)}}}catch{}finally{}};function qI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function DM(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?np:(f=Number(d.substring(f,m)),isNaN(f)?$I:(m+=1,m+f>d.length?np:(d=d.slice(m,m+f),c.C=m+f,d)))}fr.prototype.cancel=function(){this.J=!0,ii(this)};function Cu(c){c.S=Date.now()+c.I,zI(c,c.I)}function zI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=na(g(c.ba,c),d)}function ip(c){c.B&&(a.clearTimeout(c.B),c.B=null)}fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(wM(this.i,this.A),this.L!=2&&(ta(),mt(17)),ii(this),this.s=2,ia(this)):zI(this,this.S-c)};function ia(c){c.j.G==0||c.J||yw(c.j,c)}function ii(c){ip(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,kI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function op(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||sp(f.h,c))){if(!c.K&&sp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)xu(f),Pu(f);else break e;lp(f),mt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=na(g(f.Za,f),6e3));if(1>=KI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else si(f,11)}else if((c.K||f.g==c)&&xu(f),!H(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let he=b[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let at=he[3];at!=null&&(f.la=at,f.j.info("VER="+f.la));let ct=he[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));let go=he[5];go!=null&&typeof go=="number"&&0<go&&(m=1.5*go,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let zt=c.g;if(zt){let Lu=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lu){var A=m.h;A.g||Lu.indexOf("spdy")==-1&&Lu.indexOf("quic")==-1&&Lu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ap(A,A.h),A.h=null))}if(m.D){let hp=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;hp&&(m.ya=hp,Te(m.I,m.D,hp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=Ew(m,m.J?m.ia:null,m.W),O.K){QI(m.h,O);var Ie=O,Xe=m.L;Xe&&(Ie.I=Xe),Ie.B&&(ip(Ie),Cu(Ie)),m.g=O}else gw(m);0<f.i.length&&ku(f)}else he[0]!="stop"&&he[0]!="close"||si(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?si(f,7):up(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}ta(4)}catch{}}var bM=class{constructor(c,d){this.g=c,this.map=d}};function GI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function WI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function KI(c){return c.h?1:c.g?c.g.size:0}function sp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function ap(c,d){c.g?c.g.add(d):c.h=d}function QI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}GI.prototype.cancel=function(){if(this.i=YI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function YI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function CM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function SM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function ZI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=SM(c),m=CM(c),b=m.length,A=0;A<b;A++)d.call(void 0,m[A],f&&f[A],c)}var JI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var A=c[f].substring(0,m);b=c[f].substring(m+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,Su(this,c.j),this.o=c.o,this.g=c.g,Au(this,c.s),this.l=c.l;var d=c.i,f=new aa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),XI(this,f),this.m=c.m}else c&&(d=String(c).match(JI))?(this.h=!1,Su(this,d[1]||"",!0),this.o=oa(d[2]||""),this.g=oa(d[3]||"",!0),Au(this,d[4]),this.l=oa(d[5]||"",!0),XI(this,d[6]||"",!0),this.m=oa(d[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}oi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(sa(d,ew,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(sa(d,ew,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(sa(f,f.charAt(0)=="/"?MM:NM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",sa(f,kM)),c.join("")};function On(c){return new oi(c)}function Su(c,d,f){c.j=f?oa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Au(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function XI(c,d,f){d instanceof aa?(c.i=d,xM(c.i,c.h)):(f||(d=sa(d,PM)),c.i=new aa(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Ru(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function oa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function sa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,RM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function RM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ew=/[#\/\?@]/g,NM=/[#\?:]/g,MM=/[#\?]/g,PM=/[#\?@]/g,kM=/#/g;function aa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function pr(c){c.g||(c.g=new Map,c.h=0,c.i&&AM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=aa.prototype,t.add=function(c,d){pr(this),this.i=null,c=fo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function tw(c,d){pr(c),d=fo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function nw(c,d){return pr(c),d=fo(c,d),c.g.has(d)}t.forEach=function(c,d){pr(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},t.na=function(){pr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let A=0;A<b.length;A++)f.push(d[m])}return f},t.V=function(c){pr(this);let d=[];if(typeof c=="string")nw(this,c)&&(d=d.concat(this.g.get(fo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return pr(this),this.i=null,c=fo(this,c),nw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function rw(c,d,f){tw(c,d),0<f.length&&(c.i=null,c.g.set(fo(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var b=A;O[m]!==""&&(b+="="+encodeURIComponent(String(O[m]))),c.push(b)}}return this.i=c.join("&")};function fo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function xM(c,d){d&&!c.j&&(pr(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(tw(this,m),rw(this,b,f))},c)),c.j=d}function OM(c,d){let f=new ra;if(a.Image){let m=new Image;m.onload=y(gr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(gr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(gr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(gr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function LM(c,d){let f=new ra,m=new AbortController,b=setTimeout(()=>{m.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),gr(f,"TestPingServer: error",!1,d)})}function gr(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function FM(){this.g=new _M}function VM(c,d,f){let m=f||"";try{ZI(c,function(b,A){let O=b;l(b)&&(O=Zf(b)),d.push(m+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function ca(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ca,Jf),ca.prototype.g=function(){return new Nu(this.l,this.j)},ca.prototype.i=(function(c){return function(){return c}})({});function Nu(c,d){st.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Nu,st),t=Nu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,la(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function iw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ua(this):la(this),this.readyState==3&&iw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ua(this))},t.Qa=function(c){this.g&&(this.response=c,ua(this))},t.ga=function(){this.g&&ua(this)};function ua(c){c.readyState=4,c.l=null,c.j=null,c.v=null,la(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function la(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Nu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ow(c){let d="";return me(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function cp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=ow(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ae(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,st);var jM=/^https?$/i,UM=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tp.g(),this.v=this.o?xI(this.o):xI(tp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){sw(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UM,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){sw(this,A)}};function sw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,aw(c),Mu(c)}function aw(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Mu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mu(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cw(this):this.bb())},t.bb=function(){cw(this)};function cw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Ln(c)!=4||c.Z()!=2)){if(c.u&&Ln(c)==4)NI(c.Ea,0,c);else if(gt(c,"readystatechange"),Ln(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var b=String(c.D).match(JI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!jM.test(b?b.toLowerCase():"")}f=m}if(f)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var A=2<Ln(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",aw(c)}}finally{Mu(c)}}}}function Mu(c,d){if(c.g){uw(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||gt(c,"ready");try{f.onreadystatechange=m}catch{}}}function uw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ln(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),vM(d)}};function lw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function BM(c){let d={};c=(c.g&&2<=Ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=D(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function dw(c){this.Aa=0,this.i=[],this.j=new ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,c),this.cb=da("retryDelaySeedMs",1e4,c),this.Wa=da("forwardChannelMaxRetries",2,c),this.wa=da("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new GI(c&&c.concurrentRequestLimit),this.Da=new FM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){mt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Ew(this,null,this.W),ku(this)};function up(c){if(hw(c),c.G==3){var d=c.U++,f=On(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),ha(c,f),d=new fr(c,c.j,d),d.L=2,d.v=Ru(On(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Iw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cu(d)}_w(c)}function Pu(c){c.g&&(dp(c),c.g.cancel(),c.g=null)}function hw(c){Pu(c),c.u&&(a.clearTimeout(c.u),c.u=null),xu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ku(c){if(!WI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Qs||DI(),Ys||(Qs(),Ys=!0),$f.add(d,c),c.B=0}}function $M(c,d){return KI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=na(g(c.Ga,c,d),vw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new fr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=pw(this,b,d),f=On(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),ha(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(ow(A)))+"&"+d:this.m&&cp(f,this.m,A)),ap(this.h,b),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),b.T=!0,rp(b,f,null)):rp(b,f,d),this.G=2}}else this.G==3&&(c?fw(this,c):this.i.length==0||WI(this.h)||fw(this))};function fw(c,d){var f;d?f=d.l:f=c.U++;let m=On(c.I);Te(m,"SID",c.K),Te(m,"RID",f),Te(m,"AID",c.T),ha(c,m),c.m&&c.o&&cp(m,c.m,c.o),f=new fr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=pw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ap(c.h,f),rp(f,m,d)}function ha(c,d){c.H&&me(c.H,function(f,m){Te(d,m,f)}),c.l&&ZI({},function(f,m){Te(d,m,f)})}function pw(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ie=!0;for(let Xe=0;Xe<f;Xe++){let he=b[Xe].g,at=b[Xe].map;if(he-=A,0>he)A=Math.max(0,b[Xe].g-100),Ie=!1;else try{VM(at,O,"req"+he+"_")}catch{m&&m(at)}}if(Ie){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function gw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Qs||DI(),Ys||(Qs(),Ys=!0),$f.add(d,c),c.v=0}}function lp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=na(g(c.Fa,c),vw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,mw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=na(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Pu(this),mw(this))};function dp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function mw(c){c.g=new fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=On(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),ha(c,d),c.m&&c.o&&cp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ru(On(d)),f.m=null,f.P=!0,HI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Pu(this),lp(this),mt(19))};function xu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function yw(c,d){var f=null;if(c.g==d){xu(c),dp(c),c.g=null;var m=2}else if(sp(c.h,d))f=d.D,QI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=Tu(),gt(m,new jI(m,f)),ku(c)}else gw(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&$M(c,d)||m==2&&lp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:si(c,5);break;case 4:si(c,10);break;case 3:si(c,6);break;default:si(c,2)}}}function vw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function si(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new oi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Su(m,"https"),Ru(m),b?OM(m.toString(),f):LM(m.toString(),f)}else mt(2);c.G=0,c.l&&c.l.sa(d),_w(c),hw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function _w(c){if(c.G=0,c.ka=[],c.l){let d=YI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Ew(c,d,f){var m=f instanceof oi?On(f):new oi(f);if(m.g!="")d&&(m.g=d+"."+m.g),Au(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new oi(null);m&&Su(A,m),d&&(A.g=d),b&&Au(A,b),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Te(m,f,d),Te(m,"VER",c.la),ha(c,m),m}function Iw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new ca({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ww(){}t=ww.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ou(){}Ou.prototype.g=function(c,d){return new bt(c,d)};function bt(c,d){st.call(this),this.g=new dw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new po(this)}C(bt,st),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){up(this.g)},bt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Zf(c),c=f);d.i.push(new bM(d.Ya++,c)),d.G==3&&ku(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,up(this.g),delete this.g,bt.aa.N.call(this)};function Tw(c){Xf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Tw,Xf);function Dw(){ep.call(this),this.status=1}C(Dw,ep);function po(c){this.g=c}C(po,ww),po.prototype.ua=function(){gt(this.g,"a")},po.prototype.ta=function(c){gt(this.g,new Tw(c))},po.prototype.sa=function(c){gt(this.g,new Dw)},po.prototype.ra=function(){gt(this.g,"b")},Ou.prototype.createWebChannel=Ou.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,a_=ir.createWebChannelTransport=function(){return new Ou},s_=ir.getStatEventTarget=function(){return Tu()},o_=ir.Event=ri,Vh=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Du.NO_ERROR=0,Du.TIMEOUT=8,Du.HTTP_ERROR=6,Wc=ir.ErrorCode=Du,UI.COMPLETE="complete",i_=ir.EventType=UI,OI.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",st.prototype.listen=st.prototype.K,Ts=ir.WebChannel=OI,YB=ir.FetchXmlHttpFactory=ca,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,r_=ir.XhrIo=Ae}).apply(typeof Fh<"u"?Fh:typeof self<"u"?self:typeof window<"u"?window:{});var C0="@firebase/firestore",S0="4.8.0";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var Hs="11.10.0";var to=new Tn("@firebase/firestore");function Ds(){return to.logLevel}function V(t,...e){if(to.logLevel<=oe.DEBUG){let n=e.map(QE);to.debug(`Firestore (${Hs}): ${t}`,...n)}}function or(t,...e){if(to.logLevel<=oe.ERROR){let n=e.map(QE);to.error(`Firestore (${Hs}): ${t}`,...n)}}function Yr(t,...e){if(to.logLevel<=oe.WARN){let n=e.map(QE);to.warn(`Firestore (${Hs}): ${t}`,...n)}}function QE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_R(t,r,n)}function _R(t,e,n){let r=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw or(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||_R(e,i,r)}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ot{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var on=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var zh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},h_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}},f_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},p_=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new on;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new on,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new on)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new zh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ze(e)}},g_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},m_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new g_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},y_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Gh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Gh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ZB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function ER(){return new TextEncoder}var Xc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=ZB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function v_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return re(r,i);{let o=ER(),s=JB(o.encode(A0(t,n)),o.encode(A0(e,n)));return s!==0?s:re(r,i)}}n+=r>65535?2:1}return re(t.length,e.length)}function A0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function JB(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function Ms(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var R0="__name__",Wh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):v_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}},Se=class t extends Wh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},XB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ft=class t extends Wh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return XB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===R0}static keyField(){return new t([R0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};function IR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N0(t){if(!$.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function M0(t){if($.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function Dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Cf(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function t$(t,e){if(e<=0)throw new L(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Be(t,e){let n={typeString:t};return e&&(n.value=e),n}function gu(t,e){if(!wR(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}var P0=-62135596800,k0=1e6,_e=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*k0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<P0)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k0}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-P0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:Be("string",_e._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new _e(0,0))}static max(){return new t(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var eu=-1,__=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};__.UNKNOWN_ID=-1;function n$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new no(i,$.empty(),e)}function r$(t){return new no(t.readTime,t.key,eu)}var no=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),$.empty(),eu)}static max(){return new t(te.max(),$.empty(),eu)}};function i$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var o$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",E_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qs(t){return v(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==o$)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function s$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zs(t){return t.name==="IndexedDbTransactionError"}var YE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),ZE=-1;function Sf(t){return t==null}function tu(t){return t===0&&1/t==-1/0}function a$(t){return typeof t=="number"&&Number.isInteger(t)&&!tu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var TR="";function c$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=x0(e)),e=u$(t.get(n),e);return x0(e)}function u$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case TR:n+="";break;default:n+=o}}return n}function x0(t){return t+TR+""}var l$="remoteDocuments",DR="owner";var bR="mutationQueues";var CR="mutations";var SR="documentMutations",d$="remoteDocumentsV14";var AR="remoteDocumentGlobal";var RR="targets";var NR="targetDocuments";var MR="targetGlobal",PR="collectionParents";var kR="clientMetadata";var xR="bundles";var OR="namedQueries";var h$="indexConfiguration";var f$="indexState";var p$="indexEntries";var LR="documentOverlays";var g$="globals";var m$=[bR,CR,SR,l$,RR,DR,MR,NR,kR,AR,PR,xR,OR],Rre=[...m$,LR],y$=[bR,CR,SR,d$,RR,DR,MR,NR,kR,AR,PR,xR,OR,LR],v$=y$,_$=[...v$,h$,f$,p$];var Nre=[..._$,g$];function O0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ti(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new As(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new As(this.root,e,this.comparator,!1)}getReverseIterator(){return new As(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new As(this.root,e,this.comparator,!0)}},As=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kh(this.data.getIterator())}getIteratorFrom(e){return new Kh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Kh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var qt=class t{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new t([])}unionWith(e){let n=new Je(Ft.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Qh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Qh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var E$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=E$.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ar(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var VR="server_timestamp",jR="__type__",UR="__previous_value__",BR="__local_write_time__";function JE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[jR])===null||n===void 0?void 0:n.stringValue)===VR}function Af(t){let e=t.mapValue.fields[UR];return JE(e)?Af(e):e}function nu(t){let e=sr(t.mapValue.fields[BR].timestampValue);return new _e(e.seconds,e.nanos)}var I_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Yh="(default)",Zh=class t{constructor(e,n){this.projectId=e,this.database=n||Yh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var XE="__type__",$R="__max__",jh={mapValue:{fields:{__type__:{stringValue:$R}}}},eI="__vector__",Ps="value";function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?JE(t)?4:qR(t)?9007199254740991:HR(t)?10:11:q(28295,{value:t})}function Mn(t,e){if(t===e)return!0;let n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nu(t).isEqual(nu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=sr(i.timestampValue),a=sr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ar(i.bytesValue).isEqual(ar(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?tu(s)===tu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ms(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(O0(s)!==O0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Mn(s[u],a[u])))return!1;return!0})(t,e);default:return q(52216,{left:t})}}function ru(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function ks(t,e){if(t===e)return 0;let n=Zr(t),r=Zr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return L0(t.timestampValue,e.timestampValue);case 4:return L0(nu(t),nu(e));case 5:return v_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=ar(o),u=ar(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=re(Ce(o.latitude),Ce(s.latitude));return a!==0?a:re(Ce(o.longitude),Ce(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return F0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ps])===null||a===void 0?void 0:a.arrayValue,C=(u=g[Ps])===null||u===void 0?void 0:u.arrayValue,N=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:F0(y,C)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===jh.mapValue&&s===jh.mapValue)return 0;if(o===jh.mapValue)return 1;if(s===jh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=v_(u[p],h[p]);if(g!==0)return g;let y=ks(a[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)})(t.mapValue,e.mapValue);default:throw q(23264,{le:n})}}function L0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=sr(t),r=sr(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function F0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ks(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function xs(t){return w_(t)}function w_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=sr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ar(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=w_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${w_(n.fields[s])}`;return i+"}"})(t.mapValue):q(61005,{value:t})}function $h(t){switch(Zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Af(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return ar(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+$h(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ti(r.fields,(o,s)=>{i+=o.length+$h(s)}),i})(t.mapValue);default:throw q(13486,{value:t})}}function V0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function T_(t){return!!t&&"integerValue"in t}function tI(t){return!!t&&"arrayValue"in t}function j0(t){return!!t&&"nullValue"in t}function U0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hh(t){return!!t&&"mapValue"in t}function HR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XE])===null||n===void 0?void 0:n.stringValue)===eI}function Qc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ti(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$R}var Pre={mapValue:{fields:{[XE]:{stringValue:eI},[Ps]:{arrayValue:{}}}}};var Lt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Qc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ti(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Qc(this.value))}};function zR(t){let e=[];return ti(t.fields,(n,r)=>{let i=new Ft([n]);if(Hh(r)){let o=zR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new qt(e)}var sn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Os=class{constructor(e,n){this.position=e,this.inclusive=n}};function B0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=ks(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}var ro=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function I$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Jh=class{},Ue=class t extends Jh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new b_(e,n,r):n==="array-contains"?new A_(e,r):n==="in"?new R_(e,r):n==="not-in"?new N_(e,r):n==="array-contains-any"?new M_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C_(e,r):new S_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ks(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},an=class t extends Jh{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return GR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function GR(t){return t.op==="and"}function WR(t){return w$(t)&&GR(t)}function w$(t){for(let e of t.filters)if(e instanceof an)return!1;return!0}function D_(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+xs(t.value);if(WR(t))return t.filters.map(e=>D_(e)).join(",");{let e=t.filters.map(n=>D_(n)).join(",");return`${t.op}(${e})`}}function KR(t,e){return t instanceof Ue?(function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&Mn(r.value,i.value)})(t,e):t instanceof an?(function(r,i){return i instanceof an&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&KR(s,i.filters[a]),!0):!1})(t,e):void q(19439)}function QR(t){return t instanceof Ue?(function(n){return`${n.field.canonicalString()} ${n.op} ${xs(n.value)}`})(t):t instanceof an?(function(n){return n.op.toString()+" {"+n.getFilters().map(QR).join(" ,")+"}"})(t):"Filter"}var b_=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},C_=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=YR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},S_=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=YR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function YR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var A_=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return tI(n)&&ru(n.arrayValue,this.value)}},R_=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}},N_=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ru(this.value.arrayValue,n)}},M_=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!tI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ru(this.value.arrayValue,r))}};var P_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function H0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new P_(t,e,n,r,i,o,s)}function nI(t){let e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>D_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xs(r)).join(",")),e.Pe=n}return e.Pe}function rI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$0(t.startAt,e.startAt)&&$0(t.endAt,e.endAt)}function k_(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Jr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function T$(t,e,n,r,i,o,s,a){return new Jr(t,e,n,r,i,o,s,a)}function Rf(t){return new Jr(t)}function q0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZR(t){return t.collectionGroup!==null}function Yc(t){let e=J(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Je(Ft.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ro(o,r))}),n.has(Ft.keyField().canonicalString())||e.Te.push(new ro(Ft.keyField(),r))}return e.Te}function An(t){let e=J(t);return e.Ie||(e.Ie=D$(e,Yc(t))),e.Ie}function D$(t,e){if(t.limitType==="F")return H0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ro(i.field,o)});let n=t.endAt?new Os(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Os(t.startAt.position,t.startAt.inclusive):null;return H0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function x_(t,e){let n=t.filters.concat([e]);return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xh(t,e,n){return new Jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nf(t,e){return rI(An(t),An(e))&&t.limitType===e.limitType}function JR(t){return`${nI(An(t))}|lt:${t.limitType}`}function bs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QR(i)).join(", ")}]`),Sf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xs(i)).join(",")),`Target(${r})`})(An(t))}; limitType=${t.limitType})`}function Mf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Yc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=B0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Yc(r),i)||r.endAt&&!(function(s,a,u){let l=B0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Yc(r),i))})(t,e)}function b$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XR(t){return(e,n)=>{let r=!1;for(let i of Yc(t)){let o=C$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function C$(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ks(u,l):q(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var cr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return FR(this.inner)}size(){return this.innerSize}};var S$=new Me($.comparator);function ur(){return S$}var eN=new Me($.comparator);function Kc(...t){let e=eN;for(let n of t)e=e.insert(n.key,n);return e}function tN(t){let e=eN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yi(){return Zc()}function nN(){return Zc()}function Zc(){return new cr(t=>t.toString(),(t,e)=>t.isEqual(e))}var A$=new Me($.comparator),R$=new Je($.comparator);function ae(...t){let e=R$;for(let n of t)e=e.add(n);return e}var N$=new Je(re);function M$(){return N$}function iI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function rN(t){return{integerValue:""+t}}function P$(t,e){return a$(e)?rN(e):iI(t,e)}var Ls=class{constructor(){this._=void 0}};function k$(t,e,n){return t instanceof Fs?(function(i,o){let s={fields:{[jR]:{stringValue:VR},[BR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&JE(o)&&(o=Af(o)),o&&(s.fields[UR]=o),{mapValue:s}})(n,e):t instanceof io?oN(t,e):t instanceof oo?sN(t,e):(function(i,o){let s=iN(i,o),a=z0(s)+z0(i.Ee);return T_(s)&&T_(i.Ee)?rN(a):iI(i.serializer,a)})(t,e)}function x$(t,e,n){return t instanceof io?oN(t,e):t instanceof oo?sN(t,e):n}function iN(t,e){return t instanceof Vs?(function(r){return T_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Fs=class extends Ls{},io=class extends Ls{constructor(e){super(),this.elements=e}};function oN(t,e){let n=aN(e);for(let r of t.elements)n.some(i=>Mn(i,r))||n.push(r);return{arrayValue:{values:n}}}var oo=class extends Ls{constructor(e){super(),this.elements=e}};function sN(t,e){let n=aN(e);for(let r of t.elements)n=n.filter(i=>!Mn(i,r));return{arrayValue:{values:n}}}var Vs=class extends Ls{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function z0(t){return Ce(t.integerValue||t.doubleValue)}function aN(t){return tI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function O$(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof io&&i instanceof io||r instanceof oo&&i instanceof oo?Ms(r.elements,i.elements,Mn):r instanceof Vs&&i instanceof Vs?Mn(r.Ee,i.Ee):r instanceof Fs&&i instanceof Fs})(t.transform,e.transform)}var O_=class{constructor(e,n){this.version=e,this.transformResults=n}},Rn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var js=class{};function cN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iu(t.key,Rn.none()):new so(t.key,t.data,Rn.none());{let n=t.data,r=Lt.empty(),i=new Je(Ft.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pn(t.key,r,new qt(i.toArray()),Rn.none())}}function L$(t,e,n){t instanceof so?(function(i,o,s){let a=i.value.clone(),u=W0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Pn?(function(i,o,s){if(!qh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=W0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(uN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Jc(t,e,n,r){return t instanceof so?(function(o,s,a,u){if(!qh(o.precondition,s))return a;let l=o.value.clone(),h=K0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Pn?(function(o,s,a,u){if(!qh(o.precondition,s))return a;let l=K0(o.fieldTransforms,u,s),h=s.data;return h.setAll(uN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return qh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function F$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=iN(r.transform,i||null);o!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,o))}return n||null}function G0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ms(r,i,(o,s)=>O$(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var so=class extends js{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pn=class extends js{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function uN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function W0(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,x$(s,a,n[i]))}return r}function K0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,k$(o,s,e))}return r}var iu=class extends js{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},L_=class extends js{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var F_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&L$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Jc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=nN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=cN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,r)=>G0(n,r))&&Ms(this.baseMutations,e.baseMutations,(n,r)=>G0(n,r))}},V_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return A$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var j_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var U_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,de;function V$(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function lN(t){if(t===void 0)return or("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(de=Ve||(Ve={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var Q0=null;var j$=new rr([4294967295,4294967295],0);function Y0(t){let e=ER().encode(t),n=new n_;return n.update(e),new Uint8Array(n.digest())}function Z0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new rr([n,r],0),new rr([i,o],0)]}var B_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zi(`Invalid padding: ${n}`);if(r<0)throw new Zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=rr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(rr.fromNumber(r)));return i.compare(j$)===1&&(i=new rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=Y0(e),[r,i]=Z0(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=Y0(e),[r,i]=Z0(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ef=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Me(re),ur(),ae())}},ou=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ae(),ae(),ae())}};var Rs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},tf=class{constructor(e,n){this.targetId=e,this.De=n}},nf=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},rf=class{constructor(){this.ve=0,this.Ce=J0(),this.Fe=ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),n=ae(),r=ae();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new ou(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=J0()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ur(),this.je=Uh(),this.Je=Uh(),this.He=new Me(re)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(k_(o))if(r===0){let s=new $(o.path);this.Xe(n,s,sn.newNoDocument(s,te.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}Q0?.ct((function(h,p,g,y,C){var N,R,x,H,K,Ee;let pt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},me=p.unchangedNames;return me&&(pt.bloomFilter={applied:C===0,hashCount:(N=me?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(H=(x=(R=me?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&H!==void 0?H:0,padding:(Ee=(K=me?.bits)===null||K===void 0?void 0:K.padding)!==null&&Ee!==void 0?Ee:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),pt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ar(r).toUint8Array()}catch(u){if(u instanceof Qh)return Yr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new B_(s,i,o)}catch(u){return Yr(u instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&k_(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,sn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ae();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new ef(e,n,this.He,this.ze,r);return this.ze=ur(),this.je=Uh(),this.Je=Uh(),this.He=new Me(re),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new rf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Je(re),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Je(re),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new rf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Uh(){return new Me($.comparator)}function J0(){return new Me($.comparator)}var U$={asc:"ASCENDING",desc:"DESCENDING"},B$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$$={and:"AND",or:"OR"},H_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function q_(t,e){return t.useProto3Json||Sf(e)?e:{value:e}}function of(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H$(t,e){return of(t,e.toTimestamp())}function Nn(t){return ge(!!t,49232),te.fromTimestamp((function(n){let r=sr(n);return new _e(r.seconds,r.nanos)})(t))}function oI(t,e){return z_(t,e).canonicalString()}function z_(t,e){let n=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function hN(t){let e=Se.fromString(t);return ge(yN(e),10190,{key:e.toString()}),e}function G_(t,e){return oI(t.databaseId,e.path)}function c_(t,e){let n=hN(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(pN(n))}function fN(t,e){return oI(t.databaseId,e)}function q$(t){let e=hN(t);return e.length===4?Se.emptyPath():pN(e)}function W_(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pN(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function X0(t,e,n){return{name:G_(t,e),fields:n.value.mapValue.fields}}function z$(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?M.UNKNOWN:lN(l.code);return new L(h,l.message||"")})(s);n=new nf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=c_(t,r.document.name),o=Nn(r.document.updateTime),s=r.document.createTime?Nn(r.document.createTime):te.min(),a=new Lt({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Rs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=c_(t,r.document),o=r.readTime?Nn(r.readTime):te.min(),s=sn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Rs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=c_(t,r.document),o=r.removedTargetIds||[];n=new Rs([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new U_(i,o),a=r.targetId;n=new tf(a,s)}}return n}function G$(t,e){let n;if(e instanceof so)n={update:X0(t,e.key,e.value)};else if(e instanceof iu)n={delete:G_(t,e.key)};else if(e instanceof Pn)n={update:X0(t,e.key,e.data),updateMask:tH(e.fieldMask)};else{if(!(e instanceof L_))return q(16599,{Rt:e.type});n={verify:G_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Fs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof io)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vs)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:H$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(t,e.precondition)),n}function W$(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Nn(i.updateTime):Nn(o);return s.isEqual(te.min())&&(s=Nn(o)),new O_(s,i.transformResults||[])})(n,e))):[]}function K$(t,e){return{documents:[fN(t,e.path)]}}function Q$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fN(t,i);let o=(function(l){if(l.length!==0)return mN(an.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Cs(g.field),direction:J$(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=q_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function Y$(t){let e=q$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=gN(p);return g instanceof an&&WR(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(C){return new ro(Ss(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Sf(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Os(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Os(y,g)})(n.endAt)),T$(e,i,s,o,a,"F",u,l)}function Z$(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ss(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ss(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ss(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ss(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ue.create(Ss(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return an.create(n.compositeFilter.filters.map(r=>gN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(n.compositeFilter.op))})(t):q(30097,{filter:t})}function J$(t){return U$[t]}function X$(t){return B$[t]}function eH(t){return $$[t]}function Cs(t){return{fieldPath:t.canonicalString()}}function Ss(t){return Ft.fromServerFormat(t.fieldPath)}function mN(t){return t instanceof Ue?(function(n){if(n.op==="=="){if(U0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(j0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(j0(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:X$(n.op),value:n.value}}})(t):t instanceof an?(function(n){let r=n.getFilters().map(i=>mN(i));return r.length===1?r[0]:{compositeFilter:{op:eH(n.op),filters:r}}})(t):q(54877,{filter:t})}function tH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var su=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var K_=class{constructor(e){this.gt=e}};function nH(t){let e=Y$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xh(e,e.limit,"L"):e}var sf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),tu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=sr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ar(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?qR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):HR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ps,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ce(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};sf.Ut=new sf;var Q_=class{constructor(){this.Dn=new Y_}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(no.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(no.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Y_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Se.comparator)).toArray()}};var kre=new Uint8Array(0);var eR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vN=41943040,Ht=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(vN,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);var au=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var tR="LruGarbageCollector",rH=1048576;function nR([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var Z_=class{constructor(e){this.Tr=e,this.buffer=new Je(nR),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();nR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},J_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(tR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?V(tR,"Ignoring IndexedDB error during garbage collection: ",n):yield qs(n)}yield this.Rr(3e5)}))}},X_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(YE.ue);let r=new Z_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(eR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eR):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ds()<=oe.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function iH(t,e){return new X_(t,e)}var eE=class{constructor(){this.changes=new cr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var nE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Jc(r.mutation,i,qt.empty(),_e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){let i=Yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Kc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=ur(),s=Zc(),a=(function(){return Zc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Pn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Jc(h.mutation,l,h.mutation.getFieldMask(),_e.now())):s.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new tE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Zc(),i=new Me((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=nN();h.forEach(g=>{if(!o.has(g)){let y=cN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Yi()),a=eu,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:a,changes:tN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Kc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,g){return new Jr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,sn.newInvalidDocument(h)))});let a=Kc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Jc(h.mutation,l,qt.empty(),_e.now()),Mf(n,l)&&(a=a.insert(u,l))}),a})}};var rE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Nn(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:nH(i.bundledQuery),readTime:Nn(i.readTime)}})(n)),P.resolve()}};var iE=class{constructor(){this.overlays=new Me($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Yi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Yi(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Yi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Yi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new j_(n,r));let o=this.kr.get(n);o===void 0&&(o=ae(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var oE=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var cu=class{constructor(){this.qr=new Je(je.Qr),this.$r=new Je(je.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new je(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new je(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new Se([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new Se([])),r=new je(n,e),i=new je(n,e+1),o=ae();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var sE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Je(je.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new F_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new je(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?ZE:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(re);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new je(new $(o),0),a=new Je(re);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new je(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var aE=class{constructor(e){this.ni=e,this.docs=(function(){return new Me($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ur(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||i$(r$(h),r)<=0||(i.has(h.key)||Mf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cE(this)}getSize(e){return P.resolve(this.size)}},cE=class extends eE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var uE=class{constructor(e){this.persistence=e,this.ii=new cr(n=>nI(n),rI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new cu,this.targetCount=0,this._i=au.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new au(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var af=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new YE(0),this.ci=!1,this.ci=!0,this.li=new oE,this.referenceDelegate=e(this),this.hi=new uE(this),this.indexManager=new Q_,this.remoteDocumentCache=(function(i){return new aE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new K_(n),this.Ti=new rE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new sE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new lE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},lE=class extends E_{constructor(e){super(),this.currentSequenceNumber=e}},dE=class t{constructor(e){this.persistence=e,this.Ai=new cu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},cf=class t{constructor(e,n){this.persistence=e,this.gi=new cr(r=>c$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=iH(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ae(),i=ae();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var fE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return YS()?8:s$(Ye())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ds()<=oe.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Ds()<=oe.DEBUG&&V("QueryEngine","Query:",bs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ds()<=oe.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):P.resolve())}ps(e,n){if(q0(n))return P.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xh(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,Xh(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return q0(n)||i.isEqual(te.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Ds()<=oe.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bs(n)),this.vs(e,s,n,n$(i,eu)).next(a=>a))})}bs(e,n){let r=new Je(XR(e));return n.forEach((i,o)=>{Mf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Ds()<=oe.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",bs(n)),this.gs.getDocumentsMatchingQuery(e,n,no.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sI="LocalStore",oH=3e8,gE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Me(re),this.Ms=new cr(o=>nI(o),rI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function sH(t,e,n,r){return new gE(t,e,n,r)}function _N(t,e){return v(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function aH(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);ge(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function EN(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function cH(t,e){let n=J(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=oH?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=ur(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(uH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function uH(t,e,n){let r=ae(),i=ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ur();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(sI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function lH(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ZE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dH(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new su(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function mE(t,e,n){return v(this,null,function*(){let r=J(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!zs(s))throw s;V(sI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function rR(t,e,n){let r=J(t),i=te.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,An(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:ae())).next(a=>(hH(r,b$(e),a),{documents:a,qs:o})))}function hH(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var uf=class{constructor(){this.activeTargetIds=M$()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yE=class{constructor(){this.Fo=new uf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new uf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vE=class{xo(e){}shutdown(){}};var iR="ConnectivityMonitor",lf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(iR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(iR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bh=null;function _E(){return Bh===null?Bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bh++,"0x"+Bh.toString(16)}var u_="RestConnection",fH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},EE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Yh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=_E(),a=this.Go(e,n.toUriEncodedString());V(u_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Or(l);return this.jo(e,a,u,r,h).then(p=>(V(u_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Yr(u_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=fH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var IE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ht="WebChannelConnection",wE=class extends EE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=_E();return new Promise((a,u)=>{let l=new r_;l.setWithCredentials(!0),l.listenOnce(i_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wc.NO_ERROR:let p=l.getResponseJson();V(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Wc.TIMEOUT:V(ht,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:let g=l.getStatus();if(V(ht,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=(function(x){let H=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN})(C.status);u(new L(N,C.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(ht,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=_E(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=a_(),a=s_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,C=new IE({Ho:R=>{y?V(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(V(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(ht,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,x,H)=>{R.listen(x,K=>{try{H(K)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return N(p,Ts.EventType.OPEN,()=>{y||(V(ht,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,Ts.EventType.CLOSE,()=>{y||(y=!0,V(ht,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,Ts.EventType.ERROR,R=>{y||(y=!0,Yr(ht,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ts.EventType.MESSAGE,R=>{var x;if(!y){let H=R.data[0];ge(!!H,16349);let K=H,Ee=K?.error||((x=K[0])===null||x===void 0?void 0:x.error);if(Ee){V(ht,`RPC '${e}' stream ${i} received error:`,Ee);let pt=Ee.status,me=(function(I){let w=Ve[I];if(w!==void 0)return lN(w)})(pt),T=Ee.message;me===void 0&&(me=M.INTERNAL,T="Unknown error status: "+pt+" with message "+Ee.message),y=!0,C.__(new L(me,T)),p.close()}else V(ht,`RPC '${e}' stream ${i} received:`,H),C.a_(H)}}),N(a,o_.STAT_EVENT,R=>{R.stat===Vh.PROXY?V(ht,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Vh.NOPROXY&&V(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function l_(){return typeof document<"u"?document:null}function Pf(t){return new H_(t,!0)}var df=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var oR="PersistentStream",hf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new df(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(oR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(oR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},TE=class extends hf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=z$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Nn(s.readTime):te.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=W_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=k_(u)?{documents:K$(o,u)}:{query:Q$(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=dN(o,s.resumeToken);let l=q_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=of(o,s.snapshotVersion.toTimestamp());let l=q_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Z$(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=W_(this.serializer),n.removeTarget=e,this.k_(n)}},DE=class extends hf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=W$(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=W_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>G$(this.serializer,r))};this.k_(n)}};var bE=class{},CE=class extends bE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,z_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,z_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},SE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(or(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ao="RemoteStore",AE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){co(this)&&(V(ao,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=J(u);l.Ia.add(4),yield mu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield kf(l)})})(this))}))}),this.Aa=new SE(r,i)}};function kf(t){return v(this,null,function*(){if(co(t))for(let e of t.da)yield e(!0)})}function mu(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function IN(t,e){let n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),lI(n)?uI(n):Gs(n).x_()&&cI(n,e))}function aI(t,e){let n=J(t),r=Gs(n);n.Ta.delete(e),r.x_()&&wN(n,e),n.Ta.size===0&&(r.x_()?r.B_():co(n)&&n.Aa.set("Unknown"))}function cI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gs(t).H_(e)}function wN(t,e){t.Ra.$e(e),Gs(t).Y_(e)}function uI(t){t.Ra=new $_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Gs(t).start(),t.Aa.aa()}function lI(t){return co(t)&&!Gs(t).M_()&&t.Ta.size>0}function co(t){return J(t).Ia.size===0}function TN(t){t.Ra=void 0}function pH(t){return v(this,null,function*(){t.Aa.set("Online")})}function gH(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{cI(t,e)})})}function mH(t,e){return v(this,null,function*(){TN(t),lI(t)?(t.Aa.la(e),uI(t)):t.Aa.set("Unknown")})}function yH(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof nf&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){V(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ff(t,r)}else if(e instanceof Rs?t.Ra.Ye(e):e instanceof tf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{let r=yield EN(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),wN(o,u);let p=new su(h.target,u,l,h.sequenceNumber);cI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){V(ao,"Failed to raise snapshot:",r),yield ff(t,r)}})}function ff(t,e,n){return v(this,null,function*(){if(!zs(e))throw e;t.Ia.add(1),yield mu(t),t.Aa.set("Offline"),n||(n=()=>EN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){V(ao,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield kf(t)}))})}function DN(t,e){return e().catch(n=>ff(t,n,e))}function xf(t){return v(this,null,function*(){let e=J(t),n=Xr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ZE;for(;vH(e);)try{let i=yield lH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,_H(e,i)}catch(i){yield ff(e,i)}bN(e)&&CN(e)})}function vH(t){return co(t)&&t.Pa.length<10}function _H(t,e){t.Pa.push(e);let n=Xr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function bN(t){return co(t)&&!Xr(t).M_()&&t.Pa.length>0}function CN(t){Xr(t).start()}function EH(t){return v(this,null,function*(){Xr(t).na()})}function IH(t){return v(this,null,function*(){let e=Xr(t);for(let n of t.Pa)e.X_(n.mutations)})}function wH(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=V_.from(r,e,n);yield DN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield xf(t)})}function TH(t,e){return v(this,null,function*(){e&&Xr(t).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return V$(s)&&s!==M.ABORTED})(i.code)){let o=r.Pa.shift();Xr(r).N_(),yield DN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield xf(r)}})})(t,e)),bN(t)&&CN(t)})}function sR(t,e){return v(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),V(ao,"RemoteStore received new credentials");let r=co(n);n.Ia.add(3),yield mu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield kf(n)})}function DH(t,e){return v(this,null,function*(){let n=J(t);e?(n.Ia.delete(2),yield kf(n)):e||(n.Ia.add(2),yield mu(n),n.Aa.set("Unknown"))})}function Gs(t){return t.Va||(t.Va=(function(n,r,i){let o=J(n);return o.ia(),new TE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:pH.bind(null,t),e_:gH.bind(null,t),n_:mH.bind(null,t),J_:yH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),lI(t)?uI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),TN(t))}))),t.Va}function Xr(t){return t.ma||(t.ma=(function(n,r,i){let o=J(n);return o.ia(),new DE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:EH.bind(null,t),n_:TH.bind(null,t),ea:IH.bind(null,t),ta:wH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield xf(t)):(yield t.ma.stop(),t.Pa.length>0&&(V(ao,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var RE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dI(t,e){if(or("AsyncQueue",`${e}: ${t}`),zs(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var pf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Kc(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var gf=class{constructor(){this.fa=new Me($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Us=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,pf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var NE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},ME=class{constructor(){this.queries=aR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=J(n),o=i.queries;i.queries=aR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function aR(){return new cr(t=>JR(t),Nf)}function hI(t,e){return v(this,null,function*(){let n=J(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new NE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=dI(s,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&pI(n)})}function fI(t,e){return v(this,null,function*(){let n=J(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function bH(t,e){let n=J(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&pI(n)}function CH(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function pI(t){t.Da.forEach(e=>{e.next()})}var PE,cR;(cR=PE||(PE={})).Fa="default",cR.Cache="cache";var uu=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Us(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==PE.Cache}};var mf=class{constructor(e){this.key=e}},yf=class{constructor(e){this.key=e}},kE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=XR(e),this.eu=new pf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new gf,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Mf(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(C)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Us(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new yf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new mf(r))}),n}uu(e){this.Ha=e.qs,this.Za=ae();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Us.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},gI="SyncEngine",xE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},OE=class{constructor(e){this.key=e,this.lu=!1}},LE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new cr(a=>JR(a),Nf),this.Tu=new Map,this.Iu=new Set,this.du=new Me($.comparator),this.Eu=new Map,this.Au=new cu,this.Ru={},this.Vu=new Map,this.mu=au.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function SH(t,e,n=!0){return v(this,null,function*(){let r=PN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield SN(r,e,n,!0),i})}function AH(t,e){return v(this,null,function*(){let n=PN(t);yield SN(n,e,!0,!1)})}function SN(t,e,n,r){return v(this,null,function*(){let i=yield dH(t.localStore,An(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield RH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&IN(t.remoteStore,i),a})}function RH(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,g,y)=>(function(N,R,x,H){return v(this,null,function*(){let K=R.view.nu(x);K.Ds&&(K=yield rR(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,K)));let Ee=H&&H.targetChanges.get(R.targetId),pt=H&&H.targetMismatches.get(R.targetId)!=null,me=R.view.applyChanges(K,N.isPrimaryClient,Ee,pt);return lR(N,R.targetId,me._u),me.snapshot})})(t,p,g,y);let o=yield rR(t.localStore,e,!0),s=new kE(e,o.qs),a=s.nu(o.documents),u=ou.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);lR(t,n,l._u);let h=new xE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function NH(t,e,n){return v(this,null,function*(){let r=J(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Nf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&aI(r.remoteStore,i.targetId),FE(r,i.targetId)}).catch(qs))):(FE(r,i.targetId),yield mE(r.localStore,i.targetId,!0))})}function MH(t,e){return v(this,null,function*(){let n=J(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),aI(n.remoteStore,r.targetId))})}function PH(t,e,n){return v(this,null,function*(){let r=jH(t);try{let i=yield(function(s,a){let u=J(s),l=_e.now(),h=a.reduce((y,C)=>y.add(C.key),ae()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=ur(),N=ae();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((x,H)=>{H.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let x=[];for(let H of a){let K=F$(H,p.get(H.key).overlayedDocument);K!=null&&x.push(new Pn(H.key,K,zR(K.value.mapValue),Rn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:tN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Me(re)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield yu(r,i.changes),yield xf(r.remoteStore)}catch(i){let o=dI(i,"Failed to persist write");n.reject(o)}})}function AN(t,e){return v(this,null,function*(){let n=J(t);try{let r=yield cH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ge(s.lu,14607):i.removedDocuments.size>0&&(ge(s.lu,42227),s.lu=!1))}),yield yu(n,r,e)}catch(r){yield qs(r)}})}function uR(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&pI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kH(t,e,n){return v(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me($.comparator);s=s.insert(o,sn.newNoDocument(o,te.min()));let a=ae().add(o),u=new ef(te.min(),new Map,new Me(re),s,a);yield AN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),mI(r)}else yield mE(r.localStore,e,!1).then(()=>FE(r,e,n)).catch(qs)})}function xH(t,e){return v(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield aH(n.localStore,e);NN(n,r,null),RN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield yu(n,i)}catch(i){yield qs(i)}})}function OH(t,e,n){return v(this,null,function*(){let r=J(t);try{let i=yield(function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);NN(r,e,n),RN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield yu(r,i)}catch(i){yield qs(i)}})}function RN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function NN(t,e,n){let r=J(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function FE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||MN(t,r)})}function MN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(aI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),mI(t))}function lR(t,e,n){for(let r of n)r instanceof mf?(t.Au.addReference(r.key,e),LH(t,r)):r instanceof yf?(V(gI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||MN(t,r.key)):q(19791,{yu:r})}function LH(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(gI,"New document in limbo: "+n),t.Iu.add(r),mI(t))}function mI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(Se.fromString(e)),r=t.mu.next();t.Eu.set(r,new OE(n)),t.du=t.du.insert(n,r),IN(t.remoteStore,new su(An(Rf(n.path)),r,"TargetPurposeLimboResolution",YE.ue))}}function yu(t,e,n){return v(this,null,function*(){let r=J(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=hE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!zs(p))throw p;V(sI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(g,N)}}})})(r.localStore,o))})}function FH(t,e){return v(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){V(gI,"User change. New user:",e.toKey());let r=yield _N(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yu(n,r.Bs)}})}function VH(t,e){let n=J(t),r=n.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let i=ae(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function PN(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kH.bind(null,e),e.hu.J_=bH.bind(null,e.eventManager),e.hu.pu=CH.bind(null,e.eventManager),e}function jH(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OH.bind(null,e),e}var kN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Pf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return sH(this.persistence,new pE,n.initialUser,this.serializer)}Du(n){return new af(dE.Vi,this.serializer)}bu(n){return new yE}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),VE=class extends kN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ge(this.persistence.referenceDelegate instanceof cf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new J_(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new af(r=>cf.Vi(r,n),this.serializer)}};var UH=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FH.bind(null,this.syncEngine),yield DH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new ME})()}createDatastore(n){let r=Pf(n.databaseInfo.databaseId),i=(function(s){return new wE(s)})(n.databaseInfo);return(function(s,a,u,l){return new CE(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new AE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>uR(this.syncEngine,r,0),(function(){return lf.C()?new lf:new vE})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new LE(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield(function(o){return v(this,null,function*(){let s=J(o);V(ao,"RemoteStore shutting down."),s.Ia.add(5),yield mu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var lu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var ei="FirestoreClient",jE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=Xc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){V(ei,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(ei,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=dI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function d_(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V(ei,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield _N(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Yr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Yr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function dR(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield BH(t);V(ei,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>sR(e.remoteStore,i)),t._onlineComponents=e})}function BH(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(ei,"Using user provided OfflineComponentProvider");try{yield d_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Yr("Error using user provided cache. Falling back to memory cache: "+n),yield d_(t,new kN)}}else V(ei,"Using default OfflineComponentProvider"),yield d_(t,new VE(void 0));return t._offlineComponents})}function xN(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(ei,"Using user provided OnlineComponentProvider"),yield dR(t,t._uninitializedComponentsProvider._online)):(V(ei,"Using default OnlineComponentProvider"),yield dR(t,new UH))),t._onlineComponents})}function $H(t){return xN(t).then(e=>e.syncEngine)}function vf(t){return v(this,null,function*(){let e=yield xN(t),n=e.eventManager;return n.onListen=SH.bind(null,e.syncEngine),n.onUnlisten=NH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MH.bind(null,e.syncEngine),n})}function HH(t,e,n={}){let r=new on;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new lu({next:g=>{h.Ou(),s.enqueueAndForget(()=>fI(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new uu(Rf(a.path),h,{includeMetadataChanges:!0,ka:!0});return hI(o,p)})(yield vf(t),t.asyncQueue,e,n,r)})),r.promise}function qH(t,e,n={}){let r=new on;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new lu({next:g=>{h.Ou(),s.enqueueAndForget(()=>fI(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new uu(a,h,{includeMetadataChanges:!0,ka:!0});return hI(o,p)})(yield vf(t),t.asyncQueue,e,n,r)})),r.promise}function ON(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var hR=new Map;var LN="firestore.googleapis.com",fR=!0,_f=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LN,this.ssl=fR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:fR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rH)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ON((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _f({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _f(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new h_;switch(r.type){case"firstParty":return new m_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=hR.get(n);r&&(V("ComponentProvider","Removing Datastore"),hR.delete(n),r.terminate())})(this),Promise.resolve()}};function FN(t,e,n,r={}){var i;t=Dt(t,Bs);let o=Or(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(dh(`https://${u}`),hh("Firestore",!0)),s.host!==LN&&s.host!==u&&Yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!wn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ze.MOCK_USER;else{h=qS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ze(g)}t._authCredentials=new f_(new zh(h,p))}}var lr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(gu(n,t._jsonSchema))return new t(e,r||null,new $(Se.fromString(n.referencePath)))}};qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Be("string",qe._jsonSchemaVersion),referencePath:Be("string")};var Gr=class t extends lr{constructor(e,n,r){super(e,n,Rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function VN(t,e,...n){if(t=Oe(t),IR("collection","path",e),t instanceof Bs){let r=Se.fromString(e,...n);return M0(r),new Gr(t,null,r)}{if(!(t instanceof qe||t instanceof Gr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return M0(r),new Gr(t.firestore,null,r)}}function yI(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=Xc.newId()),IR("doc","path",e),t instanceof Bs){let r=Se.fromString(e,...n);return N0(r),new qe(t,null,new $(r))}{if(!(t instanceof qe||t instanceof Gr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return N0(r),new qe(t.firestore,t instanceof Gr?t.converter:null,new $(r))}}var pR="AsyncQueue",Ef=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new df(this,"async_queue_retry"),this.oc=()=>{let r=l_();r&&V(pR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=l_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=l_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new on;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zs(e))throw e;V(pR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,or("INTERNAL UNHANDLED ERROR: ",gR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=RE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:gR(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function gR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function mR(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var cn=class extends Bs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ef,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ef(e),this._firestoreClient=void 0,yield e}})}};function jN(t,e){let n=typeof t=="object"?t:$i(),r=typeof t=="string"?t:e||Yh,i=vs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=HS("firestore");o&&FN(i,...o)}return i}function Of(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zH(t),t._firestoreClient}function zH(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new I_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ON(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new jE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Wr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:Be("string",Wr._jsonSchemaVersion),bytes:Be("string")};var $s=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var du=class{constructor(e){this._methodName=e}};var Kr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(gu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Kr._jsonSchemaVersion="firestore/geoPoint/1.0",Kr._jsonSchema={type:Be("string",Kr._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var Qr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Qr._jsonSchemaVersion="firestore/vectorValue/1.0",Qr._jsonSchema={type:Be("string",Qr._jsonSchemaVersion),vectorValues:Be("object")};var GH=/^__.*__$/,UE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pn(e,this.data,this.fieldMask,n,this.fieldTransforms):new so(e,this.data,n,this.fieldTransforms)}},If=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function UN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:t})}}var BE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(UN(this.Ec)&&GH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},$E=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pf(e)}Dc(e,n,r,i=!1){return new BE({Ec:e,methodName:n,bc:r,path:Ft.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Lf(t){let e=t._freezeSettings(),n=Pf(t._databaseId);return new $E(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BN(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);vI("Data must be an object, but it was:",s,r);let a=$N(r,s),u,l;if(o.merge)u=new qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=HE(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);qN(h,g)||h.push(g)}u=new qt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new UE(new Lt(a),u,l)}var wf=class t extends du{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function WH(t,e,n,r){let i=t.Dc(1,e,n);vI("Data must be an object, but it was:",i,r);let o=[],s=Lt.empty();ti(r,(u,l)=>{let h=_I(e,u,n);l=Oe(l);let p=i.gc(h);if(l instanceof wf)o.push(h);else{let g=vu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new qt(o);return new If(s,a,i.fieldTransforms)}function KH(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[HE(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(HE(e,o[g])),u.push(o[g+1]);let l=[],h=Lt.empty();for(let g=a.length-1;g>=0;--g)if(!qN(l,a[g])){let y=a[g],C=u[g];C=Oe(C);let N=s.gc(y);if(C instanceof wf)l.push(y);else{let R=vu(C,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new qt(l);return new If(h,p,s.fieldTransforms)}function QH(t,e,n,r=!1){return vu(n,t.Dc(r?4:3,e))}function vu(t,e){if(HN(t=Oe(t)))return vI("Unsupported field value:",e,t),$N(t,e);if(t instanceof du)return(function(r,i){if(!UN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=vu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return P$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=_e.fromDate(r);return{timestampValue:of(i.serializer,o)}}if(r instanceof _e){let o=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:of(i.serializer,o)}}if(r instanceof Kr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:dN(i.serializer,r._byteString)};if(r instanceof qe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:oI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qr)return(function(s,a){return{mapValue:{fields:{[XE]:{stringValue:eI},[Ps]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return iI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Cf(r)}`)})(t,e)}function $N(t,e){let n={};return FR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(t,(r,i)=>{let o=vu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function HN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof Kr||t instanceof Wr||t instanceof qe||t instanceof du||t instanceof Qr)}function vI(t,e,n){if(!HN(n)||!wR(n)){let r=Cf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function HE(t,e,n){if((e=Oe(e))instanceof $s)return e._internalPath;if(typeof e=="string")return _I(t,e);throw Tf("Field path arguments must be of type string or ",t,!1,void 0,n)}var YH=new RegExp("[~\\*/\\[\\]]");function _I(t,e,n){if(e.search(YH)>=0)throw Tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $s(...e.split("."))._internalPath}catch{throw Tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function qN(t,e){return t.some(n=>n.isEqual(e))}var Df=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},qE=class extends Df{data(){return super.data()}};function Ff(t,e){return typeof e=="string"?_I(t,e):e instanceof $s?e._internalPath:e._delegate._internalPath}function zN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hu=class{},fu=class extends hu{};function GN(t,e,...n){let r=[];e instanceof hu&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof zE).length,a=o.filter(u=>u instanceof bf).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var bf=class t extends fu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return YN(e._query,n),new lr(e.firestore,e.converter,x_(e._query,n))}_parse(e){let n=Lf(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vR(p,h);let C=[];for(let N of p)C.push(yR(u,o,N));g={arrayValue:{values:C}}}else g=yR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vR(p,h),g=QH(a,s,p,h==="in"||h==="not-in");return Ue.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function WN(t,e,n){let r=e,i=Ff("where",t);return bf._create(i,r,n)}var zE=class t extends hu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)YN(s,u),s=x_(s,u)})(e._query,n),new lr(e.firestore,e.converter,x_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var GE=class t extends fu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ro(o,s)})(e._query,this._field,this._direction);return new lr(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Jr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function KN(t,e="asc"){let n=e,r=Ff("orderBy",t);return GE._create(r,n)}var WE=class t extends fu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new lr(e.firestore,e.converter,Xh(e._query,this._limit,this._limitType))}};function QN(t){return t$("limit",t),WE._create("limit",t,"F")}function yR(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZR(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Se.fromString(n));if(!$.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return V0(t,new $(r))}if(n instanceof qe)return V0(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(n)}.`)}function vR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YN(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var KE=class{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ti(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ps].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new Qr(o)}convertGeoPoint(e){return new Kr(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){let n=sr(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);ge(yN(r),9688,{name:e});let i=new Zh(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function ZN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ji=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xi=class t extends Df{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xi._jsonSchema={type:Be("string",Xi._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var Ns=class extends Xi{data(e={}){return super.data(e)}},eo=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ji(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ns(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ns(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ji(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ns(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ji(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:ZH(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function ZH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function JN(t){t=Dt(t,qe);let e=Dt(t.firestore,cn);return HH(Of(e),t._key).then(n=>oM(e,t,n))}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:Be("string",eo._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var pu=class extends KE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function XN(t){t=Dt(t,lr);let e=Dt(t.firestore,cn),n=Of(e),r=new pu(e);return zN(t._query),qH(n,t._query).then(i=>new eo(e,r,t,i))}function eM(t,e,n){t=Dt(t,qe);let r=Dt(t.firestore,cn),i=ZN(t.converter,e,n);return Vf(r,[BN(Lf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Rn.none())])}function tM(t,e,n,...r){t=Dt(t,qe);let i=Dt(t.firestore,cn),o=Lf(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof $s?KH(o,"updateDoc",t._key,e,n,r):WH(o,"updateDoc",t._key,e),Vf(i,[s.toMutation(t._key,Rn.exists(!0))])}function nM(t){return Vf(Dt(t.firestore,cn),[new iu(t._key,Rn.none())])}function rM(t,e){let n=Dt(t.firestore,cn),r=yI(t),i=ZN(t.converter,e);return Vf(n,[BN(Lf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}function iM(t,...e){var n,r,i;t=Oe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||mR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(mR(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof qe)l=Dt(t.firestore,cn),h=Rf(t._key.path),u={next:p=>{e[s]&&e[s](oM(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Dt(t,lr);l=Dt(p.firestore,cn),h=p._query;let g=new pu(l);u={next:y=>{e[s]&&e[s](new eo(l,g,p,y))},error:e[s+1],complete:e[s+2]},zN(t._query)}return(function(g,y,C,N){let R=new lu(N),x=new uu(y,R,C);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return hI(yield vf(g),x)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return fI(yield vf(g),x)}))}})(Of(l),h,a,u)}function Vf(t,e){return(function(r,i){let o=new on;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return PH(yield $H(r),i,o)})),o.promise})(Of(t),e)}function oM(t,e,n){let r=n.docs.get(e._key),i=new pu(t);return new Xi(t,i,e._key,r,new Ji(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Hs=i})(Fr),nn(new _t("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new cn(new p_(r.getProvider("auth-internal")),new y_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zh(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(C0,S0,e),Ne(C0,S0,"esm2017")})();var uo=class{constructor(e){return e}},sM="firestore",EI=class{constructor(){return Es(sM)}};var II=new U("angularfire2.firestore-instances");function JH(t,e){let n=kc(sM,t,e);return n&&new uo(n)}function XH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new uo(r)}}var e4={provide:EI,deps:[[new Pt,II]]},t4={provide:uo,useFactory:JH,deps:[[new Pt,II],Xn]};function Oie(t,...e){return Ne("angularfire",Vr.full,"fst"),Wt([t4,e4,{provide:II,useFactory:XH(t),multi:!0,deps:[ve,Ke,jr,qi,[new Pt,Gc],[new Pt,Is],...e]}])}var jf=be(rM,!0,2);var kn=be(VN,!0,2);var wI=be(nM,!0,2);var ni=be(yI,!0,2);var _u=be(JN,!0);var Ws=be(XN,!0);var Lie=be(jN,!0);var Uf=be(QN,!0,2);var TI=be(iM,!0);var aM=be(KN,!0,2),lo=be(GN,!0,2);var Fie=be(eM,!0,2);var Bf=be(tM,!0,2);var dr=be(WN,!0,2);var cM=class t{firestore=k(uo);auth=k(Qi);createTournament(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=ni(this.firestore,"users",e.uid),r=yield _u(n),i=r.exists()?r.data().nickname:e.email||"",o=kn(this.firestore,"tournaments"),s={player1Id:e.uid,player1Email:e.email||"",player1Nickname:i,status:"waiting",currentRound:1,player1Score:0,player2Score:0,rounds:this.initializeRounds(),createdAt:_e.now(),updatedAt:_e.now()};return(yield jf(o,s)).id})}createComputerTournament(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=ni(this.firestore,"users",e.uid),r=yield _u(n),i=r.exists()?r.data().nickname:e.email,o=kn(this.firestore,"tournaments"),s={player1Id:e.uid,player1Email:e.email||"",player1Nickname:i,player2Id:"COMPUTER",player2Email:"\u{1F916} Computer",player2Nickname:"\u{1F916} Computer",isVsComputer:!0,status:"in-progress",currentRound:1,player1Score:0,player2Score:0,rounds:this.initializeRounds(),createdAt:_e.now(),updatedAt:_e.now()};return(yield jf(o,s)).id})}joinTournament(e){return v(this,null,function*(){let n=this.auth.currentUser;if(!n)throw new Error("Not authenticated");let r=ni(this.firestore,"users",n.uid),i=yield _u(r),o=i.exists()?i.data().nickname:n.email||"",s=ni(this.firestore,"tournaments",e);yield Bf(s,{player2Id:n.uid,player2Email:n.email||"",player2Nickname:o,status:"in-progress",updatedAt:_e.now()})})}makeChoice(e,n){return v(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let i=ni(this.firestore,"tournaments",e),o=yield _u(i);if(!o.exists())throw new Error("Tournament not found");let s=o.data(),a=s.currentRound-1,u=[...s.rounds],l=r.uid===s.player1Id;if(l?u[a].player1Choice=n:u[a].player2Choice=n,s.isVsComputer&&l){let h=this.getComputerChoice();u[a].player2Choice=h}if(u[a].player1Choice&&u[a].player2Choice){let h=this.determineRoundWinner(u[a].player1Choice,u[a].player2Choice,s.player1Id,s.player2Id);u[a].winner=h,u[a].completed=!0;let p=s.player1Score,g=s.player2Score;h===s.player1Id?p++:h===s.player2Id&&g++;let y={rounds:u,player1Score:p,player2Score:g,updatedAt:_e.now()};s.currentRound>=5?y.status="completed":u[a].completed&&(y.currentRound=s.currentRound+1),yield Bf(i,y)}else yield Bf(i,{rounds:u,updatedAt:_e.now()})})}getComputerChoice(){return["rock","paper","scissors"][Math.floor(Math.random()*3)]}determineRoundWinner(e,n,r,i){return e===n?null:e==="rock"&&n==="scissors"||e==="paper"&&n==="rock"||e==="scissors"&&n==="paper"?r:i}initializeRounds(){return Array.from({length:5},(e,n)=>({roundNumber:n+1,player1Choice:null,player2Choice:null,winner:null,completed:!1}))}getTournament(e){return new Y(n=>{let r=ni(this.firestore,"tournaments",e),i=TI(r,o=>{o.exists()?n.next(F({id:o.id},o.data())):n.next(null)},o=>{n.error(o)});return()=>i()})}getAvailableTournaments(){return new Y(e=>{let n=kn(this.firestore,"tournaments"),r=lo(n,dr("status","==","waiting"),Uf(20)),i=TI(r,o=>{let s=o.docs.map(a=>F({id:a.id},a.data()));e.next(s)},o=>{e.error(o)});return()=>i()})}deleteTournament(e){return v(this,null,function*(){let n=ni(this.firestore,"tournaments",e);yield wI(n)})}getUserGameHistory(e){return v(this,null,function*(){let n=kn(this.firestore,"tournaments"),r=lo(n,dr("status","==","completed"),Uf(50));return(yield Ws(r)).docs.map(s=>F({id:s.id},s.data())).filter(s=>s.player1Id===e||s.player2Id===e).sort((s,a)=>a.updatedAt?.toMillis()-s.updatedAt?.toMillis())})}getUserStats(e,n){let r=0,i=0,o=0,s=0,a=0;return n.forEach(u=>{let l=u.player1Id===e,h=l?u.player1Score:u.player2Score,p=l?u.player2Score:u.player1Score;h>p?r++:h<p?i++:o++,s+=h,a+=p}),{totalGames:n.length,wins:r,losses:i,draws:o,winRate:n.length>0?(r/n.length*100).toFixed(1):"0.0",totalRoundsWon:s,totalRoundsLost:a}}getLeaderboardData(e){return v(this,null,function*(){let n=kn(this.firestore,"tournaments"),r=new Date;switch(e){case"day":r.setDate(r.getDate()-1);break;case"week":r.setDate(r.getDate()-7);break;case"month":r.setMonth(r.getMonth()-1);break;case"year":r.setFullYear(r.getFullYear()-1);break;case"all":r=new Date(0);break}let i=lo(n,dr("status","==","completed"),Uf(500)),a=(yield Ws(i)).docs.map(l=>F({id:l.id},l.data())).filter(l=>l.updatedAt&&l.updatedAt.toDate()>=r),u=new Map;return a.forEach(l=>{if(l.player1Id&&!l.isVsComputer){let h=u.get(l.player1Id)||{userId:l.player1Id,email:l.player1Email,wins:0,losses:0,draws:0,totalGames:0,roundsWon:0,roundsLost:0,winRate:0};h.totalGames++,h.roundsWon+=l.player1Score,h.roundsLost+=l.player2Score,l.player1Score>l.player2Score?h.wins++:l.player1Score<l.player2Score?h.losses++:h.draws++,h.winRate=h.wins/h.totalGames*100,u.set(l.player1Id,h)}if(l.player2Id&&l.player2Id!=="COMPUTER"){let h=u.get(l.player2Id)||{userId:l.player2Id,email:l.player2Email||"Unknown",wins:0,losses:0,draws:0,totalGames:0,roundsWon:0,roundsLost:0,winRate:0};h.totalGames++,h.roundsWon+=l.player2Score,h.roundsLost+=l.player1Score,l.player2Score>l.player1Score?h.wins++:l.player2Score<l.player1Score?h.losses++:h.draws++,h.winRate=h.wins/h.totalGames*100,u.set(l.player2Id,h)}}),Array.from(u.values()).sort((l,h)=>h.wins!==l.wins?h.wins-l.wins:h.winRate-l.winRate).slice(0,10)})}addFriend(e,n,r){return v(this,null,function*(){let i=this.auth.currentUser;if(!i)throw new Error("Not authenticated");if(yield this.getFriend(i.uid,e))throw new Error("Already friends");let s=kn(this.firestore,"friends");yield jf(s,{userId:i.uid,friendId:e,friendEmail:n,friendNickname:r,addedAt:_e.now()})})}removeFriend(e){return v(this,null,function*(){let n=this.auth.currentUser;if(!n)throw new Error("Not authenticated");let r=kn(this.firestore,"friends"),i=lo(r,dr("userId","==",n.uid),dr("friendId","==",e));(yield Ws(i)).forEach(s=>v(this,null,function*(){yield wI(s.ref)}))})}getFriends(e){return v(this,null,function*(){let n=kn(this.firestore,"friends"),r=lo(n,dr("userId","==",e),aM("addedAt","desc"));return(yield Ws(r)).docs.map(o=>F({id:o.id},o.data()))})}getFriend(e,n){return v(this,null,function*(){let r=kn(this.firestore,"friends"),i=lo(r,dr("userId","==",e),dr("friendId","==",n)),o=yield Ws(i);return o.empty?null:F({id:o.docs[0].id},o.docs[0].data())})}isFriend(e){return v(this,null,function*(){let n=this.auth.currentUser;return n?(yield this.getFriend(n.uid,e))!==null:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{F as a,ye as b,v as c,ze as d,Pe as e,ue as f,TP as g,j as h,Tl as i,B as j,mi as k,U as l,k as m,OT as n,LT as o,Ci as p,Xo as q,ld as r,Ka as s,ix as t,yt as u,wd as v,Xt as w,qm as x,es as y,ts as z,rC as A,Xa as B,bd as C,r1 as D,i1 as E,o1 as F,s1 as G,cC as H,Qm as I,Ym as J,Cd as K,Zm as L,Jm as M,uC as N,d1 as O,dC as P,Sd as Q,fC as R,f1 as S,gC as T,N1 as U,mC as V,Xm as W,yC as X,_C as Y,x1 as Z,EC as _,j1 as $,B1 as aa,Gn as ba,q1 as ca,Nd as da,Md as ea,Kn as fa,FC as ga,OL as ha,Yn as ia,Ly as ja,Cc as ka,VS as la,vV as ma,Vte as na,jte as oa,Qi as pa,ure as qa,lre as ra,dre as sa,hre as ta,fre as ua,pre as va,uo as wa,Oie as xa,ni as ya,_u as za,Lie as Aa,Fie as Ba,Bf as Ca,cM as Da};
