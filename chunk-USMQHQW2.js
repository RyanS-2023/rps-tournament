var aP=Object.defineProperty,cP=Object.defineProperties;var uP=Object.getOwnPropertyDescriptors;var kw=Object.getOwnPropertySymbols,lP=Object.getPrototypeOf,dP=Object.prototype.hasOwnProperty,hP=Object.prototype.propertyIsEnumerable,fP=Reflect.get;var xw=(t,e,n)=>e in t?aP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})dP.call(e,n)&&xw(t,n,e[n]);if(kw)for(var n of kw(e))hP.call(e,n)&&xw(t,n,e[n]);return t},ye=(t,e)=>cP(t,uP(e));var pr=(t,e,n)=>fP(lP(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var vp;function xu(){return vp}function dn(t){let e=vp;return vp=t,e}var Ow=Symbol("NotFound");function fo(t){return t===Ow||t?.name==="\u0275NotFound"}var lt=null,Ou=!1,_p=1,pP=null,dt=Symbol("SIGNAL");function Q(t){let e=lt;return lt=t,e}function ju(){return lt}var po={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function go(t){if(Ou)throw new Error("");if(lt===null)return;lt.consumerOnSignalRead(t);let e=lt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=lt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:lt.producers,n!==void 0&&n.producer===t)){lt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===lt&&(!r||mP(i,lt)))return;let o=yo(lt),s={producer:t,consumer:lt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};lt.producersTail=s,e!==void 0?e.nextProducer=s:lt.producers=s,o&&jw(t,s)}function Lw(){_p++}function Uu(t){if(!(yo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===_p)){if(!t.producerMustRecompute(t)&&!da(t)){Vu(t);return}t.producerRecomputeValue(t),Vu(t)}}function Ep(t){if(t.consumers===void 0)return;let e=Ou;Ou=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||gP(r)}}finally{Ou=e}}function Ip(){return lt?.consumerAllowSignalWrites!==!1}function gP(t){t.dirty=!0,Ep(t),t.consumerMarkedDirty?.(t)}function Vu(t){t.dirty=!1,t.lastCleanEpoch=_p}function mo(t){return t&&Fw(t),Q(t)}function Fw(t){t.producersTail=void 0,t.recomputing=!0}function la(t,e){Q(e),t&&Vw(t)}function Vw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(yo(t))do n=wp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function da(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Uu(n),r!==n.version))return!0}return!1}function ha(t){if(yo(t)){let e=t.producers;for(;e!==void 0;)e=wp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function jw(t,e){let n=t.consumersTail,r=yo(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)jw(i.producer,i)}function wp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!yo(e)){let o=e.producers;for(;o!==void 0;)o=wp(o)}return n}function yo(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Bu(t){pP?.(t)}function mP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function $u(t,e){return Object.is(t,e)}function Hu(t,e){let n=Object.create(yP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Uu(n),go(n),n.value===ua)throw n.error;return n.value};return r[dt]=n,Bu(n),r}var Lu=Symbol("UNSET"),Fu=Symbol("COMPUTING"),ua=Symbol("ERRORED"),yP=ye(V({},po),{value:Lu,dirty:!0,error:null,equal:$u,kind:"computed",producerMustRecompute(t){return t.value===Lu||t.value===Fu},producerRecomputeValue(t){if(t.value===Fu)throw new Error("");let e=t.value;t.value=Fu;let n=mo(t),r,i=!1;try{r=t.computation(),Q(null),i=e!==Lu&&e!==ua&&r!==ua&&t.equal(e,r)}catch(o){r=ua,t.error=o}finally{la(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function vP(){throw new Error}var Uw=vP;function Bw(t){Uw(t)}function Tp(t){Uw=t}var _P=null;function Dp(t,e){let n=Object.create(qu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>$w(n);return r[dt]=n,Bu(n),[r,s=>vo(n,s),s=>bp(n,s)]}function $w(t){return go(t),t.value}function vo(t,e){Ip()||Bw(t),t.equal(t.value,e)||(t.value=e,EP(t))}function bp(t,e){Ip()||Bw(t),vo(t,e(t.value))}var qu=ye(V({},po),{equal:$u,value:void 0,kind:"signal"});function EP(t){t.version++,Lw(),Ep(t),_P?.(t)}function X(t){return typeof t=="function"}function _o(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zu=_o(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof zu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Hw(o)}catch(s){e=e??[],s instanceof zu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Hw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ai(n,e)}remove(e){let{_finalizers:n}=this;n&&ai(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Cp=Ae.EMPTY;function Gu(t){return t instanceof Ae||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function Hw(t){X(t)?t():t.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Eo={setTimeout(t,e,...n){let{delegate:r}=Eo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Eo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wu(t){Eo.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(t);else throw t})}function fa(){}var qw=Sp("C",void 0,void 0);function zw(t){return Sp("E",void 0,t)}function Gw(t){return Sp("N",t,void 0)}function Sp(t,e,n){return{kind:t,value:e,error:n}}var ci=null;function Io(t){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ci;if(ci=null,n)throw r}}else t()}function Ww(t){Qt.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=t)}var ui=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gu(e)&&e.add(this)):this.destination=TP}static create(e,n,r){return new wo(e,n,r)}next(e){this.isStopped?Rp(Gw(e),this):this._next(e)}error(e){this.isStopped?Rp(zw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Rp(qw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IP=Function.prototype.bind;function Ap(t,e){return IP.call(t,e)}var Np=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ku(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ku(r)}else Ku(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ku(n)}}},wo=class extends ui{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Qt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ap(e.next,o),error:e.error&&Ap(e.error,o),complete:e.complete&&Ap(e.complete,o)}):i=e}this.destination=new Np(i)}};function Ku(t){Qt.useDeprecatedSynchronousErrorHandling?Ww(t):Wu(t)}function wP(t){throw t}function Rp(t,e){let{onStoppedNotification:n}=Qt;n&&Eo.setTimeout(()=>n(t,e))}var TP={closed:!0,next:fa,error:wP,complete:fa};var To=typeof Symbol=="function"&&Symbol.observable||"@@observable";function At(t){return t}function Qu(...t){return Mp(t)}function Mp(t){return t.length===0?At:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Y=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=bP(n)?n:new wo(n,r,i);return Io(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Kw(r),new r((i,o)=>{let s=new wo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[To](){return this}pipe(...n){return Mp(n)(this)}toPromise(n){return n=Kw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Kw(t){var e;return(e=t??Qt.Promise)!==null&&e!==void 0?e:Promise}function DP(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function bP(t){return t&&t instanceof ui||DP(t)&&Gu(t)}function Pp(t){return X(t?.lift)}function le(t){return e=>{if(Pp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,e,n,r,i){return new kp(t,e,n,r,i)}var kp=class extends ui{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Do(){return le((t,e)=>{let n=null;t._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var bo=class extends Y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Do()(this)}};var Qw=_o(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class t extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Qw}next(n){Io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Cp:(this.currentObservers=null,o.push(n),new Ae(()=>{this.currentObservers=null,ai(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Y;return n.source=this,n}}return t.create=(e,n)=>new Yu(e,n),t})(),Yu=class extends ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Cp}};var nt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xp={now(){return(xp.delegate||Date).now()},delegate:void 0};var Zu=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var pa={setInterval(t,e,...n){let{delegate:r}=pa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Co=class extends Zu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&pa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var So=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};So.now=xp.now;var Ao=class extends So{constructor(e,n=So.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Op=new Ao(Co);var Ju=class extends Co{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xu=class extends Ao{};var Lp=new Xu(Ju);var It=new Y(t=>t.complete());function Yw(t){return t&&X(t.schedule)}function Zw(t){return t[t.length-1]}function el(t){return X(Zw(t))?t.pop():void 0}function gr(t){return Yw(Zw(t))?t.pop():void 0}function Fp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Xw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Jw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(t){return this instanceof li?(this.v=t,this):new li(t)}function eT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(N){return new Promise(function(R,x){o.push([y,N,R,x])>1||u(y,N)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof li?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,b){y(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function tT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jw=="function"?Jw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var tl=t=>t&&typeof t.length=="number"&&typeof t!="function";function nl(t){return X(t?.then)}function rl(t){return X(t[To])}function il(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function ol(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function CP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sl=CP();function al(t){return X(t?.[sl])}function cl(t){return eT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield li(n.read());if(i)return yield li(void 0);yield yield li(r)}}finally{n.releaseLock()}})}function ul(t){return X(t?.getReader)}function Oe(t){if(t instanceof Y)return t;if(t!=null){if(rl(t))return SP(t);if(tl(t))return AP(t);if(nl(t))return RP(t);if(il(t))return nT(t);if(al(t))return NP(t);if(ul(t))return MP(t)}throw ol(t)}function SP(t){return new Y(e=>{let n=t[To]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function AP(t){return new Y(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function RP(t){return new Y(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wu)})}function NP(t){return new Y(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function nT(t){return new Y(e=>{PP(t,e).catch(n=>e.error(n))})}function MP(t){return nT(cl(t))}function PP(t,e){var n,r,i,o;return Xw(this,void 0,void 0,function*(){try{for(n=tT(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mr(t,e=0){return le((n,r)=>{n.subscribe(ce(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function yr(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function rT(t,e){return Oe(t).pipe(yr(e),mr(e))}function iT(t,e){return Oe(t).pipe(yr(e),mr(e))}function oT(t,e){return new Y(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function sT(t,e){return new Y(n=>{let r;return wt(n,e,()=>{r=t[sl](),wt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function ll(t,e){if(!t)throw new Error("Iterable cannot be null");return new Y(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function aT(t,e){return ll(cl(t),e)}function cT(t,e){if(t!=null){if(rl(t))return rT(t,e);if(tl(t))return oT(t,e);if(nl(t))return iT(t,e);if(il(t))return ll(t,e);if(al(t))return sT(t,e);if(ul(t))return aT(t,e)}throw ol(t)}function Re(t,e){return e?cT(t,e):Oe(t)}function G(...t){let e=gr(t);return Re(t,e)}function Ro(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new Y(e?i=>e.schedule(r,0,i):r)}function Vp(t){return!!t&&(t instanceof Y||X(t.lift)&&X(t.subscribe))}var Un=_o(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(t,e){return le((n,r)=>{let i=0;n.subscribe(ce(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:kP}=Array;function xP(t,e){return kP(e)?t(...e):t(e)}function dl(t){return oe(e=>xP(t,e))}var{isArray:OP}=Array,{getPrototypeOf:LP,prototype:FP,keys:VP}=Object;function hl(t){if(t.length===1){let e=t[0];if(OP(e))return{args:e,keys:null};if(jP(e)){let n=VP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function jP(t){return t&&typeof t=="object"&&LP(t)===FP}function fl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function pl(...t){let e=gr(t),n=el(t),{args:r,keys:i}=hl(t);if(r.length===0)return Re([],e);let o=new Y(UP(r,e,i?s=>fl(i,s):At));return n?o.pipe(dl(n)):o}function UP(t,e,n=At){return r=>{uT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)uT(e,()=>{let l=Re(t[u],e),h=!1;l.subscribe(ce(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function uT(t,e,n){t?wt(n,t,e):e()}function lT(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?b(N):u.push(N),b=N=>{o&&e.next(N),l++;let R=!1;Oe(n(N,h++)).subscribe(ce(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?wt(e,s,()=>b(x)):b(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(ce(e,y,()=>{p=!0,g()})),()=>{a?.()}}function $e(t,e,n=1/0){return X(e)?$e((r,i)=>oe((o,s)=>e(r,o,i,s))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>lT(r,i,t,n)))}function dT(t=1/0){return $e(At,t)}function hT(){return dT(1)}function No(...t){return hT()(Re(t,gr(t)))}function ga(t){return new Y(e=>{Oe(t()).subscribe(e)})}function BP(...t){let e=el(t),{args:n,keys:r}=hl(t),i=new Y(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Oe(n[h]).subscribe(ce(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?fl(r,a):a),o.complete())}))}});return e?i.pipe(dl(e)):i}function Rt(t,e){return le((n,r)=>{let i=0;n.subscribe(ce(r,o=>t.call(e,o,i++)&&r.next(o)))})}function vr(t){return le((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ce(n,void 0,void 0,s=>{o=Oe(t(s,vr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function fT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ce(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Mo(t,e){return X(e)?$e(t,e,1):$e(t,1)}function _r(t){return le((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Bn(t){return t<=0?()=>It:le((e,n)=>{let r=0;e.subscribe(ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function gl(t=$P){return le((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function $P(){return new Un}function ma(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function $n(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((i,o)=>t(i,o,r)):At,Bn(1),n?_r(e):gl(()=>new Un))}function Po(t){return t<=0?()=>It:le((e,n)=>{let r=[];e.subscribe(ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((i,o)=>t(i,o,r)):At,Po(1),n?_r(e):gl(()=>new Un))}function ml(t,e){return le(fT(t,e,arguments.length>=2,!0))}function yl(...t){let e=gr(t);return le((n,r)=>{(e?No(t,n,e):No(t,n)).subscribe(r)})}function Tt(t,e){return le((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ce(r,u=>{i?.unsubscribe();let l=0,h=o++;Oe(t(u,h)).subscribe(i=ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vl(t){return le((e,n)=>{Oe(t).subscribe(ce(n,()=>n.complete(),fa)),!n.closed&&e.subscribe(n)})}function Ge(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):At}function pT(t){let e=Q(null);try{return t()}finally{Q(e)}}var xo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Jp=new xo("20.3.16");var wl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(Oo(e,n)),this.code=e}};function HP(t){return`NG0${Math.abs(t)}`}function Oo(t,e){return`${HP(t)}${e?": "+e:""}`}var Ea=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("")}function yT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function qn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(qn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Xp(t,e){return t?e?`${t} ${e}`:t:e||""}var qP=pe({__forward_ref__:pe});function Tl(t){return t.__forward_ref__=Tl,t.toString=function(){return qn(this())},t}function rt(t){return eg(t)?t():t}function eg(t){return typeof t=="function"&&t.hasOwnProperty(qP)&&t.__forward_ref__===Tl}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ia(t){return zP(t,Dl)}function tg(t){return Ia(t)!==null}function zP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function GP(t){let e=t?.[Dl]??null;return e||null}function Bp(t){return t&&t.hasOwnProperty(El)?t[El]:null}var Dl=pe({\u0275prov:pe}),El=pe({\u0275inj:pe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ng(t){return t&&!!t.\u0275providers}var rg=pe({\u0275cmp:pe}),ig=pe({\u0275dir:pe}),og=pe({\u0275pipe:pe}),sg=pe({\u0275mod:pe}),va=pe({\u0275fac:pe}),yi=pe({__NG_ELEMENT_ID__:pe}),gT=pe({__NG_ENV_ID__:pe});function Yt(t){return typeof t=="string"?t:t==null?"":String(t)}function vT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yt(t)}var _T=pe({ngErrorCode:pe}),WP=pe({ngErrorMessage:pe}),KP=pe({ngTokenPath:pe});function ag(t,e){return ET("",-200,e)}function bl(t,e){throw new j(-201,!1)}function ET(t,e,n){let r=new j(e,t);return r[_T]=e,r[WP]=t,n&&(r[KP]=n),r}function QP(t){return t[_T]}var $p;function IT(){return $p}function Nt(t){let e=$p;return $p=t,e}function cg(t,e,n){let r=Ia(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;bl(t,"Injector")}var YP={},di=YP,Hp="__NG_DI_FLAG__",qp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=hi(n)||0;try{return this.injector.get(e,r&8?null:di,r)}catch(i){if(fo(i))return i;throw i}}};function ZP(t,e=0){let n=xu();if(n===void 0)throw new j(-203,!1);if(n===null)return cg(t,void 0,e);{let r=JP(e),i=n.retrieve(t,r);if(fo(i)){if(r.optional)return null;throw i}return i}}function ne(t,e=0){return(IT()||ZP)(rt(t),e)}function k(t,e){return ne(t,hi(e))}function hi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function JP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function zp(t){let e=[];for(let n=0;n<t.length;n++){let r=rt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=XP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function wT(t,e){return t[Hp]=e,t.prototype[Hp]=e,t}function XP(t){return t[Hp]}function fi(t,e){let n=t.hasOwnProperty(va);return n?t[va]:null}function Cl(t,e){t.forEach(n=>Array.isArray(n)?Cl(n,e):e(n))}function ug(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function TT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function DT(t,e,n){let r=Lo(t,e);return r>=0?t[r|1]=n:(r=~r,TT(t,r,e,n)),r}function Sl(t,e){let n=Lo(t,e);if(n>=0)return t[n|1]}function Lo(t,e){return ek(t,e,1)}function ek(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wr={},Mt=[],Tr=new U(""),lg=new U("",-1),dg=new U(""),_a=class{get(e,n=di){if(n===di){let i=ET("",-201);throw i.name="\u0275NotFound",i}return n}};function hg(t){return t[sg]||null}function Dr(t){return t[rg]||null}function fg(t){return t[ig]||null}function bT(t){return t[og]||null}function Zt(t){return{\u0275providers:t}}function CT(...t){return{\u0275providers:pg(!0,t),\u0275fromNgModule:!0}}function pg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Cl(e,s=>{let a=s;Il(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ST(i,o),n}function ST(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];gg(i,o=>{e(o,r)})}}function Il(t,e,n,r){if(t=rt(t),!t)return!1;let i=null,o=Bp(t),s=!o&&Dr(t);if(!o&&!s){let u=t.ngModule;if(o=Bp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Il(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Cl(o.imports,h=>{Il(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&ST(l,e)}if(!a){let l=fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mt},i),e({provide:dg,useValue:i,multi:!0},i),e({provide:Tr,useValue:()=>ne(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;gg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function gg(t,e){for(let n of t)ng(n)&&(n=n.\u0275providers),Array.isArray(n)?gg(n,e):e(n)}var tk=pe({provide:String,useValue:pe});function AT(t){return t!==null&&typeof t=="object"&&tk in t}function nk(t){return!!(t&&t.useExisting)}function rk(t){return!!(t&&t.useFactory)}function pi(t){return typeof t=="function"}function RT(t){return!!t.useClass}var Ta=new U(""),_l={},mT={},Up;function Da(){return Up===void 0&&(Up=new _a),Up}var Le=class{},gi=class extends Le{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Wp(e,s=>this.processProvider(s)),this.records.set(lg,ko(void 0,this)),i.has("environment")&&this.records.set(Le,ko(void 0,this));let o=this.records.get(Ta);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dg,Mt,{self:!0}))}retrieve(e,n){let r=hi(n)||0;try{return this.get(e,di,r)}catch(i){if(fo(i))return i;throw i}}destroy(){ya(this),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return ya(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ya(this);let n=dn(this),r=Nt(void 0),i;try{return e()}finally{dn(n),Nt(r)}}get(e,n=di,r){if(ya(this),e.hasOwnProperty(gT))return e[gT](this);let i=hi(r),o,s=dn(this),a=Nt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=ck(e)&&Ia(e);h&&this.injectableDefInScope(h)?l=ko(Gp(e),_l):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Da():this.parent;return n=i&8&&n===di?null:n,u.get(e,n)}catch(u){let l=QP(u);throw l===-200||l===-201?new j(l,null):u}finally{Nt(a),dn(s)}}resolveInjectorInitializers(){let e=Q(null),n=dn(this),r=Nt(void 0),i;try{let o=this.get(Tr,Mt,{self:!0});for(let s of o)s()}finally{dn(n),Nt(r),Q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(qn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=rt(e);let n=pi(e)?e:rt(e&&e.provide),r=ok(e);if(!pi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ko(void 0,_l,!0),i.factory=()=>zp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Q(null);try{if(n.value===mT)throw ag(qn(e));return n.value===_l&&(n.value=mT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ak(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=rt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gp(t){let e=Ia(t),n=e!==null?e.factory:fi(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return ik(t);throw new j(204,!1)}function ik(t){if(t.length>0)throw new j(204,!1);let n=GP(t);return n!==null?()=>n.factory(t):()=>new t}function ok(t){if(AT(t))return ko(void 0,t.useValue);{let e=mg(t);return ko(e,_l)}}function mg(t,e,n){let r;if(pi(t)){let i=rt(t);return fi(i)||Gp(i)}else if(AT(t))r=()=>rt(t.useValue);else if(rk(t))r=()=>t.useFactory(...zp(t.deps||[]));else if(nk(t))r=(i,o)=>ne(rt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=rt(t&&(t.useClass||t.provide));if(sk(t))r=()=>new i(...zp(t.deps));else return fi(i)||Gp(i)}return r}function ya(t){if(t.destroyed)throw new j(205,!1)}function ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sk(t){return!!t.deps}function ak(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ck(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Wp(t,e){for(let n of t)Array.isArray(n)?Wp(n,e):n&&ng(n)?Wp(n.\u0275providers,e):e(n)}function He(t,e){let n;t instanceof gi?(ya(t),n=t):n=new qp(t);let r,i=dn(n),o=Nt(void 0);try{return e()}finally{dn(i),Nt(o)}}function NT(){return IT()!==void 0||xu()!=null}var Jt=0,W=1,ee=2,We=3,Bt=4,$t=5,Fo=6,Vo=7,Pe=8,zn=9,fn=10,Te=11,jo=12,yg=13,vi=14,Pt=15,_i=16,Ei=17,Ii=18,ba=19,vg=20,Hn=21,Al=22,Ca=23,kt=24,Rl=25,wi=26,Qe=27,MT=1,_g=6,br=7,Sa=8,Aa=9,ke=10;function pn(t){return Array.isArray(t)&&typeof t[MT]=="object"}function Xt(t){return Array.isArray(t)&&t[MT]===!0}function Eg(t){return(t.flags&4)!==0}function Cr(t){return t.componentOffset>-1}function Ra(t){return(t.flags&1)===1}function gn(t){return!!t.template}function Uo(t){return(t[ee]&512)!==0}function Ti(t){return(t[ee]&256)===256}var Ig="svg",PT="math";function Ht(t){for(;Array.isArray(t);)t=t[Jt];return t}function wg(t,e){return Ht(e[t])}function en(t,e){return Ht(e[t.index])}function Na(t,e){return t.data[e]}function qt(t,e){let n=e[t];return pn(n)?n:n[Jt]}function Nl(t){return(t[ee]&128)===128}function kT(t){return Xt(t[We])}function zt(t,e){return e==null?null:t[e]}function Tg(t){t[Ei]=0}function Dg(t){t[ee]&1024||(t[ee]|=1024,Nl(t)&&Pa(t))}function xT(t,e){for(;t>0;)e=e[vi],t--;return e}function Ma(t){return!!(t[ee]&9216||t[kt]?.dirty)}function Ml(t){t[fn].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Ma(t)&&Pa(t)}function Pa(t){t[fn].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!Nl(e)));)e=Er(e)}function bg(t,e){if(Ti(t))throw new j(911,!1);t[Hn]===null&&(t[Hn]=[]),t[Hn].push(e)}function OT(t,e){if(t[Hn]===null)return;let n=t[Hn].indexOf(e);n!==-1&&t[Hn].splice(n,1)}function Er(t){let e=t[We];return Xt(e)?e[We]:e}function LT(t){return t[Vo]??=[]}function FT(t){return t.cleanup??=[]}var re={lFrame:ZT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kp=!1;function VT(){return re.lFrame.elementDepthCount}function jT(){re.lFrame.elementDepthCount++}function Cg(){re.lFrame.elementDepthCount--}function Sg(){return re.bindingsEnabled}function UT(){return re.skipHydrationRootTNode!==null}function Ag(t){return re.skipHydrationRootTNode===t}function Rg(){re.skipHydrationRootTNode=null}function se(){return re.lFrame.lView}function Ye(){return re.lFrame.tView}function BT(t){return re.lFrame.contextLView=t,t[Pe]}function $T(t){return re.lFrame.contextLView=null,t}function it(){let t=Ng();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ng(){return re.lFrame.currentTNode}function HT(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bo(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function Mg(){return re.lFrame.isParent}function qT(){re.lFrame.isParent=!1}function Pg(){return Kp}function kg(t){let e=Kp;return Kp=t,e}function xg(){return re.lFrame.bindingIndex}function zT(t){return re.lFrame.bindingIndex=t}function Sr(){return re.lFrame.bindingIndex++}function Pl(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function GT(){return re.lFrame.inI18n}function WT(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,kl(e)}function KT(){return re.lFrame.currentDirectiveIndex}function kl(t){re.lFrame.currentDirectiveIndex=t}function QT(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Og(t){re.lFrame.currentQueryIndex=t}function uk(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function Lg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=uk(o),i===null||(o=o[vi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=YT();return r.currentTNode=e,r.lView=t,!0}function xl(t){let e=YT(),n=t[W];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function YT(){let t=re.lFrame,e=t===null?null:t.child;return e===null?ZT(t):e}function ZT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JT(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Fg=JT;function Ol(){let t=JT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function XT(t){return(re.lFrame.contextLView=xT(t,re.lFrame.contextLView))[Pe]}function mn(){return re.lFrame.selectedIndex}function Ar(t){re.lFrame.selectedIndex=t}function ka(){let t=re.lFrame;return Na(t.tView,t.selectedIndex)}function eD(){re.lFrame.currentNamespace=Ig}function tD(){lk()}function lk(){re.lFrame.currentNamespace=null}function nD(){return re.lFrame.currentNamespace}var rD=!0;function Ll(){return rD}function Fl(t){rD=t}function Qp(t,e=null,n=null,r){let i=Vg(t,e,n,r);return i.resolveInjectorInitializers(),i}function Vg(t,e=null,n=null,r,i=new Set){let o=[n||Mt,CT(t)];return r=r||(typeof t=="object"?void 0:qn(t)),new gi(o,e||Da(),r||null,i)}var Ke=class t{static THROW_IF_NOT_FOUND=di;static NULL=new _a;static create(e,n){if(Array.isArray(e))return Qp({name:""},n,e,"");{let r=e.name??"";return Qp({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>ne(lg)});static __NG_ELEMENT_ID__=-1},ot=new U(""),Di=(()=>{class t{static __NG_ELEMENT_ID__=dk;static __NG_ENV_ID__=n=>n}return t})(),Yp=class extends Di{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ti(this._lView)}onDestroy(e){let n=this._lView;return bg(n,e),()=>OT(n,e)}};function dk(){return new Yp(se())}var hn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Dt=new U("",{providedIn:"root",factory:()=>{let t=k(Le),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(hn),e.handleError(n))}}}),iD={provide:Tr,useValue:()=>void k(hn),multi:!0};function jg(t){return typeof t=="function"&&t[dt]!==void 0}function bi(t,e){let[n,r,i]=Dp(t,e?.equal),o=n,s=o[dt];return o.set=r,o.update=i,o.asReadonly=oD.bind(o),o}function oD(){let t=this[dt];if(t.readonlyFn===void 0){let e=()=>this();e[dt]=t,t.readonlyFn=e}return t.readonlyFn}function Ug(t){return jg(t)&&typeof t.set=="function"}var Ir=class{},xa=new U("",{providedIn:"root",factory:()=>!1});var Bg=new U(""),$g=new U(""),yn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),$o=(()=>{class t{internalPendingTasks=k(yn);scheduler=k(Ir);errorHandler=k(Dt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();function Oa(...t){}var Hg=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new Zp})}return t})(),Zp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Qo(t){return{toString:t}.toString()}var Vl="__parameters__";function _k(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Ek(t,e,n){return Qo(()=>{let r=_k(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Vl)?u[Vl]:Object.defineProperty(u,Vl,{value:[]})[Vl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var xt=wT(Ek("Optional"),8);function Ik(t){return typeof t=="function"}var zl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function FD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Yo=(()=>{let t=()=>VD;return t.ngInherit=!0,t})();function VD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Tk),wk}function wk(){let t=UD(this),e=t?.current;if(e){let n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Tk(t,e,n,r,i){let o=this.declaredInputs[r],s=UD(t)||Dk(t,{previous:wr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new zl(l&&l.currentValue,n,u===wr),FD(t,e,i,n)}var jD="__ngSimpleChanges__";function UD(t){return t[jD]||null}function Dk(t,e){return t[jD]=e}var sD=[];var Ie=function(t,e=null,n){for(let r=0;r<sD.length;r++){let i=sD[r];i(t,e,n)}};function bk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=VD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function BD(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Bl(t,e,n){$D(t,e,3,n)}function $l(t,e,n,r){(t[ee]&3)===n&&$D(t,e,n,r)}function qg(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function $D(t,e,n,r){let i=r!==void 0?t[Ei]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ei]+=65536),(a<o||o==-1)&&(Ck(t,n,e,u),t[Ei]=(t[Ei]&4294901760)+u+2),u++}function aD(t,e){Ie(4,t,e);let n=Q(null);try{e.call(t)}finally{Q(n),Ie(5,t,e)}}function Ck(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ee]>>14<t[Ei]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,aD(a,o)):aD(a,o)}var qo=-1,Si=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Sk(t){return(t.flags&8)!==0}function Ak(t){return(t.flags&16)!==0}function Rk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Nk(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function HD(t){return t===3||t===4||t===6}function Nk(t){return t.charCodeAt(0)===64}function zo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?cD(t,n,i,null,e[++r]):cD(t,n,i,null,null))}}return t}function cD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function qD(t){return t!==qo}function Gl(t){return t&32767}function Mk(t){return t>>16}function Wl(t,e){let n=Mk(t),r=e;for(;n>0;)r=r[vi],n--;return r}var em=!0;function uD(t){let e=em;return em=t,e}var Pk=256,zD=Pk-1,GD=5,kk=0,vn={};function xk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yi)&&(r=n[yi]),r==null&&(r=n[yi]=kk++);let i=r&zD,o=1<<i;e.data[t+(i>>GD)]|=o}function Kl(t,e){let n=WD(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,zg(r.data,t),zg(e,null),zg(r.blueprint,null));let i=Cm(t,e),o=t.injectorIndex;if(qD(i)){let s=Gl(i),a=Wl(i,e),u=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function zg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function WD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Cm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JD(i),r===null)return qo;if(n++,i=i[vi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qo}function tm(t,e,n){xk(t,e,n)}function Ok(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(HD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function KD(t,e,n){if(n&8||t!==void 0)return t;bl(e,"NodeInjector")}function QD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[zn],o=Nt(void 0);try{return i?i.get(e,r,n&8):cg(e,r,n&8)}finally{Nt(o)}}return KD(r,e,n)}function YD(t,e,n,r=0,i){if(t!==null){if(e[ee]&2048&&!(r&2)){let s=Uk(t,e,n,r,vn);if(s!==vn)return s}let o=ZD(t,e,n,r,vn);if(o!==vn)return o}return QD(e,n,r,i)}function ZD(t,e,n,r,i){let o=Vk(n);if(typeof o=="function"){if(!Lg(e,t,r))return r&1?KD(i,n,r):QD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))bl(n);else return s}finally{Fg()}}else if(typeof o=="number"){let s=null,a=WD(t,e),u=qo,l=r&1?e[Pt][$t]:null;for((a===-1||r&4)&&(u=a===-1?Cm(t,e):e[a+8],u===qo||!dD(r,!1)?a=-1:(s=e[W],a=Gl(u),e=Wl(u,e)));a!==-1;){let h=e[W];if(lD(o,a,h.data)){let p=Lk(a,e,n,s,r,l);if(p!==vn)return p}u=e[a+8],u!==qo&&dD(r,e[W].data[a+8]===l)&&lD(o,a,e)?(s=h,a=Gl(u),e=Wl(u,e)):a=-1}}return i}function Lk(t,e,n,r,i,o){let s=e[W],a=s.data[t+8],u=r==null?Cr(a)&&em:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Fk(a,s,n,u,l);return h!==null?Ql(e,s,h,a,i):vn}function Fk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let b=s[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=s[u];if(y&&gn(y)&&y.type===n)return u}return null}function Ql(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Si){let a=o;if(a.resolving){let y=vT(s[n]);throw ag(y)}let u=uD(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Nt(a.injectImpl):null,g=Lg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&bk(n,s[n],e)}finally{p!==null&&Nt(p),uD(u),a.resolving=!1,Fg()}}return o}function Vk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yi)?t[yi]:void 0;return typeof e=="number"?e>=0?e&zD:jk:e}function lD(t,e,n){let r=1<<t;return!!(n[e+(t>>GD)]&r)}function dD(t,e){return!(t&2)&&!(t&1&&e)}var Ci=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return YD(this._tNode,this._lView,e,hi(r),n)}};function jk(){return new Ci(it(),se())}function ld(t){return Qo(()=>{let e=t.prototype.constructor,n=e[va]||nm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[va]||nm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function nm(t){return eg(t)?()=>{let e=nm(rt(t));return e&&e()}:fi(t)}function Uk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!Uo(s);){let a=ZD(o,s,n,r|2,vn);if(a!==vn)return a;let u=o.parent;if(!u){let l=s[vg];if(l){let h=l.get(n,vn,r);if(h!==vn)return h}u=JD(s),s=s[vi]}o=u}return i}function JD(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}function Ha(t){return Ok(it(),t)}function Bk(){return dd(it(),se())}function dd(t,e){return new qa(en(t,e))}var qa=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Bk}return t})();function XD(t){return(t.flags&128)===128}var Sm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Sm||{}),eb=new Map,$k=0;function Hk(){return $k++}function qk(t){eb.set(t[ba],t)}function rm(t){eb.delete(t[ba])}var hD="__ngContext__";function Go(t,e){pn(e)?(t[hD]=e[ba],qk(e)):t[hD]=e}function tb(t){return rb(t[jo])}function nb(t){return rb(t[Bt])}function rb(t){for(;t!==null&&!Xt(t);)t=t[Bt];return t}var im;function Am(t){im=t}function ib(){if(im!==void 0)return im;if(typeof document<"u")return document;throw new j(210,!1)}var hd=new U("",{providedIn:"root",factory:()=>zk}),zk="ng",fd=new U(""),Pi=new U("",{providedIn:"platform",factory:()=>"unknown"});var pd=new U("",{providedIn:"root",factory:()=>ib().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gk="h",Wk="b";var ob="r";var sb="di";var ab=!1,cb=new U("",{providedIn:"root",factory:()=>ab});var Kk=(t,e,n,r)=>{};function Qk(t,e,n,r){Kk(t,e,n,r)}function Rm(t){return(t.flags&32)===32}var Yk=()=>null;function ub(t,e,n=!1){return Yk(t,e,n)}function lb(t,e){let n=t.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Og(o),a.contentQueries(2,e[s],s)}}}finally{Q(r)}}}function om(t,e,n){Og(0);let r=Q(null);try{e(t,n)}finally{Q(r)}}function db(t,e,n){if(Eg(e)){let r=Q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Q(r)}}}var Gn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Gn||{});var jl;function Zk(){if(jl===void 0&&(jl=null,Ea.trustedTypes))try{jl=Ea.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return jl}function fD(t){return Zk()?.createScriptURL(t)||t}var Yl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wl})`}};function gd(t){return t instanceof Yl?t.changingThisBreaksApplicationSecurity:t}function Nm(t,e){let n=hb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${wl})`)}return n===e}function hb(t){return t instanceof Yl&&t.getTypeName()||null}var Jk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fb(t){return t=String(t),t.match(Jk)?t:"unsafe:"+t}function Xk(t,e){return t.createText(e)}function ex(t,e,n){t.setValue(e,n)}function pb(t,e,n){return t.createElement(e,n)}function Zl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gb(t,e,n){t.appendChild(e,n)}function pD(t,e,n,r,i){r!==null?Zl(t,e,n,r,i):gb(t,e,n)}function mb(t,e,n,r){t.removeChild(null,e,n,r)}function tx(t,e,n){t.setAttribute(e,"style",n)}function nx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function yb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Rk(t,e,r),i!==null&&nx(t,e,i),o!==null&&tx(t,e,o)}var md=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(md||{});function vb(t){let e=Eb();return e?e.sanitize(md.URL,t)||"":Nm(t,"URL")?gd(t):fb(Yt(t))}function _b(t){let e=Eb();if(e)return fD(e.sanitize(md.RESOURCE_URL,t)||"");if(Nm(t,"ResourceURL"))return fD(gd(t));throw new j(904,!1)}var rx=new Set(["embed","frame","iframe","media","script"]),ix=new Set(["base","link","script"]);function ox(t,e){return e==="src"&&rx.has(t)||e==="href"&&ix.has(t)||e==="xlink:href"&&t==="script"?_b:vb}function Mm(t,e,n){return ox(e,n)(t)}function Eb(){let t=se();return t&&t[fn].sanitizer}function Ib(t){return t instanceof Function?t():t}function sx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var wb="ng-template";function ax(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&sx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Pm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Pm(t){return t.type===4&&t.value!==wb}function cx(t,e,n){let r=t.type===4&&!n?wb:t.value;return e===r}function ux(t,e,n){let r=4,i=t.attrs,o=i!==null?hx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!tn(r)&&!tn(u))return!1;if(s&&tn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!cx(t,u,n)||u===""&&e.length===1){if(tn(r))return!1;s=!0}}else if(r&8){if(i===null||!ax(t,i,u,n)){if(tn(r))return!1;s=!0}}else{let l=e[++a],h=lx(u,i,Pm(t),n);if(h===-1){if(tn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tn(r))return!1;s=!0}}}}return tn(r)||s}function tn(t){return(t&1)===0}function lx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return fx(e,t)}function dx(t,e,n=!1){for(let r=0;r<e.length;r++)if(ux(t,e[r],n))return!0;return!1}function hx(t){for(let e=0;e<t.length;e++){let n=t[e];if(HD(n))return e}return t.length}function fx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function gD(t,e){return t?":not("+e.trim()+")":e}function px(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tn(s)&&(e+=gD(o,i),i=""),r=s,o=o||!tn(r);n++}return i!==""&&(e+=gD(o,i)),e}function gx(t){return t.map(px).join(",")}function mx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!tn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Ot={};function km(t,e,n,r,i,o,s,a,u,l,h){let p=Qe+r,g=p+i,y=yx(p,g),b=typeof l=="function"?l():l;return y[W]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function yx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ot);return n}function vx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=km(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function xm(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Jt]=i,p[ee]=r|4|128|8|64|1024,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),Tg(p),p[We]=p[vi]=t,p[Pe]=n,p[fn]=s||t&&t[fn],p[Te]=a||t&&t[Te],p[zn]=u||t&&t[zn]||null,p[$t]=o,p[ba]=Hk(),p[Fo]=h,p[vg]=l,p[Pt]=e.type==2?t[Pt]:p,p}function _x(t,e,n){let r=en(e,t),i=vx(n),o=t[fn].rendererFactory,s=Om(t,xm(t,i,null,Tb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Tb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Db(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Om(t,e){return t[jo]?t[yg][Bt]=e:t[jo]=e,t[yg]=e,e}function Ex(t=1){bb(Ye(),se(),mn()+t,!1)}function bb(t,e,n,r){if(!r)if((e[ee]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Bl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&$l(e,o,0,n)}Ar(n)}var yd=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(yd||{});function sm(t,e,n,r){let i=Q(null);try{let[o,s,a]=t.inputs[n],u=null;(s&yd.SignalBased)!==0&&(u=e[o][dt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):FD(e,u,o,r)}finally{Q(i)}}var _n=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(_n||{}),Ix;function Lm(t,e){return Ix(t,e)}var Ai=new Set,Fm=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Fm||{}),za=new U(""),mD=new Set;function Nr(t){mD.has(t)||(mD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Cb=!1,am=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,NT()&&(this.destroyRef=k(Di,{optional:!0})??void 0,this.pendingTasks=k(yn,{optional:!0})??void 0)}emit(e){let n=Q(null);try{super.next(e)}finally{Q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ae&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=am;function Sb(t){let e,n;function r(){t=Oa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yD(t){return queueMicrotask(()=>t()),()=>{t=Oa}}var Vm="isAngularZone",Jl=Vm+"_ID",wx=0,ve=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Cb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,bx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Vm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Tx,Oa,Oa);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Tx={};function jm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Dx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Sb(()=>{t.callbackScheduled=!1,cm(t),t.isCheckStableRunning=!0,jm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),cm(t)}function bx(t){let e=()=>{Dx(t)},n=wx++;t._inner=t._inner.fork({name:"angular",properties:{[Vm]:!0,[Jl]:n,[Jl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Cx(u))return r.invokeTask(o,s,a,u);try{return vD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_D(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return vD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Sx(u)&&e(),_D(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,cm(t),jm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function cm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _D(t){t._nesting--,jm(t)}var Xl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Cx(t){return Ab(t,"__ignore_ng_zone__")}function Sx(t){return Ab(t,"__scheduler_tick__")}function Ab(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Rb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();var Nb=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Mb(t,e,n){let r=t.get(Nb);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Ax(t,e){let n=t.get(Nb);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Rx(t,e){for(let[n,r]of e)Mb(t,r.animateFns)}function ED(t,e,n,r){let i=t?.[wi]?.enter;e!==null&&i&&i.has(n.index)&&Rx(r,i)}function Ho(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Xt(i)?u=i:pn(i)&&(l=!0,i=i[Jt]);let h=Ht(i);t===0&&r!==null?(ED(a,r,o,n),s==null?gb(e,r,h):Zl(e,r,h,s||null,!0)):t===1&&r!==null?(ED(a,r,o,n),Zl(e,r,h,s||null,!0)):t===2?ID(a,o,n,p=>{mb(e,h,l,p)}):t===3&&ID(a,o,n,()=>{e.destroyNode(h)}),u!=null&&$x(e,t,n,u,o,r,s)}}function Nx(t,e){Pb(t,e),e[Jt]=null,e[$t]=null}function Mx(t,e,n,r,i,o){r[Jt]=i,r[$t]=e,_d(t,r,n,1,i,o)}function Pb(t,e){e[fn].changeDetectionScheduler?.notify(9),_d(t,e,e[Te],2,null,null)}function Px(t){let e=t[jo];if(!e)return Gg(t[W],t);for(;e;){let n=null;if(pn(e))n=e[jo];else{let r=e[ke];r&&(n=r)}if(!n){for(;e&&!e[Bt]&&e!==t;)pn(e)&&Gg(e[W],e),e=e[We];e===null&&(e=t),pn(e)&&Gg(e[W],e),n=e&&e[Bt]}e=n}}function Um(t,e){let n=t[Aa],r=n.indexOf(e);n.splice(r,1)}function vd(t,e){if(Ti(e))return;let n=e[Te];n.destroyNode&&_d(t,e,n,3,null,null),Px(e)}function Gg(t,e){if(Ti(e))return;let n=Q(null);try{e[ee]&=-129,e[ee]|=256,e[kt]&&ha(e[kt]),Ox(t,e),xx(t,e),e[W].type===1&&e[Te].destroy();let r=e[_i];if(r!==null&&Xt(e[We])){r!==e[We]&&Um(r,e);let i=e[Ii];i!==null&&i.detachView(t)}rm(e)}finally{Q(n)}}function ID(t,e,n,r){let i=t?.[wi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Ai.add(t),Mb(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),kx(t,r)}else t&&Ai.delete(t),r(!1)},i)}function kx(t,e){let n=t[wi]?.running;if(n){n.then(()=>{t[wi].running=void 0,Ai.delete(t),e(!0)});return}e(!1)}function xx(t,e){let n=t.cleanup,r=e[Vo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Vo]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ca];if(o!==null){e[Ca]=null;for(let s of o)s.destroy()}}function Ox(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Si)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ie(4,a,u);try{u.call(a)}finally{Ie(5,a,u)}}else{Ie(4,i,o);try{o.call(i)}finally{Ie(5,i,o)}}}}}function Lx(t,e,n){return Fx(t,e.parent,n)}function Fx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Jt];if(Cr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Gn.None||i===Gn.Emulated)return null}return en(r,n)}function Vx(t,e,n){return Ux(t,e,n)}function jx(t,e,n){return t.type&40?en(t,n):null}var Ux=jx,wD;function Bm(t,e,n,r){let i=Lx(t,r,e),o=e[Te],s=r.parent||e[$t],a=Vx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)pD(o,i,n[u],a,!1);else pD(o,i,n,a,!1);wD!==void 0&&wD(o,r,e,n,i)}function La(t,e){if(e!==null){let n=e.type;if(n&3)return en(e,t);if(n&4)return um(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return La(t,r);{let i=t[e.index];return Xt(i)?um(-1,i):Ht(i)}}else{if(n&128)return La(t,e.next);if(n&32)return Lm(e,t)()||Ht(t[e.index]);{let r=kb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[Pt]);return La(i,r)}else return La(t,e.next)}}}return null}function kb(t,e){if(e!==null){let r=t[Pt][$t],i=e.projection;return r.projection[i]}return null}function um(t,e){let n=ke+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return La(r,i)}return e[br]}function $m(t,e,n,r,i,o,s){for(;n!=null;){let a=r[zn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Go(Ht(u),r),n.flags|=2),!Rm(n))if(l&8)$m(t,e,n.child,r,i,o,!1),Ho(e,t,a,i,u,n,o,r);else if(l&32){let h=Lm(n,r),p;for(;p=h();)Ho(e,t,a,i,p,n,o,r);Ho(e,t,a,i,u,n,o,r)}else l&16?Bx(t,e,r,n,i,o):Ho(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function _d(t,e,n,r,i,o){$m(n,r,t.firstChild,e,i,o,!1)}function Bx(t,e,n,r,i,o){let s=n[Pt],u=s[$t].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ho(e,t,n[zn],i,h,r,o,n)}else{let l=u,h=s[We];XD(r)&&(l.flags|=128),$m(t,e,l,h,i,o,!0)}}function $x(t,e,n,r,i,o,s){let a=r[br],u=Ht(r);a!==u&&Ho(e,t,n,o,a,i,s);for(let l=ke;l<r.length;l++){let h=r[l];_d(h[W],h,t,e,o,a)}}function Hx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_n.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_n.Important),t.setStyle(n,r,i,o))}}function xb(t,e,n,r,i){let o=mn(),s=r&2;try{Ar(-1),s&&e.length>Qe&&bb(t,e,Qe,!1),Ie(s?2:0,i,n),n(r,i)}finally{Ar(o),Ie(s?3:1,i,n)}}function Hm(t,e,n){Qx(t,e,n),(n.flags&64)===64&&Yx(t,e,n)}function Ed(t,e,n=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function qx(t,e,n,r){let o=r.get(cb,ab)||n===Gn.ShadowDom,s=t.selectRootElement(e,o);return zx(s),s}function zx(t){Gx(t)}var Gx=()=>null;function Wx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ob(t,e,n,r,i,o){let s=e[W];if(qm(t,s,e,n,r)){Cr(t)&&Kx(e,t.index);return}t.type&3&&(n=Wx(n)),Lb(t,e,n,r,i,o)}function Lb(t,e,n,r,i,o){if(t.type&3){let s=en(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Kx(t,e){let n=qt(e,t);n[ee]&16||(n[ee]|=64)}function Qx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Cr(n)&&_x(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Kl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Ql(e,t,s,n);if(Go(u,e),o!==null&&eO(e,s-r,u,a,n,o),gn(a)){let l=qt(n.index,e);l[Pe]=Ql(e,t,s,n)}}}function Yx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=KT();try{Ar(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];kl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Zx(u,l)}}finally{Ar(-1),kl(s)}}function Zx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Fb(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];dx(e,o.selectors,!1)&&(r??=[],gn(o)?r.unshift(o):r.push(o))}return r}function Jx(t,e,n,r,i,o){let s=en(t,e);Xx(e[Te],s,o,t.value,n,r,i)}function Xx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Yt(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function eO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];sm(r,n,u,l)}}function Vb(t,e,n,r,i){let o=Qe+n,s=e[W],a=i(s,e,t,r,n);e[o]=a,Bo(t,!0);let u=t.type===2;return u?(yb(e[Te],a,t),(VT()===0||Ra(t))&&Go(a,e),jT()):Go(a,e),Ll()&&(!u||!Rm(t))&&Bm(s,e,a,t),t}function jb(t){let e=t;return Mg()?qT():(e=e.parent,Bo(e,!1)),e}function tO(t,e){let n=t[zn];if(!n)return;let r;try{r=n.get(Dt,null)}catch{r=null}r?.(e)}function qm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];sm(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];sm(h,l,r,i),a=!0}return a}function nO(t,e){let n=qt(e,t),r=n[W];rO(r,n);let i=n[Jt];i!==null&&n[Fo]===null&&(n[Fo]=ub(i,n[zn])),Ie(18),zm(r,n,n[Pe]),Ie(19,n[Pe])}function rO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function zm(t,e,n){xl(e);try{let r=t.viewQuery;r!==null&&om(1,r,n);let i=t.template;i!==null&&xb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ii]?.finishViewCreation(t),t.staticContentQueries&&lb(t,e),t.staticViewQueries&&om(2,t.viewQuery,n);let o=t.components;o!==null&&iO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,Ol()}}function iO(t,e){for(let n=0;n<e.length;n++)nO(t,e[n])}function Id(t,e,n,r){let i=Q(null);try{let o=e.tView,a=t[ee]&4096?4096:16,u=xm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[_i]=l;let h=t[Ii];return h!==null&&(u[Ii]=h.createEmbeddedView(o)),zm(o,u,n),u}finally{Q(i)}}function Va(t,e){return!e||e.firstChild===null||XD(t)}function ja(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Ht(o)),Xt(o)&&Ub(o,r);let s=n.type;if(s&8)ja(t,e,n.child,r);else if(s&32){let a=Lm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=kb(e,n);if(Array.isArray(a))r.push(...a);else{let u=Er(e[Pt]);ja(u[W],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ub(t,e){for(let n=ke;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&ja(r[W],r,i,e)}t[br]!==t[Jt]&&e.push(t[br])}function Bb(t){if(t[Rl]!==null){for(let e of t[Rl])e.impl.addSequence(e);t[Rl].length=0}}var $b=[];function oO(t){return t[kt]??sO(t)}function sO(t){let e=$b.pop()??Object.create(cO);return e.lView=t,e}function aO(t){t.lView[kt]!==t&&(t.lView=null,$b.push(t))}var cO=ye(V({},po),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Pa(t.lView)},consumerOnSignalRead(){this.lView[kt]=this}});function uO(t){let e=t[kt]??Object.create(lO);return e.lView=t,e}var lO=ye(V({},po),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!Hb(e[W]);)e=Er(e);e&&Dg(e)},consumerOnSignalRead(){this.lView[kt]=this}});function Hb(t){return t.type!==2}function qb(t){if(t[Ca]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Ca])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ee]&8192)}}var dO=100;function zb(t,e=0){let r=t[fn].rendererFactory,i=!1;i||r.begin?.();try{hO(t,e)}finally{i||r.end?.()}}function hO(t,e){let n=Pg();try{kg(!0),lm(t,e);let r=0;for(;Ma(t);){if(r===dO)throw new j(103,!1);r++,lm(t,1)}}finally{kg(n)}}function fO(t,e,n,r){if(Ti(e))return;let i=e[ee],o=!1,s=!1;xl(e);let a=!0,u=null,l=null;o||(Hb(t)?(l=oO(e),u=mo(l)):ju()===null?(a=!1,l=uO(e),u=mo(l)):e[kt]&&(ha(e[kt]),e[kt]=null));try{Tg(e),zT(t.bindingStartIndex),n!==null&&xb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Bl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&$l(e,y,0,null),qg(e,0)}if(s||pO(e),qb(e),Gb(e,0),t.contentQueries!==null&&lb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Bl(e,y)}else{let y=t.contentHooks;y!==null&&$l(e,y,1),qg(e,1)}mO(t,e);let p=t.components;p!==null&&Kb(e,p,0);let g=t.viewQuery;if(g!==null&&om(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Bl(e,y)}else{let y=t.viewHooks;y!==null&&$l(e,y,2),qg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Al]){for(let y of e[Al])y();e[Al]=null}o||(Bb(e),e[ee]&=-73)}catch(h){throw o||Pa(e),h}finally{l!==null&&(la(l,u),a&&aO(l)),Ol()}}function Gb(t,e){for(let n=tb(t);n!==null;n=nb(n))for(let r=ke;r<n.length;r++){let i=n[r];Wb(i,e)}}function pO(t){for(let e=tb(t);e!==null;e=nb(e)){if(!(e[ee]&2))continue;let n=e[Aa];for(let r=0;r<n.length;r++){let i=n[r];Dg(i)}}}function gO(t,e,n){Ie(18);let r=qt(e,t);Wb(r,n),Ie(19,r[Pe])}function Wb(t,e){Nl(t)&&lm(t,e)}function lm(t,e){let r=t[W],i=t[ee],o=t[kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&da(o)),s||=!1,o&&(o.dirty=!1),t[ee]&=-9217,s)fO(r,t,r.template,t[Pe]);else if(i&8192){let a=Q(null);try{qb(t),Gb(t,1);let u=r.components;u!==null&&Kb(t,u,1),Bb(t)}finally{Q(a)}}}function Kb(t,e,n){for(let r=0;r<e.length;r++)gO(t,e[r],n)}function mO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let o=i,s=n[++r],a=n[++r];WT(s,o);let u=e[o];Ie(24,u),a(2,u),Ie(25,u)}}}finally{Ar(-1)}}function Gm(t,e){let n=Pg()?64:1088;for(t[fn].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=Er(t);if(Uo(t)&&!r)return t;t=r}return null}function Qb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Yb(t,e){let n=ke+e;if(n<t.length)return t[n]}function wd(t,e,n,r=!0){let i=e[W];if(yO(i,e,t,n),r){let s=um(n,t),a=e[Te],u=a.parentNode(t[br]);u!==null&&Mx(i,t[$t],a,e,u,s)}let o=e[Fo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Zb(t,e){let n=Ua(t,e);return n!==void 0&&vd(n[W],n),n}function Ua(t,e){if(t.length<=ke)return;let n=ke+e,r=t[n];if(r){let i=r[_i];i!==null&&i!==t&&Um(i,r),e>0&&(t[n-1][Bt]=r[Bt]);let o=wa(t,ke+e);Nx(r[W],r);let s=o[Ii];s!==null&&s.detachView(o[W]),r[We]=null,r[Bt]=null,r[ee]&=-129}return r}function yO(t,e,n,r){let i=ke+r,o=n.length;r>0&&(n[i-1][Bt]=e),r<o-ke?(e[Bt]=n[i],ug(n,ke+r,e)):(n.push(e),e[Bt]=null),e[We]=n;let s=e[_i];s!==null&&n!==s&&Jb(s,e);let a=e[Ii];a!==null&&a.insertView(t),Ml(e),e[ee]|=128}function Jb(t,e){let n=t[Aa],r=e[We];if(pn(r))t[ee]|=2;else{let i=r[We][Pt];e[Pt]!==i&&(t[ee]|=2)}n===null?t[Aa]=[e]:n.push(e)}var Rr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[W];return ja(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Pe]}set context(e){this._lView[Pe]=e}get destroyed(){return Ti(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(Xt(e)){let n=e[Sa],r=n?n.indexOf(this):-1;r>-1&&(Ua(e,r),wa(n,r))}this._attachedToViewContainer=!1}vd(this._lView[W],this._lView)}onDestroy(e){bg(this._lView,e)}markForCheck(){Gm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Ml(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,zb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Uo(this._lView),n=this._lView[_i];n!==null&&!e&&Um(n,this._lView),Pb(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Uo(this._lView),r=this._lView[_i];r!==null&&!n&&Jb(r,this._lView),Ml(this._lView)}};var Ga=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=vO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Id(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Rr(o)}}return t})();function vO(){return _O(it(),se())}function _O(t,e){return t.type&4?new Ga(e,t,dd(t,e)):null}function Wa(t,e,n,r,i){let o=t.data[e];if(o===null)o=EO(t,e,n,r,i),GT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=HT();o.injectorIndex=s===null?-1:s.injectorIndex}return Bo(o,!0),o}function EO(t,e,n,r,i){let o=Ng(),s=Mg(),a=s?o:o&&o.parent,u=t.data[e]=wO(t,a,n,e,r,i);return IO(t,u,o,s),u}function IO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function wO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return UT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var D8=new RegExp(`^(\\d+)*(${Wk}|${Gk})*(.*)`);function TO(t){let e=t[_g]??[],r=t[We][Te],i=[];for(let o of e)o.data[sb]!==void 0?i.push(o):DO(o,r);t[_g]=i}function DO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[ob];for(;n<i;){let o=r.nextSibling;mb(e,r,!1),r=o,n++}}}var bO=()=>null,CO=()=>null;function dm(t,e){return bO(t,e)}function Xb(t,e,n){return CO(t,e,n)}var eC=class{},Td=class{},hm=class{resolveComponentFactory(e){throw new j(917,!1)}},Ka=class{static NULL=new hm},Ri=class{},Dd=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>SO()}return t})();function SO(){let t=se(),e=it(),n=qt(e.index,t);return(pn(n)?n:t)[Te]}var tC=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var Hl={},fm=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Hl,r);return i!==Hl||n===Hl?i:this.parentInjector.get(e,n,r)}};function ed(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Xp(i,a);else if(o==2){let u=a,l=e[++s];r=Xp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ht(t,e=0){let n=se();if(n===null)return ne(t,e);let r=it();return YD(r,n,rt(t),e)}function nC(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}NO(t,e,n,a,o,u,l)}o!==null&&r!==null&&AO(n,r,o)}function AO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function RO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function NO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&gn(y)&&(u=!0,RO(t,n,g)),tm(Kl(n,e),t,y.type)}LO(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Db(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=zo(n.mergedAttrs,y.hostAttrs),PO(t,n,e,p,y),OO(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}MO(t,n,o)}function MO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))TD(0,e,i,r),TD(1,e,i,r),bD(e,r,!1);else{let o=n.get(i);DD(0,e,o,r),DD(1,e,o,r),bD(e,r,!0)}}}function TD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),rC(e,o)}}function DD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),rC(e,s)}}function rC(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function bD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Pm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function PO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=fi(i.type,!0)),s=new Si(o,gn(i),ht,null);t.blueprint[r]=s,n[r]=s,kO(t,e,r,Db(t,n,i.hostVars,Ot),i)}function kO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;xO(s)!=a&&s.push(a),s.push(n,r,o)}}function xO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function OO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gn(e)&&(n[""]=t)}}function LO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function iC(t,e,n,r,i,o,s,a){let u=e[W],l=u.consts,h=zt(l,s),p=Wa(u,t,n,r,h);return o&&nC(u,e,p,zt(l,a),i),p.mergedAttrs=zo(p.mergedAttrs,p.attrs),p.attrs!==null&&ed(p,p.attrs,!1),p.mergedAttrs!==null&&ed(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function oC(t,e){BD(t,e),Eg(e)&&t.queries.elementEnd(e)}function FO(t,e,n,r,i,o){let s=e.consts,a=zt(s,i),u=Wa(e,t,n,r,a);if(u.mergedAttrs=zo(u.mergedAttrs,u.attrs),o!=null){let l=zt(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&ed(u,u.attrs,!1),u.mergedAttrs!==null&&ed(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Wm(t){return aC(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function sC(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function aC(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function En(t,e,n){if(n===Ot)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function pm(t,e,n,r){let i=En(t,e,n);return En(t,e+1,r)||i}function VO(t,e,n,r,i,o){let s=pm(t,e,n,r);return pm(t,e+2,i,o)||s}function ql(t,e,n){return function r(i){let o=Cr(t)?qt(t.index,e):e;Gm(o,5);let s=e[Pe],a=CD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=CD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function CD(t,e,n,r){let i=Q(null);try{return Ie(6,e,n),n(r)!==!1}catch(o){return tO(t,o),!1}finally{Ie(7,e,n),Q(i)}}function cC(t,e,n,r,i,o,s,a){let u=Ra(t),l=!1,h=null;if(!r&&u&&(h=UO(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=en(t,n),g=r?r(p):p;Qk(n,g,o,a);let y=i.listen(g,o,a);if(!jO(o)){let b=r?N=>r(Ht(N[t.index])):t.index;uC(b,e,n,o,a,y,!1)}}return l}function jO(t){return t.startsWith("animation")||t.startsWith("transition")}function UO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Vo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function uC(t,e,n,r,i,o,s){let a=e.firstCreatePass?FT(e):null,u=LT(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function SD(t,e,n,r,i,o){let s=e[n],a=e[W],l=a.data[n].outputs[r],p=s[l].subscribe(o);uC(t.index,a,e,i,o,p,!0)}var gm=Symbol("BINDING");var td=class extends Ka{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Dr(e);return new Wo(n,this.ngModule)}};function BO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&yd.SignalBased)!==0};return i&&(o.transform=i),o})}function $O(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function HO(t,e,n){let r=e instanceof Le?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new fm(n,r):n}function qO(t){let e=t.get(Ri,null);if(e===null)throw new j(407,!1);let n=t.get(tC,null),r=t.get(Ir,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function zO(t,e){let n=lC(t);return pb(e,n,n==="svg"?Ig:n==="math"?PT:null)}function lC(t){return(t.selectors[0][0]||"div").toLowerCase()}var Wo=class extends Td{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=BO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$O(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=gx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ie(22);let a=Q(null);try{let u=this.componentDef,l=GO(r,u,s,o),h=HO(u,i||this.ngModule,e),p=qO(h),g=p.rendererFactory.createRenderer(null,u),y=r?qx(g,r,u.encapsulation,h):zO(u,g),b=s?.some(AD)||o?.some(x=>typeof x!="function"&&x.bindings.some(AD)),N=xm(null,l,null,512|Tb(u),null,null,p,g,h,null,ub(y,h,!0));N[Qe]=y,xl(N);let R=null;try{let x=iC(Qe,N,2,"#host",()=>l.directiveRegistry,!0,0);yb(g,y,x),Go(y,N),Hm(l,N,x),db(l,x,N),oC(l,x),n!==void 0&&KO(x,this.ngContentSelectors,n),R=qt(x.index,N),N[Pe]=R[Pe],zm(l,N,null)}catch(x){throw R!==null&&rm(R),rm(N),x}finally{Ie(23),Ol()}return new nd(this.componentType,N,!!b)}finally{Q(a)}}};function GO(t,e,n,r){let i=t?["ng-version","20.3.16"]:mx(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[gm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[gm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=fg(p);u.push(g)}return km(0,null,WO(o,s),1,a,u,null,null,null,[i],null)}function WO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function AD(t){let e=t[gm].kind;return e==="input"||e==="twoWay"}var nd=class extends eC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Na(n[W],Qe),this.location=dd(this._tNode,n),this.instance=qt(this._tNode.index,n)[Pe],this.hostView=this.changeDetectorRef=new Rr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=qm(r,i[W],i,e,n);this.previousInputValues.set(e,n);let s=qt(r.index,i);Gm(s,1)}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function KO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ki=(()=>{class t{static __NG_ELEMENT_ID__=QO}return t})();function QO(){let t=it();return ZO(t,se())}var YO=ki,dC=class extends YO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cm(this._hostTNode,this._hostLView);if(qD(e)){let n=Wl(e,this._hostLView),r=Gl(e),i=n[W].data[r+8];return new Ci(i,n)}else return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=RD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ke}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=dm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Va(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Ik(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Wo(Dr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Le,null);x&&(o=x)}let g=Dr(h.componentType??{}),y=dm(this._lContainer,g?.id??null),b=y?.firstChild??null,N=h.create(p,i,b,o,s,a);return this.insertImpl(N.hostView,l,Va(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(kT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[We],l=new dC(u,u[$t],u[We]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return wd(s,i,o,r),e.attachToViewContainerRef(),ug(Wg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=RD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ua(this._lContainer,n);r&&(wa(Wg(this._lContainer),n),vd(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ua(this._lContainer,n);return r&&wa(Wg(this._lContainer),n)!=null?new Rr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function RD(t){return t[Sa]}function Wg(t){return t[Sa]||(t[Sa]=[])}function ZO(t,e){let n,r=e[t.index];return Xt(r)?n=r:(n=Qb(r,e,null,t),e[t.index]=n,Om(e,n)),XO(n,e,t,r),new dC(n,t,e)}function JO(t,e){let n=t[Te],r=n.createComment(""),i=en(e,t),o=n.parentNode(i);return Zl(n,o,r,n.nextSibling(i),!1),r}var XO=n1,e1=()=>!1;function t1(t,e,n){return e1(t,e,n)}function n1(t,e,n,r){if(t[br])return;let i;n.type&8?i=Ht(r):i=JO(e,n),t[br]=i}var Ni=class{},bd=class{};var rd=class extends Ni{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new td(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=hg(e);this._bootstrapComponents=Ib(o.bootstrap),this._r3Injector=Vg(e,n,[{provide:Ni,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver},...r],qn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},id=class extends bd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new rd(this.moduleType,e,[])}};var Ba=class extends Ni{injector;componentFactoryResolver=new td(this);instance=null;constructor(e){super();let n=new gi([...e.providers,{provide:Ni,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],e.parent||Da(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Qa(t,e,n=null){return new Ba({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var r1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=pg(!1,n.type),i=r.length>0?Qa([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(ne(Le))})}return t})();function Km(t){return Qo(()=>{let e=hC(t),n=ye(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Sm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(r1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Gn.Emulated,styles:t.styles||Mt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Nr("NgStandalone"),fC(n);let r=t.dependencies;return n.directiveDefs=ND(r,i1),n.pipeDefs=ND(r,bT),n.id=a1(n),n})}function i1(t){return Dr(t)||fg(t)}function Zo(t){return Qo(()=>({type:t.type,bootstrap:t.bootstrap||Mt,declarations:t.declarations||Mt,imports:t.imports||Mt,exports:t.exports||Mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function o1(t,e){if(t==null)return wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=yd.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function s1(t){if(t==null)return wr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Mr(t){return Qo(()=>{let e=hC(t);return fC(e),e})}function hC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:o1(t.inputs,e),outputs:s1(t.outputs),debugInfo:null}}function fC(t){t.features?.forEach(e=>e(t))}function ND(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function a1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function c1(t){return Object.getPrototypeOf(t.prototype).constructor}function pC(t){let e=c1(t.type),n=!0,r=[t];for(;e;){let i;if(gn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Kg(t.inputs),s.declaredInputs=Kg(t.declaredInputs),s.outputs=Kg(t.outputs);let a=i.hostBindings;a&&f1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&d1(t,u),l&&h1(t,l),u1(t,i),yT(t.outputs,i.outputs),gn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===pC&&(n=!1)}}e=Object.getPrototypeOf(e)}l1(r)}function u1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function l1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=zo(i.hostAttrs,n=zo(n,i.hostAttrs))}}function Kg(t){return t===wr?{}:t===Mt?[]:t}function d1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function h1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function f1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function gC(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=zo(t.mergedAttrs,t.attrs);let h=t.tView=km(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Bo(t,!1);let u=g1(n,e,t,r);Ll()&&Bm(n,e,u,t),Go(u,e);let l=Qb(u,e,u,t);e[r+Qe]=l,Om(e,l),t1(l,t,e)}function p1(t,e,n,r,i,o,s,a,u,l,h){let p=n+Qe,g;return e.firstCreatePass?(g=Wa(e,p,4,s||null,a||null),Sg()&&nC(e,t,g,zt(e.consts,l),Fb),BD(e,g)):g=e.data[p],gC(g,t,e,n,r,i,o,u),Ra(g)&&Hm(e,t,g),l!=null&&Ed(t,g,h),g}function od(t,e,n,r,i,o,s,a,u,l,h){let p=n+Qe,g;if(e.firstCreatePass){if(g=Wa(e,p,4,s||null,a||null),l!=null){let y=zt(e.consts,l);g.localNames=[];for(let b=0;b<y.length;b+=2)g.localNames.push(y[b],-1)}}else g=e.data[p];return gC(g,t,e,n,r,i,o,u),l!=null&&Ed(t,g,h),g}function mC(t,e,n,r,i,o,s,a){let u=se(),l=Ye(),h=zt(l.consts,o);return p1(u,l,t,e,n,r,i,h,void 0,s,a),mC}var g1=m1;function m1(t,e,n,r){return Fl(!0),e[Te].createComment("")}var Qm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Ym=new U("");function Jo(t){return!!t&&typeof t.then=="function"}function Zm(t){return!!t&&typeof t.subscribe=="function"}var yC=new U("");var Jm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(yC,{optional:!0})??[];injector=k(Ke);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=He(this.injector,i);if(Jo(o))n.push(o);else if(Zm(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cd=new U("");function vC(){Tp(()=>{let t="";throw new j(600,t)})}function _C(t){return t.isBoundToModule}var y1=10;var xi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Dt);afterRenderManager=k(Rb);zonelessEnabled=k(xa);rootEffectScheduler=k(Hg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(yn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(oe(n=>!n))}constructor(){k(za,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Le);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ke.NULL){return this._injector.get(ve).run(()=>{Ie(10);let s=n instanceof Td;if(!this._injector.get(Jm).done){let b="";throw new j(405,b)}let u;s?u=n:u=this._injector.get(Ka).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=_C(u)?void 0:this._injector.get(Ni),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Ym,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Fa(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Ie(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ie(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=Q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Q(n),this.afterTick.next(),Ie(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ri,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<y1;)Ie(14),this.synchronizeOnce(),Ie(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ma(i))continue;let o=r&&!this.zonelessEnabled?0:1;zb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ma(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Fa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Cd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Fa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Sd(t,e,n,r){let i=se(),o=Sr();if(En(i,o,e)){let s=Ye(),a=ka();Jx(a,i,t,e,n,r)}return Sd}var M8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var mm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Qg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function v1(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Qg(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],b=Qg(s,g,u,y,n);if(b!==0){b<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,g),x=n(o,h);if(Object.is(x,R)){let $=n(u,y);Object.is($,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new sd,i??=PD(t,o,s,n),ym(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(N,t.detach(o)),s--;else{let $=t.create(o,e[o]);t.attach(o,$),o++,s++}}for(;o<=u;)MD(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Qg(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new sd,i??=PD(t,o,s,n);let y=n(o,p);if(ym(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let b=n(o,h);r.set(b,t.detach(o)),s--}}}for(;!l.done;)MD(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function ym(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function MD(t,e,n,r,i){if(ym(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function PD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var sd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function _1(t,e,n,r,i,o,s,a){Nr("NgControlFlow");let u=se(),l=Ye(),h=zt(l.consts,o);return od(u,l,t,e,n,r,i,h,256,s,a),Xm}function Xm(t,e,n,r,i,o,s,a){Nr("NgControlFlow");let u=se(),l=Ye(),h=zt(l.consts,o);return od(u,l,t,e,n,r,i,h,512,s,a),Xm}function E1(t,e){Nr("NgControlFlow");let n=se(),r=Sr(),i=n[r]!==Ot?n[r]:-1,o=i!==-1?ad(n,Qe+i):void 0,s=0;if(En(n,r,t)){let a=Q(null);try{if(o!==void 0&&Zb(o,s),t!==-1){let u=Qe+t,l=ad(n,u),h=Im(n[W],u),p=Xb(l,h,n),g=Id(n,h,e,{dehydratedView:p});wd(l,g,s,Va(h,p))}}finally{Q(a)}}else if(o!==void 0){let a=Yb(o,s);a!==void 0&&(a[Pe]=e)}}var vm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ke}};var _m=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function I1(t,e,n,r,i,o,s,a,u,l,h,p,g){Nr("NgControlFlow");let y=se(),b=Ye(),N=u!==void 0,R=se(),x=a?s.bind(R[Pt][Pe]):s,$=new _m(N,x);R[Qe+t]=$,od(y,b,t+1,e,n,r,i,zt(b.consts,o),256),N&&od(y,b,t+2,u,l,h,p,zt(b.consts,g),512)}var Em=class extends mm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ke}at(e){return this.getLView(e)[Pe].$implicit}attach(e,n){let r=n[Fo];this.needsIndexUpdate||=e!==this.length,wd(this.lContainer,n,e,Va(this.templateTNode,r)),T1(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,D1(this.lContainer,e),b1(this.lContainer,e)}create(e,n){let r=dm(this.lContainer,this.templateTNode.tView.ssrId),i=Id(this.hostLView,this.templateTNode,new vm(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){vd(e[W],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Pe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pe].$index=e}getLView(e){return C1(this.lContainer,e)}};function w1(t){let e=Q(null),n=mn();try{let r=se(),i=r[W],o=r[n],s=n+1,a=ad(r,s);if(o.liveCollection===void 0){let l=Im(i,s);o.liveCollection=new Em(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(v1(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Sr(),h=u.length===0;if(En(r,l,h)){let p=n+2,g=ad(r,p);if(h){let y=Im(i,p),b=Xb(g,y,r),N=Id(r,y,void 0,{dehydratedView:b});wd(g,N,0,Va(y,b))}else i.firstUpdatePass&&TO(g),Zb(g,0)}}}finally{Q(e)}}function ad(t,e){return t[e]}function T1(t,e){if(t.length<=ke)return;let n=ke+e,r=t[n],i=r?r[wi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[zn];Ax(o,i),Ai.delete(r),i.detachedLeaveAnimationFns=void 0}}function D1(t,e){if(t.length<=ke)return;let n=ke+e,r=t[n],i=r?r[wi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function b1(t,e){return Ua(t,e)}function C1(t,e){return Yb(t,e)}function Im(t,e){return Na(t,e)}function EC(t,e,n){let r=se(),i=Sr();if(En(r,i,e)){let o=Ye(),s=ka();Ob(s,r,t,e,r[Te],n)}return EC}function kD(t,e,n,r,i){qm(e,t,n,i?"class":"style",r)}function ey(t,e,n,r){let i=se(),o=i[W],s=t+Qe,a=o.firstCreatePass?iC(s,i,2,e,Fb,Sg(),n,r):o.data[s];if(Vb(a,i,t,e,wC),Ra(a)){let u=i[W];Hm(u,i,a),db(u,a,i)}return r!=null&&Ed(i,a),ey}function ty(){let t=Ye(),e=it(),n=jb(e);return t.firstCreatePass&&oC(t,n),Ag(n)&&Rg(),Cg(),n.classesWithoutHost!=null&&Sk(n)&&kD(t,n,se(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Ak(n)&&kD(t,n,se(),n.stylesWithoutHost,!1),ty}function Ad(t,e,n,r){return ey(t,e,n,r),ty(),Ad}function ny(t,e,n,r){let i=se(),o=i[W],s=t+Qe,a=o.firstCreatePass?FO(s,o,2,e,n,r):o.data[s];return Vb(a,i,t,e,wC),r!=null&&Ed(i,a),ny}function ry(){let t=it(),e=jb(t);return Ag(e)&&Rg(),Cg(),ry}function IC(t,e,n,r){return ny(t,e,n,r),ry(),IC}var wC=(t,e,n,r,i)=>(Fl(!0),pb(e[Te],r,nD()));function S1(){return se()}function TC(t,e,n){let r=se(),i=Sr();if(En(r,i,e)){let o=Ye(),s=ka();Lb(s,r,t,e,r[Te],n)}return TC}var Ya="en-US";var A1=Ya;function DC(t){typeof t=="string"&&(A1=t.toLowerCase().replace(/_/g,"-"))}function Rd(t,e,n){let r=se(),i=Ye(),o=it();return CC(i,r,r[Te],o,t,e,n),Rd}function bC(t,e,n){let r=se(),i=Ye(),o=it();return(o.type&3||n)&&cC(o,i,r,n,r[Te],t,e,ql(o,r,e)),bC}function CC(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=ql(r,e,o),cC(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=ql(r,e,o),SD(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=ql(r,e,o),SD(r,e,p,i,i,u)}}function R1(t=1){return XT(t)}function Ul(t,e){return t<<17|e<<2}function Mi(t){return t>>17&32767}function N1(t){return(t&2)==2}function M1(t,e){return t&131071|e<<17}function wm(t){return t|2}function Ko(t){return(t&131068)>>2}function Yg(t,e){return t&-131069|e<<2}function P1(t){return(t&1)===1}function Tm(t){return t|1}function k1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Mi(s),u=Ko(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Lo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Mi(t[a+1]);t[r+1]=Ul(g,a),g!==0&&(t[g+1]=Yg(t[g+1],r)),t[a+1]=M1(t[a+1],r)}else t[r+1]=Ul(a,0),a!==0&&(t[a+1]=Yg(t[a+1],r)),a=r;else t[r+1]=Ul(u,0),a===0?a=r:t[u+1]=Yg(t[u+1],r),u=r;l&&(t[r+1]=wm(t[r+1])),xD(t,h,r,!0),xD(t,h,r,!1),x1(e,h,t,r,o),s=Ul(a,u),o?e.classBindings=s:e.styleBindings=s}function x1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Lo(o,e)>=0&&(n[r+1]=Tm(n[r+1]))}function xD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Mi(i):Ko(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];O1(u,e)&&(a=!0,t[s+1]=r?Tm(l):wm(l)),s=r?Mi(l):Ko(l)}a&&(t[n+1]=r?wm(i):Tm(i))}function O1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Lo(t,e)>=0:!1}function SC(t,e){return L1(t,e,null,!0),SC}function L1(t,e,n,r){let i=se(),o=Ye(),s=Pl(2);if(o.firstUpdatePass&&V1(o,t,s,r),e!==Ot&&En(i,s,e)){let a=o.data[mn()];H1(o,a,i,i[Te],t,i[s+1]=q1(e,n),r,s)}}function F1(t,e){return e>=t.expandoStartIndex}function V1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[mn()],s=F1(t,n);z1(o,r)&&e===null&&!s&&(e=!1),e=j1(i,o,e,r),k1(i,o,e,n,s,r)}}function j1(t,e,n,r){let i=QT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Zg(null,t,e,n,r),n=$a(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Zg(i,t,e,n,r),o===null){let u=U1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Zg(null,t,e,u[1],r),u=$a(u,e.attrs,r),B1(t,e,r,u))}else o=$1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function U1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ko(r)!==0)return t[Mi(r)]}function B1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Mi(i)]=r}function $1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=$a(r,s,n)}return $a(r,e.attrs,n)}function Zg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=$a(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function $a(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),DT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function H1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=P1(l)?OD(u,e,n,i,Ko(l),s):void 0;if(!cd(h)){cd(o)||N1(l)&&(o=OD(u,null,n,i,a,s));let p=wg(mn(),n);Hx(r,s,p,i,o)}}function OD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Ot&&(g=p?Mt:void 0);let y=p?Sl(g,r):h===r?g:void 0;if(l&&!cd(y)&&(y=Sl(u,r)),cd(y)&&(a=y,s))return a;let b=t[i+1];i=s?Mi(b):Ko(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Sl(u,r))}return a}function cd(t){return t!==void 0}function q1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=qn(gd(t)))),t}function z1(t,e){return(t.flags&(e?8:16))!==0}function G1(t,e=""){let n=se(),r=Ye(),i=t+Qe,o=r.firstCreatePass?Wa(r,i,1,e,null):r.data[i],s=W1(r,n,o,e,t);n[i]=s,Ll()&&Bm(r,n,s,o),Bo(o,!1)}var W1=(t,e,n,r,i)=>(Fl(!0),Xk(e[Te],r));function K1(t,e,n,r=""){return En(t,Sr(),n)?e+Yt(n)+r:Ot}function Q1(t,e,n,r,i,o=""){let s=xg(),a=pm(t,s,n,i);return Pl(2),a?e+Yt(n)+r+Yt(i)+o:Ot}function Y1(t,e,n,r,i,o,s,a,u,l=""){let h=xg(),p=VO(t,h,n,i,s,u);return Pl(4),p?e+Yt(n)+r+Yt(i)+o+Yt(s)+a+Yt(u)+l:Ot}function AC(t){return iy("",t),AC}function iy(t,e,n){let r=se(),i=K1(r,t,e,n);return i!==Ot&&oy(r,mn(),i),iy}function RC(t,e,n,r,i){let o=se(),s=Q1(o,t,e,n,r,i);return s!==Ot&&oy(o,mn(),s),RC}function NC(t,e,n,r,i,o,s,a,u){let l=se(),h=Y1(l,t,e,n,r,i,o,s,a,u);return h!==Ot&&oy(l,mn(),h),NC}function oy(t,e,n){let r=wg(e,t);ex(t[Te],r,n)}function MC(t,e,n){Ug(e)&&(e=e());let r=se(),i=Sr();if(En(r,i,e)){let o=Ye(),s=ka();Ob(s,r,t,e,r[Te],n)}return MC}function Z1(t,e){let n=Ug(t);return n&&t.set(e),n}function PC(t,e){let n=se(),r=Ye(),i=it();return CC(r,n,n[Te],i,t,e),PC}function J1(t,e,n){let r=Ye();if(r.firstCreatePass){let i=gn(t);Dm(n,r.data,r.blueprint,i,!0),Dm(e,r.data,r.blueprint,i,!1)}}function Dm(t,e,n,r,i){if(t=rt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Dm(t[o],e,n,r,i);else{let o=Ye(),s=se(),a=it(),u=pi(t)?t:rt(t.provide),l=mg(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(pi(t)||!t.multi){let y=new Si(l,i,ht,null),b=Xg(u,e,i?h:h+g,p);b===-1?(tm(Kl(a,s),o,u),Jg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[b]=y,s[b]=y)}else{let y=Xg(u,e,h+g,p),b=Xg(u,e,h,h+g),N=y>=0&&n[y],R=b>=0&&n[b];if(i&&!R||!i&&!N){tm(Kl(a,s),o,u);let x=tL(i?eL:X1,n.length,i,r,l,t);!i&&R&&(n[b].providerFactory=x),Jg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=kC(n[i?b:y],l,!i&&r);Jg(o,t,y>-1?y:b,x)}!i&&r&&R&&n[b].componentProviders++}}}function Jg(t,e,n,r){let i=pi(e),o=RT(e);if(i||o){let u=(o?rt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function kC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Xg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function X1(t,e,n,r,i){return bm(this.multi,[])}function eL(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Ql(r,r[W],this.providerFactory.index,i);s=u.slice(0,a),bm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],bm(o,s);return s}function bm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tL(t,e,n,r,i,o){let s=new Si(t,n,ht,null);return s.multi=[],s.index=e,s.componentProviders=0,kC(s,i,r&&!n),s}function nL(t,e=[]){return n=>{n.providersResolver=(r,i)=>J1(r,i?i(t):t,e)}}var ud=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},sy=(()=>{class t{compileModuleSync(n){return new id(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=hg(n),o=Ib(i.declarations).reduce((s,a)=>{let u=Dr(a);return u&&s.push(new Wo(u)),s},[]);return new ud(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var rL=(()=>{class t{zone=k(ve);changeDetectionScheduler=k(Ir);applicationRef=k(xi);applicationErrorHandler=k(Dt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xC=new U("",{factory:()=>!1});function ay({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(ye(V({},cy()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:Tr,multi:!0,useFactory:()=>{let r=k(rL,{optional:!0});return()=>r.initialize()}},{provide:Tr,multi:!0,useFactory:()=>{let r=k(oL);return()=>{r.initialize()}}},e===!0?{provide:Bg,useValue:!0}:[],{provide:$g,useValue:n??Cb},{provide:Dt,useFactory:()=>{let r=k(ve),i=k(Le),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(hn),o.handleError(s))})}}}]}function iL(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=ay({ngZoneFactory:()=>{let i=cy(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Nr("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Zt([{provide:xC,useValue:!0},{provide:xa,useValue:!1},r])}function cy(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var oL=(()=>{class t{subscription=new Ae;initialized=!1;zone=k(ve);pendingTasks=k(yn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var OC=(()=>{class t{applicationErrorHandler=k(Dt);appRef=k(xi);taskService=k(yn);ngZone=k(ve);zonelessEnabled=k(xa);tracing=k(za,{optional:!0});disableScheduling=k(Bg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ae;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k($g,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Xl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?yD:Sb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sL(){return typeof $localize<"u"&&$localize.locale||Ya}var Nd=new U("",{providedIn:"root",factory:()=>k(Nd,{optional:!0,skipSelf:!0})||sL()});function In(t){return pT(t)}function aL(t,e){return Hu(t,e?.equal)}var LC=class{[dt];constructor(e){this[dt]=e}destroy(){this[dt].destroy()}};var UC=Symbol("InputSignalNode#UNSET"),AL=ye(V({},qu),{transformFn:void 0,applyValueToInputSignal(t,e){vo(t,e)}});function BC(t,e){let n=Object.create(AL);n.value=t,n.transformFn=e?.transform;function r(){if(go(n),n.value===UC){let i=null;throw new j(-950,i)}return n.value}return r[dt]=n,r}var Pd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ha(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},RL=new U("");RL.__NG_ELEMENT_ID__=t=>{let e=it();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function FC(t,e){return BC(t,e)}function NL(t){return BC(UC,t)}var $C=(FC.required=NL,FC);var uy=new U(""),ML=new U("");function Za(t){return!t.moduleRef}function PL(t){let e=Za(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{Za(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Dt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Za(t)){let o=()=>e.destroy(),s=t.platformInjector.get(uy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(uy);s.add(o),t.moduleRef.onDestroy(()=>{Fa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return xL(r,n,()=>{let o=e.get(yn),s=o.add(),a=e.get(Jm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Nd,Ya);if(DC(u||Ya),!e.get(ML,!0))return Za(t)?e.get(xi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Za(t)){let h=e.get(xi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return kL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var kL;function xL(t,e,n){try{let r=n();return Jo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Md=null;function OL(t=[],e){return Ke.create({name:e,providers:[{provide:Ta,useValue:"platform"},{provide:uy,useValue:new Set([()=>Md=null])},...t]})}function LL(t=[]){if(Md)return Md;let e=OL(t);return Md=e,vC(),FL(e),e}function FL(t){let e=t.get(fd,null);He(t,()=>{e?.forEach(n=>n())})}function py(){return!1}var xd=(()=>{class t{static __NG_ELEMENT_ID__=VL}return t})();function VL(t){return jL(it(),se(),(t&16)===16)}function jL(t,e,n){if(Cr(t)&&!n){let r=qt(t.index,e);return new Rr(r,r)}else if(t.type&175){let r=e[Pt];return new Rr(r,e)}return null}var ly=class{constructor(){}supports(e){return Wm(e)}create(e){return new dy(e)}},UL=(t,e)=>e,dy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||UL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<VC(r,i,o)?n:r,a=VC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,b=y+g;h<=b&&b<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Wm(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,sC(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new hy(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new kd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},fy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},kd=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new fy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VC(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function jC(){return new gy([new ly])}var gy=(()=>{class t{factories;static \u0275prov=H({token:t,providedIn:"root",factory:jC});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=k(t,{optional:!0,skipSelf:!0});return t.create(n,r||jC())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();function HC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ie(8);try{let o=i?.injector??LL(r),s=[ay({}),{provide:Ir,useExisting:OC},iD,...n||[]],a=new Ba({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return PL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ie(9)}}function Od(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var GC=null;function Wn(){return GC}function my(t){GC??=t}var Ja=class{},yy=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>k(WC),providedIn:"platform"})}return t})();var WC=(()=>{class t extends yy{_location;_history;_doc=k(ot);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wn().getBaseHref(this._doc)}onPopState(n){let r=Wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Wn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function KC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function qC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function kr(t){return t&&t[0]!=="?"?`?${t}`:t}var Xo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>k(YC),providedIn:"root"})}return t})(),QC=new U(""),YC=(()=>{class t extends Xo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return KC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+kr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(yy),ne(QC,8))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),es=(()=>{class t{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=HL(qC(zC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+kr(r))}normalize(n){return t.stripTrailingSlash($L(this._basePath,zC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=kr;static joinWithSlash=KC;static stripTrailingSlash=qC;static \u0275fac=function(r){return new(r||t)(ne(Xo))};static \u0275prov=H({token:t,factory:()=>BL(),providedIn:"root"})}return t})();function BL(){return new es(ne(Xo))}function $L(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function zC(t){return t.replace(/\/index.html$/,"")}function HL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Ld=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},XC=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ld(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),ZC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);ZC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ht(ki),ht(Ga),ht(gy))};static \u0275dir=Mr({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function ZC(t,e){t.context.$implicit=e.item}var qL=(()=>{class t{_viewContainer;_context=new Fd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){JC(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){JC(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ht(ki),ht(Ga))};static \u0275dir=Mr({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Fd=class{$implicit=null;ngIf=null};function JC(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}var eS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Zo({type:t});static \u0275inj=mi({})}return t})();function vy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Xa=class{};var tS="browser";var ec=class{_doc;constructor(e){this._doc=e}manager},Vd=(()=>{class t extends ec{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ne(ot))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Ud=new U(""),Ty=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Vd));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Vd);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne(Ud),ne(ve))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),_y="ng-app-id";function nS(t){for(let e of t)e.remove()}function rS(t,e){let n=e.createElement("style");return n.textContent=t,n}function GL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${_y}="${e}"],link[${_y}="${e}"]`);if(i)for(let o of i)o.removeAttribute(_y),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Iy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Dy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,GL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,rS);r?.forEach(i=>this.addUsage(i,this.external,Iy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(nS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])nS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,rS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Iy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(ot),ne(hd),ne(pd,8),ne(Pi))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},by=/%COMP%/g;var oS="%COMP%",WL=`_nghost-${oS}`,KL=`_ngcontent-${oS}`,QL=!0,YL=new U("",{providedIn:"root",factory:()=>QL});function ZL(t){return KL.replace(by,t)}function JL(t){return WL.replace(by,t)}function sS(t,e){return e.map(n=>n.replace(by,t))}var Cy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new tc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof jd?i.applyToHost(n):i instanceof nc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Gn.Emulated:o=new jd(u,l,r,this.appId,h,s,a,p,g);break;case Gn.ShadowDom:return new wy(u,l,n,r,s,a,this.nonce,p,g);default:o=new nc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ne(Ty),ne(Dy),ne(hd),ne(YL),ne(ot),ne(ve),ne(pd),ne(za,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),tc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Ey[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(iS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(iS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Ey[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ey[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(n,r,i&_n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Wn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function iS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wy=class extends tc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=sS(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=Iy(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nc=class extends tc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?sS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ai.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jd=class extends nc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=ZL(h),this.hostAttr=JL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Bd=class t extends Ja{supportsDOMEvents=!0;static makeCurrent(){my(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=XL();return n==null?null:eF(n)}resetBaseElement(){rc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vy(document.cookie,e)}},rc=null;function XL(){return rc=rc||document.head.querySelector("base"),rc?rc.getAttribute("href"):null}function eF(t){return new URL(t,document.baseURI).pathname}var tF=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),aS=["alt","control","meta","shift"],nF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},cS=(()=>{class t extends ec{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),aS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=nF[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),aS.forEach(s=>{if(s!==i){let a=rF[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(ot))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function iF(t,e,n){let r=V({rootComponent:t,platformRef:n?.platformRef},oF(e));return HC(r)}function oF(t){return{appProviders:[...lF,...t?.providers??[]],platformProviders:uF}}function sF(){Bd.makeCurrent()}function aF(){return new hn}function cF(){return Am(document),document}var uF=[{provide:Pi,useValue:tS},{provide:fd,useValue:sF,multi:!0},{provide:ot,useFactory:cF}];var lF=[{provide:Ta,useValue:"root"},{provide:hn,useFactory:aF},{provide:Ud,useClass:Vd,multi:!0,deps:[ot]},{provide:Ud,useClass:cS,multi:!0,deps:[ot]},Cy,Dy,Ty,{provide:Ri,useExisting:Cy},{provide:Xa,useClass:tF},[]];var uS=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(ot))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z="primary",vc=Symbol("RouteTitle"),My=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fi(t){return new My(t)}function yS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function hF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wn(t[n],e[n]))return!1;return!0}function wn(t,e){let n=t?Py(t):void 0,r=e?Py(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!vS(t[i],e[i]))return!1;return!0}function Py(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function vS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function _S(t){return t.length>0?t[t.length-1]:null}function Yn(t){return Vp(t)?t:Jo(t)?Re(Promise.resolve(t)):G(t)}var fF={exact:IS,subset:wS},ES={exact:pF,subset:gF,ignored:()=>!0};function lS(t,e,n){return fF[n.paths](t.root,e.root,n.matrixParams)&&ES[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function pF(t,e){return wn(t,e)}function IS(t,e,n){if(!Oi(t.segments,e.segments)||!qd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!IS(t.children[r],e.children[r],n))return!1;return!0}function gF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>vS(t[n],e[n]))}function wS(t,e,n){return TS(t,e,e.segments,n)}function TS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Oi(i,n)||e.hasChildren()||!qd(i,n,r))}else if(t.segments.length===n.length){if(!Oi(t.segments,n)||!qd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!wS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Oi(t.segments,i)||!qd(t.segments,i,r)||!t.children[Z]?!1:TS(t.children[Z],e,o,r)}}function qd(t,e,n){return e.every((r,i)=>ES[n](t[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new fe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){return vF.serialize(this)}},fe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zd(this)}},xr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fi(this.parameters),this._parameterMap}toString(){return bS(this)}};function mF(t,e){return Oi(t,e)&&t.every((n,r)=>wn(n.parameters,e[r].parameters))}function Oi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function yF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var _c=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new Vi,providedIn:"root"})}return t})(),Vi=class{parse(e){let n=new xy(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ic(e.root,!0)}`,r=IF(e.queryParams),i=typeof e.fragment=="string"?`#${_F(e.fragment)}`:"";return`${n}${r}${i}`}},vF=new Vi;function zd(t){return t.segments.map(e=>bS(e)).join("/")}function ic(t,e){if(!t.hasChildren())return zd(t);if(e){let n=t.children[Z]?ic(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${ic(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=yF(t,(r,i)=>i===Z?[ic(t.children[Z],!1)]:[`${i}:${ic(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${zd(t)}/${n[0]}`:`${zd(t)}/(${n.join("//")})`}}function DS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $d(t){return DS(t).replace(/%3B/gi,";")}function _F(t){return encodeURI(t)}function ky(t){return DS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gd(t){return decodeURIComponent(t)}function dS(t){return Gd(t.replace(/\+/g,"%20"))}function bS(t){return`${ky(t.path)}${EF(t.parameters)}`}function EF(t){return Object.entries(t).map(([e,n])=>`;${ky(e)}=${ky(n)}`).join("")}function IF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${$d(n)}=${$d(i)}`).join("&"):`${$d(n)}=${$d(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var wF=/^[^\/()?;#]+/;function Sy(t){let e=t.match(wF);return e?e[0]:""}var TF=/^[^\/()?;=#]+/;function DF(t){let e=t.match(TF);return e?e[0]:""}var bF=/^[^=?&#]+/;function CF(t){let e=t.match(bF);return e?e[0]:""}var SF=/^[^&#]+/;function AF(t){let e=t.match(SF);return e?e[0]:""}var xy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new fe(e,n)),r}parseSegment(){let e=Sy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new xr(Gd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=DF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Sy(this.remaining);i&&(r=i,this.capture(r))}e[Gd(n)]=Gd(r)}parseQueryParam(e){let n=CF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=AF(this.remaining);s&&(r=s,this.capture(r))}let i=dS(n),o=dS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Sy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new fe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function CS(t){return t.segments.length>0?new fe([],{[Z]:t}):t}function SS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=SS(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new fe(t.segments,e);return RF(n)}function RF(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new fe(t.segments.concat(e.segments),e.children)}return t}function Or(t){return t instanceof Dn}function AS(t,e,n=null,r=null){let i=RS(t);return NS(i,e,n,r)}function RS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new fe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=CS(r);return e??i}function NS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ay(i,i,i,n,r);let o=NF(e);if(o.toRoot())return Ay(i,i,new fe([],{}),n,r);let s=MF(o,i,t),a=s.processChildren?sc(s.segmentGroup,s.index,o.commands):PS(s.segmentGroup,s.index,o.commands);return Ay(i,s.segmentGroup,a,n,r)}function Wd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function uc(t){return typeof t=="object"&&t!=null&&t.outlets}function Ay(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=MS(t,e,n);let a=CS(SS(s));return new Dn(a,o,i)}function MS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=MS(o,e,n)}),new fe(t.segments,r)}var Kd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Wd(r[0]))throw new j(4003,!1);let i=r.find(uc);if(i&&i!==_S(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Kd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Kd(n,e,r)}var rs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function MF(t,e,n){if(t.isAbsolute)return new rs(e,!0,0);if(!n)return new rs(e,!1,NaN);if(n.parent===null)return new rs(n,!0,0);let r=Wd(t.commands[0])?0:1,i=n.segments.length-1+r;return PF(n,i,t.numberOfDoubleDots)}function PF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new rs(r,!1,i-o)}function kF(t){return uc(t[0])?t[0].outlets:{[Z]:t}}function PS(t,e,n){if(t??=new fe([],{}),t.segments.length===0&&t.hasChildren())return sc(t,e,n);let r=xF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new fe(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new fe(t.segments.slice(r.pathIndex),t.children),sc(o,0,i)}else return r.match&&i.length===0?new fe(t.segments,{}):r.match&&!t.hasChildren()?Oy(t,e,n):r.match?sc(t,0,i):Oy(t,e,n)}function sc(t,e,n){if(n.length===0)return new fe(t.segments,{});{let r=kF(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=sc(t.children[Z],e,n);return new fe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=PS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new fe(t.segments,i)}}function xF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(uc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!fS(u,l,s))return o;r+=2}else{if(!fS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Oy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(uc(o)){let u=OF(o.outlets);return new fe(r,u)}if(i===0&&Wd(n[0])){let u=t.segments[e];r.push(new xr(u.path,hS(n[0]))),i++;continue}let s=uc(o)?o.outlets[Z]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Wd(a)?(r.push(new xr(s,hS(a))),i+=2):(r.push(new xr(s,{})),i++)}return new fe(r,{})}function OF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Oy(new fe([],{}),0,r))}),e}function hS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function fS(t,e,n){return t==n.path&&wn(e,n.parameters)}var ac="imperative",Ze=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ze||{}),Ft=class{id;url;constructor(e,n){this.id=e,this.url=n}},ji=class extends Ft{type=Ze.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bn=class extends Ft{urlAfterRedirects;type=Ze.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(_t||{}),lc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(lc||{}),Tn=class extends Ft{reason;code;type=Ze.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kn=class extends Ft{reason;code;type=Ze.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},os=class extends Ft{error;target;type=Ze.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dc=class extends Ft{urlAfterRedirects;state;type=Ze.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qd=class extends Ft{urlAfterRedirects;state;type=Ze.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yd=class extends Ft{urlAfterRedirects;state;shouldActivate;type=Ze.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zd=class extends Ft{urlAfterRedirects;state;type=Ze.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jd=class extends Ft{urlAfterRedirects;state;type=Ze.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xd=class{route;type=Ze.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},eh=class{route;type=Ze.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},th=class{snapshot;type=Ze.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nh=class{snapshot;type=Ze.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rh=class{snapshot;type=Ze.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ih=class{snapshot;type=Ze.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hc=class{},ss=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function LF(t){return!(t instanceof hc)&&!(t instanceof ss)}function FF(t,e){return t.providers&&!t._injector&&(t._injector=Qa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function nn(t){return t.outlet||Z}function VF(t,e){let n=t.filter(r=>nn(r)===e);return n.push(...t.filter(r=>nn(r)!==e)),n}function us(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var oh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return us(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ls(this.rootInjector)}},ls=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new oh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(Le))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ly(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ly(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Fy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fy(e,this._root).map(n=>n.value)}};function Ly(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ly(t,n);if(r)return r}return null}function Fy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Fy(t,n);if(r.length)return r.unshift(e),r}return[]}var Lt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ns(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var fc=class extends sh{snapshot;constructor(e,n){super(e),this.snapshot=n,zy(this,e)}toString(){return this.snapshot.toString()}};function kS(t){let e=jF(t),n=new nt([new xr("",{})]),r=new nt({}),i=new nt({}),o=new nt({}),s=new nt(""),a=new Qn(n,r,o,s,i,Z,t,e.root);return a.snapshot=e.root,new fc(new Lt(a,[]),e)}function jF(t){let e={},n={},r={},o=new Li([],e,r,"",n,Z,t,null,{});return new pc("",new Lt(o,[]))}var Qn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(oe(l=>l[vc]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Fi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Fi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ah(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&OS(i)&&(r.resolve[vc]=i.title),r}var Li=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},pc=class extends sh{url;constructor(e,n){super(n),this.url=e,zy(this,n)}toString(){return xS(this._root)}};function zy(t,e){e.value._routerState=t,e.children.forEach(n=>zy(t,n))}function xS(t){let e=t.children.length>0?` { ${t.children.map(xS).join(", ")} } `:"";return`${t.value}${e}`}function Ry(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wn(e.params,n.params)||t.paramsSubject.next(n.params),hF(e.url,n.url)||t.urlSubject.next(n.url),wn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Vy(t,e){let n=wn(t.params,e.params)&&mF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Vy(t.parent,e.parent))}function OS(t){return typeof t.title=="string"||t.title===null}var LS=new U(""),Gy=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=$C();parentContexts=k(ls);location=k(ki);changeDetector=k(xd);inputBinder=k(dh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new jy(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Mr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yo]})}return t})(),jy=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Qn?this.route:e===ls?this.childContexts:e===LS?this.outletData:this.parent.get(e,n)}},dh=new U("");var Wy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Km({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ad(0,"router-outlet")},dependencies:[Gy],encapsulation:2})}return t})();function Ky(t){let e=t.children&&t.children.map(Ky),n=e?ye(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=Wy),n}function UF(t,e,n){let r=gc(t,e._root,n?n._root:void 0);return new fc(r,e)}function gc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=BF(t,e,n);return new Lt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gc(t,a)),s}}let r=$F(e.value),i=e.children.map(o=>gc(t,o));return new Lt(r,i)}}function BF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return gc(t,r,i);return gc(t,r)})}function $F(t){return new Qn(new nt(t.url),new nt(t.params),new nt(t.queryParams),new nt(t.fragment),new nt(t.data),t.outlet,t.component,t)}var as=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},FS="ngNavigationCancelingError";function ch(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Or(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VS(!1,_t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function VS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[FS]=!0,n.cancellationCode=e,n}function HF(t){return jS(t)&&Or(t.url)}function jS(t){return!!t&&t[FS]}var qF=(t,e,n,r)=>oe(i=>(new Uy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Uy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ry(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ns(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ns(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ns(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ns(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ih(o.value.snapshot))}),e.children.length&&this.forwardEvent(new nh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Ry(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ry(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},uh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},is=class{component;route;constructor(e,n){this.component=e,this.route=n}};function zF(t,e,n){let r=t._root,i=e?e._root:null;return oc(r,i,n,[r.value])}function GF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ds(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!tg(t)?t:e.get(t):r}function oc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ns(e);return t.children.forEach(s=>{WF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>cc(a,n.getContext(s),i)),i}function WF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=KF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new uh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?oc(t,e,a?a.children:null,r,i):oc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new is(a.outlet.component,s))}else s&&cc(e,a,i),i.canActivateChecks.push(new uh(r)),o.component?oc(t,null,a?a.children:null,r,i):oc(t,null,n,r,i);return i}function KF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Oi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Oi(t.url,e.url)||!wn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vy(t,e)||!wn(t.queryParams,e.queryParams);case"paramsChange":default:return!Vy(t,e)}}function cc(t,e,n){let r=ns(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?cc(s,e.children.getContext(o),n):cc(s,null,n):cc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new is(e.outlet.component,i)):n.canDeactivateChecks.push(new is(null,i)):n.canDeactivateChecks.push(new is(null,i))}function Ec(t){return typeof t=="function"}function QF(t){return typeof t=="boolean"}function YF(t){return t&&Ec(t.canLoad)}function ZF(t){return t&&Ec(t.canActivate)}function JF(t){return t&&Ec(t.canActivateChild)}function XF(t){return t&&Ec(t.canDeactivate)}function eV(t){return t&&Ec(t.canMatch)}function US(t){return t instanceof Un||t?.name==="EmptyError"}var Hd=Symbol("INITIAL_VALUE");function cs(){return Tt(t=>pl(t.map(e=>e.pipe(Bn(1),yl(Hd)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===Hd)return Hd;if(n===!1||tV(n))return n}return!0}),Rt(e=>e!==Hd),Bn(1)))}function tV(t){return Or(t)||t instanceof as}function nV(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(ye(V({},n),{guardsResult:!0})):rV(s,r,i,t).pipe($e(a=>a&&QF(a)?iV(r,o,t,e):G(a)),oe(a=>ye(V({},n),{guardsResult:a})))})}function rV(t,e,n,r){return Re(t).pipe($e(i=>uV(i.component,i.route,n,e,r)),$n(i=>i!==!0,!0))}function iV(t,e,n,r){return Re(e).pipe(Mo(i=>No(sV(i.route.parent,r),oV(i.route,r),cV(t,i.path,n),aV(t,i.route,n))),$n(i=>i!==!0,!0))}function oV(t,e){return t!==null&&e&&e(new rh(t)),G(!0)}function sV(t,e){return t!==null&&e&&e(new th(t)),G(!0)}function aV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>ga(()=>{let s=us(e)??n,a=ds(o,s),u=ZF(a)?a.canActivate(e,t):He(s,()=>a(e,t));return Yn(u).pipe($n())}));return G(i).pipe(cs())}function cV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>GF(s)).filter(s=>s!==null).map(s=>ga(()=>{let a=s.guards.map(u=>{let l=us(s.node)??n,h=ds(u,l),p=JF(h)?h.canActivateChild(r,t):He(l,()=>h(r,t));return Yn(p).pipe($n())});return G(a).pipe(cs())}));return G(o).pipe(cs())}function uV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=us(e)??i,l=ds(a,u),h=XF(l)?l.canDeactivate(t,e,n,r):He(u,()=>l(t,e,n,r));return Yn(h).pipe($n())});return G(s).pipe(cs())}function lV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=ds(s,t),u=YF(a)?a.canLoad(e,n):He(t,()=>a(e,n));return Yn(u)});return G(o).pipe(cs(),BS(r))}function BS(t){return Qu(Ge(e=>{if(typeof e!="boolean")throw ch(t,e)}),oe(e=>e===!0))}function dV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=ds(s,t),u=eV(a)?a.canMatch(e,n):He(t,()=>a(e,n));return Yn(u)});return G(o).pipe(cs(),BS(r))}var mc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},yc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ts(t){return Ro(new mc(t))}function hV(t){return Ro(new j(4e3,!1))}function fV(t){return Ro(VS(!1,_t.GuardRejected))}var By=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[Z])return hV(`${e.redirectTo}`);i=i.children[Z]}}applyRedirectCommands(e,n,r,i,o){return pV(n,i,o).pipe(oe(s=>{if(s instanceof Dn)throw new yc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new yc(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new fe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function pV(t,e,n){if(typeof t=="string")return G(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Yn(He(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var $y={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gV(t,e,n,r,i){let o=$S(t,e,n);return o.matched?(r=FF(e,r),dV(r,e,n,i).pipe(oe(s=>s===!0?o:V({},$y)))):G(o)}function $S(t,e,n){if(e.path==="**")return mV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},$y):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yS)(n,t,e);if(!i)return V({},$y);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mV(t){return{matched:!0,parameters:t.length>0?_S(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function pS(t,e,n,r){return n.length>0&&_V(t,n,r)?{segmentGroup:new fe(e,vV(r,new fe(n,t.children))),slicedSegments:[]}:n.length===0&&EV(t,n,r)?{segmentGroup:new fe(t.segments,yV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new fe(t.segments,t.children),slicedSegments:n}}function yV(t,e,n,r){let i={};for(let o of n)if(hh(t,e,o)&&!r[nn(o)]){let s=new fe([],{});i[nn(o)]=s}return V(V({},r),i)}function vV(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&nn(r)!==Z){let i=new fe([],{});n[nn(r)]=i}return n}function _V(t,e,n){return n.some(r=>hh(t,e,r)&&nn(r)!==Z)}function EV(t,e,n){return n.some(r=>hh(t,e,r))}function hh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function IV(t,e,n){return e.length===0&&!t.children[n]}var Hy=class{};function wV(t,e,n,r,i,o,s="emptyOnly"){return new qy(t,e,n,r,i,s,o).recognize()}var TV=31,qy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new By(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=pS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:n,rootSnapshot:r})=>{let i=new Lt(r,n),o=new pc("",i),s=AS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Li([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,n).pipe(oe(r=>({children:r,rootSnapshot:n})),vr(r=>{if(r instanceof yc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof Lt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Re(o).pipe(Mo(s=>{let a=r.children[s],u=VF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),ml((s,a)=>(s.push(...a),s)),_r(null),jp(),$e(s=>{if(s===null)return ts(r);let a=HS(s);return DV(a),G(a)}))}processSegment(e,n,r,i,o,s,a){return Re(n).pipe(Mo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(vr(l=>{if(l instanceof mc)return G(null);throw l}))),$n(u=>!!u),vr(u=>{if(US(u))return IV(r,i,o)?G(new Hy):ts(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return nn(r)!==s&&(s===Z||!hh(i,o,r))?ts(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):ts(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=$S(n,i,o);if(!u)return ts(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TV&&(this.allowRedirects=!1));let y=new Li(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gS(i),nn(i),i.component??i._loadedComponent??null,i,mS(i)),b=ah(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Tt(R=>this.applyRedirects.lineralizeSegments(i,R)),$e(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=gV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Tt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,b=new Li(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,gS(r),nn(r),r.component??r._loadedComponent??null,r,mS(r)),N=ah(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=pS(n,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,b).pipe(oe(K=>new Lt(b,K)));if(l.length===0&&x.length===0)return G(new Lt(b,[]));let $=nn(r)===o;return this.processSegment(h,l,R,x,$?Z:o,!0,b).pipe(oe(K=>new Lt(b,K instanceof Lt?[K]:[])))}))):ts(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):lV(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(Ge(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):fV(n))):G({routes:[],injector:e})}};function DV(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function bV(t){let e=t.value.routeConfig;return e&&e.path===""}function HS(t){let e=[],n=new Set;for(let r of t){if(!bV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=HS(r.children);e.push(new Lt(r.value,i))}return e.filter(r=>!n.has(r))}function gS(t){return t.data||{}}function mS(t){return t.resolve||{}}function CV(t,e,n,r,i,o){return $e(s=>wV(t,e,n,r,s.extractedUrl,i,o).pipe(oe(({state:a,tree:u})=>ye(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function SV(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of qS(u))s.add(l);let a=0;return Re(s).pipe(Mo(u=>o.has(u)?AV(u,r,t,e):(u.data=ah(u,u.parent,t).resolve,G(void 0))),Ge(()=>a++),Po(1),$e(u=>a===s.size?G(n):It))})}function qS(t){let e=t.children.map(n=>qS(n)).flat();return[t,...e]}function AV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!OS(i)&&(o[vc]=i.title),ga(()=>(t.data=ah(t,t.parent,n).resolve,RV(o,t,e,r).pipe(oe(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function RV(t,e,n,r){let i=Py(t);if(i.length===0)return G({});let o={};return Re(i).pipe($e(s=>NV(t[s],e,n,r).pipe($n(),Ge(a=>{if(a instanceof as)throw ch(new Vi,a);o[s]=a}))),Po(1),oe(()=>o),vr(s=>US(s)?It:Ro(s)))}function NV(t,e,n,r){let i=us(e)??r,o=ds(t,i),s=o.resolve?o.resolve(e,n):He(i,()=>o(e,n));return Yn(s)}function Ny(t){return Tt(e=>{let n=t(e);return n?Re(n).pipe(oe(()=>e)):G(e)})}var Qy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[vc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>k(zS),providedIn:"root"})}return t})(),zS=(()=>{class t extends Qy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(uS))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hs=new U("",{providedIn:"root",factory:()=>({})}),Ic=new U(""),GS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(sy);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Yn(He(n,()=>r.loadComponent())).pipe(oe(KS),Tt(QS),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ma(()=>{this.componentLoaders.delete(r)})),o=new bo(i,()=>new ze).pipe(Do());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=WS(r,this.compiler,n,this.onLoadEndListener).pipe(ma(()=>{this.childrenLoaders.delete(r)})),s=new bo(o,()=>new ze).pipe(Do());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WS(t,e,n,r){return Yn(He(n,()=>t.loadChildren())).pipe(oe(KS),Tt(QS),$e(i=>i instanceof bd||Array.isArray(i)?G(i):Re(e.compileModuleAsync(i))),oe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ic,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ky),injector:o}}))}function MV(t){return t&&typeof t=="object"&&"default"in t}function KS(t){return MV(t)?t.default:t}function QS(t){return G(t)}var fh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>k(PV),providedIn:"root"})}return t})(),PV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YS=new U("");var ZS=new U(""),JS=(()=>{class t{currentNavigation=bi(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortWithErrorSubject=new ze;configLoader=k(GS);environmentInjector=k(Le);destroyRef=k(Di);urlSerializer=k(_c);rootContexts=k(ls);location=k(es);inputBindingEnabled=k(dh,{optional:!0})!==null;titleStrategy=k(Qy);options=k(hs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(fh);createViewTransition=k(YS,{optional:!0});navigationErrorHandler=k(ZS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Xd(i)),r=i=>this.events.next(new eh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;In(()=>{this.transitions?.next(ye(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new nt(null),this.transitions.pipe(Rt(r=>r!==null),Tt(r=>{let i=!1;return G(r).pipe(Tt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),It;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.rawUrl),"",lc.IgnoredSameUrlNavigation)),o.resolve(!1),It;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(Tt(u=>(this.events.next(new ji(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?It:Promise.resolve(u))),CV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new dc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new ji(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let b=kS(this.rootComponentType).snapshot;return this.currentTransition=r=ye(V({},o),{targetSnapshot:b,urlAfterRedirects:l,extras:ye(V({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),G(r)}else return this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",lc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),It}),Ge(o=>{let s=new Qd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),oe(o=>(this.currentTransition=r=ye(V({},o),{guards:zF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),nV(this.environmentInjector,o=>this.events.next(o)),Ge(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw ch(this.urlSerializer,o.guardsResult);let s=new Yd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Rt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",_t.GuardRejected),!1)),Ny(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(Ge(s=>{let a=new Zd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Tt(s=>{let a=!1;return G(s).pipe(SV(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",_t.NoDataFromResolver)}}))}),Ge(s=>{let a=new Jd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Ny(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=us(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ge(h=>{a.component=h}),oe(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return pl(s(o.targetSnapshot.root)).pipe(_r(null),Bn(1))}),Ny(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Re(a).pipe(oe(()=>r)):G(r)}),oe(o=>{let s=UF(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(V({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ge(()=>{this.events.next(new hc)}),qF(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Bn(1),vl(new Y(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Rt(()=>!i&&!r.targetRouterState),Ge(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",_t.Aborted)}))),Ge({next:o=>{i=!0,this.lastSuccessfulNavigation=In(this.currentNavigation),this.events.next(new bn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),vl(this.transitionAbortWithErrorSubject.pipe(Ge(o=>{throw o}))),ma(()=>{i||this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),vr(o=>{if(this.destroyed)return r.resolve(!1),It;if(i=!0,jS(o))this.events.next(new Tn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),HF(o)?this.events.next(new ss(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new os(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof as){let{message:u,cancellationCode:l}=ch(this.urlSerializer,a);this.events.next(new Tn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ss(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return It}))}))}cancelNavigationTransition(n,r,i){let o=new Tn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=In(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kV(t){return t!==ac}var XS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>k(xV),providedIn:"root"})}return t})(),lh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},xV=(()=>{class t extends lh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ld(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eA=(()=>{class t{urlSerializer=k(_c);options=k(hs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(es);urlHandlingStrategy=k(fh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=kS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>k(OV),providedIn:"root"})}return t})(),OV=(()=>{class t extends eA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ji?this.updateStateMemento():n instanceof Kn?this.commitTransition(r):n instanceof dc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof hc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Tn&&n.code!==_t.SupersededByNewNavigation&&n.code!==_t.Redirect?this.restoreHistory(r):n instanceof os?this.restoreHistory(r,!0):n instanceof bn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ld(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yy(t,e){t.events.pipe(Rt(n=>n instanceof bn||n instanceof Tn||n instanceof os||n instanceof Kn),oe(n=>n instanceof bn||n instanceof Kn?0:(n instanceof Tn?n.code===_t.Redirect||n.code===_t.SupersededByNewNavigation:!1)?2:1),Rt(n=>n!==2),Bn(1)).subscribe(()=>{e()})}var LV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wc=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(Qm);stateManager=k(eA);options=k(hs,{optional:!0})||{};pendingTasks=k(yn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(JS);urlSerializer=k(_c);location=k(es);urlHandlingStrategy=k(fh);injector=k(Le);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(XS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Ic,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(dh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ae;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=In(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Tn&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bn)this.navigated=!0;else if(r instanceof ss){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kV(i.source)},s);this.scheduleNavigation(a,ac,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}LF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ac,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Dt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return In(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ky),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=RS(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return NS(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Or(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ac,null,r)}navigate(n,r={skipLocationChange:!1}){return VV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Oo(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},LV):r===!1?i=V({},FV):i=r,Or(n))return lS(this.currentUrlTree,n,i);let o=this.parseUrl(n);return lS(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Yy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var tA=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bi(null);get href(){return In(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ze;applicationErrorHandler=k(Dt);options=k(hs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Pd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof bn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Or(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Or(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(ht(wc),ht(Qn),Ha("tabindex"),ht(Dd),ht(qa),ht(Xo))};static \u0275dir=Mr({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Rd("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Sd("href",i.reactiveHref(),Mm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Od],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Od],replaceUrl:[2,"replaceUrl","replaceUrl",Od],routerLink:"routerLink"},features:[Yo]})}return t})();var UV=new U("");function BV(t,...e){return Zt([{provide:Ic,multi:!0,useValue:t},[],{provide:Qn,useFactory:$V,deps:[wc]},{provide:Cd,multi:!0,useFactory:HV},e.map(n=>n.\u0275providers)])}function $V(t){return t.routerState.root}function HV(){let t=k(Ke);return e=>{let n=t.get(xi);if(e!==n.components[0])return;let r=t.get(wc),i=t.get(qV);t.get(zV)===1&&r.initialNavigation(),t.get(GV,null,{optional:!0})?.setUpPreloading(),t.get(UV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qV=new U("",{factory:()=>new ze}),zV=new U("",{providedIn:"root",factory:()=>1});var GV=new U("");var nA=()=>{};var oA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ph={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Jy;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Jy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},KV=function(t){let e=oA(t);return ph.encodeByteArray(e,!0)},Dc=function(t){return KV(t).replace(/\./g,"")},gh=function(t){try{return ph.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ev(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var QV=()=>ev().__FIREBASE_DEFAULTS__,YV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&gh(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return nA()||QV()||YV()||ZV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tv=t=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sA=t=>{let e=tv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nv=()=>{var t;return(t=mh())===null||t===void 0?void 0:t.config},rv=t=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${t}`]};var Ui=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Lr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function yh(t){return _(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function aA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dc(JSON.stringify(n)),Dc(JSON.stringify(s)),""].join(".")}var Tc={};function JV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Tc))Tc[e]?t.emulator.push(e):t.prod.push(e);return t}function XV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var rA=!1;function vh(t,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||Tc[t]===e||Tc[t]||rA)return;Tc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=JV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{rA=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=XV(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),$=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let K=g.element;a(K),h(R,N);let _e=l();u($,x),K.append($,b,R,_e),document.body.appendChild(K)}o?(b.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function ej(){var t;let e=(t=mh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hA(){let t=Je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fA(){return!ej()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bc(){try{return typeof indexedDB=="object"}catch{return!1}}function pA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var tj="FirebaseError",Vt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}},rn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?nj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Vt(i,a,r)}};function nj(t,e){return t.replace(rj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var rj=/\{\$([^}]+)}/g;function gA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(iA(o)&&iA(s)){if(!Cn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function iA(t){return t!==null&&typeof t=="object"}function Cc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ps(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mA(t,e){let n=new Xy(t,e);return n.subscribe.bind(n)}var Xy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ij(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zy),i.error===void 0&&(i.error=Zy),i.complete===void 0&&(i.complete=Zy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ij(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zy(){}var dte=14400*1e3;function xe(t){return t&&t._delegate?t._delegate:t}var Et=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Bi="[DEFAULT]";var iv=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ui;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sj(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function oj(t){return t===Bi?void 0:t}function sj(t){return t.instantiationMode==="EAGER"}var _h=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new iv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var aj=[],ae=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ae||{}),cj={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},uj=ae.INFO,lj={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},dj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=lj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sn=class{constructor(e){this.name=e,this._logLevel=uj,this._logHandler=dj,this._userLogHandler=null,aj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var hj=(t,e)=>e.some(n=>t instanceof n),yA,vA;function fj(){return yA||(yA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pj(){return vA||(vA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _A=new WeakMap,sv=new WeakMap,EA=new WeakMap,ov=new WeakMap,cv=new WeakMap;function gj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(An(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&_A.set(n,t)}).catch(()=>{}),cv.set(e,t),e}function mj(t){if(sv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sv.set(t,e)}var av={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IA(t){av=t(av)}function yj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Eh(this),e,...n);return EA.set(r,e.sort?e.sort():[e]),An(r)}:pj().includes(t)?function(...e){return t.apply(Eh(this),e),An(_A.get(this))}:function(...e){return An(t.apply(Eh(this),e))}}function vj(t){return typeof t=="function"?yj(t):(t instanceof IDBTransaction&&mj(t),hj(t,fj())?new Proxy(t,av):t)}function An(t){if(t instanceof IDBRequest)return gj(t);if(ov.has(t))return ov.get(t);let e=vj(t);return e!==t&&(ov.set(t,e),cv.set(e,t)),e}var Eh=t=>cv.get(t);function TA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=An(s);return r&&s.addEventListener("upgradeneeded",u=>{r(An(s.result),u.oldVersion,u.newVersion,An(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var _j=["get","getKey","getAll","getAllKeys","count"],Ej=["put","add","delete","clear"],uv=new Map;function wA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uv.get(e))return uv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Ej.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_j.includes(n)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return uv.set(e,o),o}IA(t=>ye(V({},t),{get:(e,n,r)=>wA(e,n)||t.get(e,n,r),has:(e,n)=>!!wA(e,n)||t.has(e,n)}));var dv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ij(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Ij(t){let e=t.getComponent();return e?.type==="VERSION"}var hv="@firebase/app",DA="0.13.2";var Zn=new Sn("@firebase/app"),wj="@firebase/app-compat",Tj="@firebase/analytics-compat",Dj="@firebase/analytics",bj="@firebase/app-check-compat",Cj="@firebase/app-check",Sj="@firebase/auth",Aj="@firebase/auth-compat",Rj="@firebase/database",Nj="@firebase/data-connect",Mj="@firebase/database-compat",Pj="@firebase/functions",kj="@firebase/functions-compat",xj="@firebase/installations",Oj="@firebase/installations-compat",Lj="@firebase/messaging",Fj="@firebase/messaging-compat",Vj="@firebase/performance",jj="@firebase/performance-compat",Uj="@firebase/remote-config",Bj="@firebase/remote-config-compat",$j="@firebase/storage",Hj="@firebase/storage-compat",qj="@firebase/firestore",zj="@firebase/ai",Gj="@firebase/firestore-compat",Wj="firebase",Kj="11.10.0";var fv="[DEFAULT]",Qj={[hv]:"fire-core",[wj]:"fire-core-compat",[Dj]:"fire-analytics",[Tj]:"fire-analytics-compat",[Cj]:"fire-app-check",[bj]:"fire-app-check-compat",[Sj]:"fire-auth",[Aj]:"fire-auth-compat",[Rj]:"fire-rtdb",[Nj]:"fire-data-connect",[Mj]:"fire-rtdb-compat",[Pj]:"fire-fn",[kj]:"fire-fn-compat",[xj]:"fire-iid",[Oj]:"fire-iid-compat",[Lj]:"fire-fcm",[Fj]:"fire-fcm-compat",[Vj]:"fire-perf",[jj]:"fire-perf-compat",[Uj]:"fire-rc",[Bj]:"fire-rc-compat",[$j]:"fire-gcs",[Hj]:"fire-gcs-compat",[qj]:"fire-fst",[Gj]:"fire-fst-compat",[zj]:"fire-vertex","fire-js":"fire-js",[Wj]:"fire-js-all"};var Sc=new Map,Yj=new Map,pv=new Map;function bA(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function on(t){let e=t.name;if(pv.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;pv.set(e,t);for(let n of Sc.values())bA(n,t);for(let n of Yj.values())bA(n,t);return!0}function gs(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bt(t){return t==null?!1:t.settings!==void 0}var Zj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new rn("app","Firebase",Zj);var gv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}};var Vr=Kj;function vv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:fv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=nv()),!n)throw Fr.create("no-options");let o=Sc.get(i);if(o){if(Cn(n,o.options)&&Cn(r,o.config))return o;throw Fr.create("duplicate-app",{appName:i})}let s=new _h(i);for(let u of pv.values())s.addComponent(u);let a=new gv(n,r,s);return Sc.set(i,a),a}function $i(t=fv){let e=Sc.get(t);if(!e&&t===fv&&nv())return vv();if(!e)throw Fr.create("no-app",{appName:t});return e}function Ih(){return Array.from(Sc.values())}function Ne(t,e,n){var r;let i=(r=Qj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(a.join(" "));return}on(new Et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Jj="firebase-heartbeat-database",Xj=1,Ac="firebase-heartbeat-store",lv=null;function RA(){return lv||(lv=TA(Jj,Xj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),lv}function e2(t){return _(this,null,function*(){try{let n=(yield RA()).transaction(Ac),r=yield n.objectStore(Ac).get(NA(t));return yield n.done,r}catch(e){if(e instanceof Vt)Zn.warn(e.message);else{let n=Fr.create("idb-get",{originalErrorMessage:e?.message});Zn.warn(n.message)}}})}function CA(t,e){return _(this,null,function*(){try{let r=(yield RA()).transaction(Ac,"readwrite");yield r.objectStore(Ac).put(e,NA(t)),yield r.done}catch(n){if(n instanceof Vt)Zn.warn(n.message);else{let r=Fr.create("idb-set",{originalErrorMessage:n?.message});Zn.warn(r.message)}}})}function NA(t){return`${t.name}!${t.options.appId}`}var t2=1024,n2=30,mv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new yv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=SA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>n2){let s=i2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=SA(),{heartbeatsToSend:r,unsentEntries:i}=r2(this._heartbeatsCache.heartbeats),o=Dc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Zn.warn(n),""}})}};function SA(){return new Date().toISOString().substring(0,10)}function r2(t,e=t2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),AA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),AA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var yv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return bc()?pA().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield e2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return CA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return CA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function AA(t){return Dc(JSON.stringify({version:2,heartbeats:t})).length}function i2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function o2(t){on(new Et("platform-logger",e=>new dv(e),"PRIVATE")),on(new Et("heartbeat",e=>new mv(e),"PRIVATE")),Ne(hv,DA,t),Ne(hv,DA,"esm2017"),Ne("fire-js","")}o2("");var s2="firebase",a2="11.10.0";Ne(s2,a2,"app");function MA(t){t===void 0&&(t=k(Ke));let e=t.get($o);return n=>new Y(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var jr=new xo("ANGULARFIRE2_VERSION");function Rc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ys=(t,e)=>{let n=e?[e]:Ih(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ms=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(ms||{}),PA=py()&&typeof Zone<"u"?ms.WARN:ms.SILENT;var wh=class{zone;delegate;constructor(e,n=Lp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Ur=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(ve);this.outsideAngular=n.runOutsideAngular(()=>new wh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new wh(typeof Zone>"u"?void 0:Zone.current,Op))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kA=!1;function c2(t,e){!kA&&(PA>ms.SILENT||py())&&(kA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),PA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function u2(t){let e=k(ve,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Hi(t){let e=k(ve,{optional:!0});return e?e.run(()=>t()):t()}var l2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),He(n,()=>Hi(()=>t.apply(void 0,r)))),De=(t,e,n)=>(n||=e?ms.WARN:ms.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(Ur),s=k($o),a=k(Le)}catch{return c2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Hi(()=>s.add())),i[l]=l2(i[l],r,a));let u=u2(()=>t.apply(this,i));return e?u instanceof Y?u.pipe(yr(o.outsideAngular),mr(o.insideAngular),MA(a)):u instanceof Promise?Hi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>He(a,()=>Hi(()=>h(g))),g=>He(a,()=>Hi(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Hi(()=>u):u instanceof Y?u.pipe(yr(o.outsideAngular),mr(o.insideAngular)):Hi(()=>u)});var Jn=class{constructor(e){return e}},qi=class{constructor(){return Ih()}};function d2(t){return t&&t.length===1?t[0]:new Jn($i())}var _v=new U("angularfire2._apps"),h2={provide:Jn,useFactory:d2,deps:[[new xt,_v]]},f2={provide:qi,deps:[[new xt,_v]]};function p2(t){return(e,n)=>{let r=n.get(Pi);Ne("angularfire",jr.full,"core"),Ne("angularfire",jr.full,"app"),Ne("angular",Jp.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Jn(i)}}function sne(t,...e){return Zt([h2,f2,{provide:_v,useFactory:p2(t),multi:!0,deps:[ve,Ke,Ur,...e]}])}var ane=De(vv,!0);var g2=new Map,m2={activated:!1,tokenObservers:[]},y2={initialized:!1,enabled:!1};function sn(t){return g2.get(t)||Object.assign({},m2)}function FA(){return y2}var v2="https://content-firebaseappcheck.googleapis.com/v1";var _2="exchangeDebugToken",xA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},mne=1440*60*1e3;var wv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Ui,this.pending.promise.catch(n=>{}),yield E2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ui,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function E2(t){return new Promise(e=>{setTimeout(e,t)})}var I2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Br=new rn("appCheck","AppCheck",I2);function VA(t){if(!sn(t).activated)throw Br.create("use-before-activation",{appName:t.name})}function jA(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Br.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Br.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Br.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function UA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${v2}/projects/${n}/apps/${r}:${_2}?key=${i}`,body:{debug_token:e}}}var w2="firebase-app-check-database",T2=1,Tv="firebase-app-check-store";var Th=null;function D2(){return Th||(Th=new Promise((t,e)=>{try{let n=indexedDB.open(w2,T2);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Br.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Tv,{keyPath:"compositeKey"})}}}catch(n){e(Br.create("storage-open",{originalErrorMessage:n?.message}))}}),Th)}function b2(t,e){return C2(S2(t),e)}function C2(t,e){return _(this,null,function*(){let r=(yield D2()).transaction(Tv,"readwrite"),o=r.objectStore(Tv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Br.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function S2(t){return`${t.options.appId}-${t.name}`}var Nc=new Sn("@firebase/app-check");function Ev(t,e){return bc()?b2(t,e).catch(n=>{Nc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function BA(){return FA().enabled}function $A(){return _(this,null,function*(){let t=FA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var A2={error:"UNKNOWN_ERROR"};function R2(t){return ph.encodeString(JSON.stringify(t),!1)}function Dv(t,e=!1,n=!1){return _(this,null,function*(){let r=t.app;VA(r);let i=sn(r),o=i.token,s;if(o&&!Mc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Mc(l)?o=l:yield Ev(r,void 0))}if(!e&&o&&Mc(o))return{token:o.token};let a=!1;if(BA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=jA(UA(r,yield $A()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Ev(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Nc.warn(l.message):n&&Nc.error(l),Iv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield sn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Nc.warn(l.message):n&&Nc.error(l),s=l}let u;return o?s?Mc(o)?u={token:o.token,internalError:s}:u=Iv(s):(u={token:o.token},i.token=o,yield Ev(r,o)):u=Iv(s),a&&k2(r,u),u})}function N2(t){return _(this,null,function*(){let e=t.app;VA(e);let{provider:n}=sn(e);if(BA()){let r=yield $A(),{token:i}=yield jA(UA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function M2(t,e,n,r){let{app:i}=t,o=sn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Mc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),OA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>OA(t))}function HA(t,e){let n=sn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function OA(t){let{app:e}=t,n=sn(e),r=n.tokenRefresher;r||(r=P2(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function P2(t){let{app:e}=t;return new wv(()=>_(null,null,function*(){let n=sn(e),r;if(n.token?r=yield Dv(t,!0):r=yield Dv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=sn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xA.RETRIAL_MIN_WAIT,xA.RETRIAL_MAX_WAIT)}function k2(t,e){let n=sn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Mc(t){return t.expireTimeMillis-Date.now()>0}function Iv(t){return{token:R2(A2),error:t}}var bv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=sn(this.app);for(let n of e)HA(this.app,n.next);return Promise.resolve()}};function x2(t,e){return new bv(t,e)}function O2(t){return{getToken:e=>Dv(t,e),getLimitedUseToken:()=>N2(t),addTokenListener:e=>M2(t,"INTERNAL",e),removeTokenListener:e=>HA(t.app,e)}}var L2="@firebase/app-check",F2="0.10.1";var V2="app-check",LA="app-check-internal";function j2(){on(new Et(V2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return x2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(LA).initialize()})),on(new Et(LA,t=>{let e=t.getProvider("app-check").getImmediate();return O2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(L2,F2)}j2();var U2="app-check";var vs=class{constructor(){return ys(U2)}};var B2=["localhost","0.0.0.0","127.0.0.1"],Rne=typeof window<"u"&&B2.includes(window.location.hostname);function o0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var s0=o0,a0=new rn("auth","Firebase",o0());var Rh=new Sn("@firebase/auth");function $2(t,...e){Rh.logLevel<=ae.WARN&&Rh.warn(`Auth (${Vr}): ${t}`,...e)}function bh(t,...e){Rh.logLevel<=ae.ERROR&&Rh.error(`Auth (${Vr}): ${t}`,...e)}function Nn(t,...e){throw Yv(t,...e)}function zi(t,...e){return Yv(t,...e)}function c0(t,e,n){let r=Object.assign(Object.assign({},s0()),{[e]:n});return new rn("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return c0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return a0.create(t,...e)}function z(t,e,...n){if(!t)throw Yv(e,...n)}function Xn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function qr(t,e){t||Xn(e)}function Rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function H2(){return qA()==="http:"||qA()==="https:"}function qA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function q2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H2()||lA()||"connection"in navigator)?navigator.onLine:!0}function z2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Gi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=cA()||dA()}get(){return q2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zv(t,e){qr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Nh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var G2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var W2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K2=new Gi(3e4,6e4);function zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Gr(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return u0(t,i,()=>_(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Cc(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return uA()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(y.credentials="include"),Nh.fetch()(yield l0(t,t.config.apiHost,n,p),y)}))})}function u0(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},G2),e);try{let i=new Nv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Dh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Dh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw c0(t,h,l);Nn(t,h)}}catch(i){if(i instanceof Vt)throw i;Nn(t,"network-request-failed",{message:String(i)})}})}function Uc(o,s,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Gr(t,e,n,r,i);return"mfaPendingCredential"in l&&Nn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function l0(t,e,n,r){return _(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Zv(t.config,i):`${t.config.apiScheme}://${i}`;return W2.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Q2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Nv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),K2.get())})}};function Dh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=zi(t,e,r);return i.customData._tokenResponse=n,i}function zA(t){return t!==void 0&&t.enterprise!==void 0}var Mv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Q2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Y2(t,e){return _(this,null,function*(){return Gr(t,"GET","/v2/recaptchaConfig",zr(t,e))})}function Z2(t,e){return _(this,null,function*(){return Gr(t,"POST","/v1/accounts:delete",e)})}function Mh(t,e){return _(this,null,function*(){return Gr(t,"POST","/v1/accounts:lookup",e)})}function kc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jv(t,e=!1){return _(this,null,function*(){let n=xe(t),r=yield n.getIdToken(e),i=Xv(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:kc(Cv(i.auth_time)),issuedAtTime:kc(Cv(i.iat)),expirationTime:kc(Cv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Cv(t){return Number(t)*1e3}function Xv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{let i=gh(n);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GA(t){let e=Xv(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Oc(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Vt&&J2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function J2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Pv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ph(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Oc(t,Mh(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?d0(o.providerUserInfo):[],a=X2(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Lc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function e_(t){return _(this,null,function*(){let e=xe(t);yield Ph(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function d0(t){return t.map(e=>{var{providerId:n}=e,r=Fp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function eU(t,e){return _(this,null,function*(){let n=yield u0(t,{},()=>_(null,null,function*(){let r=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield l0(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(u.credentials="include"),Nh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function tU(t,e){return _(this,null,function*(){return Gr(t,"POST","/v2/accounts:revokeToken",zr(t,e))})}var xc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=GA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield eU(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Xn("not implemented")}};function $r(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Hr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Fp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Oc(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Jv(this,e)}reload(){return e_(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ph(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(bt(this.auth.app))return Promise.reject(tr(this.auth));let e=yield this.getIdToken();return yield Oc(this,Z2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:_e,isAnonymous:gt,providerData:me,stsTokenManager:T}=n;z(K&&T,e,"internal-error");let v=xc.fromJSON(this.name,T);z(typeof K=="string",e,"internal-error"),$r(p,e.name),$r(g,e.name),z(typeof _e=="boolean",e,"internal-error"),z(typeof gt=="boolean",e,"internal-error"),$r(y,e.name),$r(b,e.name),$r(N,e.name),$r(R,e.name),$r(x,e.name),$r($,e.name);let I=new t({uid:K,auth:e,email:g,emailVerified:_e,displayName:p,isAnonymous:gt,photoURL:b,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:x,lastLoginAt:$});return me&&Array.isArray(me)&&(I.providerData=me.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new xc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ph(o),o})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?d0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new xc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var WA=new Map;function er(t){qr(t instanceof Function,"Expected a class definition");let e=WA.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WA.set(t,e),e)}var nU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),kv=nU;function Ch(t,e,n){return`firebase:${t}:${e}:${n}`}var kh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ch(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ch("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Mh(this.auth,{idToken:e}).catch(()=>{});return n?Hr._fromGetAccountInfoResponse(this.auth,n,e):null}return Hr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(er(kv),e,r);let i=(yield Promise.all(n.map(l=>_(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||er(kv),s=Ch(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield Mh(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Hr._fromGetAccountInfoResponse(e,g,h)}else p=Hr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>_(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function KA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y0(e))return"Blackberry";if(v0(e))return"Webos";if(f0(e))return"Safari";if((e.includes("chrome/")||p0(e))&&!e.includes("edge/"))return"Chrome";if(m0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function h0(t=Je()){return/firefox\//i.test(t)}function f0(t=Je()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p0(t=Je()){return/crios\//i.test(t)}function g0(t=Je()){return/iemobile/i.test(t)}function m0(t=Je()){return/android/i.test(t)}function y0(t=Je()){return/blackberry/i.test(t)}function v0(t=Je()){return/webos/i.test(t)}function t_(t=Je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rU(t=Je()){var e;return t_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iU(){return hA()&&document.documentMode===10}function _0(t=Je()){return t_(t)||m0(t)||v0(t)||y0(t)||/windows phone/i.test(t)||g0(t)}function E0(t,e=[]){let n;switch(t){case"Browser":n=KA(Je());break;case"Worker":n=`${KA(Je())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${r}`}var xv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function oU(n){return _(this,arguments,function*(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",zr(t,e))})}var sU=6,Ov=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:sU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Lv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xh(this),this.idTokenSubscription=new xh(this),this.beforeStateQueue=new xv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield kh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Mh(this,{idToken:e}),r=yield Hr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(bt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Ph(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=z2()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(bt(this.app))return Promise.reject(tr(this));let n=e?xe(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return bt(this.app)?Promise.reject(tr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bt(this.app)?Promise.reject(tr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(er(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield oU(this),n=new Ov(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield tU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&er(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield kh.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;if(bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&$2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ki(t){return xe(t)}var xh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=mA(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Bh={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aU(t){Bh=t}function I0(t){return Bh.loadJS(t)}function cU(){return Bh.recaptchaEnterpriseScript}function uU(){return Bh.gapiScript}function w0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Fv=class{constructor(){this.enterprise=new Vv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Vv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var lU="recaptcha-enterprise",T0="NO_RECAPTCHA",jv=class{constructor(e){this.type=lU,this.auth=Ki(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){Y2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Mv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;zA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(T0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Fv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&zA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cU();u.length!==0&&(u+=a),I0(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Pc(t,e,n,r=!1,i=!1){return _(this,null,function*(){let o=new jv(t),s;if(i)s=T0;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Uv(t,e,n,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Pc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>_(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Pc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Pc(t,e,n);return r(t,a).catch(u=>_(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Pc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield Pc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function n_(t,e){let n=gs(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Cn(o,e??{}))return i;Nn(i,"already-initialized")}return n.initialize({options:e})}function dU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(er);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function r_(t,e,n){let r=Ki(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=D0(e),{host:s,port:a}=hU(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(Cn(l,r.config.emulator)&&Cn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Lr(s)?(yh(`${o}//${s}${u}`),vh("Auth",!0)):i||fU()}function D0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hU(t){let e=D0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:QA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:QA(s)}}}function QA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function fU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Fc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}};function pU(t,e){return _(this,null,function*(){return Gr(t,"POST","/v1/accounts:signUp",e)})}function gU(t,e){return _(this,null,function*(){return Uc(t,"POST","/v1/accounts:signInWithPassword",zr(t,e))})}function mU(t,e){return _(this,null,function*(){return Uc(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))})}function yU(t,e){return _(this,null,function*(){return Uc(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))})}var Vc=class t extends Fc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,n,"signInWithPassword",gU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return mU(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,r,"signUpPassword",pU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yU(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Sv(t,e){return _(this,null,function*(){return Uc(t,"POST","/v1/accounts:signInWithIdp",zr(t,e))})}function vU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _U(t){let e=fs(ps(t)).link,n=e?fs(ps(e)).deep_link_id:null,r=fs(ps(t)).deep_link_id;return(r?fs(ps(r)).link:null)||r||n||e||t}var Oh=class t{constructor(e){var n,r,i,o,s,a;let u=fs(ps(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=vU((i=u.mode)!==null&&i!==void 0?i:null);z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=_U(e);try{return new t(n)}catch{return null}}};var b0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Vc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Oh.parseLink(r);return z(i,"argument-error"),Vc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Lh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bv=class extends Lh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function EU(t,e){return _(this,null,function*(){return Uc(t,"POST","/v1/accounts:signUp",zr(t,e))})}var _s=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let o=yield Hr._fromIdTokenResponse(e,r,i),s=YA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=YA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function YA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var $v=class t extends Vt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function C0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?$v._fromErrorAndOperation(t,o,e,r):o})}function IU(t,e,n=!1){return _(this,null,function*(){let r=yield Oc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return _s._forOperation(t,"link",r)})}function wU(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(bt(r.app))return Promise.reject(tr(r));let i="reauthenticate";try{let o=yield Oc(t,C0(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=Xv(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(t.uid===a,r,"user-mismatch"),_s._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nn(r,"user-mismatch"),o}})}function S0(t,e,n=!1){return _(this,null,function*(){if(bt(t.app))return Promise.reject(tr(t));let r="signIn",i=yield C0(t,r,e),o=yield _s._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function i_(t,e){return _(this,null,function*(){return S0(Ki(t),e)})}function A0(t){return _(this,null,function*(){let e=Ki(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function o_(t,e,n){return _(this,null,function*(){if(bt(t.app))return Promise.reject(tr(t));let r=Ki(t),s=yield Uv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EU,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&A0(t),u}),a=yield _s._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function s_(t,e,n){return bt(t.app)?Promise.reject(tr(t)):i_(xe(t),b0.credential(e,n)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&A0(t),r}))}function Bc(t,e,n,r){return xe(t).onIdTokenChanged(e,n,r)}function a_(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}function c_(t){return xe(t).signOut()}var Fh="__sak";var Vh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fh,"1"),this.storage.removeItem(Fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var TU=1e3,DU=10,bU=(()=>{class t extends Vh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);iU()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,DU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},TU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield pr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield pr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield pr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),R0=bU;var CU=(()=>{class t extends Vh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),u_=CU;function SU(t){return Promise.all(t.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var AU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield SU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function N0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Hv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=N0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Rn(){return window}function RU(t){Rn().location.href=t}function M0(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}function NU(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function MU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PU(){return M0()?self:null}var P0="firebaseLocalStorageDb",kU=1,jh="firebaseLocalStorage",k0="fbase_key",Wi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function $h(t,e){return t.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function xU(){let t=indexedDB.deleteDatabase(P0);return new Wi(t).toPromise()}function qv(){let t=indexedDB.open(P0,kU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(jh,{keyPath:k0})}catch(i){n(i)}}),t.addEventListener("success",()=>_(null,null,function*(){let r=t.result;r.objectStoreNames.contains(jh)?e(r):(r.close(),yield xU(),e(yield qv()))}))})}function ZA(t,e,n){return _(this,null,function*(){let r=$h(t,!0).put({[k0]:e,value:n});return new Wi(r).toPromise()})}function OU(t,e){return _(this,null,function*(){let n=$h(t,!1).get(e),r=yield new Wi(n).toPromise();return r===void 0?null:r.value})}function JA(t,e){let n=$h(t,!0).delete(e);return new Wi(n).toPromise()}var LU=800,FU=3,VU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield qv(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>FU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return M0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=AU._getInstance(PU()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield NU(),!this.activeServiceWorker)return;this.sender=new Hv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||MU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield qv();return yield ZA(n,Fh,"1"),yield JA(n,Fh),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>ZA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>OU(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>JA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(o=>{let s=$h(o,!1).getAll();return new Wi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),LU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),x0=VU;var Fne=w0("rcb"),Vne=new Gi(3e4,6e4);function jU(t,e){return e?er(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var jc=class extends Fc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function UU(t){return S0(t.auth,new jc(t),t.bypassAuthState)}function BU(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),wU(n,new jc(t),t.bypassAuthState)}function $U(t){return _(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),IU(n,new jc(t),t.bypassAuthState)})}var zv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UU;case"linkViaPopup":case"linkViaRedirect":return $U;case"reauthViaPopup":case"reauthViaRedirect":return BU;default:Nn(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var jne=new Gi(2e3,1e4);var HU="pendingRedirect",Sh=new Map,Gv=class t extends zv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Sh.get(this.auth._key());if(!e){try{let r=(yield qU(this.resolver,this.auth))?yield pr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return pr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function qU(t,e){return _(this,null,function*(){let n=WU(e),r=GU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function zU(t,e){Sh.set(t._key(),e)}function GU(t){return er(t._redirectPersistence)}function WU(t){return Ch(HU,t.config.apiKey,t.name)}function KU(t,e,n=!1){return _(this,null,function*(){if(bt(t.app))return Promise.reject(tr(t));let r=Ki(t),i=jU(r,e),s=yield new Gv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var QU=600*1e3,Wv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!O0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QU&&this.cachedEventUids.clear(),this.cachedEventUids.has(XA(e))}saveEventToCache(e){this.cachedEventUids.add(XA(e)),this.lastProcessedEventTime=Date.now()}};function XA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function O0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function YU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O0(t);default:return!1}}function ZU(n){return _(this,arguments,function*(t,e={}){return Gr(t,"GET","/v1/projects",e)})}var JU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XU=/^https?/;function eB(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield ZU(t);for(let n of e)try{if(tB(n))return}catch{}Nn(t,"unauthorized-domain")})}function tB(t){let e=Rv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!XU.test(n))return!1;if(JU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var nB=new Gi(3e4,6e4);function e0(){let t=Rn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rB(t){return new Promise((e,n)=>{var r,i,o;function s(){e0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e0(),n(zi(t,"network-request-failed"))},timeout:nB.get()})}if(!((i=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rn().gapi)===null||o===void 0)&&o.load)s();else{let a=w0("iframefcb");return Rn()[a]=()=>{gapi.load?s():n(zi(t,"network-request-failed"))},I0(`${uU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ah=null,e})}var Ah=null;function iB(t){return Ah=Ah||rB(t),Ah}var oB=new Gi(5e3,15e3),sB="__/auth/iframe",aB="emulator/auth/iframe",cB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lB(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Zv(e,aB):`https://${t.config.authDomain}/${sB}`,r={apiKey:e.apiKey,appName:t.name,v:Vr},i=uB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Cc(r).slice(1)}`}function dB(t){return _(this,null,function*(){let e=yield iB(t),n=Rn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:lB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cB,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=zi(t,"network-request-failed"),a=Rn().setTimeout(()=>{o(s)},oB.get());function u(){Rn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var hB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fB=500,pB=600,gB="_blank",mB="http://localhost",Uh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function yB(t,e,n,r=fB,i=pB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},hB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Je().toLowerCase();n&&(a=p0(l)?gB:n),h0(l)&&(e=e||mB,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,b])=>`${g}${y}=${b},`,"");if(rU(l)&&a!=="_self")return vB(e||"",a),new Uh(null);let p=window.open(e||"",a,h);z(p,t,"popup-blocked");try{p.focus()}catch{}return new Uh(p)}function vB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _B="__/auth/handler",EB="emulator/auth/handler",IB=encodeURIComponent("fac");function t0(t,e,n,r,i,o){return _(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vr,eventId:i};if(e instanceof Lh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",gA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Bv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${IB}=${encodeURIComponent(u)}`:"";return`${wB(t)}?${Cc(a).slice(1)}${l}`})}function wB({config:t}){return t.emulator?Zv(t,EB):`https://${t.authDomain}/${_B}`}var Av="webStorageSupport",Kv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u_,this._completeRedirectFn=KU,this._overrideRedirectResult=zU}_openPopup(e,n,r,i){return _(this,null,function*(){var o;qr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield t0(e,n,r,Rv(),i);return yB(e,s,N0())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield t0(e,n,r,Rv(),i);return RU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(qr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield dB(e),r=new Wv(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Av,{type:Av},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Av];s!==void 0&&n(!!s),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _0()||f0()||t_()}},L0=Kv;var n0="@firebase/auth",r0="1.10.8";var Qv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function TB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DB(t){on(new Et("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E0(t)},l=new Lv(r,i,o,u);return dU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),on(new Et("auth-internal",e=>{let n=Ki(e.getProvider("auth").getImmediate());return(r=>new Qv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(n0,r0,TB(t)),Ne(n0,r0,"esm2017")}var bB=300,CB=rv("authIdTokenMaxAge")||bB,i0=null,SB=t=>e=>_(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CB)return;let i=n?.token;i0!==i&&(i0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function l_(t=$i()){let e=gs(t,"auth");if(e.isInitialized())return e.getImmediate();let n=n_(t,{popupRedirectResolver:L0,persistence:[x0,R0,u_]}),r=rv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=SB(o.toString());a_(n,s,()=>s(n.currentUser)),Bc(n,a=>s(a))}}let i=tv("auth");return i&&r_(n,`http://${i}`),n}function AB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=zi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",AB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DB("Browser");function j0(t){return new Y(function(e){var n=Bc(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var U0="auth",$c=class{constructor(e){return e}},Hc=class{constructor(){return ys(U0)}};var d_=new U("angularfire2.auth-instances");function g$(t,e){let n=Rc(U0,t,e);return n&&new $c(n)}function m$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $c(r)}}var y$={provide:Hc,deps:[[new xt,d_]]},v$={provide:$c,useFactory:g$,deps:[[new xt,d_],Jn]};function Mre(t,...e){return Ne("angularfire",jr.full,"auth"),Zt([v$,y$,{provide:d_,useFactory:m$(t),multi:!0,deps:[ve,Ke,Ur,qi,[new xt,vs],...e]}])}var Pre=De(j0,!0);var kre=De(o_,!0,2);var xre=De(l_,!0);var Ore=De(s_,!0,2);var Lre=De(c_,!0,2);var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$0={};var nr,h_;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,S){for(var E=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)E[Fn-2]=arguments[Fn];return v.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],D=T.g[2];var S=T.g[3],E=v+(S^I&(D^S))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(S^I&(D^S))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(S^I&(D^S))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(S^I&(D^S))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(D^v&(I^D))+w[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=D+(I^S&(v^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(v^D&(S^v))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^S&(I^D))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^S&(I^D))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^S&(I^D))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^S&(I^D))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(v^I))+w[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(S^v))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^S)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^S)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^S)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^S)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^D)+w[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=D+(S^v^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^v)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~S))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~S))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~S))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~S))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~D))+w[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=D+(v^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(w[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<v;)if(w[D++]=T[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;w&&S==v||(I[D]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return R(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var D=_e(I,v).g;I=x(I,D.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,b(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:b(T)?0:1};function R(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=v;D++){var S=w+(this.i(D)&65535)+(T.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(R(v))}t.j=function(T){if(b(this)||b(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,Fn=T.i(D)>>>16,qs=T.i(D)&65535;I[2*w+2*D]+=E*qs,$(I,2*w+2*D),I[2*w+2*D+1]+=S*qs,$(I,2*w+2*D+1),I[2*w+2*D+1]+=E*Fn,$(I,2*w+2*D+1),I[2*w+2*D+2]+=S*Fn,$(I,2*w+2*D+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function $(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function K(T,v){this.g=T,this.h=v}function _e(T,v){if(b(v))throw Error("division by zero");if(b(T))return new K(p,p);if(N(T))return v=_e(R(T),v),new K(R(v.g),R(v.h));if(N(v))return v=_e(T,R(v)),new K(R(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=v;0>=w.l(T);)I=gt(I),w=gt(w);var D=me(I,1),S=me(w,1);for(w=me(w,2),I=me(I,2);!b(w);){var E=S.add(w);0>=E.l(T)&&(D=D.add(I),S=E),w=me(w,1),I=me(I,1)}return v=x(T,D.j(v)),new K(D,v)}for(D=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(v);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(v);b(S)&&(S=g),D=D.add(S),T=x(T,E)}return new K(D,T)}t.A=function(T){return _e(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function gt(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function me(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,D=[],S=0;S<w;S++)D[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h_=$0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,nr=$0.Integer=s}).apply(typeof B0<"u"?B0:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var f_,_$,Es,p_,qc,qh,g_,m_,y_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,A){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[C].apply(m,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,A=m.length||0;c.length=C+A;for(let O=0;O<A;O++)c[C+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var gt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function me(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Wf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Fn{constructor(){this.h=this.g=null}add(d,f){let m=qs.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var qs=new x(()=>new SM,c=>c.reset());class SM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let zs,Gs=!1,Wf=new Fn,PI=()=>{let c=a.Promise.resolve(void 0);zs=()=>{c.then(AM)}};var AM=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=qs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Gs=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var RM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ws(c,d){if(st.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(gt){e:{try{_e(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:NM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ws.aa.h.call(this)}}b(Ws,st);var NM={2:"touch",3:"pen",4:"mouse"};Ws.prototype.h=function(){Ws.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),MM=0;function PM(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++MM,this.da=this.fa=!1}function yu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function vu(c){this.src=c,this.g={},this.h=0}vu.prototype.add=function(c,d,f,m,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Qf(c,d,m,C);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new PM(d,this.src,A,!!m,C),d.fa=f,c.push(d)),d};function Kf(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(m,C,1),A&&(yu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Qf(c,d,f,m){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return C}return-1}var Yf="closure_lm_"+(1e6*Math.random()|0),Zf={};function kI(c,d,f,m,C){if(m&&m.once)return OI(c,d,f,m,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)kI(c,d[A],f,m,C);return null}return f=tp(f),c&&c[Ks]?c.K(d,f,l(m)?!!m.capture:!!m,C):xI(c,d,f,!1,m,C)}function xI(c,d,f,m,C,A){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Ee=Xf(c);if(Ee||(c[Yf]=Ee=new vu(c)),f=Ee.add(d,f,m,O,A),f.proxy)return f;if(m=kM(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)RM||(C=O),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(FI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function kM(){function c(f){return d.call(c.src,c.listener,f)}let d=xM;return c}function OI(c,d,f,m,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)OI(c,d[A],f,m,C);return null}return f=tp(f),c&&c[Ks]?c.L(d,f,l(m)?!!m.capture:!!m,C):xI(c,d,f,!0,m,C)}function LI(c,d,f,m,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)LI(c,d[A],f,m,C);else m=l(m)?!!m.capture:!!m,f=tp(f),c&&c[Ks]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Qf(A,f,m,C),-1<f&&(yu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Xf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Qf(d,f,m,C)),(f=-1<c?d[c]:null)&&Jf(f))}function Jf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ks])Kf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(FI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Xf(d))?(Kf(f,c),f.h==0&&(f.src=null,d[Yf]=null)):yu(c)}}}function FI(c){return c in Zf?Zf[c]:Zf[c]="on"+c}function xM(c,d){if(c.da)c=!0;else{d=new Ws(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Jf(c),c=f.call(m,d)}return c}function Xf(c){return c=c[Yf],c instanceof vu?c:null}var ep="__closure_events_fn_"+(1e9*Math.random()>>>0);function tp(c){return typeof c=="function"?c:(c[ep]||(c[ep]=function(d){return c.handleEvent(d)}),c[ep])}function at(){lr.call(this),this.i=new vu(this),this.M=this,this.F=null}b(at,lr),at.prototype[Ks]=!0,at.prototype.removeEventListener=function(c,d,f,m){LI(this,c,d,f,m)};function mt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new st(d,c);else if(d instanceof st)d.target=d.target||c;else{var C=d;d=new st(m,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];C=_u(O,m,!0,d)&&C}if(O=d.g=c,C=_u(O,m,!0,d)&&C,C=_u(O,m,!1,d)&&C,f)for(A=0;A<f.length;A++)O=d.g=f[A],C=_u(O,m,!1,d)&&C}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)yu(f[m]);delete c.g[d],c.h--}}this.F=null},at.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},at.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function _u(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ee=O.listener,tt=O.ha||O.src;O.fa&&Kf(c.i,O),C=Ee.call(tt,m)!==!1&&C}}return C&&!m.defaultPrevented}function VI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function jI(c){c.g=VI(()=>{c.g=null,c.i&&(c.i=!1,jI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class OM extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:jI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(c){lr.call(this),this.h=c,this.g={}}b(Qs,lr);var UI=[];function BI(c){me(c.g,function(d,f){this.g.hasOwnProperty(f)&&Jf(d)},c),c.g={}}Qs.prototype.N=function(){Qs.aa.N.call(this),BI(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var np=a.JSON.stringify,LM=a.JSON.parse,FM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function rp(){}rp.prototype.h=null;function $I(c){return c.h||(c.h=c.i())}function HI(){}var Ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ip(){st.call(this,"d")}b(ip,st);function op(){st.call(this,"c")}b(op,st);var ri={},qI=null;function Eu(){return qI=qI||new at}ri.La="serverreachability";function zI(c){st.call(this,ri.La,c)}b(zI,st);function Zs(c){let d=Eu();mt(d,new zI(d))}ri.STAT_EVENT="statevent";function GI(c,d){st.call(this,ri.STAT_EVENT,c),this.stat=d}b(GI,st);function yt(c){let d=Eu();mt(d,new GI(d,c))}ri.Ma="timingevent";function WI(c,d){st.call(this,ri.Ma,c),this.size=d}b(WI,st);function Js(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function VM(c,d,f,m,C,A){c.info(function(){if(c.g)if(A)for(var O="",Ee=A.split("&"),tt=0;tt<Ee.length;tt++){var he=Ee[tt].split("=");if(1<he.length){var ct=he[0];he=he[1];var ut=ct.split("_");O=2<=ut.length&&ut[1]=="type"?O+(ct+"="+he+"&"):O+(ct+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function jM(c,d,f,m,C,A,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+O})}function co(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+BM(c,f)+(m?" "+m:"")})}function UM(c,d){c.info(function(){return"TIMEOUT: "+d})}Xs.prototype.info=function(){};function BM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return np(f)}catch{return d}}var Iu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},KI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sp;function wu(){}b(wu,rp),wu.prototype.g=function(){return new XMLHttpRequest},wu.prototype.i=function(){return{}},sp=new wu;function dr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new QI}function QI(){this.i=null,this.g="",this.h=!1}var YI={},ap={};function cp(c,d,f){c.L=1,c.v=Cu(Vn(d)),c.m=f,c.P=!0,ZI(c,null)}function ZI(c,d){c.F=Date.now(),Tu(c),c.A=Vn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),dw(f.i,"t",m),c.C=0,f=c.j.J,c.h=new QI,c.g=Rw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new OM(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(UI[0]=C.toString()),C=UI);for(var A=0;A<C.length;A++){var O=kI(f,C[A],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Zs(),VM(c.i,c.u,c.A,c.l,c.R,c.m)}dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&jn(c)==3?d.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{let ut=jn(this.g);var d=this.g.Ba();let ho=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||vw(this.g)))){this.J||ut!=4||d==7||(d==8||0>=ho?Zs(3):Zs(2)),up(this);var f=this.g.Z();this.X=f;t:if(JI(this)){var m=vw(this.g);c="";var C=m.length,A=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),ea(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,jM(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,tt=this.g;if((Ee=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ee)){var he=Ee;break t}}he=null}if(f=he)co(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lp(this,f);else{this.o=!1,this.s=3,yt(12),ii(this),ea(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<O.length;)if(Kt=$M(this,O),Kt==ap){ut==4&&(this.s=4,yt(14),f=!1),co(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==YI){this.s=4,yt(15),co(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else co(this.i,this.l,Kt,null),lp(this,Kt);if(JI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||O.length!=0||this.h.h||(this.s=1,yt(16),f=!1),this.o=this.o&&f,!f)co(this.i,this.l,O,"[Invalid Chunked Response]"),ii(this),ea(this);else if(0<O.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),mp(ct),ct.M=!0,yt(11))}}else co(this.i,this.l,O,null),lp(this,O);ut==4&&ii(this),this.o&&!this.J&&(ut==4?bw(this.j,this):(this.o=!1,Tu(this)))}else oP(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ii(this),ea(this)}}}catch{}finally{}};function JI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $M(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?ap:(f=Number(d.substring(f,m)),isNaN(f)?YI:(m+=1,m+f>d.length?ap:(d=d.slice(m,m+f),c.C=m+f,d)))}dr.prototype.cancel=function(){this.J=!0,ii(this)};function Tu(c){c.S=Date.now()+c.I,XI(c,c.I)}function XI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Js(g(c.ba,c),d)}function up(c){c.B&&(a.clearTimeout(c.B),c.B=null)}dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(UM(this.i,this.A),this.L!=2&&(Zs(),yt(17)),ii(this),this.s=2,ea(this)):XI(this,this.S-c)};function ea(c){c.j.G==0||c.J||bw(c.j,c)}function ii(c){up(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,BI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function lp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||dp(f.h,c))){if(!c.K&&dp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Mu(f),Ru(f);else break e;gp(f),yt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Js(g(f.Za,f),6e3));if(1>=nw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else si(f,11)}else if((c.K||f.g==c)&&Mu(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let he=C[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let ct=he[3];ct!=null&&(f.la=ct,f.j.info("VER="+f.la));let ut=he[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));let ho=he[5];ho!=null&&typeof ho=="number"&&0<ho&&(m=1.5*ho,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Kt=c.g;if(Kt){let ku=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ku){var A=m.h;A.g||ku.indexOf("spdy")==-1&&ku.indexOf("quic")==-1&&ku.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(hp(A,A.h),A.h=null))}if(m.D){let yp=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;yp&&(m.ya=yp,we(m.I,m.D,yp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=Aw(m,m.J?m.ia:null,m.W),O.K){rw(m.h,O);var Ee=O,tt=m.L;tt&&(Ee.I=tt),Ee.B&&(up(Ee),Tu(Ee)),m.g=O}else Tw(m);0<f.i.length&&Nu(f)}else he[0]!="stop"&&he[0]!="close"||si(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?si(f,7):pp(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}Zs(4)}catch{}}var HM=class{constructor(c,d){this.g=c,this.map=d}};function ew(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function nw(c){return c.h?1:c.g?c.g.size:0}function dp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function hp(c,d){c.g?c.g.add(d):c.h=d}function rw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ew.prototype.cancel=function(){if(this.i=iw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function iw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function qM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function zM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function ow(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=zM(c),m=qM(c),C=m.length,A=0;A<C;A++)d.call(void 0,m[A],f&&f[A],c)}var sw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var A=c[f].substring(0,m);C=c[f].substring(m+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,Du(this,c.j),this.o=c.o,this.g=c.g,bu(this,c.s),this.l=c.l;var d=c.i,f=new ra;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),aw(this,f),this.m=c.m}else c&&(d=String(c).match(sw))?(this.h=!1,Du(this,d[1]||"",!0),this.o=ta(d[2]||""),this.g=ta(d[3]||"",!0),bu(this,d[4]),this.l=ta(d[5]||"",!0),aw(this,d[6]||"",!0),this.m=ta(d[7]||"")):(this.h=!1,this.i=new ra(null,this.h))}oi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(na(d,cw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(na(d,cw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(na(f,f.charAt(0)=="/"?QM:KM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",na(f,ZM)),c.join("")};function Vn(c){return new oi(c)}function Du(c,d,f){c.j=f?ta(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function bu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function aw(c,d,f){d instanceof ra?(c.i=d,JM(c.i,c.h)):(f||(d=na(d,YM)),c.i=new ra(d,c.h))}function we(c,d,f){c.i.set(d,f)}function Cu(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ta(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function na(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,WM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function WM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var cw=/[#\/\?@]/g,KM=/[#\?:]/g,QM=/[#\?]/g,YM=/[#\?@]/g,ZM=/#/g;function ra(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function hr(c){c.g||(c.g=new Map,c.h=0,c.i&&GM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ra.prototype,t.add=function(c,d){hr(this),this.i=null,c=uo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function uw(c,d){hr(c),d=uo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function lw(c,d){return hr(c),d=uo(c,d),c.g.has(d)}t.forEach=function(c,d){hr(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){hr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let A=0;A<C.length;A++)f.push(d[m])}return f},t.V=function(c){hr(this);let d=[];if(typeof c=="string")lw(this,c)&&(d=d.concat(this.g.get(uo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return hr(this),this.i=null,c=uo(this,c),lw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function dw(c,d,f){uw(c,d),0<f.length&&(c.i=null,c.g.set(uo(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var C=A;O[m]!==""&&(C+="="+encodeURIComponent(String(O[m]))),c.push(C)}}return this.i=c.join("&")};function uo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function JM(c,d){d&&!c.j&&(hr(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(uw(this,m),dw(this,C,f))},c)),c.j=d}function XM(c,d){let f=new Xs;if(a.Image){let m=new Image;m.onload=y(fr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(fr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(fr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(fr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function eP(c,d){let f=new Xs,m=new AbortController,C=setTimeout(()=>{m.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(C),A.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),fr(f,"TestPingServer: error",!1,d)})}function fr(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function tP(){this.g=new FM}function nP(c,d,f){let m=f||"";try{ow(c,function(C,A){let O=C;l(C)&&(O=np(C)),d.push(m+A+"="+encodeURIComponent(O))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function ia(c){this.l=c.Ub||null,this.j=c.eb||!1}b(ia,rp),ia.prototype.g=function(){return new Su(this.l,this.j)},ia.prototype.i=(function(c){return function(){return c}})({});function Su(c,d){at.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Su,at),t=Su.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,sa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?oa(this):sa(this),this.readyState==3&&hw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,oa(this))},t.Qa=function(c){this.g&&(this.response=c,oa(this))},t.ga=function(){this.g&&oa(this)};function oa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,sa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function sa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function fw(c){let d="";return me(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function fp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=fw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):we(c,d,f))}function Se(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Se,at);var rP=/^https?$/i,iP=["POST","PUT"];t=Se.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sp.g(),this.v=this.o?$I(this.o):$I(sp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){pw(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iP,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){pw(this,A)}};function pw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,gw(c),Au(c)}function gw(c){c.A||(c.A=!0,mt(c,"complete"),mt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,mt(this,"complete"),mt(this,"abort"),Au(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Au(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mw(this):this.bb())},t.bb=function(){mw(this)};function mw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)VI(c.Ea,0,c);else if(mt(c,"readystatechange"),jn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var C=String(c.D).match(sw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!rP.test(C?C.toLowerCase():"")}f=m}if(f)mt(c,"complete"),mt(c,"success");else{c.m=6;try{var A=2<jn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",gw(c)}}finally{Au(c)}}}}function Au(c,d){if(c.g){yw(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||mt(c,"ready");try{f.onreadystatechange=m}catch{}}}function yw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),LM(d)}};function vw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oP(c){let d={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var f=D(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function _w(c){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,c),this.cb=aa("retryDelaySeedMs",1e4,c),this.Wa=aa("forwardChannelMaxRetries",2,c),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ew(c&&c.concurrentRequestLimit),this.Da=new tP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_w.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){yt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Aw(this,null,this.W),Nu(this)};function pp(c){if(Ew(c),c.G==3){var d=c.U++,f=Vn(c.I);if(we(f,"SID",c.K),we(f,"RID",d),we(f,"TYPE","terminate"),ca(c,f),d=new dr(c,c.j,d),d.L=2,d.v=Cu(Vn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Rw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Tu(d)}Sw(c)}function Ru(c){c.g&&(mp(c),c.g.cancel(),c.g=null)}function Ew(c){Ru(c),c.u&&(a.clearTimeout(c.u),c.u=null),Mu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Nu(c){if(!tw(c.h)&&!c.s){c.s=!0;var d=c.Ga;zs||PI(),Gs||(zs(),Gs=!0),Wf.add(d,c),c.B=0}}function sP(c,d){return nw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Js(g(c.Ga,c,d),Cw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new dr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ww(this,C,d),f=Vn(this.I),we(f,"RID",c),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),ca(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(fw(A)))+"&"+d:this.m&&fp(f,this.m,A)),hp(this.h,C),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),C.T=!0,cp(C,f,null)):cp(C,f,d),this.G=2}}else this.G==3&&(c?Iw(this,c):this.i.length==0||tw(this.h)||Iw(this))};function Iw(c,d){var f;d?f=d.l:f=c.U++;let m=Vn(c.I);we(m,"SID",c.K),we(m,"RID",f),we(m,"AID",c.T),ca(c,m),c.m&&c.o&&fp(m,c.m,c.o),f=new dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ww(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),hp(c.h,f),cp(f,m,d)}function ca(c,d){c.H&&me(c.H,function(f,m){we(d,m,f)}),c.l&&ow({},function(f,m){we(d,m,f)})}function ww(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=C[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ee=!0;for(let tt=0;tt<f;tt++){let he=C[tt].g,ct=C[tt].map;if(he-=A,0>he)A=Math.max(0,C[tt].g-100),Ee=!1;else try{nP(ct,O,"req"+he+"_")}catch{m&&m(ct)}}if(Ee){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function Tw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;zs||PI(),Gs||(zs(),Gs=!0),Wf.add(d,c),c.v=0}}function gp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Js(g(c.Fa,c),Cw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Dw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Js(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Ru(this),Dw(this))};function mp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Dw(c){c.g=new dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Vn(c.qa);we(d,"RID","rpc"),we(d,"SID",c.K),we(d,"AID",c.T),we(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(d,"TO",c.ja),we(d,"TYPE","xmlhttp"),ca(c,d),c.m&&c.o&&fp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Cu(Vn(d)),f.m=null,f.P=!0,ZI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Ru(this),gp(this),yt(19))};function Mu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function bw(c,d){var f=null;if(c.g==d){Mu(c),mp(c),c.g=null;var m=2}else if(dp(c.h,d))f=d.D,rw(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=Eu(),mt(m,new WI(m,f)),Nu(c)}else Tw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&sP(c,d)||m==2&&gp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:si(c,5);break;case 4:si(c,10);break;case 3:si(c,6);break;default:si(c,2)}}}function Cw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function si(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new oi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Du(m,"https"),Cu(m),C?XM(m.toString(),f):eP(m.toString(),f)}else yt(2);c.G=0,c.l&&c.l.sa(d),Sw(c),Ew(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Sw(c){if(c.G=0,c.ka=[],c.l){let d=iw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Aw(c,d,f){var m=f instanceof oi?Vn(f):new oi(f);if(m.g!="")d&&(m.g=d+"."+m.g),bu(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new oi(null);m&&Du(A,m),d&&(A.g=d),C&&bu(A,C),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&we(m,f,d),we(m,"VER",c.la),ca(c,m),m}function Rw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Se(new ia({eb:f})):new Se(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nw(){}t=Nw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pu(){}Pu.prototype.g=function(c,d){return new St(c,d)};function St(c,d){at.call(this),this.g=new _w(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new lo(this)}b(St,at),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){pp(this.g)},St.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=np(c),c=f);d.i.push(new HM(d.Ya++,c)),d.G==3&&Nu(d)},St.prototype.N=function(){this.g.l=null,delete this.j,pp(this.g),delete this.g,St.aa.N.call(this)};function Mw(c){ip.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Mw,ip);function Pw(){op.call(this),this.status=1}b(Pw,op);function lo(c){this.g=c}b(lo,Nw),lo.prototype.ua=function(){mt(this.g,"a")},lo.prototype.ta=function(c){mt(this.g,new Mw(c))},lo.prototype.sa=function(c){mt(this.g,new Pw)},lo.prototype.ra=function(){mt(this.g,"b")},Pu.prototype.createWebChannel=Pu.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,y_=rr.createWebChannelTransport=function(){return new Pu},m_=rr.getStatEventTarget=function(){return Eu()},g_=rr.Event=ri,qh=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Iu.NO_ERROR=0,Iu.TIMEOUT=8,Iu.HTTP_ERROR=6,qc=rr.ErrorCode=Iu,KI.COMPLETE="complete",p_=rr.EventType=KI,HI.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",at.prototype.listen=at.prototype.K,Es=rr.WebChannel=HI,_$=rr.FetchXmlHttpFactory=ia,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,f_=rr.XhrIo=Se}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});var H0="@firebase/firestore",q0="4.8.0";var Xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");var Us="11.10.0";var eo=new Sn("@firebase/firestore");function Is(){return eo.logLevel}function F(t,...e){if(eo.logLevel<=ae.DEBUG){let n=e.map(oI);eo.debug(`Firestore (${Us}): ${t}`,...n)}}function ir(t,...e){if(eo.logLevel<=ae.ERROR){let n=e.map(oI);eo.error(`Firestore (${Us}): ${t}`,...n)}}function Zr(t,...e){if(eo.logLevel<=ae.WARN){let n=e.map(oI);eo.warn(`Firestore (${Us}): ${t}`,...n)}}function oI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,LR(t,r,n)}function LR(t,e,n){let r=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||LR(e,i,r)}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Vt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var an=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Zh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},w_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xe.UNAUTHENTICATED))}shutdown(){}},T_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},D_=class{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new an;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new an,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new an)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new Zh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Xe(e)}},b_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},C_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new b_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},S_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function E$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function FR(){return new TextEncoder}var Yc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=E$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ie(t,e){return t<e?-1:t>e?1:0}function A_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=FR(),s=I$(o.encode(z0(t,n)),o.encode(z0(e,n)));return s!==0?s:ie(r,i)}}n+=r>65535?2:1}return ie(t.length,e.length)}function z0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function I$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ie(t[n],e[n]);return ie(t.length,e.length)}function As(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var G0="__name__",Xh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ie(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):A_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}},Ce=class t extends Xh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},w$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ut=class t extends Xh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return w$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G0}static keyField(){return new t([G0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};function VR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function W0(t){if(!B.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K0(t){if(B.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function Ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Pf(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function D$(t,e){if(e<=0)throw new L(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ue(t,e){let n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!jR(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}var Q0=-62135596800,Y0=1e6,Be=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Y0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Q0)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Ue("string",Be._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Be(0,0))}static max(){return new t(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zc=-1,R_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};R_.UNKNOWN_ID=-1;function b$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new to(i,B.empty(),e)}function C$(t){return new to(t.readTime,t.key,Zc)}var to=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),B.empty(),Zc)}static max(){return new t(te.max(),B.empty(),Zc)}};function S$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}var A$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",N_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bs(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==A$)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function R$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $s(t){return t.name==="IndexedDbTransactionError"}var sI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),aI=-1;function kf(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function N$(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var UR="";function M$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Z0(e)),e=P$(t.get(n),e);return Z0(e)}function P$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case UR:n+="";break;default:n+=o}}return n}function Z0(t){return t+UR+""}var k$="remoteDocuments",BR="owner";var $R="mutationQueues";var HR="mutations";var qR="documentMutations",x$="remoteDocumentsV14";var zR="remoteDocumentGlobal";var GR="targets";var WR="targetDocuments";var KR="targetGlobal",QR="collectionParents";var YR="clientMetadata";var ZR="bundles";var JR="namedQueries";var O$="indexConfiguration";var L$="indexState";var F$="indexEntries";var XR="documentOverlays";var V$="globals";var j$=[$R,HR,qR,k$,GR,BR,KR,WR,YR,zR,QR,ZR,JR],Zre=[...j$,XR],U$=[$R,HR,qR,x$,GR,BR,KR,WR,YR,zR,QR,ZR,JR,XR],B$=U$,$$=[...B$,O$,L$,F$];var Jre=[...$$,V$];function J0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ni(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bs(this.root,e,this.comparator,!1)}getReverseIterator(){return new bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bs(this.root,e,this.comparator,!0)}},bs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var et=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ef(this.data.getIterator())}getIteratorFrom(e){return new ef(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ef=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wt=class t{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new et(Ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var tf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var pt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pt.EMPTY_BYTE_STRING=new pt("");var H$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=H$.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}var tN="server_timestamp",nN="__type__",rN="__previous_value__",iN="__local_write_time__";function cI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[nN])===null||n===void 0?void 0:n.stringValue)===tN}function xf(t){let e=t.mapValue.fields[rN];return cI(e)?xf(e):e}function Xc(t){let e=or(t.mapValue.fields[iN].timestampValue);return new Be(e.seconds,e.nanos)}var M_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},nf="(default)",rf=class t{constructor(e,n){this.projectId=e,this.database=n||nf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var uI="__type__",oN="__max__",zh={mapValue:{fields:{__type__:{stringValue:oN}}}},lI="__vector__",Rs="value";function Jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cI(t)?4:aN(t)?9007199254740991:sN(t)?10:11:q(28295,{value:t})}function On(t,e){if(t===e)return!0;let n=Jr(t);if(n!==Jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xc(t).isEqual(Xc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return sr(i.bytesValue).isEqual(sr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?Jc(s)===Jc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(J0(s)!==J0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!On(s[u],a[u])))return!1;return!0})(t,e);default:return q(52216,{left:t})}}function eu(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function Ns(t,e){if(t===e)return 0;let n=Jr(t),r=Jr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return X0(t.timestampValue,e.timestampValue);case 4:return X0(Xc(t),Xc(e));case 5:return A_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=sr(o),u=sr(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ie(be(o.latitude),be(s.latitude));return a!==0?a:ie(be(o.longitude),be(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return eR(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Rs])===null||a===void 0?void 0:a.arrayValue,b=(u=g[Rs])===null||u===void 0?void 0:u.arrayValue,N=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:eR(y,b)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===zh.mapValue&&s===zh.mapValue)return 0;if(o===zh.mapValue)return 1;if(s===zh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=A_(u[p],h[p]);if(g!==0)return g;let y=Ns(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)})(t.mapValue,e.mapValue);default:throw q(23264,{le:n})}}function X0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);let n=or(t),r=or(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function eR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ns(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function Ms(t){return P_(t)}function P_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return sr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return B.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=P_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${P_(n.fields[s])}`;return i+"}"})(t.mapValue):q(61005,{value:t})}function Kh(t){switch(Jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=xf(t);return e?16+Kh(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Kh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ni(r.fields,(o,s)=>{i+=o.length+Kh(s)}),i})(t.mapValue);default:throw q(13486,{value:t})}}function tR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k_(t){return!!t&&"integerValue"in t}function dI(t){return!!t&&"arrayValue"in t}function nR(t){return!!t&&"nullValue"in t}function rR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qh(t){return!!t&&"mapValue"in t}function sN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uI])===null||n===void 0?void 0:n.stringValue)===lI}function Gc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===oN}var eie={mapValue:{fields:{[uI]:{stringValue:lI},[Rs]:{arrayValue:{}}}}};var jt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(n)}setAll(e){let n=Ut.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Gc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ni(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Gc(this.value))}};function cN(t){let e=[];return ni(t.fields,(n,r)=>{let i=new Ut([n]);if(Qh(r)){let o=cN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wt(e)}var cn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ps=class{constructor(e,n){this.position=e,this.inclusive=n}};function iR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=Ns(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function oR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}var no=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function q$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var of=class{},je=class t extends of{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new O_(e,n,r):n==="array-contains"?new V_(e,r):n==="in"?new j_(e,r):n==="not-in"?new U_(e,r):n==="array-contains-any"?new B_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new L_(e,r):new F_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ns(n,this.value)):n!==null&&Jr(this.value)===Jr(n)&&this.matchesComparison(Ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},un=class t extends of{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return uN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function uN(t){return t.op==="and"}function lN(t){return z$(t)&&uN(t)}function z$(t){for(let e of t.filters)if(e instanceof un)return!1;return!0}function x_(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(lN(t))return t.filters.map(e=>x_(e)).join(",");{let e=t.filters.map(n=>x_(n)).join(",");return`${t.op}(${e})`}}function dN(t,e){return t instanceof je?(function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)})(t,e):t instanceof un?(function(r,i){return i instanceof un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&dN(s,i.filters[a]),!0):!1})(t,e):void q(19439)}function hN(t){return t instanceof je?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`})(t):t instanceof un?(function(n){return n.op.toString()+" {"+n.getFilters().map(hN).join(" ,")+"}"})(t):"Filter"}var O_=class extends je{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},L_=class extends je{constructor(e,n){super(e,"in",n),this.keys=fN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},F_=class extends je{constructor(e,n){super(e,"not-in",n),this.keys=fN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function fN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var V_=class extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return dI(n)&&eu(n.arrayValue,this.value)}},j_=class extends je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&eu(this.value.arrayValue,n)}},U_=class extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eu(this.value.arrayValue,n)}},B_=class extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!dI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eu(this.value.arrayValue,r))}};var $_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function sR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new $_(t,e,n,r,i,o,s)}function hI(t){let e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>x_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),kf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.Pe=n}return e.Pe}function fI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!q$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oR(t.startAt,e.startAt)&&oR(t.endAt,e.endAt)}function H_(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Xr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function G$(t,e,n,r,i,o,s,a){return new Xr(t,e,n,r,i,o,s,a)}function Of(t){return new Xr(t)}function aR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pN(t){return t.collectionGroup!==null}function Wc(t){let e=J(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new et(Ut.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new no(o,r))}),n.has(Ut.keyField().canonicalString())||e.Te.push(new no(Ut.keyField(),r))}return e.Te}function Pn(t){let e=J(t);return e.Ie||(e.Ie=W$(e,Wc(t))),e.Ie}function W$(t,e){if(t.limitType==="F")return sR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new no(i.field,o)});let n=t.endAt?new Ps(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ps(t.startAt.position,t.startAt.inclusive):null;return sR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function q_(t,e){let n=t.filters.concat([e]);return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sf(t,e,n){return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lf(t,e){return fI(Pn(t),Pn(e))&&t.limitType===e.limitType}function gN(t){return`${hI(Pn(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hN(i)).join(", ")}]`),kf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ms(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ms(i)).join(",")),`Target(${r})`})(Pn(t))}; limitType=${t.limitType})`}function Ff(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Wc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=iR(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Wc(r),i)||r.endAt&&!(function(s,a,u){let l=iR(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Wc(r),i))})(t,e)}function K$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mN(t){return(e,n)=>{let r=!1;for(let i of Wc(t)){let o=Q$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Q$(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ns(u,l):q(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var ar=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return eN(this.inner)}size(){return this.innerSize}};var Y$=new Me(B.comparator);function cr(){return Y$}var yN=new Me(B.comparator);function zc(...t){let e=yN;for(let n of t)e=e.insert(n.key,n);return e}function vN(t){let e=yN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qi(){return Kc()}function _N(){return Kc()}function Kc(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}var Z$=new Me(B.comparator),J$=new et(B.comparator);function ue(...t){let e=J$;for(let n of t)e=e.add(n);return e}var X$=new et(ie);function eH(){return X$}function pI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function EN(t){return{integerValue:""+t}}function tH(t,e){return N$(e)?EN(e):pI(t,e)}var ks=class{constructor(){this._=void 0}};function nH(t,e,n){return t instanceof xs?(function(i,o){let s={fields:{[nN]:{stringValue:tN},[iN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cI(o)&&(o=xf(o)),o&&(s.fields[rN]=o),{mapValue:s}})(n,e):t instanceof ro?wN(t,e):t instanceof io?TN(t,e):(function(i,o){let s=IN(i,o),a=cR(s)+cR(i.Ee);return k_(s)&&k_(i.Ee)?EN(a):pI(i.serializer,a)})(t,e)}function rH(t,e,n){return t instanceof ro?wN(t,e):t instanceof io?TN(t,e):n}function IN(t,e){return t instanceof Os?(function(r){return k_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var xs=class extends ks{},ro=class extends ks{constructor(e){super(),this.elements=e}};function wN(t,e){let n=DN(e);for(let r of t.elements)n.some(i=>On(i,r))||n.push(r);return{arrayValue:{values:n}}}var io=class extends ks{constructor(e){super(),this.elements=e}};function TN(t,e){let n=DN(e);for(let r of t.elements)n=n.filter(i=>!On(i,r));return{arrayValue:{values:n}}}var Os=class extends ks{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function cR(t){return be(t.integerValue||t.doubleValue)}function DN(t){return dI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function iH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ro&&i instanceof ro||r instanceof io&&i instanceof io?As(r.elements,i.elements,On):r instanceof Os&&i instanceof Os?On(r.Ee,i.Ee):r instanceof xs&&i instanceof xs})(t.transform,e.transform)}var z_=class{constructor(e,n){this.version=e,this.transformResults=n}},kn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ls=class{};function bN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tu(t.key,kn.none()):new oo(t.key,t.data,kn.none());{let n=t.data,r=jt.empty(),i=new et(Ut.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ln(t.key,r,new Wt(i.toArray()),kn.none())}}function oH(t,e,n){t instanceof oo?(function(i,o,s){let a=i.value.clone(),u=lR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Ln?(function(i,o,s){if(!Yh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=lR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(CN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Qc(t,e,n,r){return t instanceof oo?(function(o,s,a,u){if(!Yh(o.precondition,s))return a;let l=o.value.clone(),h=dR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ln?(function(o,s,a,u){if(!Yh(o.precondition,s))return a;let l=dR(o.fieldTransforms,u,s),h=s.data;return h.setAll(CN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Yh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function sH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=IN(r.transform,i||null);o!=null&&(n===null&&(n=jt.empty()),n.set(r.field,o))}return n||null}function uR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&As(r,i,(o,s)=>iH(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var oo=class extends Ls{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends Ls{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function lR(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,rH(s,a,n[i]))}return r}function dR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,nH(o,s,e))}return r}var tu=class extends Ls{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},G_=class extends Ls{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var W_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&oH(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=_N();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=bN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(n,r)=>uR(n,r))&&As(this.baseMutations,e.baseMutations,(n,r)=>uR(n,r))}},K_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Z$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Q_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Y_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,de;function aH(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function SN(t){if(t===void 0)return ir("GRPC error has no .code"),M.UNKNOWN;switch(t){case Fe.OK:return M.OK;case Fe.CANCELLED:return M.CANCELLED;case Fe.UNKNOWN:return M.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return M.INTERNAL;case Fe.UNAVAILABLE:return M.UNAVAILABLE;case Fe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Fe.NOT_FOUND:return M.NOT_FOUND;case Fe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Fe.ABORTED:return M.ABORTED;case Fe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Fe.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(de=Fe||(Fe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var hR=null;var cH=new nr([4294967295,4294967295],0);function fR(t){let e=FR().encode(t),n=new h_;return n.update(e),new Uint8Array(n.digest())}function pR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new nr([n,r],0),new nr([i,o],0)]}var Z_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yi(`Invalid padding: ${n}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=nr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(nr.fromNumber(r)));return i.compare(cH)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=fR(e),[r,i]=pR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=fR(e),[r,i]=pR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var af=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Me(ie),cr(),ue())}},nu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var Cs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},cf=class{constructor(e,n){this.targetId=e,this.De=n}},uf=class{constructor(e,n,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},lf=class{constructor(){this.ve=0,this.Ce=gR(),this.Fe=pt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),n=ue(),r=ue();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new nu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=gR()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},J_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=cr(),this.je=Gh(),this.Je=Gh(),this.He=new Me(ie)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(H_(o))if(r===0){let s=new B(o.path);this.Xe(n,s,cn.newNoDocument(s,te.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}hR?.ct((function(h,p,g,y,b){var N,R,x,$,K,_e;let gt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},me=p.unchangedNames;return me&&(gt.bloomFilter={applied:b===0,hashCount:(N=me?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(x=(R=me?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&$!==void 0?$:0,padding:(_e=(K=me?.bits)===null||K===void 0?void 0:K.padding)!==null&&_e!==void 0?_e:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),gt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=sr(r).toUint8Array()}catch(u){if(u instanceof tf)return Zr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Z_(s,i,o)}catch(u){return Zr(u instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&H_(a.target)){let u=new B(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,cn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ue();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new af(e,n,this.He,this.ze,r);return this.ze=cr(),this.je=Gh(),this.Je=Gh(),this.He=new Me(ie),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new lf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new et(ie),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new et(ie),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Gh(){return new Me(B.comparator)}function gR(){return new Me(B.comparator)}var uH={asc:"ASCENDING",desc:"DESCENDING"},lH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dH={and:"AND",or:"OR"},X_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function eE(t,e){return t.useProto3Json||kf(e)?e:{value:e}}function df(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hH(t,e){return df(t,e.toTimestamp())}function xn(t){return ge(!!t,49232),te.fromTimestamp((function(n){let r=or(n);return new Be(r.seconds,r.nanos)})(t))}function gI(t,e){return tE(t,e).canonicalString()}function tE(t,e){let n=(function(i){return new Ce(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function RN(t){let e=Ce.fromString(t);return ge(xN(e),10190,{key:e.toString()}),e}function nE(t,e){return gI(t.databaseId,e.path)}function v_(t,e){let n=RN(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(MN(n))}function NN(t,e){return gI(t.databaseId,e)}function fH(t){let e=RN(t);return e.length===4?Ce.emptyPath():MN(e)}function rE(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MN(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mR(t,e,n){return{name:nE(t,e),fields:n.value.mapValue.fields}}function pH(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),pt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),pt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?M.UNKNOWN:SN(l.code);return new L(h,l.message||"")})(s);n=new uf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=v_(t,r.document.name),o=xn(r.document.updateTime),s=r.document.createTime?xn(r.document.createTime):te.min(),a=new jt({mapValue:{fields:r.document.fields}}),u=cn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Cs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=v_(t,r.document),o=r.readTime?xn(r.readTime):te.min(),s=cn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Cs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=v_(t,r.document),o=r.removedTargetIds||[];n=new Cs([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Y_(i,o),a=r.targetId;n=new cf(a,s)}}return n}function gH(t,e){let n;if(e instanceof oo)n={update:mR(t,e.key,e.value)};else if(e instanceof tu)n={delete:nE(t,e.key)};else if(e instanceof Ln)n={update:mR(t,e.key,e.data),updateMask:DH(e.fieldMask)};else{if(!(e instanceof G_))return q(16599,{Rt:e.type});n={verify:nE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof xs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ro)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof io)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Os)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:hH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(t,e.precondition)),n}function mH(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?xn(i.updateTime):xn(o);return s.isEqual(te.min())&&(s=xn(o)),new z_(s,i.transformResults||[])})(n,e))):[]}function yH(t,e){return{documents:[NN(t,e.path)]}}function vH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NN(t,i);let o=(function(l){if(l.length!==0)return kN(un.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Ts(g.field),direction:IH(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=eE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function _H(t){let e=fH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=PN(p);return g instanceof un&&lN(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(b){return new no(Ds(b.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,kf(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Ps(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ps(y,g)})(n.endAt)),G$(e,i,s,o,a,"F",u,l)}function EH(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ds(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ds(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ds(n.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ds(n.unaryFilter.field);return je.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return je.create(Ds(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return un.create(n.compositeFilter.filters.map(r=>PN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(n.compositeFilter.op))})(t):q(30097,{filter:t})}function IH(t){return uH[t]}function wH(t){return lH[t]}function TH(t){return dH[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ds(t){return Ut.fromServerFormat(t.fieldPath)}function kN(t){return t instanceof je?(function(n){if(n.op==="=="){if(rR(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(nR(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rR(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(nR(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:wH(n.op),value:n.value}}})(t):t instanceof un?(function(n){let r=n.getFilters().map(i=>kN(i));return r.length===1?r[0]:{compositeFilter:{op:TH(n.op),filters:r}}})(t):q(54877,{filter:t})}function DH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ru=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var iE=class{constructor(e){this.gt=e}};function bH(t){let e=_H({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sf(e,e.limit,"L"):e}var hf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Jc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=or(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(sr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?aN(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):sN(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Rs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(be(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),B.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};hf.Ut=new hf;var oE=class{constructor(){this.Dn=new sE}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(to.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(to.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},sE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(Ce.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Ce.comparator)).toArray()}};var tie=new Uint8Array(0);var yR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ON=41943040,Gt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(ON,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);var iu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var vR="LruGarbageCollector",CH=1048576;function _R([t,e],[n,r]){let i=ie(t,n);return i===0?ie(e,r):i}var aE=class{constructor(e){this.Tr=e,this.buffer=new et(_R),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();_R(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},cE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(vR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){$s(n)?F(vR,"Ignoring IndexedDB error during garbage collection: ",n):yield Bs(n)}yield this.Rr(3e5)}))}},uE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(sI.ue);let r=new aE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(yR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yR):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Is()<=ae.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function SH(t,e){return new uE(t,e)}var lE=class{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var hE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Qc(r.mutation,i,Wt.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=Qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=zc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=cr(),s=Kc(),a=(function(){return Kc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Qc(h.mutation,l,h.mutation.getFieldMask(),Be.now())):s.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new dE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Kc(),i=new Me((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=_N();h.forEach(g=>{if(!o.has(g)){let y=bN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Qi()),a=Zc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:vN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=zc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=zc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,g){return new Xr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,cn.newInvalidDocument(h)))});let a=zc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Qc(h.mutation,l,Wt.empty(),Be.now()),Ff(n,l)&&(a=a.insert(u,l))}),a})}};var fE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:bH(i.bundledQuery),readTime:xn(i.readTime)}})(n)),P.resolve()}};var pE=class{constructor(){this.overlays=new Me(B.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Qi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Qi(),o=n.length+1,s=new B(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Qi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Qi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Q_(n,r));let o=this.kr.get(n);o===void 0&&(o=ue(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var gE=class{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var ou=class{constructor(){this.qr=new et(Ve.Qr),this.$r=new et(Ve.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ve(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new B(new Ce([])),r=new Ve(n,e),i=new Ve(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new B(new Ce([])),r=new Ve(n,e),i=new Ve(n,e+1),o=ue();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ve(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return B.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||B.comparator(e.key,n.key)}};var mE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new et(Ve.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new W_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ve(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?aI:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ie);return n.forEach(i=>{let o=new Ve(i,0),s=new Ve(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ve(new B(o),0),a=new et(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Ve(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ve(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var yE=class{constructor(e){this.ni=e,this.docs=(function(){return new Me(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr(),s=n.path,a=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||S$(C$(h),r)<=0||(i.has(h.key)||Ff(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vE(this)}getSize(e){return P.resolve(this.size)}},vE=class extends lE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var _E=class{constructor(e){this.persistence=e,this.ii=new ar(n=>hI(n),fI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new ou,this.targetCount=0,this._i=iu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new iu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var ff=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new sI(0),this.ci=!1,this.ci=!0,this.li=new gE,this.referenceDelegate=e(this),this.hi=new _E(this),this.indexManager=new oE,this.remoteDocumentCache=(function(i){return new yE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new iE(n),this.Ti=new fE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new mE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new EE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},EE=class extends N_{constructor(e){super(),this.currentSequenceNumber=e}},IE=class t{constructor(e){this.persistence=e,this.Ai=new ou,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=B.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},pf=class t{constructor(e,n){this.persistence=e,this.gi=new ar(r=>M$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=SH(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kh(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var wE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ue(),i=ue();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var TE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var DE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return fA()?8:R$(Je())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new TE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Is()<=ae.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Is()<=ae.DEBUG&&F("QueryEngine","Query:",ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Is()<=ae.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):P.resolve())}ps(e,n){if(aR(n))return P.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sf(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,sf(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return aR(n)||i.isEqual(te.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Is()<=ae.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ws(n)),this.vs(e,s,n,b$(i,Zc)).next(a=>a))})}bs(e,n){let r=new et(mN(e));return n.forEach((i,o)=>{Ff(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Is()<=ae.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ws(n)),this.gs.getDocumentsMatchingQuery(e,n,to.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var mI="LocalStore",AH=3e8,bE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Me(ie),this.Ms=new ar(o=>hI(o),fI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function RH(t,e,n,r){return new bE(t,e,n,r)}function LN(t,e){return _(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function NH(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(N=>{let R=l.docVersions.get(b);ge(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FN(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function MH(t,e){let n=J(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(pt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=AH?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=cr(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(PH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function PH(t,e,n){let r=ue(),i=ue();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(mI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function kH(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=aI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xH(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new ru(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function CE(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!$s(s))throw s;F(mI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function ER(t,e,n){let r=J(t),i=te.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,Pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:ue())).next(a=>(OH(r,K$(e),a),{documents:a,qs:o})))}function OH(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var gf=class{constructor(){this.activeTargetIds=eH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var SE=class{constructor(){this.Fo=new gf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new gf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var AE=class{xo(e){}shutdown(){}};var IR="ConnectivityMonitor",mf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(IR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(IR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wh=null;function RE(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}var __="RestConnection",LH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},NE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===nf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=RE(),a=this.Go(e,n.toUriEncodedString());F(__,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Lr(l);return this.jo(e,a,u,r,h).then(p=>(F(__,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Zr(__,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Us})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=LH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var ME=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ft="WebChannelConnection",PE=class extends NE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=RE();return new Promise((a,u)=>{let l=new f_;l.setWithCredentials(!0),l.listenOnce(p_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qc.NO_ERROR:let p=l.getResponseJson();F(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case qc.TIMEOUT:F(ft,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:let g=l.getStatus();if(F(ft,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let b=y?.error;if(b&&b.status&&b.message){let N=(function(x){let $=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf($)>=0?$:M.UNKNOWN})(b.status);u(new L(N,b.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(ft,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(ft,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=RE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y_(),a=m_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(ft,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,b=new ME({Ho:R=>{y?F(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(F(ft,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),F(ft,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,x,$)=>{R.listen(x,K=>{try{$(K)}catch(_e){setTimeout(()=>{throw _e},0)}})};return N(p,Es.EventType.OPEN,()=>{y||(F(ft,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),N(p,Es.EventType.CLOSE,()=>{y||(y=!0,F(ft,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(p))}),N(p,Es.EventType.ERROR,R=>{y||(y=!0,Zr(ft,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),b.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Es.EventType.MESSAGE,R=>{var x;if(!y){let $=R.data[0];ge(!!$,16349);let K=$,_e=K?.error||((x=K[0])===null||x===void 0?void 0:x.error);if(_e){F(ft,`RPC '${e}' stream ${i} received error:`,_e);let gt=_e.status,me=(function(I){let w=Fe[I];if(w!==void 0)return SN(w)})(gt),T=_e.message;me===void 0&&(me=M.INTERNAL,T="Unknown error status: "+gt+" with message "+_e.message),y=!0,b.__(new L(me,T)),p.close()}else F(ft,`RPC '${e}' stream ${i} received:`,$),b.a_($)}}),N(a,g_.STAT_EVENT,R=>{R.stat===qh.PROXY?F(ft,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===qh.NOPROXY&&F(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function E_(){return typeof document<"u"?document:null}function Vf(t){return new X_(t,!0)}var yf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var wR="PersistentStream",vf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new yf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(wR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(wR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kE=class extends vf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=pH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?xn(s.readTime):te.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=rE(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=H_(u)?{documents:yH(o,u)}:{query:vH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AN(o,s.resumeToken);let l=eE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=df(o,s.snapshotVersion.toTimestamp());let l=eE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=EH(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=rE(this.serializer),n.removeTarget=e,this.k_(n)}},xE=class extends vf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=mH(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=rE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>gH(this.serializer,r))};this.k_(n)}};var OE=class{},LE=class extends OE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,tE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,tE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},FE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ir(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var so="RemoteStore",VE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){ao(this)&&(F(so,"Restarting streams for network reachability change."),yield(function(u){return _(this,null,function*(){let l=J(u);l.Ia.add(4),yield fu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield jf(l)})})(this))}))}),this.Aa=new FE(r,i)}};function jf(t){return _(this,null,function*(){if(ao(t))for(let e of t.da)yield e(!0)})}function fu(t){return _(this,null,function*(){for(let e of t.da)yield e(!1)})}function VN(t,e){let n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),EI(n)?_I(n):Hs(n).x_()&&vI(n,e))}function yI(t,e){let n=J(t),r=Hs(n);n.Ta.delete(e),r.x_()&&jN(n,e),n.Ta.size===0&&(r.x_()?r.B_():ao(n)&&n.Aa.set("Unknown"))}function vI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(t).H_(e)}function jN(t,e){t.Ra.$e(e),Hs(t).Y_(e)}function _I(t){t.Ra=new J_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Hs(t).start(),t.Aa.aa()}function EI(t){return ao(t)&&!Hs(t).M_()&&t.Ta.size>0}function ao(t){return J(t).Ia.size===0}function UN(t){t.Ra=void 0}function FH(t){return _(this,null,function*(){t.Aa.set("Online")})}function VH(t){return _(this,null,function*(){t.Ta.forEach((e,n)=>{vI(t,e)})})}function jH(t,e){return _(this,null,function*(){UN(t),EI(t)?(t.Aa.la(e),_I(t)):t.Aa.set("Unknown")})}function UH(t,e,n){return _(this,null,function*(){if(t.Aa.set("Online"),e instanceof uf&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){F(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _f(t,r)}else if(e instanceof Cs?t.Ra.Ye(e):e instanceof cf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{let r=yield FN(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),jN(o,u);let p=new ru(h.target,u,l,h.sequenceNumber);vI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){F(so,"Failed to raise snapshot:",r),yield _f(t,r)}})}function _f(t,e,n){return _(this,null,function*(){if(!$s(e))throw e;t.Ia.add(1),yield fu(t),t.Aa.set("Offline"),n||(n=()=>FN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){F(so,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield jf(t)}))})}function BN(t,e){return e().catch(n=>_f(t,n,e))}function Uf(t){return _(this,null,function*(){let e=J(t),n=ei(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:aI;for(;BH(e);)try{let i=yield kH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,$H(e,i)}catch(i){yield _f(e,i)}$N(e)&&HN(e)})}function BH(t){return ao(t)&&t.Pa.length<10}function $H(t,e){t.Pa.push(e);let n=ei(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function $N(t){return ao(t)&&!ei(t).M_()&&t.Pa.length>0}function HN(t){ei(t).start()}function HH(t){return _(this,null,function*(){ei(t).na()})}function qH(t){return _(this,null,function*(){let e=ei(t);for(let n of t.Pa)e.X_(n.mutations)})}function zH(t,e,n){return _(this,null,function*(){let r=t.Pa.shift(),i=K_.from(r,e,n);yield BN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Uf(t)})}function GH(t,e){return _(this,null,function*(){e&&ei(t).Z_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return aH(s)&&s!==M.ABORTED})(i.code)){let o=r.Pa.shift();ei(r).N_(),yield BN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Uf(r)}})})(t,e)),$N(t)&&HN(t)})}function TR(t,e){return _(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),F(so,"RemoteStore received new credentials");let r=ao(n);n.Ia.add(3),yield fu(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield jf(n)})}function WH(t,e){return _(this,null,function*(){let n=J(t);e?(n.Ia.delete(2),yield jf(n)):e||(n.Ia.add(2),yield fu(n),n.Aa.set("Unknown"))})}function Hs(t){return t.Va||(t.Va=(function(n,r,i){let o=J(n);return o.ia(),new kE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:FH.bind(null,t),e_:VH.bind(null,t),n_:jH.bind(null,t),J_:UH.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.Va.N_(),EI(t)?_I(t):t.Aa.set("Unknown")):(yield t.Va.stop(),UN(t))}))),t.Va}function ei(t){return t.ma||(t.ma=(function(n,r,i){let o=J(n);return o.ia(),new xE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:HH.bind(null,t),n_:GH.bind(null,t),ea:qH.bind(null,t),ta:zH.bind(null,t)}),t.da.push(e=>_(null,null,function*(){e?(t.ma.N_(),yield Uf(t)):(yield t.ma.stop(),t.Pa.length>0&&(F(so,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var jE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function II(t,e){if(ir("AsyncQueue",`${e}: ${t}`),$s(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Ef=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=zc(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var If=class{constructor(){this.fa=new Me(B.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Fs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ef.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var UE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},BE=class{constructor(){this.queries=DR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=J(n),o=i.queries;i.queries=DR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function DR(){return new ar(t=>gN(t),Lf)}function wI(t,e){return _(this,null,function*(){let n=J(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new UE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=II(s,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&DI(n)})}function TI(t,e){return _(this,null,function*(){let n=J(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function KH(t,e){let n=J(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&DI(n)}function QH(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function DI(t){t.Da.forEach(e=>{e.next()})}var $E,bR;(bR=$E||($E={})).Fa="default",bR.Cache="cache";var su=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$E.Cache}};var wf=class{constructor(e){this.key=e}},Tf=class{constructor(e){this.key=e}},HE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=mN(e),this.eu=new Ef(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new If,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Ff(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?b!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,b){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(b)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Fs(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new If,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Tf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new wf(r))}),n}uu(e){this.Ha=e.qs,this.Za=ue();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Fs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},bI="SyncEngine",qE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},zE=class{constructor(e){this.key=e,this.lu=!1}},GE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ar(a=>gN(a),Lf),this.Tu=new Map,this.Iu=new Set,this.du=new Me(B.comparator),this.Eu=new Map,this.Au=new ou,this.Ru={},this.Vu=new Map,this.mu=iu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function YH(t,e,n=!0){return _(this,null,function*(){let r=QN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield qN(r,e,n,!0),i})}function ZH(t,e){return _(this,null,function*(){let n=QN(t);yield qN(n,e,!0,!1)})}function qN(t,e,n,r){return _(this,null,function*(){let i=yield xH(t.localStore,Pn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield JH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&VN(t.remoteStore,i),a})}function JH(t,e,n,r,i){return _(this,null,function*(){t.gu=(p,g,y)=>(function(N,R,x,$){return _(this,null,function*(){let K=R.view.nu(x);K.Ds&&(K=yield ER(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,K)));let _e=$&&$.targetChanges.get(R.targetId),gt=$&&$.targetMismatches.get(R.targetId)!=null,me=R.view.applyChanges(K,N.isPrimaryClient,_e,gt);return SR(N,R.targetId,me._u),me.snapshot})})(t,p,g,y);let o=yield ER(t.localStore,e,!0),s=new HE(e,o.qs),a=s.nu(o.documents),u=nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);SR(t,n,l._u);let h=new qE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function XH(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Lf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield CE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yI(r.remoteStore,i.targetId),WE(r,i.targetId)}).catch(Bs))):(WE(r,i.targetId),yield CE(r.localStore,i.targetId,!0))})}function e4(t,e){return _(this,null,function*(){let n=J(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yI(n.remoteStore,r.targetId))})}function t4(t,e,n){return _(this,null,function*(){let r=c4(t);try{let i=yield(function(s,a){let u=J(s),l=Be.now(),h=a.reduce((y,b)=>y.add(b.key),ue()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=cr(),N=ue();return u.Os.getEntries(y,h).next(R=>{b=R,b.forEach((x,$)=>{$.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(R=>{p=R;let x=[];for(let $ of a){let K=sH($,p.get($.key).overlayedDocument);K!=null&&x.push(new Ln($.key,K,cN(K.value.mapValue),kn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:vN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Me(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield pu(r,i.changes),yield Uf(r.remoteStore)}catch(i){let o=II(i,"Failed to persist write");n.reject(o)}})}function zN(t,e){return _(this,null,function*(){let n=J(t);try{let r=yield MH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ge(s.lu,14607):i.removedDocuments.size>0&&(ge(s.lu,42227),s.lu=!1))}),yield pu(n,r,e)}catch(r){yield Bs(r)}})}function CR(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&DI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function n4(t,e,n){return _(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me(B.comparator);s=s.insert(o,cn.newNoDocument(o,te.min()));let a=ue().add(o),u=new af(te.min(),new Map,new Me(ie),s,a);yield zN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),CI(r)}else yield CE(r.localStore,e,!1).then(()=>WE(r,e,n)).catch(Bs)})}function r4(t,e){return _(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield NH(n.localStore,e);WN(n,r,null),GN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield pu(n,i)}catch(i){yield Bs(i)}})}function i4(t,e,n){return _(this,null,function*(){let r=J(t);try{let i=yield(function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);WN(r,e,n),GN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield pu(r,i)}catch(i){yield Bs(i)}})}function GN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function WN(t,e,n){let r=J(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function WE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||KN(t,r)})}function KN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(yI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),CI(t))}function SR(t,e,n){for(let r of n)r instanceof wf?(t.Au.addReference(r.key,e),o4(t,r)):r instanceof Tf?(F(bI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||KN(t,r.key)):q(19791,{yu:r})}function o4(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(bI,"New document in limbo: "+n),t.Iu.add(r),CI(t))}function CI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new B(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new zE(n)),t.du=t.du.insert(n,r),VN(t.remoteStore,new ru(Pn(Of(n.path)),r,"TargetPurposeLimboResolution",sI.ue))}}function pu(t,e,n){return _(this,null,function*(){let r=J(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=wE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return _(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!$s(p))throw p;F(mI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),b=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(b);h.Fs=h.Fs.insert(g,N)}}})})(r.localStore,o))})}function s4(t,e){return _(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){F(bI,"User change. New user:",e.toKey());let r=yield LN(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pu(n,r.Bs)}})}function a4(t,e){let n=J(t),r=n.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let i=ue(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function QN(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n4.bind(null,e),e.hu.J_=KH.bind(null,e.eventManager),e.hu.pu=QH.bind(null,e.eventManager),e}function c4(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i4.bind(null,e),e}var YN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Vf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return RH(this.persistence,new DE,n.initialUser,this.serializer)}Du(n){return new ff(IE.Vi,this.serializer)}bu(n){return new SE}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),KE=class extends YN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ge(this.persistence.referenceDelegate instanceof pf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new cE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new ff(r=>pf.Vi(r,n),this.serializer)}};var u4=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=s4.bind(null,this.syncEngine),yield WH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new BE})()}createDatastore(n){let r=Vf(n.databaseInfo.databaseId),i=(function(s){return new PE(s)})(n.databaseInfo);return(function(s,a,u,l){return new LE(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new VE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>CR(this.syncEngine,r,0),(function(){return mf.C()?new mf:new AE})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new GE(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield(function(o){return _(this,null,function*(){let s=J(o);F(so,"RemoteStore shutting down."),s.Ia.add(5),yield fu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var au=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var ti="FirestoreClient",QE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xe.UNAUTHENTICATED,this.clientId=Yc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){F(ti,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=II(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function I_(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(ti,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield LN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Zr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Zr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function AR(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield l4(t);F(ti,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>TR(e.remoteStore,i)),t._onlineComponents=e})}function l4(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(ti,"Using user provided OfflineComponentProvider");try{yield I_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Zr("Error using user provided cache. Falling back to memory cache: "+n),yield I_(t,new YN)}}else F(ti,"Using default OfflineComponentProvider"),yield I_(t,new KE(void 0));return t._offlineComponents})}function ZN(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(ti,"Using user provided OnlineComponentProvider"),yield AR(t,t._uninitializedComponentsProvider._online)):(F(ti,"Using default OnlineComponentProvider"),yield AR(t,new u4))),t._onlineComponents})}function d4(t){return ZN(t).then(e=>e.syncEngine)}function Df(t){return _(this,null,function*(){let e=yield ZN(t),n=e.eventManager;return n.onListen=YH.bind(null,e.syncEngine),n.onUnlisten=XH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e4.bind(null,e.syncEngine),n})}function h4(t,e,n={}){let r=new an;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new au({next:g=>{h.Ou(),s.enqueueAndForget(()=>TI(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new su(Of(a.path),h,{includeMetadataChanges:!0,ka:!0});return wI(o,p)})(yield Df(t),t.asyncQueue,e,n,r)})),r.promise}function f4(t,e,n={}){let r=new an;return t.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,u,l){let h=new au({next:g=>{h.Ou(),s.enqueueAndForget(()=>TI(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new su(a,h,{includeMetadataChanges:!0,ka:!0});return wI(o,p)})(yield Df(t),t.asyncQueue,e,n,r)})),r.promise}function JN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var RR=new Map;var XN="firestore.googleapis.com",NR=!0,bf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XN,this.ssl=NR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:NR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ON;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CH)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Vs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new w_;switch(r.type){case"firstParty":return new C_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=RR.get(n);r&&(F("ComponentProvider","Removing Datastore"),RR.delete(n),r.terminate())})(this),Promise.resolve()}};function eM(t,e,n,r={}){var i;t=Ct(t,Vs);let o=Lr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(yh(`https://${u}`),vh("Firestore",!0)),s.host!==XN&&s.host!==u&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Cn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Xe.MOCK_USER;else{h=aA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Xe(g)}t._authCredentials=new T_(new Zh(h,p))}}var ur=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hu(n,t._jsonSchema))return new t(e,r||null,new B(Ce.fromString(n.referencePath)))}};qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Ue("string",qe._jsonSchemaVersion),referencePath:Ue("string")};var Wr=class t extends ur{constructor(e,n,r){super(e,n,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function tM(t,e,...n){if(t=xe(t),VR("collection","path",e),t instanceof Vs){let r=Ce.fromString(e,...n);return K0(r),new Wr(t,null,r)}{if(!(t instanceof qe||t instanceof Wr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return K0(r),new Wr(t.firestore,null,r)}}function SI(t,e,...n){if(t=xe(t),arguments.length===1&&(e=Yc.newId()),VR("doc","path",e),t instanceof Vs){let r=Ce.fromString(e,...n);return W0(r),new qe(t,null,new B(r))}{if(!(t instanceof qe||t instanceof Wr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return W0(r),new qe(t.firestore,t instanceof Wr?t.converter:null,new B(r))}}var MR="AsyncQueue",Cf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new yf(this,"async_queue_retry"),this.oc=()=>{let r=E_();r&&F(MR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=E_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=E_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new an;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!$s(e))throw e;F(MR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ir("INTERNAL UNHANDLED ERROR: ",PR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=jE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:PR(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function PR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function kR(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var ln=class extends Vs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cf(e),this._firestoreClient=void 0,yield e}})}};function nM(t,e){let n=typeof t=="object"?t:$i(),r=typeof t=="string"?t:e||nf,i=gs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=sA("firestore");o&&eM(i,...o)}return i}function Bf(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p4(t),t._firestoreClient}function p4(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new M_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new QE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Kr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(pt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:Ue("string",Kr._jsonSchemaVersion),bytes:Ue("string")};var js=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cu=class{constructor(e){this._methodName=e}};var Qr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(hu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:Ue("string",Qr._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};var Yr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Yr._jsonSchemaVersion="firestore/vectorValue/1.0",Yr._jsonSchema={type:Ue("string",Yr._jsonSchemaVersion),vectorValues:Ue("object")};var g4=/^__.*__$/,YE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms):new oo(e,this.data,n,this.fieldTransforms)}},Sf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function rM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:t})}}var ZE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rM(this.Ec)&&g4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},JE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vf(e)}Dc(e,n,r,i=!1){return new ZE({Ec:e,methodName:n,bc:r,path:Ut.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $f(t){let e=t._freezeSettings(),n=Vf(t._databaseId);return new JE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iM(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);AI("Data must be an object, but it was:",s,r);let a=oM(r,s),u,l;if(o.merge)u=new Wt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=XE(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);aM(h,g)||h.push(g)}u=new Wt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new YE(new jt(a),u,l)}var Af=class t extends cu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function m4(t,e,n,r){let i=t.Dc(1,e,n);AI("Data must be an object, but it was:",i,r);let o=[],s=jt.empty();ni(r,(u,l)=>{let h=RI(e,u,n);l=xe(l);let p=i.gc(h);if(l instanceof Af)o.push(h);else{let g=gu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Wt(o);return new Sf(s,a,i.fieldTransforms)}function y4(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[XE(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(XE(e,o[g])),u.push(o[g+1]);let l=[],h=jt.empty();for(let g=a.length-1;g>=0;--g)if(!aM(l,a[g])){let y=a[g],b=u[g];b=xe(b);let N=s.gc(y);if(b instanceof Af)l.push(y);else{let R=gu(b,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Wt(l);return new Sf(h,p,s.fieldTransforms)}function v4(t,e,n,r=!1){return gu(n,t.Dc(r?4:3,e))}function gu(t,e){if(sM(t=xe(t)))return AI("Unsupported field value:",e,t),oM(t,e);if(t instanceof cu)return(function(r,i){if(!rM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=gu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:df(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(i.serializer,o)}}if(r instanceof Qr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kr)return{bytesValue:AN(i.serializer,r._byteString)};if(r instanceof qe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yr)return(function(s,a){return{mapValue:{fields:{[uI]:{stringValue:lI},[Rs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return pI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Pf(r)}`)})(t,e)}function oM(t,e){let n={};return eN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(t,(r,i)=>{let o=gu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function sM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Qr||t instanceof Kr||t instanceof qe||t instanceof cu||t instanceof Yr)}function AI(t,e,n){if(!sM(n)||!jR(n)){let r=Pf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function XE(t,e,n){if((e=xe(e))instanceof js)return e._internalPath;if(typeof e=="string")return RI(t,e);throw Rf("Field path arguments must be of type string or ",t,!1,void 0,n)}var _4=new RegExp("[~\\*/\\[\\]]");function RI(t,e,n){if(e.search(_4)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new js(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function aM(t,e){return t.some(n=>n.isEqual(e))}var Nf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},eI=class extends Nf{data(){return super.data()}};function Hf(t,e){return typeof e=="string"?RI(t,e):e instanceof js?e._internalPath:e._delegate._internalPath}function cM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uu=class{},lu=class extends uu{};function uM(t,e,...n){let r=[];e instanceof uu&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof tI).length,a=o.filter(u=>u instanceof Mf).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Mf=class t extends lu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return fM(e._query,n),new ur(e.firestore,e.converter,q_(e._query,n))}_parse(e){let n=$f(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){OR(p,h);let b=[];for(let N of p)b.push(xR(u,o,N));g={arrayValue:{values:b}}}else g=xR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||OR(p,h),g=v4(a,s,p,h==="in"||h==="not-in");return je.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function lM(t,e,n){let r=e,i=Hf("where",t);return Mf._create(i,r,n)}var tI=class t extends uu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)fM(s,u),s=q_(s,u)})(e._query,n),new ur(e.firestore,e.converter,q_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var nI=class t extends lu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new no(o,s)})(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Xr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function dM(t,e="asc"){let n=e,r=Hf("orderBy",t);return nI._create(r,n)}var rI=class t extends lu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ur(e.firestore,e.converter,sf(e._query,this._limit,this._limitType))}};function hM(t){return D$("limit",t),rI._create("limit",t,"F")}function xR(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pN(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ce.fromString(n));if(!B.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tR(t,new B(r))}if(n instanceof qe)return tR(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(n)}.`)}function OR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fM(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var iI=class{convertValue(e,n="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ni(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Rs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>be(s.doubleValue));return new Yr(o)}convertGeoPoint(e){return new Qr(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=xf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){let n=or(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ce.fromString(e);ge(xN(r),9688,{name:e});let i=new rf(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function pM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Zi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ji=class t extends Nf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:Ue("string",Ji._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};var Ss=class extends Ji{data(e={}){return super.data(e)}},Xi=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ss(this._firestore,this._userDataWriter,r.key,r,new Zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:E4(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function E4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function gM(t){t=Ct(t,qe);let e=Ct(t.firestore,ln);return h4(Bf(e),t._key).then(n=>IM(e,t,n))}Xi._jsonSchemaVersion="firestore/querySnapshot/1.0",Xi._jsonSchema={type:Ue("string",Xi._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};var du=class extends iI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function mM(t){t=Ct(t,ur);let e=Ct(t.firestore,ln),n=Bf(e),r=new du(e);return cM(t._query),f4(n,t._query).then(i=>new Xi(e,r,t,i))}function yM(t,e,n){t=Ct(t,qe);let r=Ct(t.firestore,ln),i=pM(t.converter,e,n);return zf(r,[iM($f(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kn.none())])}function vM(t,e,n,...r){t=Ct(t,qe);let i=Ct(t.firestore,ln),o=$f(i),s;return s=typeof(e=xe(e))=="string"||e instanceof js?y4(o,"updateDoc",t._key,e,n,r):m4(o,"updateDoc",t._key,e),zf(i,[s.toMutation(t._key,kn.exists(!0))])}function _M(t){return zf(Ct(t.firestore,ln),[new tu(t._key,kn.none())])}function EM(t,e){let n=Ct(t.firestore,ln),r=SI(t),i=pM(t.converter,e);return zf(n,[iM($f(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function qf(t,...e){var n,r,i;t=xe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kR(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof qe)l=Ct(t.firestore,ln),h=Of(t._key.path),u={next:p=>{e[s]&&e[s](IM(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ct(t,ur);l=Ct(p.firestore,ln),h=p._query;let g=new du(l);u={next:y=>{e[s]&&e[s](new Xi(l,g,p,y))},error:e[s+1],complete:e[s+2]},cM(t._query)}return(function(g,y,b,N){let R=new au(N),x=new su(y,R,b);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return wI(yield Df(g),x)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return TI(yield Df(g),x)}))}})(Bf(l),h,a,u)}function zf(t,e){return(function(r,i){let o=new an;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return t4(yield d4(r),i,o)})),o.promise})(Bf(t),e)}function IM(t,e,n){let r=n.docs.get(e._key),i=new du(t);return new Ji(t,i,e._key,r,new Zi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Us=i})(Vr),on(new Et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ln(new D_(r.getProvider("auth-internal")),new S_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(H0,q0,e),Ne(H0,q0,"esm2017")})();var Gf=function(){return Gf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gf.apply(this,arguments)};var T4={includeMetadataChanges:!1};function wM(t,e){return e===void 0&&(e=T4),new Y(function(n){var r=qf(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function TM(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Gf(Gf({},r),(n={},n[e.idField]=t.id,n))}function DM(t){return wM(t,{includeMetadataChanges:!0}).pipe(oe(function(e){return e.docs}))}function bM(t,e){return e===void 0&&(e={}),DM(t).pipe(oe(function(n){return n.map(function(r){return TM(r,e)})}))}var mu=class{constructor(e){return e}},CM="firestore",NI=class{constructor(){return ys(CM)}};var MI=new U("angularfire2.firestore-instances");function D4(t,e){let n=Rc(CM,t,e);return n&&new mu(n)}function b4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new mu(r)}}var C4={provide:NI,deps:[[new xt,MI]]},S4={provide:mu,useFactory:D4,deps:[[new xt,MI],Jn]};function goe(t,...e){return Ne("angularfire",jr.full,"fst"),Zt([S4,C4,{provide:MI,useFactory:b4(t),multi:!0,deps:[ve,Ke,Ur,qi,[new xt,Hc],[new xt,vs],...e]}])}var moe=De(bM,!0);var yoe=De(EM,!0,2);var voe=De(tM,!0,2);var _oe=De(_M,!0,2);var Eoe=De(SI,!0,2);var Ioe=De(gM,!0);var woe=De(mM,!0);var Toe=De(nM,!0);var Doe=De(hM,!0,2);var boe=De(qf,!0);var Coe=De(dM,!0,2),Soe=De(uM,!0,2);var Aoe=De(yM,!0,2);var Roe=De(vM,!0,2);var Noe=De(lM,!0,2);export{V as a,ye as b,_ as c,Y as d,ze as e,Re as f,oe as g,BP as h,j as i,Tl as j,H as k,mi as l,U as m,ne as n,k as o,BT as p,$T as q,eD as r,tD as s,bi as t,Yo as u,ld as v,qa as w,Ex as x,vt as y,Dd as z,ht as A,Km as B,Zo as C,Mr as D,pC as E,mC as F,Jo as G,Sd as H,_1 as I,E1 as J,I1 as K,w1 as L,EC as M,ey as N,ty as O,Ad as P,ny as Q,ry as R,IC as S,S1 as T,TC as U,Rd as V,bC as W,R1 as X,SC as Y,G1 as Z,AC as _,iy as $,RC as aa,NC as ba,MC as ca,Z1 as da,PC as ea,nL as fa,iL as ga,In as ha,aL as ia,xd as ja,Od as ka,Wn as la,XC as ma,qL as na,eS as oa,iF as pa,Qn as qa,Gy as ra,wc as sa,tA as ta,BV as ua,sne as va,ane as wa,$c as xa,Mre as ya,Pre as za,kre as Aa,xre as Ba,Ore as Ca,Lre as Da,Be as Ea,mu as Fa,goe as Ga,moe as Ha,yoe as Ia,voe as Ja,_oe as Ka,Eoe as La,Ioe as Ma,woe as Na,Toe as Oa,Doe as Pa,boe as Qa,Coe as Ra,Soe as Sa,Aoe as Ta,Roe as Ua,Noe as Va};
