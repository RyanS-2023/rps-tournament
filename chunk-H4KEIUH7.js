var YM=Object.defineProperty,ZM=Object.defineProperties;var JM=Object.getOwnPropertyDescriptors;var Nw=Object.getOwnPropertySymbols,XM=Object.getPrototypeOf,eP=Object.prototype.hasOwnProperty,tP=Object.prototype.propertyIsEnumerable,nP=Reflect.get;var Mw=(t,e,n)=>e in t?YM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})eP.call(e,n)&&Mw(t,n,e[n]);if(Nw)for(var n of Nw(e))tP.call(e,n)&&Mw(t,n,e[n]);return t},ve=(t,e)=>ZM(t,JM(e));var _r=(t,e,n)=>nP(XM(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var Ip;function $u(){return Ip}function fn(t){let e=Ip;return Ip=t,e}var Pw=Symbol("NotFound");function _o(t){return t===Pw||t?.name==="\u0275NotFound"}var dt=null,Hu=!1,wp=1,rP=null,ht=Symbol("SIGNAL");function Y(t){let e=dt;return dt=t,e}function Wu(){return dt}var Eo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Io(t){if(Hu)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(t);let e=dt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=dt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:dt.producers,n!==void 0&&n.producer===t)){dt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===dt&&(!r||oP(i,dt)))return;let o=To(dt),s={producer:t,consumer:dt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};dt.producersTail=s,e!==void 0?e.nextProducer=s:dt.producers=s,o&&Lw(t,s)}function kw(){wp++}function Ku(t){if(!(To(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===wp)){if(!t.producerMustRecompute(t)&&!va(t)){Gu(t);return}t.producerRecomputeValue(t),Gu(t)}}function Tp(t){if(t.consumers===void 0)return;let e=Hu;Hu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||iP(r)}}finally{Hu=e}}function Dp(){return dt?.consumerAllowSignalWrites!==!1}function iP(t){t.dirty=!0,Tp(t),t.consumerMarkedDirty?.(t)}function Gu(t){t.dirty=!1,t.lastCleanEpoch=wp}function wo(t){return t&&xw(t),Y(t)}function xw(t){t.producersTail=void 0,t.recomputing=!0}function ya(t,e){Y(e),t&&Ow(t)}function Ow(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(To(t))do n=bp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function va(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Ku(n),r!==n.version))return!0}return!1}function _a(t){if(To(t)){let e=t.producers;for(;e!==void 0;)e=bp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Lw(t,e){let n=t.consumersTail,r=To(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Lw(i.producer,i)}function bp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!To(e)){let o=e.producers;for(;o!==void 0;)o=bp(o)}return n}function To(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Qu(t){rP?.(t)}function oP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Yu(t,e){return Object.is(t,e)}function Zu(t,e){let n=Object.create(sP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Ku(n),Io(n),n.value===ma)throw n.error;return n.value};return r[ht]=n,Qu(n),r}var qu=Symbol("UNSET"),zu=Symbol("COMPUTING"),ma=Symbol("ERRORED"),sP=ve(F({},Eo),{value:qu,dirty:!0,error:null,equal:Yu,kind:"computed",producerMustRecompute(t){return t.value===qu||t.value===zu},producerRecomputeValue(t){if(t.value===zu)throw new Error("");let e=t.value;t.value=zu;let n=wo(t),r,i=!1;try{r=t.computation(),Y(null),i=e!==qu&&e!==ma&&r!==ma&&t.equal(e,r)}catch(o){r=ma,t.error=o}finally{ya(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function aP(){throw new Error}var Fw=aP;function Vw(t){Fw(t)}function Cp(t){Fw=t}var cP=null;function Sp(t,e){let n=Object.create(Ju);n.value=t,e!==void 0&&(n.equal=e);let r=()=>jw(n);return r[ht]=n,Qu(n),[r,s=>Do(n,s),s=>Ap(n,s)]}function jw(t){return Io(t),t.value}function Do(t,e){Dp()||Vw(t),t.equal(t.value,e)||(t.value=e,uP(t))}function Ap(t,e){Dp()||Vw(t),Do(t,e(t.value))}var Ju=ve(F({},Eo),{equal:Yu,value:void 0,kind:"signal"});function uP(t){t.version++,kw(),Tp(t),cP?.(t)}function X(t){return typeof t=="function"}function bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Xu=bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Xu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Uw(o)}catch(s){e=e??[],s instanceof Xu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Uw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ui(n,e)}remove(e){let{_finalizers:n}=this;n&&ui(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Rp=Re.EMPTY;function el(t){return t instanceof Re||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function Uw(t){X(t)?t():t.unsubscribe()}var Yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Co={setTimeout(t,e,...n){let{delegate:r}=Co;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Co;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function tl(t){Co.setTimeout(()=>{let{onUnhandledError:e}=Yt;if(e)e(t);else throw t})}function Ea(){}var Bw=Np("C",void 0,void 0);function $w(t){return Np("E",void 0,t)}function Hw(t){return Np("N",t,void 0)}function Np(t,e,n){return{kind:t,value:e,error:n}}var li=null;function So(t){if(Yt.useDeprecatedSynchronousErrorHandling){let e=!li;if(e&&(li={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=li;if(li=null,n)throw r}}else t()}function qw(t){Yt.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=t)}var di=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,el(e)&&e.add(this)):this.destination=hP}static create(e,n,r){return new Ao(e,n,r)}next(e){this.isStopped?Pp(Hw(e),this):this._next(e)}error(e){this.isStopped?Pp($w(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pp(Bw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lP=Function.prototype.bind;function Mp(t,e){return lP.call(t,e)}var kp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){nl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){nl(r)}else nl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){nl(n)}}},Ao=class extends di{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Yt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mp(e.next,o),error:e.error&&Mp(e.error,o),complete:e.complete&&Mp(e.complete,o)}):i=e}this.destination=new kp(i)}};function nl(t){Yt.useDeprecatedSynchronousErrorHandling?qw(t):tl(t)}function dP(t){throw t}function Pp(t,e){let{onStoppedNotification:n}=Yt;n&&Co.setTimeout(()=>n(t,e))}var hP={closed:!0,next:Ea,error:dP,complete:Ea};var Ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rt(t){return t}function rl(...t){return xp(t)}function xp(t){return t.length===0?Rt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var G=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=pP(n)?n:new Ao(n,r,i);return So(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=zw(r),new r((i,o)=>{let s=new Ao({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ro](){return this}pipe(...n){return xp(n)(this)}toPromise(n){return n=zw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function zw(t){var e;return(e=t??Yt.Promise)!==null&&e!==void 0?e:Promise}function fP(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function pP(t){return t&&t instanceof di||fP(t)&&el(t)}function Op(t){return X(t?.lift)}function le(t){return e=>{if(Op(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new Lp(t,e,n,r,i)}var Lp=class extends di{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function No(){return le((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Mo=class extends G{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Op(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return No()(this)}};var Gw=bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class t extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new il(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Gw}next(n){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rp:(this.currentObservers=null,o.push(n),new Re(()=>{this.currentObservers=null,ui(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new G;return n.source=this,n}}return t.create=(e,n)=>new il(e,n),t})(),il=class extends Ge{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Rp}};var tt=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Fp={now(){return(Fp.delegate||Date).now()},delegate:void 0};var ol=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Ia={setInterval(t,e,...n){let{delegate:r}=Ia;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ia;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Po=class extends ol{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ia.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ia.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ko=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ko.now=Fp.now;var xo=class extends ko{constructor(e,n=ko.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Vp=new xo(Po);var sl=class extends Po{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var al=class extends xo{};var jp=new al(sl);var Tt=new G(t=>t.complete());function Ww(t){return t&&X(t.schedule)}function Kw(t){return t[t.length-1]}function cl(t){return X(Kw(t))?t.pop():void 0}function Er(t){return Ww(Kw(t))?t.pop():void 0}function Up(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Yw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Qw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function Zw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,x){o.push([y,N,R,x])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof hi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Jw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qw=="function"?Qw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ul=t=>t&&typeof t.length=="number"&&typeof t!="function";function ll(t){return X(t?.then)}function dl(t){return X(t[Ro])}function hl(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function fl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pl=gP();function gl(t){return X(t?.[pl])}function ml(t){return Zw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield hi(n.read());if(i)return yield hi(void 0);yield yield hi(r)}}finally{n.releaseLock()}})}function yl(t){return X(t?.getReader)}function Le(t){if(t instanceof G)return t;if(t!=null){if(dl(t))return mP(t);if(ul(t))return yP(t);if(ll(t))return vP(t);if(hl(t))return Xw(t);if(gl(t))return _P(t);if(yl(t))return EP(t)}throw fl(t)}function mP(t){return new G(e=>{let n=t[Ro]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yP(t){return new G(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function vP(t){return new G(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,tl)})}function _P(t){return new G(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Xw(t){return new G(e=>{IP(t,e).catch(n=>e.error(n))})}function EP(t){return Xw(ml(t))}function IP(t,e){var n,r,i,o;return Yw(this,void 0,void 0,function*(){try{for(n=Jw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Dt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ir(t,e=0){return le((n,r)=>{n.subscribe(ae(r,i=>Dt(r,t,()=>r.next(i),e),()=>Dt(r,t,()=>r.complete(),e),i=>Dt(r,t,()=>r.error(i),e)))})}function wr(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function eT(t,e){return Le(t).pipe(wr(e),Ir(e))}function tT(t,e){return Le(t).pipe(wr(e),Ir(e))}function nT(t,e){return new G(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function rT(t,e){return new G(n=>{let r;return Dt(n,e,()=>{r=t[pl](),Dt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function vl(t,e){if(!t)throw new Error("Iterable cannot be null");return new G(n=>{Dt(n,e,()=>{let r=t[Symbol.asyncIterator]();Dt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function iT(t,e){return vl(ml(t),e)}function oT(t,e){if(t!=null){if(dl(t))return eT(t,e);if(ul(t))return nT(t,e);if(ll(t))return tT(t,e);if(hl(t))return vl(t,e);if(gl(t))return rT(t,e);if(yl(t))return iT(t,e)}throw fl(t)}function Ne(t,e){return e?oT(t,e):Le(t)}function W(...t){let e=Er(t);return Ne(t,e)}function Oo(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new G(e?i=>e.schedule(r,0,i):r)}function Bp(t){return!!t&&(t instanceof G||X(t.lift)&&X(t.subscribe))}var Un=bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function re(t,e){return le((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:wP}=Array;function TP(t,e){return wP(e)?t(...e):t(e)}function _l(t){return re(e=>TP(t,e))}var{isArray:DP}=Array,{getPrototypeOf:bP,prototype:CP,keys:SP}=Object;function El(t){if(t.length===1){let e=t[0];if(DP(e))return{args:e,keys:null};if(AP(e)){let n=SP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function AP(t){return t&&typeof t=="object"&&bP(t)===CP}function Il(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function wl(...t){let e=Er(t),n=cl(t),{args:r,keys:i}=El(t);if(r.length===0)return Ne([],e);let o=new G(RP(r,e,i?s=>Il(i,s):Rt));return n?o.pipe(_l(n)):o}function RP(t,e,n=Rt){return r=>{sT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)sT(e,()=>{let l=Ne(t[u],e),h=!1;l.subscribe(ae(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function sT(t,e,n){t?Dt(n,t,e):e()}function aT(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Le(n(N,h++)).subscribe(ae(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?Dt(e,s,()=>C(x)):C(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(ae(e,y,()=>{p=!0,g()})),()=>{a?.()}}function He(t,e,n=1/0){return X(e)?He((r,i)=>re((o,s)=>e(r,o,i,s))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>aT(r,i,t,n)))}function cT(t=1/0){return He(Rt,t)}function uT(){return cT(1)}function Lo(...t){return uT()(Ne(t,Er(t)))}function wa(t){return new G(e=>{Le(t()).subscribe(e)})}function NP(...t){let e=cl(t),{args:n,keys:r}=El(t),i=new G(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Le(n[h]).subscribe(ae(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Il(r,a):a),o.complete())}))}});return e?i.pipe(_l(e)):i}function Nt(t,e){return le((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Tr(t){return le((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ae(n,void 0,void 0,s=>{o=Le(t(s,Tr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function lT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ae(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Fo(t,e){return X(e)?He(t,e,1):He(t,1)}function Dr(t){return le((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Bn(t){return t<=0?()=>Tt:le((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Tl(t=MP){return le((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MP(){return new Un}function Ta(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function $n(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nt((i,o)=>t(i,o,r)):Rt,Bn(1),n?Dr(e):Tl(()=>new Un))}function Vo(t){return t<=0?()=>Tt:le((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $p(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nt((i,o)=>t(i,o,r)):Rt,Vo(1),n?Dr(e):Tl(()=>new Un))}function Dl(t,e){return le(lT(t,e,arguments.length>=2,!0))}function bl(...t){let e=Er(t);return le((n,r)=>{(e?Lo(t,n,e):Lo(t,n)).subscribe(r)})}function bt(t,e){return le((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(t(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Cl(t){return le((e,n)=>{Le(t).subscribe(ae(n,()=>n.complete(),Ea)),!n.closed&&e.subscribe(n)})}function We(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Rt}function dT(t){let e=Y(null);try{return t()}finally{Y(e)}}var Uo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},tg=new Uo("20.3.16");var Nl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(Sa(e,n)),this.code=e}};function PP(t){return`NG0${Math.abs(t)}`}function Sa(t,e){return`${PP(t)}${e?": "+e:""}`}var Aa=globalThis;function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("")}function pT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function qn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(qn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function ng(t,e){return t?e?`${t} ${e}`:t:e||""}var kP=ge({__forward_ref__:ge});function Ml(t){return t.__forward_ref__=Ml,t.toString=function(){return qn(this())},t}function nt(t){return rg(t)?t():t}function rg(t){return typeof t=="function"&&t.hasOwnProperty(kP)&&t.__forward_ref__===Ml}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ra(t){return xP(t,Pl)}function ig(t){return Ra(t)!==null}function xP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function OP(t){let e=t?.[Pl]??null;return e||null}function qp(t){return t&&t.hasOwnProperty(Al)?t[Al]:null}var Pl=ge({\u0275prov:ge}),Al=ge({\u0275inj:ge}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function og(t){return t&&!!t.\u0275providers}var sg=ge({\u0275cmp:ge}),ag=ge({\u0275dir:ge}),cg=ge({\u0275pipe:ge}),ug=ge({\u0275mod:ge}),ba=ge({\u0275fac:ge}),_i=ge({__NG_ELEMENT_ID__:ge}),hT=ge({__NG_ENV_ID__:ge});function Ei(t){return typeof t=="string"?t:t==null?"":String(t)}function gT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ei(t)}var mT=ge({ngErrorCode:ge}),LP=ge({ngErrorMessage:ge}),FP=ge({ngTokenPath:ge});function lg(t,e){return yT("",-200,e)}function kl(t,e){throw new j(-201,!1)}function yT(t,e,n){let r=new j(e,t);return r[mT]=e,r[LP]=t,n&&(r[FP]=n),r}function VP(t){return t[mT]}var zp;function vT(){return zp}function Mt(t){let e=zp;return zp=t,e}function dg(t,e,n){let r=Ra(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;kl(t,"Injector")}var jP={},fi=jP,Gp="__NG_DI_FLAG__",Wp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=pi(n)||0;try{return this.injector.get(e,r&8?null:fi,r)}catch(i){if(_o(i))return i;throw i}}};function UP(t,e=0){let n=$u();if(n===void 0)throw new j(-203,!1);if(n===null)return dg(t,void 0,e);{let r=BP(e),i=n.retrieve(t,r);if(_o(i)){if(r.optional)return null;throw i}return i}}function ne(t,e=0){return(vT()||UP)(nt(t),e)}function k(t,e){return ne(t,pi(e))}function pi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function BP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Kp(t){let e=[];for(let n=0;n<t.length;n++){let r=nt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=$P(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function _T(t,e){return t[Gp]=e,t.prototype[Gp]=e,t}function $P(t){return t[Gp]}function gi(t,e){let n=t.hasOwnProperty(ba);return n?t[ba]:null}function xl(t,e){t.forEach(n=>Array.isArray(n)?xl(n,e):e(n))}function hg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Na(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ET(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function IT(t,e,n){let r=Bo(t,e);return r>=0?t[r|1]=n:(r=~r,ET(t,r,e,n)),r}function Ol(t,e){let n=Bo(t,e);if(n>=0)return t[n|1]}function Bo(t,e){return HP(t,e,1)}function HP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Sr={},Pt=[],Ar=new U(""),fg=new U("",-1),pg=new U(""),Ca=class{get(e,n=fi){if(n===fi){let i=yT("",-201);throw i.name="\u0275NotFound",i}return n}};function gg(t){return t[ug]||null}function Rr(t){return t[sg]||null}function mg(t){return t[ag]||null}function wT(t){return t[cg]||null}function Zt(t){return{\u0275providers:t}}function TT(...t){return{\u0275providers:yg(!0,t),\u0275fromNgModule:!0}}function yg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return xl(e,s=>{let a=s;Rl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&DT(i,o),n}function DT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];vg(i,o=>{e(o,r)})}}function Rl(t,e,n,r){if(t=nt(t),!t)return!1;let i=null,o=qp(t),s=!o&&Rr(t);if(!o&&!s){let u=t.ngModule;if(o=qp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Rl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{xl(o.imports,h=>{Rl(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&DT(l,e)}if(!a){let l=gi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Pt},i),e({provide:pg,useValue:i,multi:!0},i),e({provide:Ar,useValue:()=>ne(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;vg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function vg(t,e){for(let n of t)og(n)&&(n=n.\u0275providers),Array.isArray(n)?vg(n,e):e(n)}var qP=ge({provide:String,useValue:ge});function bT(t){return t!==null&&typeof t=="object"&&qP in t}function zP(t){return!!(t&&t.useExisting)}function GP(t){return!!(t&&t.useFactory)}function mi(t){return typeof t=="function"}function CT(t){return!!t.useClass}var Ma=new U(""),Sl={},fT={},Hp;function Pa(){return Hp===void 0&&(Hp=new Ca),Hp}var Fe=class{},yi=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Yp(e,s=>this.processProvider(s)),this.records.set(fg,jo(void 0,this)),i.has("environment")&&this.records.set(Fe,jo(void 0,this));let o=this.records.get(Ma);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pg,Pt,{self:!0}))}retrieve(e,n){let r=pi(n)||0;try{return this.get(e,fi,r)}catch(i){if(_o(i))return i;throw i}}destroy(){Da(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return Da(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Da(this);let n=fn(this),r=Mt(void 0),i;try{return e()}finally{fn(n),Mt(r)}}get(e,n=fi,r){if(Da(this),e.hasOwnProperty(hT))return e[hT](this);let i=pi(r),o,s=fn(this),a=Mt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=ZP(e)&&Ra(e);h&&this.injectableDefInScope(h)?l=jo(Qp(e),Sl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Pa():this.parent;return n=i&8&&n===fi?null:n,u.get(e,n)}catch(u){let l=VP(u);throw l===-200||l===-201?new j(l,null):u}finally{Mt(a),fn(s)}}resolveInjectorInitializers(){let e=Y(null),n=fn(this),r=Mt(void 0),i;try{let o=this.get(Ar,Pt,{self:!0});for(let s of o)s()}finally{fn(n),Mt(r),Y(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(qn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=nt(e);let n=mi(e)?e:nt(e&&e.provide),r=KP(e);if(!mi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=jo(void 0,Sl,!0),i.factory=()=>Kp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Y(null);try{if(n.value===fT)throw lg(qn(e));return n.value===Sl&&(n.value=fT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&YP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=nt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qp(t){let e=Ra(t),n=e!==null?e.factory:gi(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return WP(t);throw new j(204,!1)}function WP(t){if(t.length>0)throw new j(204,!1);let n=OP(t);return n!==null?()=>n.factory(t):()=>new t}function KP(t){if(bT(t))return jo(void 0,t.useValue);{let e=_g(t);return jo(e,Sl)}}function _g(t,e,n){let r;if(mi(t)){let i=nt(t);return gi(i)||Qp(i)}else if(bT(t))r=()=>nt(t.useValue);else if(GP(t))r=()=>t.useFactory(...Kp(t.deps||[]));else if(zP(t))r=(i,o)=>ne(nt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=nt(t&&(t.useClass||t.provide));if(QP(t))r=()=>new i(...Kp(t.deps));else return gi(i)||Qp(i)}return r}function Da(t){if(t.destroyed)throw new j(205,!1)}function jo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QP(t){return!!t.deps}function YP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ZP(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Yp(t,e){for(let n of t)Array.isArray(n)?Yp(n,e):n&&og(n)?Yp(n.\u0275providers,e):e(n)}function qe(t,e){let n;t instanceof yi?(Da(t),n=t):n=new Wp(t);let r,i=fn(n),o=Mt(void 0);try{return e()}finally{fn(i),Mt(o)}}function ST(){return vT()!==void 0||$u()!=null}var Jt=0,K=1,ee=2,Ke=3,$t=4,Ht=5,$o=6,Ho=7,ke=8,zn=9,gn=10,De=11,qo=12,Eg=13,Ii=14,kt=15,wi=16,Ti=17,Di=18,ka=19,Ig=20,Hn=21,Ll=22,xa=23,xt=24,Fl=25,bi=26,rt=27,AT=1,wg=6,Nr=7,Oa=8,La=9,xe=10;function mn(t){return Array.isArray(t)&&typeof t[AT]=="object"}function Xt(t){return Array.isArray(t)&&t[AT]===!0}function Tg(t){return(t.flags&4)!==0}function Mr(t){return t.componentOffset>-1}function Vl(t){return(t.flags&1)===1}function yn(t){return!!t.template}function zo(t){return(t[ee]&512)!==0}function Ci(t){return(t[ee]&256)===256}var RT="svg",NT="math";function qt(t){for(;Array.isArray(t);)t=t[Jt];return t}function Dg(t,e){return qt(e[t])}function en(t,e){return qt(e[t.index])}function Fa(t,e){return t.data[e]}function zt(t,e){let n=e[t];return mn(n)?n:n[Jt]}function jl(t){return(t[ee]&128)===128}function MT(t){return Xt(t[Ke])}function vn(t,e){return e==null?null:t[e]}function bg(t){t[Ti]=0}function Cg(t){t[ee]&1024||(t[ee]|=1024,jl(t)&&ja(t))}function PT(t,e){for(;t>0;)e=e[Ii],t--;return e}function Va(t){return!!(t[ee]&9216||t[xt]?.dirty)}function Ul(t){t[gn].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Va(t)&&ja(t)}function ja(t){t[gn].changeDetectionScheduler?.notify(0);let e=br(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!jl(e)));)e=br(e)}function Sg(t,e){if(Ci(t))throw new j(911,!1);t[Hn]===null&&(t[Hn]=[]),t[Hn].push(e)}function kT(t,e){if(t[Hn]===null)return;let n=t[Hn].indexOf(e);n!==-1&&t[Hn].splice(n,1)}function br(t){let e=t[Ke];return Xt(e)?e[Ke]:e}function xT(t){return t[Ho]??=[]}function OT(t){return t.cleanup??=[]}var oe={lFrame:ZT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Zp=!1;function LT(){return oe.lFrame.elementDepthCount}function FT(){oe.lFrame.elementDepthCount++}function Ag(){oe.lFrame.elementDepthCount--}function VT(){return oe.bindingsEnabled}function jT(){return oe.skipHydrationRootTNode!==null}function Rg(t){return oe.skipHydrationRootTNode===t}function Ng(){oe.skipHydrationRootTNode=null}function de(){return oe.lFrame.lView}function it(){return oe.lFrame.tView}function UT(t){return oe.lFrame.contextLView=t,t[ke]}function BT(t){return oe.lFrame.contextLView=null,t}function ft(){let t=Mg();for(;t!==null&&t.type===64;)t=t.parent;return t}function Mg(){return oe.lFrame.currentTNode}function $T(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Go(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function Pg(){return oe.lFrame.isParent}function HT(){oe.lFrame.isParent=!1}function kg(){return Zp}function xg(t){let e=Zp;return Zp=t,e}function qT(){return oe.lFrame.bindingIndex}function zT(t){return oe.lFrame.bindingIndex=t}function Pr(){return oe.lFrame.bindingIndex++}function Og(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function GT(){return oe.lFrame.inI18n}function WT(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Bl(e)}function KT(){return oe.lFrame.currentDirectiveIndex}function Bl(t){oe.lFrame.currentDirectiveIndex=t}function QT(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Lg(t){oe.lFrame.currentQueryIndex=t}function JP(t){let e=t[K];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function Fg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=JP(o),i===null||(o=o[Ii],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=YT();return r.currentTNode=e,r.lView=t,!0}function $l(t){let e=YT(),n=t[K];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function YT(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?ZT(t):e}function ZT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JT(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Vg=JT;function Hl(){let t=JT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function XT(t){return(oe.lFrame.contextLView=PT(t,oe.lFrame.contextLView))[ke]}function Gn(){return oe.lFrame.selectedIndex}function kr(t){oe.lFrame.selectedIndex=t}function Ua(){let t=oe.lFrame;return Fa(t.tView,t.selectedIndex)}function eD(){return oe.lFrame.currentNamespace}var tD=!0;function ql(){return tD}function zl(t){tD=t}function Jp(t,e=null,n=null,r){let i=jg(t,e,n,r);return i.resolveInjectorInitializers(),i}function jg(t,e=null,n=null,r,i=new Set){let o=[n||Pt,TT(t)];return r=r||(typeof t=="object"?void 0:qn(t)),new yi(o,e||Pa(),r||null,i)}var Qe=class t{static THROW_IF_NOT_FOUND=fi;static NULL=new Ca;static create(e,n){if(Array.isArray(e))return Jp({name:""},n,e,"");{let r=e.name??"";return Jp({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>ne(fg)});static __NG_ELEMENT_ID__=-1},ot=new U(""),Si=(()=>{class t{static __NG_ELEMENT_ID__=XP;static __NG_ENV_ID__=n=>n}return t})(),Xp=class extends Si{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ci(this._lView)}onDestroy(e){let n=this._lView;return Sg(n,e),()=>kT(n,e)}};function XP(){return new Xp(de())}var pn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ot=new U("",{providedIn:"root",factory:()=>{let t=k(Fe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(pn),e.handleError(n))}}}),nD={provide:Ar,useValue:()=>void k(pn),multi:!0};function Ug(t){return typeof t=="function"&&t[ht]!==void 0}function Ai(t,e){let[n,r,i]=Sp(t,e?.equal),o=n,s=o[ht];return o.set=r,o.update=i,o.asReadonly=rD.bind(o),o}function rD(){let t=this[ht];if(t.readonlyFn===void 0){let e=()=>this();e[ht]=t,t.readonlyFn=e}return t.readonlyFn}function Bg(t){return Ug(t)&&typeof t.set=="function"}var Cr=class{},Ba=new U("",{providedIn:"root",factory:()=>!1});var $g=new U(""),Hg=new U(""),_n=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new tt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new G(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wo=(()=>{class t{internalPendingTasks=k(_n);scheduler=k(Cr);errorHandler=k(Ot);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();function $a(...t){}var qg=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new eg})}return t})(),eg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function ts(t){return{toString:t}.toString()}var Gl="__parameters__";function uk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function lk(t,e,n){return ts(()=>{let r=uk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Gl)?u[Gl]:Object.defineProperty(u,Gl,{value:[]})[Gl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Lt=_T(lk("Optional"),8);function dk(t){return typeof t=="function"}var Xl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function OD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ns=(()=>{let t=()=>LD;return t.ngInherit=!0,t})();function LD(t){return t.type.prototype.ngOnChanges&&(t.setInput=fk),hk}function hk(){let t=VD(this),e=t?.current;if(e){let n=t.previous;if(n===Sr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fk(t,e,n,r,i){let o=this.declaredInputs[r],s=VD(t)||pk(t,{previous:Sr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Xl(l&&l.currentValue,n,u===Sr),OD(t,e,i,n)}var FD="__ngSimpleChanges__";function VD(t){return t[FD]||null}function pk(t,e){return t[FD]=e}var iD=[];var we=function(t,e=null,n){for(let r=0;r<iD.length;r++){let i=iD[r];i(t,e,n)}};function gk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=LD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function mk(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ql(t,e,n){jD(t,e,3,n)}function Yl(t,e,n,r){(t[ee]&3)===n&&jD(t,e,n,r)}function zg(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function jD(t,e,n,r){let i=r!==void 0?t[Ti]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ti]+=65536),(a<o||o==-1)&&(yk(t,n,e,u),t[Ti]=(t[Ti]&4294901760)+u+2),u++}function oD(t,e){we(4,t,e);let n=Y(null);try{e.call(t)}finally{Y(n),we(5,t,e)}}function yk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ee]>>14<t[Ti]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,oD(a,o)):oD(a,o)}var Qo=-1,Ni=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function vk(t){return(t.flags&8)!==0}function _k(t){return(t.flags&16)!==0}function Ek(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Ik(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function UD(t){return t===3||t===4||t===6}function Ik(t){return t.charCodeAt(0)===64}function Yo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?sD(t,n,i,null,e[++r]):sD(t,n,i,null,null))}}return t}function sD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function BD(t){return t!==Qo}function ed(t){return t&32767}function wk(t){return t>>16}function td(t,e){let n=wk(t),r=e;for(;n>0;)r=r[Ii],n--;return r}var tm=!0;function aD(t){let e=tm;return tm=t,e}var Tk=256,$D=Tk-1,HD=5,Dk=0,En={};function bk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(_i)&&(r=n[_i]),r==null&&(r=n[_i]=Dk++);let i=r&$D,o=1<<i;e.data[t+(i>>HD)]|=o}function nd(t,e){let n=qD(t,e);if(n!==-1)return n;let r=e[K];r.firstCreatePass&&(t.injectorIndex=e.length,Gg(r.data,t),Gg(e,null),Gg(r.blueprint,null));let i=Cm(t,e),o=t.injectorIndex;if(BD(i)){let s=ed(i),a=td(i,e),u=a[K].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Gg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Cm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=QD(i),r===null)return Qo;if(n++,i=i[Ii],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Qo}function nm(t,e,n){bk(t,e,n)}function Ck(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(UD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function zD(t,e,n){if(n&8||t!==void 0)return t;kl(e,"NodeInjector")}function GD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[zn],o=Mt(void 0);try{return i?i.get(e,r,n&8):dg(e,r,n&8)}finally{Mt(o)}}return zD(r,e,n)}function WD(t,e,n,r=0,i){if(t!==null){if(e[ee]&2048&&!(r&2)){let s=Mk(t,e,n,r,En);if(s!==En)return s}let o=KD(t,e,n,r,En);if(o!==En)return o}return GD(e,n,r,i)}function KD(t,e,n,r,i){let o=Rk(n);if(typeof o=="function"){if(!Fg(e,t,r))return r&1?zD(i,n,r):GD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))kl(n);else return s}finally{Vg()}}else if(typeof o=="number"){let s=null,a=qD(t,e),u=Qo,l=r&1?e[kt][Ht]:null;for((a===-1||r&4)&&(u=a===-1?Cm(t,e):e[a+8],u===Qo||!uD(r,!1)?a=-1:(s=e[K],a=ed(u),e=td(u,e)));a!==-1;){let h=e[K];if(cD(o,a,h.data)){let p=Sk(a,e,n,s,r,l);if(p!==En)return p}u=e[a+8],u!==Qo&&uD(r,e[K].data[a+8]===l)&&cD(o,a,e)?(s=h,a=ed(u),e=td(u,e)):a=-1}}return i}function Sk(t,e,n,r,i,o){let s=e[K],a=s.data[t+8],u=r==null?Mr(a)&&tm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Ak(a,s,n,u,l);return h!==null?rd(e,s,h,a,i):En}function Ak(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&yn(y)&&y.type===n)return u}return null}function rd(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ni){let a=o;if(a.resolving){let y=gT(s[n]);throw lg(y)}let u=aD(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Mt(a.injectImpl):null,g=Fg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&gk(n,s[n],e)}finally{p!==null&&Mt(p),aD(u),a.resolving=!1,Vg()}}return o}function Rk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(_i)?t[_i]:void 0;return typeof e=="number"?e>=0?e&$D:Nk:e}function cD(t,e,n){let r=1<<t;return!!(n[e+(t>>HD)]&r)}function uD(t,e){return!(t&2)&&!(t&1&&e)}var Ri=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return WD(this._tNode,this._lView,e,pi(r),n)}};function Nk(){return new Ri(ft(),de())}function vd(t){return ts(()=>{let e=t.prototype.constructor,n=e[ba]||rm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ba]||rm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rm(t){return rg(t)?()=>{let e=rm(nt(t));return e&&e()}:gi(t)}function Mk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!zo(s);){let a=KD(o,s,n,r|2,En);if(a!==En)return a;let u=o.parent;if(!u){let l=s[Ig];if(l){let h=l.get(n,En,r);if(h!==En)return h}u=QD(s),s=s[Ii]}o=u}return i}function QD(t){let e=t[K],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function Ya(t){return Ck(ft(),t)}function Pk(){return Sm(ft(),de())}function Sm(t,e){return new Za(en(t,e))}var Za=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Pk}return t})();function YD(t){return(t.flags&128)===128}var Am=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Am||{}),ZD=new Map,kk=0;function xk(){return kk++}function Ok(t){ZD.set(t[ka],t)}function im(t){ZD.delete(t[ka])}var lD="__ngContext__";function Zo(t,e){mn(e)?(t[lD]=e[ka],Ok(e)):t[lD]=e}function JD(t){return eb(t[qo])}function XD(t){return eb(t[$t])}function eb(t){for(;t!==null&&!Xt(t);)t=t[$t];return t}var om;function Rm(t){om=t}function tb(){if(om!==void 0)return om;if(typeof document<"u")return document;throw new j(210,!1)}var _d=new U("",{providedIn:"root",factory:()=>Lk}),Lk="ng",Ed=new U(""),Oi=new U("",{providedIn:"platform",factory:()=>"unknown"});var Id=new U("",{providedIn:"root",factory:()=>tb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Fk="h",Vk="b";var nb="r";var rb="di";var ib=!1,ob=new U("",{providedIn:"root",factory:()=>ib});var jk=(t,e,n,r)=>{};function Uk(t,e,n,r){jk(t,e,n,r)}function Nm(t){return(t.flags&32)===32}var Bk=()=>null;function sb(t,e,n=!1){return Bk(t,e,n)}function ab(t,e){let n=t.contentQueries;if(n!==null){let r=Y(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Lg(o),a.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function sm(t,e,n){Lg(0);let r=Y(null);try{e(t,n)}finally{Y(r)}}function cb(t,e,n){if(Tg(e)){let r=Y(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Y(r)}}}var Wn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Wn||{});var Wl;function $k(){if(Wl===void 0&&(Wl=null,Aa.trustedTypes))try{Wl=Aa.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Wl}function dD(t){return $k()?.createScriptURL(t)||t}var id=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nl})`}};function wd(t){return t instanceof id?t.changingThisBreaksApplicationSecurity:t}function Mm(t,e){let n=ub(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Nl})`)}return n===e}function ub(t){return t instanceof id&&t.getTypeName()||null}var Hk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function lb(t){return t=String(t),t.match(Hk)?t:"unsafe:"+t}function qk(t,e){return t.createText(e)}function zk(t,e,n){t.setValue(e,n)}function db(t,e,n){return t.createElement(e,n)}function od(t,e,n,r,i){t.insertBefore(e,n,r,i)}function hb(t,e,n){t.appendChild(e,n)}function hD(t,e,n,r,i){r!==null?od(t,e,n,r,i):hb(t,e,n)}function fb(t,e,n,r){t.removeChild(null,e,n,r)}function Gk(t,e,n){t.setAttribute(e,"style",n)}function Wk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ek(t,e,r),i!==null&&Wk(t,e,i),o!==null&&Gk(t,e,o)}var Td=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Td||{});function gb(t){let e=yb();return e?e.sanitize(Td.URL,t)||"":Mm(t,"URL")?wd(t):lb(Ei(t))}function mb(t){let e=yb();if(e)return dD(e.sanitize(Td.RESOURCE_URL,t)||"");if(Mm(t,"ResourceURL"))return dD(wd(t));throw new j(904,!1)}var Kk=new Set(["embed","frame","iframe","media","script"]),Qk=new Set(["base","link","script"]);function Yk(t,e){return e==="src"&&Kk.has(t)||e==="href"&&Qk.has(t)||e==="xlink:href"&&t==="script"?mb:gb}function Pm(t,e,n){return Yk(e,n)(t)}function yb(){let t=de();return t&&t[gn].sanitizer}function vb(t){return t instanceof Function?t():t}function Zk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var _b="ng-template";function Jk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Zk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(km(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function km(t){return t.type===4&&t.value!==_b}function Xk(t,e,n){let r=t.type===4&&!n?_b:t.value;return e===r}function ex(t,e,n){let r=4,i=t.attrs,o=i!==null?rx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!tn(r)&&!tn(u))return!1;if(s&&tn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Xk(t,u,n)||u===""&&e.length===1){if(tn(r))return!1;s=!0}}else if(r&8){if(i===null||!Jk(t,i,u,n)){if(tn(r))return!1;s=!0}}else{let l=e[++a],h=tx(u,i,km(t),n);if(h===-1){if(tn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(tn(r))return!1;s=!0}}}}return tn(r)||s}function tn(t){return(t&1)===0}function tx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ix(e,t)}function nx(t,e,n=!1){for(let r=0;r<e.length;r++)if(ex(t,e[r],n))return!0;return!1}function rx(t){for(let e=0;e<t.length;e++){let n=t[e];if(UD(n))return e}return t.length}function ix(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function fD(t,e){return t?":not("+e.trim()+")":e}function ox(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!tn(s)&&(e+=fD(o,i),i=""),r=s,o=o||!tn(r);n++}return i!==""&&(e+=fD(o,i)),e}function sx(t){return t.map(ox).join(",")}function ax(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!tn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var nn={};function xm(t,e,n,r,i,o,s,a,u,l,h){let p=rt+r,g=p+i,y=cx(p,g),C=typeof l=="function"?l():l;return y[K]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function cx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:nn);return n}function ux(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=xm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Om(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Jt]=i,p[ee]=r|4|128|8|64|1024,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),bg(p),p[Ke]=p[Ii]=t,p[ke]=n,p[gn]=s||t&&t[gn],p[De]=a||t&&t[De],p[zn]=u||t&&t[zn]||null,p[Ht]=o,p[ka]=xk(),p[$o]=h,p[Ig]=l,p[kt]=e.type==2?t[kt]:p,p}function lx(t,e,n){let r=en(e,t),i=ux(n),o=t[gn].rendererFactory,s=Lm(t,Om(t,i,null,Eb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Eb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Ib(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Lm(t,e){return t[qo]?t[Eg][$t]=e:t[qo]=e,t[Eg]=e,e}function dx(t=1){wb(it(),de(),Gn()+t,!1)}function wb(t,e,n,r){if(!r)if((e[ee]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ql(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Yl(e,o,0,n)}kr(n)}var Dd=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Dd||{});function am(t,e,n,r){let i=Y(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Dd.SignalBased)!==0&&(u=e[o][ht]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):OD(e,u,o,r)}finally{Y(i)}}var Kn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Kn||{}),hx;function Fm(t,e){return hx(t,e)}var Mi=new Set,Vm=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Vm||{}),Ja=new U(""),pD=new Set;function xr(t){pD.has(t)||(pD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Tb=!1,cm=class extends Ge{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ST()&&(this.destroyRef=k(Si,{optional:!0})??void 0,this.pendingTasks=k(_n,{optional:!0})??void 0)}emit(e){let n=Y(null);try{super.next(e)}finally{Y(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=cm;function Db(t){let e,n;function r(){t=$a;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gD(t){return queueMicrotask(()=>t()),()=>{t=$a}}var jm="isAngularZone",sd=jm+"_ID",fx=0,_e=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Tb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,px,$a,$a);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},px={};function Um(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Db(()=>{t.callbackScheduled=!1,um(t),t.isCheckStableRunning=!0,Um(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),um(t)}function mx(t){let e=()=>{gx(t)},n=fx++;t._inner=t._inner.fork({name:"angular",properties:{[jm]:!0,[sd]:n,[sd+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(yx(u))return r.invokeTask(o,s,a,u);try{return mD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),yD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return mD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!vx(u)&&e(),yD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,um(t),Um(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function um(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yD(t){t._nesting--,Um(t)}var ad=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function yx(t){return bb(t,"__ignore_ng_zone__")}function vx(t){return bb(t,"__scheduler_tick__")}function bb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Cb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var Sb=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Ab(t,e,n){let r=t.get(Sb);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function _x(t,e){let n=t.get(Sb);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Ex(t,e){for(let[n,r]of e)Ab(t,r.animateFns)}function vD(t,e,n,r){let i=t?.[bi]?.enter;e!==null&&i&&i.has(n.index)&&Ex(r,i)}function Ko(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Xt(i)?u=i:mn(i)&&(l=!0,i=i[Jt]);let h=qt(i);t===0&&r!==null?(vD(a,r,o,n),s==null?hb(e,r,h):od(e,r,h,s||null,!0)):t===1&&r!==null?(vD(a,r,o,n),od(e,r,h,s||null,!0)):t===2?_D(a,o,n,p=>{fb(e,h,l,p)}):t===3&&_D(a,o,n,()=>{e.destroyNode(h)}),u!=null&&kx(e,t,n,u,o,r,s)}}function Ix(t,e){Rb(t,e),e[Jt]=null,e[Ht]=null}function wx(t,e,n,r,i,o){r[Jt]=i,r[Ht]=e,Cd(t,r,n,1,i,o)}function Rb(t,e){e[gn].changeDetectionScheduler?.notify(9),Cd(t,e,e[De],2,null,null)}function Tx(t){let e=t[qo];if(!e)return Wg(t[K],t);for(;e;){let n=null;if(mn(e))n=e[qo];else{let r=e[xe];r&&(n=r)}if(!n){for(;e&&!e[$t]&&e!==t;)mn(e)&&Wg(e[K],e),e=e[Ke];e===null&&(e=t),mn(e)&&Wg(e[K],e),n=e&&e[$t]}e=n}}function Bm(t,e){let n=t[La],r=n.indexOf(e);n.splice(r,1)}function bd(t,e){if(Ci(e))return;let n=e[De];n.destroyNode&&Cd(t,e,n,3,null,null),Tx(e)}function Wg(t,e){if(Ci(e))return;let n=Y(null);try{e[ee]&=-129,e[ee]|=256,e[xt]&&_a(e[xt]),Cx(t,e),bx(t,e),e[K].type===1&&e[De].destroy();let r=e[wi];if(r!==null&&Xt(e[Ke])){r!==e[Ke]&&Bm(r,e);let i=e[Di];i!==null&&i.detachView(t)}im(e)}finally{Y(n)}}function _D(t,e,n,r){let i=t?.[bi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Mi.add(t),Ab(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Dx(t,r)}else t&&Mi.delete(t),r(!1)},i)}function Dx(t,e){let n=t[bi]?.running;if(n){n.then(()=>{t[bi].running=void 0,Mi.delete(t),e(!0)});return}e(!1)}function bx(t,e){let n=t.cleanup,r=e[Ho];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ho]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[xa];if(o!==null){e[xa]=null;for(let s of o)s.destroy()}}function Cx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ni)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];we(4,a,u);try{u.call(a)}finally{we(5,a,u)}}else{we(4,i,o);try{o.call(i)}finally{we(5,i,o)}}}}}function Sx(t,e,n){return Ax(t,e.parent,n)}function Ax(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Jt];if(Mr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Wn.None||i===Wn.Emulated)return null}return en(r,n)}function Rx(t,e,n){return Mx(t,e,n)}function Nx(t,e,n){return t.type&40?en(t,n):null}var Mx=Nx,ED;function $m(t,e,n,r){let i=Sx(t,r,e),o=e[De],s=r.parent||e[Ht],a=Rx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)hD(o,i,n[u],a,!1);else hD(o,i,n,a,!1);ED!==void 0&&ED(o,r,e,n,i)}function Ha(t,e){if(e!==null){let n=e.type;if(n&3)return en(e,t);if(n&4)return lm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ha(t,r);{let i=t[e.index];return Xt(i)?lm(-1,i):qt(i)}}else{if(n&128)return Ha(t,e.next);if(n&32)return Fm(e,t)()||qt(t[e.index]);{let r=Nb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=br(t[kt]);return Ha(i,r)}else return Ha(t,e.next)}}}return null}function Nb(t,e){if(e!==null){let r=t[kt][Ht],i=e.projection;return r.projection[i]}return null}function lm(t,e){let n=xe+t+1;if(n<e.length){let r=e[n],i=r[K].firstChild;if(i!==null)return Ha(r,i)}return e[Nr]}function Hm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[zn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Zo(qt(u),r),n.flags|=2),!Nm(n))if(l&8)Hm(t,e,n.child,r,i,o,!1),Ko(e,t,a,i,u,n,o,r);else if(l&32){let h=Fm(n,r),p;for(;p=h();)Ko(e,t,a,i,p,n,o,r);Ko(e,t,a,i,u,n,o,r)}else l&16?Px(t,e,r,n,i,o):Ko(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Cd(t,e,n,r,i,o){Hm(n,r,t.firstChild,e,i,o,!1)}function Px(t,e,n,r,i,o){let s=n[kt],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ko(e,t,n[zn],i,h,r,o,n)}else{let l=u,h=s[Ke];YD(r)&&(l.flags|=128),Hm(t,e,l,h,i,o,!0)}}function kx(t,e,n,r,i,o,s){let a=r[Nr],u=qt(r);a!==u&&Ko(e,t,n,o,a,i,s);for(let l=xe;l<r.length;l++){let h=r[l];Cd(h[K],h,t,e,o,a)}}function xx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Kn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kn.Important),t.setStyle(n,r,i,o))}}function Mb(t,e,n,r,i){let o=Gn(),s=r&2;try{kr(-1),s&&e.length>rt&&wb(t,e,rt,!1),we(s?2:0,i,n),n(r,i)}finally{kr(o),we(s?3:1,i,n)}}function Pb(t,e,n){Ux(t,e,n),(n.flags&64)===64&&Bx(t,e,n)}function qm(t,e,n=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Ox(t,e,n,r){let o=r.get(ob,ib)||n===Wn.ShadowDom,s=t.selectRootElement(e,o);return Lx(s),s}function Lx(t){Fx(t)}var Fx=()=>null;function Vx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function kb(t,e,n,r,i,o){let s=e[K];if(zm(t,s,e,n,r)){Mr(t)&&jx(e,t.index);return}t.type&3&&(n=Vx(n)),xb(t,e,n,r,i,o)}function xb(t,e,n,r,i,o){if(t.type&3){let s=en(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function jx(t,e){let n=zt(e,t);n[ee]&16||(n[ee]|=64)}function Ux(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Mr(n)&&lx(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||nd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=rd(e,t,s,n);if(Zo(u,e),o!==null&&Gx(e,s-r,u,a,n,o),yn(a)){let l=zt(n.index,e);l[ke]=rd(e,t,s,n)}}}function Bx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=KT();try{kr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Bl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&$x(u,l)}}finally{kr(-1),Bl(s)}}function $x(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Hx(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];nx(e,o.selectors,!1)&&(r??=[],yn(o)?r.unshift(o):r.push(o))}return r}function qx(t,e,n,r,i,o){let s=en(t,e);zx(e[De],s,o,t.value,n,r,i)}function zx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Ei(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Gx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];am(r,n,u,l)}}function Ob(t,e,n,r,i){let o=rt+n,s=e[K],a=i(s,e,t,r,n);e[o]=a,Go(t,!0);let u=t.type===2;return u?(pb(e[De],a,t),(LT()===0||Vl(t))&&Zo(a,e),FT()):Zo(a,e),ql()&&(!u||!Nm(t))&&$m(s,e,a,t),t}function Lb(t){let e=t;return Pg()?HT():(e=e.parent,Go(e,!1)),e}function Wx(t,e){let n=t[zn];if(!n)return;let r;try{r=n.get(Ot,null)}catch{r=null}r?.(e)}function zm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];am(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];am(h,l,r,i),a=!0}return a}function Kx(t,e){let n=zt(e,t),r=n[K];Qx(r,n);let i=n[Jt];i!==null&&n[$o]===null&&(n[$o]=sb(i,n[zn])),we(18),Gm(r,n,n[ke]),we(19,n[ke])}function Qx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Gm(t,e,n){$l(e);try{let r=t.viewQuery;r!==null&&sm(1,r,n);let i=t.template;i!==null&&Mb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Di]?.finishViewCreation(t),t.staticContentQueries&&ab(t,e),t.staticViewQueries&&sm(2,t.viewQuery,n);let o=t.components;o!==null&&Yx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,Hl()}}function Yx(t,e){for(let n=0;n<e.length;n++)Kx(t,e[n])}function Wm(t,e,n,r){let i=Y(null);try{let o=e.tView,a=t[ee]&4096?4096:16,u=Om(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[wi]=l;let h=t[Di];return h!==null&&(u[Di]=h.createEmbeddedView(o)),Gm(o,u,n),u}finally{Y(i)}}function za(t,e){return!e||e.firstChild===null||YD(t)}function Ga(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(qt(o)),Xt(o)&&Fb(o,r);let s=n.type;if(s&8)Ga(t,e,n.child,r);else if(s&32){let a=Fm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Nb(e,n);if(Array.isArray(a))r.push(...a);else{let u=br(e[kt]);Ga(u[K],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Fb(t,e){for(let n=xe;n<t.length;n++){let r=t[n],i=r[K].firstChild;i!==null&&Ga(r[K],r,i,e)}t[Nr]!==t[Jt]&&e.push(t[Nr])}function Vb(t){if(t[Fl]!==null){for(let e of t[Fl])e.impl.addSequence(e);t[Fl].length=0}}var jb=[];function Zx(t){return t[xt]??Jx(t)}function Jx(t){let e=jb.pop()??Object.create(eO);return e.lView=t,e}function Xx(t){t.lView[xt]!==t&&(t.lView=null,jb.push(t))}var eO=ve(F({},Eo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ja(t.lView)},consumerOnSignalRead(){this.lView[xt]=this}});function tO(t){let e=t[xt]??Object.create(nO);return e.lView=t,e}var nO=ve(F({},Eo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=br(t.lView);for(;e&&!Ub(e[K]);)e=br(e);e&&Cg(e)},consumerOnSignalRead(){this.lView[xt]=this}});function Ub(t){return t.type!==2}function Bb(t){if(t[xa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[xa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ee]&8192)}}var rO=100;function $b(t,e=0){let r=t[gn].rendererFactory,i=!1;i||r.begin?.();try{iO(t,e)}finally{i||r.end?.()}}function iO(t,e){let n=kg();try{xg(!0),dm(t,e);let r=0;for(;Va(t);){if(r===rO)throw new j(103,!1);r++,dm(t,1)}}finally{xg(n)}}function oO(t,e,n,r){if(Ci(e))return;let i=e[ee],o=!1,s=!1;$l(e);let a=!0,u=null,l=null;o||(Ub(t)?(l=Zx(e),u=wo(l)):Wu()===null?(a=!1,l=tO(e),u=wo(l)):e[xt]&&(_a(e[xt]),e[xt]=null));try{bg(e),zT(t.bindingStartIndex),n!==null&&Mb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Ql(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Yl(e,y,0,null),zg(e,0)}if(s||sO(e),Bb(e),Hb(e,0),t.contentQueries!==null&&ab(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Ql(e,y)}else{let y=t.contentHooks;y!==null&&Yl(e,y,1),zg(e,1)}cO(t,e);let p=t.components;p!==null&&zb(e,p,0);let g=t.viewQuery;if(g!==null&&sm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Ql(e,y)}else{let y=t.viewHooks;y!==null&&Yl(e,y,2),zg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ll]){for(let y of e[Ll])y();e[Ll]=null}o||(Vb(e),e[ee]&=-73)}catch(h){throw o||ja(e),h}finally{l!==null&&(ya(l,u),a&&Xx(l)),Hl()}}function Hb(t,e){for(let n=JD(t);n!==null;n=XD(n))for(let r=xe;r<n.length;r++){let i=n[r];qb(i,e)}}function sO(t){for(let e=JD(t);e!==null;e=XD(e)){if(!(e[ee]&2))continue;let n=e[La];for(let r=0;r<n.length;r++){let i=n[r];Cg(i)}}}function aO(t,e,n){we(18);let r=zt(e,t);qb(r,n),we(19,r[ke])}function qb(t,e){jl(t)&&dm(t,e)}function dm(t,e){let r=t[K],i=t[ee],o=t[xt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&va(o)),s||=!1,o&&(o.dirty=!1),t[ee]&=-9217,s)oO(r,t,r.template,t[ke]);else if(i&8192){let a=Y(null);try{Bb(t),Hb(t,1);let u=r.components;u!==null&&zb(t,u,1),Vb(t)}finally{Y(a)}}}function zb(t,e,n){for(let r=0;r<e.length;r++)aO(t,e[r],n)}function cO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)kr(~i);else{let o=i,s=n[++r],a=n[++r];WT(s,o);let u=e[o];we(24,u),a(2,u),we(25,u)}}}finally{kr(-1)}}function Km(t,e){let n=kg()?64:1088;for(t[gn].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=br(t);if(zo(t)&&!r)return t;t=r}return null}function Gb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Wb(t,e){let n=xe+e;if(n<t.length)return t[n]}function Sd(t,e,n,r=!0){let i=e[K];if(uO(i,e,t,n),r){let s=lm(n,t),a=e[De],u=a.parentNode(t[Nr]);u!==null&&wx(i,t[Ht],a,e,u,s)}let o=e[$o];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Kb(t,e){let n=Wa(t,e);return n!==void 0&&bd(n[K],n),n}function Wa(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n];if(r){let i=r[wi];i!==null&&i!==t&&Bm(i,r),e>0&&(t[n-1][$t]=r[$t]);let o=Na(t,xe+e);Ix(r[K],r);let s=o[Di];s!==null&&s.detachView(o[K]),r[Ke]=null,r[$t]=null,r[ee]&=-129}return r}function uO(t,e,n,r){let i=xe+r,o=n.length;r>0&&(n[i-1][$t]=e),r<o-xe?(e[$t]=n[i],hg(n,xe+r,e)):(n.push(e),e[$t]=null),e[Ke]=n;let s=e[wi];s!==null&&n!==s&&Qb(s,e);let a=e[Di];a!==null&&a.insertView(t),Ul(e),e[ee]|=128}function Qb(t,e){let n=t[La],r=e[Ke];if(mn(r))t[ee]|=2;else{let i=r[Ke][kt];e[kt]!==i&&(t[ee]|=2)}n===null?t[La]=[e]:n.push(e)}var Pi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[K];return Ga(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return Ci(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ke];if(Xt(e)){let n=e[Oa],r=n?n.indexOf(this):-1;r>-1&&(Wa(e,r),Na(n,r))}this._attachedToViewContainer=!1}bd(this._lView[K],this._lView)}onDestroy(e){Sg(this._lView,e)}markForCheck(){Km(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Ul(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,$b(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zo(this._lView),n=this._lView[wi];n!==null&&!e&&Bm(n,this._lView),Rb(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=zo(this._lView),r=this._lView[wi];r!==null&&!n&&Qb(r,this._lView),Ul(this._lView)}};function Ad(t,e,n,r,i){let o=t.data[e];if(o===null)o=lO(t,e,n,r,i),GT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=$T();o.injectorIndex=s===null?-1:s.injectorIndex}return Go(o,!0),o}function lO(t,e,n,r,i){let o=Mg(),s=Pg(),a=s?o:o&&o.parent,u=t.data[e]=hO(t,a,n,e,r,i);return dO(t,u,o,s),u}function dO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function hO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return jT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var c8=new RegExp(`^(\\d+)*(${Vk}|${Fk})*(.*)`);function fO(t){let e=t[wg]??[],r=t[Ke][De],i=[];for(let o of e)o.data[rb]!==void 0?i.push(o):pO(o,r);t[wg]=i}function pO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[nb];for(;n<i;){let o=r.nextSibling;fb(e,r,!1),r=o,n++}}}var gO=()=>null,mO=()=>null;function hm(t,e){return gO(t,e)}function Yb(t,e,n){return mO(t,e,n)}var Zb=class{},Rd=class{},fm=class{resolveComponentFactory(e){throw new j(917,!1)}},Xa=class{static NULL=new fm},ki=class{},Nd=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>yO()}return t})();function yO(){let t=de(),e=ft(),n=zt(e.index,t);return(mn(n)?n:t)[De]}var Jb=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var Zl={},pm=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Zl,r);return i!==Zl||n===Zl?i:this.parentInjector.get(e,n,r)}};function cd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ng(i,a);else if(o==2){let u=a,l=e[++s];r=ng(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function rn(t,e=0){let n=de();if(n===null)return ne(t,e);let r=ft();return WD(r,n,nt(t),e)}function vO(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}IO(t,e,n,a,o,u,l)}o!==null&&r!==null&&_O(n,r,o)}function _O(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function EO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&yn(y)&&(u=!0,EO(t,n,g)),nm(nd(n,e),t,y.type)}SO(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Ib(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Yo(n.mergedAttrs,y.hostAttrs),TO(t,n,e,p,y),CO(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}wO(t,n,o)}function wO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))ID(0,e,i,r),ID(1,e,i,r),TD(e,r,!1);else{let o=n.get(i);wD(0,e,o,r),wD(1,e,o,r),TD(e,r,!0)}}}function ID(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Xb(e,o)}}function wD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Xb(e,s)}}function Xb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function TD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||km(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function TO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=gi(i.type,!0)),s=new Ni(o,yn(i),rn,null);t.blueprint[r]=s,n[r]=s,DO(t,e,r,Ib(t,n,i.hostVars,nn),i)}function DO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;bO(s)!=a&&s.push(a),s.push(n,r,o)}}function bO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function CO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yn(e)&&(n[""]=t)}}function SO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function eC(t,e,n,r,i,o,s,a){let u=e[K],l=u.consts,h=vn(l,s),p=Ad(u,t,n,r,h);return o&&vO(u,e,p,vn(l,a),i),p.mergedAttrs=Yo(p.mergedAttrs,p.attrs),p.attrs!==null&&cd(p,p.attrs,!1),p.mergedAttrs!==null&&cd(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function tC(t,e){mk(t,e),Tg(e)&&t.queries.elementEnd(e)}function AO(t,e,n,r,i,o){let s=e.consts,a=vn(s,i),u=Ad(e,t,n,r,a);if(u.mergedAttrs=Yo(u.mergedAttrs,u.attrs),o!=null){let l=vn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&cd(u,u.attrs,!1),u.mergedAttrs!==null&&cd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function In(t,e,n){if(n===nn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function RO(t,e,n,r){let i=In(t,e,n);return In(t,e+1,r)||i}function Jl(t,e,n){return function r(i){let o=Mr(t)?zt(t.index,e):e;Km(o,5);let s=e[ke],a=DD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=DD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function DD(t,e,n,r){let i=Y(null);try{return we(6,e,n),n(r)!==!1}catch(o){return Wx(t,o),!1}finally{we(7,e,n),Y(i)}}function nC(t,e,n,r,i,o,s,a){let u=Vl(t),l=!1,h=null;if(!r&&u&&(h=MO(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=en(t,n),g=r?r(p):p;Uk(n,g,o,a);let y=i.listen(g,o,a);if(!NO(o)){let C=r?N=>r(qt(N[t.index])):t.index;rC(C,e,n,o,a,y,!1)}}return l}function NO(t){return t.startsWith("animation")||t.startsWith("transition")}function MO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ho],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function rC(t,e,n,r,i,o,s){let a=e.firstCreatePass?OT(e):null,u=xT(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function bD(t,e,n,r,i,o){let s=e[n],a=e[K],l=a.data[n].outputs[r],p=s[l].subscribe(o);rC(t.index,a,e,i,o,p,!0)}var gm=Symbol("BINDING");var ud=class extends Xa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Rr(e);return new Jo(n,this.ngModule)}};function PO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Dd.SignalBased)!==0};return i&&(o.transform=i),o})}function kO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function xO(t,e,n){let r=e instanceof Fe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new pm(n,r):n}function OO(t){let e=t.get(ki,null);if(e===null)throw new j(407,!1);let n=t.get(Jb,null),r=t.get(Cr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function LO(t,e){let n=iC(t);return db(e,n,n==="svg"?RT:n==="math"?NT:null)}function iC(t){return(t.selectors[0][0]||"div").toLowerCase()}var Jo=class extends Rd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=PO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=kO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=sx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){we(22);let a=Y(null);try{let u=this.componentDef,l=FO(r,u,s,o),h=xO(u,i||this.ngModule,e),p=OO(h),g=p.rendererFactory.createRenderer(null,u),y=r?Ox(g,r,u.encapsulation,h):LO(u,g),C=s?.some(CD)||o?.some(x=>typeof x!="function"&&x.bindings.some(CD)),N=Om(null,l,null,512|Eb(u),null,null,p,g,h,null,sb(y,h,!0));N[rt]=y,$l(N);let R=null;try{let x=eC(rt,N,2,"#host",()=>l.directiveRegistry,!0,0);pb(g,y,x),Zo(y,N),Pb(l,N,x),cb(l,x,N),tC(l,x),n!==void 0&&jO(x,this.ngContentSelectors,n),R=zt(x.index,N),N[ke]=R[ke],Gm(l,N,null)}catch(x){throw R!==null&&im(R),im(N),x}finally{we(23),Hl()}return new ld(this.componentType,N,!!C)}finally{Y(a)}}};function FO(t,e,n,r){let i=t?["ng-version","20.3.16"]:ax(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[gm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[gm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=mg(p);u.push(g)}return xm(0,null,VO(o,s),1,a,u,null,null,null,[i],null)}function VO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function CD(t){let e=t[gm].kind;return e==="input"||e==="twoWay"}var ld=class extends Zb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Fa(n[K],rt),this.location=Sm(this._tNode,n),this.instance=zt(this._tNode.index,n)[ke],this.hostView=this.changeDetectorRef=new Pi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=zm(r,i[K],i,e,n);this.previousInputValues.set(e,n);let s=zt(r.index,i);Km(s,1)}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ec=(()=>{class t{static __NG_ELEMENT_ID__=UO}return t})();function UO(){let t=ft();return $O(t,de())}var BO=ec,oC=class extends BO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Sm(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cm(this._hostTNode,this._hostLView);if(BD(e)){let n=td(e,this._hostLView),r=ed(e),i=n[K].data[r+8];return new Ri(i,n)}else return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=SD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=hm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,za(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!dk(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Jo(Rr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Fe,null);x&&(o=x)}let g=Rr(h.componentType??{}),y=hm(this._lContainer,g?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,za(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(MT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ke],l=new oC(u,u[Ht],u[Ke]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Sd(s,i,o,r),e.attachToViewContainerRef(),hg(Kg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=SD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Wa(this._lContainer,n);r&&(Na(Kg(this._lContainer),n),bd(r[K],r))}detach(e){let n=this._adjustIndex(e,-1),r=Wa(this._lContainer,n);return r&&Na(Kg(this._lContainer),n)!=null?new Pi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function SD(t){return t[Oa]}function Kg(t){return t[Oa]||(t[Oa]=[])}function $O(t,e){let n,r=e[t.index];return Xt(r)?n=r:(n=Gb(r,e,null,t),e[t.index]=n,Lm(e,n)),qO(n,e,t,r),new oC(n,t,e)}function HO(t,e){let n=t[De],r=n.createComment(""),i=en(e,t),o=n.parentNode(i);return od(n,o,r,n.nextSibling(i),!1),r}var qO=WO,zO=()=>!1;function GO(t,e,n){return zO(t,e,n)}function WO(t,e,n,r){if(t[Nr])return;let i;n.type&8?i=qt(r):i=HO(e,n),t[Nr]=i}var Xo=class{},Md=class{};var dd=class extends Xo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ud(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=gg(e);this._bootstrapComponents=vb(o.bootstrap),this._r3Injector=jg(e,n,[{provide:Xo,useValue:this},{provide:Xa,useValue:this.componentFactoryResolver},...r],qn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},hd=class extends Md{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new dd(this.moduleType,e,[])}};var Ka=class extends Xo{injector;componentFactoryResolver=new ud(this);instance=null;constructor(e){super();let n=new yi([...e.providers,{provide:Xo,useValue:this},{provide:Xa,useValue:this.componentFactoryResolver}],e.parent||Pa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tc(t,e,n=null){return new Ka({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var KO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=yg(!1,n.type),i=r.length>0?tc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(ne(Fe))})}return t})();function Qm(t){return ts(()=>{let e=sC(t),n=ve(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Am.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(KO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Wn.Emulated,styles:t.styles||Pt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&xr("NgStandalone"),aC(n);let r=t.dependencies;return n.directiveDefs=AD(r,QO),n.pipeDefs=AD(r,wT),n.id=JO(n),n})}function QO(t){return Rr(t)||mg(t)}function rs(t){return ts(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function YO(t,e){if(t==null)return Sr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Dd.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function ZO(t){if(t==null)return Sr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function is(t){return ts(()=>{let e=sC(t);return aC(e),e})}function sC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Sr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:YO(t.inputs,e),outputs:ZO(t.outputs),debugInfo:null}}function aC(t){t.features?.forEach(e=>e(t))}function AD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function JO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function XO(t){return Object.getPrototypeOf(t.prototype).constructor}function cC(t){let e=XO(t.type),n=!0,r=[t];for(;e;){let i;if(yn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Qg(t.inputs),s.declaredInputs=Qg(t.declaredInputs),s.outputs=Qg(t.outputs);let a=i.hostBindings;a&&i1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&n1(t,u),l&&r1(t,l),e1(t,i),pT(t.outputs,i.outputs),yn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===cC&&(n=!1)}}e=Object.getPrototypeOf(e)}t1(r)}function e1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function t1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yo(i.hostAttrs,n=Yo(n,i.hostAttrs))}}function Qg(t){return t===Sr?{}:t===Pt?[]:t}function n1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function r1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function i1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function o1(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Yo(t.mergedAttrs,t.attrs);let h=t.tView=xm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Go(t,!1);let u=s1(n,e,t,r);ql()&&$m(n,e,u,t),Zo(u,e);let l=Gb(u,e,u,t);e[r+rt]=l,Lm(e,l),GO(l,t,e)}function fd(t,e,n,r,i,o,s,a,u,l,h){let p=n+rt,g;if(e.firstCreatePass){if(g=Ad(e,p,4,s||null,a||null),l!=null){let y=vn(e.consts,l);g.localNames=[];for(let C=0;C<y.length;C+=2)g.localNames.push(y[C],-1)}}else g=e.data[p];return o1(g,t,e,n,r,i,o,u),l!=null&&qm(t,g,h),g}var s1=a1;function a1(t,e,n,r){return zl(!0),e[De].createComment("")}var Ym=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Zm=new U("");function nc(t){return!!t&&typeof t.then=="function"}function uC(t){return!!t&&typeof t.subscribe=="function"}var lC=new U("");var Jm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(lC,{optional:!0})??[];injector=k(Qe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=qe(this.injector,i);if(nc(o))n.push(o);else if(uC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pd=new U("");function dC(){Cp(()=>{let t="";throw new j(600,t)})}function hC(t){return t.isBoundToModule}var c1=10;var Li=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Ot);afterRenderManager=k(Cb);zonelessEnabled=k(Ba);rootEffectScheduler=k(qg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ge;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(_n);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(re(n=>!n))}constructor(){k(Ja,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Qe.NULL){return this._injector.get(_e).run(()=>{we(10);let s=n instanceof Rd;if(!this._injector.get(Jm).done){let C="";throw new j(405,C)}let u;s?u=n:u=this._injector.get(Xa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=hC(u)?void 0:this._injector.get(Xo),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Zm,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),qa(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),we(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){we(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Vm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=Y(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(n),this.afterTick.next(),we(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ki,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<c1;)we(14),this.synchronizeOnce(),we(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Va(i))continue;let o=r&&!this.zonelessEnabled?0:1;$b(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Va(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;qa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Pd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kd(t,e,n,r){let i=de(),o=Pr();if(In(i,o,e)){let s=it(),a=Ua();qx(a,i,t,e,n,r)}return kd}var g8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var mm=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Yg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function u1(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Yg(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],C=Yg(s,g,u,y,n);if(C!==0){C<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,g),x=n(o,h);if(Object.is(x,R)){let H=n(u,y);Object.is(H,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new pd,i??=ND(t,o,s,n),ym(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(N,t.detach(o)),s--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,s++}}for(;o<=u;)RD(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Yg(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new pd,i??=ND(t,o,s,n);let y=n(o,p);if(ym(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let C=n(o,h);r.set(C,t.detach(o)),s--}}}for(;!l.done;)RD(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function ym(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function RD(t,e,n,r,i){if(ym(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function ND(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var pd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function l1(t,e,n,r,i,o,s,a){xr("NgControlFlow");let u=de(),l=it(),h=vn(l.consts,o);return fd(u,l,t,e,n,r,i,h,256,s,a),Xm}function Xm(t,e,n,r,i,o,s,a){xr("NgControlFlow");let u=de(),l=it(),h=vn(l.consts,o);return fd(u,l,t,e,n,r,i,h,512,s,a),Xm}function d1(t,e){xr("NgControlFlow");let n=de(),r=Pr(),i=n[r]!==nn?n[r]:-1,o=i!==-1?gd(n,rt+i):void 0,s=0;if(In(n,r,t)){let a=Y(null);try{if(o!==void 0&&Kb(o,s),t!==-1){let u=rt+t,l=gd(n,u),h=Im(n[K],u),p=Yb(l,h,n),g=Wm(n,h,e,{dehydratedView:p});Sd(l,g,s,za(h,p))}}finally{Y(a)}}else if(o!==void 0){let a=Wb(o,s);a!==void 0&&(a[ke]=e)}}var vm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-xe}};var _m=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function h1(t,e,n,r,i,o,s,a,u,l,h,p,g){xr("NgControlFlow");let y=de(),C=it(),N=u!==void 0,R=de(),x=a?s.bind(R[kt][ke]):s,H=new _m(N,x);R[rt+t]=H,fd(y,C,t+1,e,n,r,i,vn(C.consts,o),256),N&&fd(y,C,t+2,u,l,h,p,vn(C.consts,g),512)}var Em=class extends mm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-xe}at(e){return this.getLView(e)[ke].$implicit}attach(e,n){let r=n[$o];this.needsIndexUpdate||=e!==this.length,Sd(this.lContainer,n,e,za(this.templateTNode,r)),p1(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,g1(this.lContainer,e),m1(this.lContainer,e)}create(e,n){let r=hm(this.lContainer,this.templateTNode.tView.ssrId),i=Wm(this.hostLView,this.templateTNode,new vm(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){bd(e[K],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[ke].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return y1(this.lContainer,e)}};function f1(t){let e=Y(null),n=Gn();try{let r=de(),i=r[K],o=r[n],s=n+1,a=gd(r,s);if(o.liveCollection===void 0){let l=Im(i,s);o.liveCollection=new Em(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(u1(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Pr(),h=u.length===0;if(In(r,l,h)){let p=n+2,g=gd(r,p);if(h){let y=Im(i,p),C=Yb(g,y,r),N=Wm(r,y,void 0,{dehydratedView:C});Sd(g,N,0,za(y,C))}else i.firstUpdatePass&&fO(g),Kb(g,0)}}}finally{Y(e)}}function gd(t,e){return t[e]}function p1(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[bi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[zn];_x(o,i),Mi.delete(r),i.detachedLeaveAnimationFns=void 0}}function g1(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[bi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function m1(t,e){return Wa(t,e)}function y1(t,e){return Wb(t,e)}function Im(t,e){return Fa(t,e)}function fC(t,e,n){let r=de(),i=Pr();if(In(r,i,e)){let o=it(),s=Ua();kb(s,r,t,e,r[De],n)}return fC}function MD(t,e,n,r,i){zm(e,t,n,i?"class":"style",r)}function ey(t,e,n,r){let i=de(),o=i[K],s=t+rt,a=o.firstCreatePass?eC(s,i,2,e,Hx,VT(),n,r):o.data[s];if(Ob(a,i,t,e,gC),Vl(a)){let u=i[K];Pb(u,i,a),cb(u,a,i)}return r!=null&&qm(i,a),ey}function ty(){let t=it(),e=ft(),n=Lb(e);return t.firstCreatePass&&tC(t,n),Rg(n)&&Ng(),Ag(),n.classesWithoutHost!=null&&vk(n)&&MD(t,n,de(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&_k(n)&&MD(t,n,de(),n.stylesWithoutHost,!1),ty}function xd(t,e,n,r){return ey(t,e,n,r),ty(),xd}function ny(t,e,n,r){let i=de(),o=i[K],s=t+rt,a=o.firstCreatePass?AO(s,o,2,e,n,r):o.data[s];return Ob(a,i,t,e,gC),r!=null&&qm(i,a),ny}function ry(){let t=ft(),e=Lb(t);return Rg(e)&&Ng(),Ag(),ry}function pC(t,e,n,r){return ny(t,e,n,r),ry(),pC}var gC=(t,e,n,r,i)=>(zl(!0),db(e[De],r,eD()));function v1(){return de()}function mC(t,e,n){let r=de(),i=Pr();if(In(r,i,e)){let o=it(),s=Ua();xb(s,r,t,e,r[De],n)}return mC}var rc="en-US";var _1=rc;function yC(t){typeof t=="string"&&(_1=t.toLowerCase().replace(/_/g,"-"))}function Od(t,e,n){let r=de(),i=it(),o=ft();return _C(i,r,r[De],o,t,e,n),Od}function vC(t,e,n){let r=de(),i=it(),o=ft();return(o.type&3||n)&&nC(o,i,r,n,r[De],t,e,Jl(o,r,e)),vC}function _C(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Jl(r,e,o),nC(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Jl(r,e,o),bD(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Jl(r,e,o),bD(r,e,p,i,i,u)}}function E1(t=1){return XT(t)}function Kl(t,e){return t<<17|e<<2}function xi(t){return t>>17&32767}function I1(t){return(t&2)==2}function w1(t,e){return t&131071|e<<17}function wm(t){return t|2}function es(t){return(t&131068)>>2}function Zg(t,e){return t&-131069|e<<2}function T1(t){return(t&1)===1}function Tm(t){return t|1}function D1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xi(s),u=es(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Bo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=xi(t[a+1]);t[r+1]=Kl(g,a),g!==0&&(t[g+1]=Zg(t[g+1],r)),t[a+1]=w1(t[a+1],r)}else t[r+1]=Kl(a,0),a!==0&&(t[a+1]=Zg(t[a+1],r)),a=r;else t[r+1]=Kl(u,0),a===0?a=r:t[u+1]=Zg(t[u+1],r),u=r;l&&(t[r+1]=wm(t[r+1])),PD(t,h,r,!0),PD(t,h,r,!1),b1(e,h,t,r,o),s=Kl(a,u),o?e.classBindings=s:e.styleBindings=s}function b1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Bo(o,e)>=0&&(n[r+1]=Tm(n[r+1]))}function PD(t,e,n,r){let i=t[n+1],o=e===null,s=r?xi(i):es(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];C1(u,e)&&(a=!0,t[s+1]=r?Tm(l):wm(l)),s=r?xi(l):es(l)}a&&(t[n+1]=r?wm(i):Tm(i))}function C1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Bo(t,e)>=0:!1}function EC(t,e){return S1(t,e,null,!0),EC}function S1(t,e,n,r){let i=de(),o=it(),s=Og(2);if(o.firstUpdatePass&&R1(o,t,s,r),e!==nn&&In(i,s,e)){let a=o.data[Gn()];x1(o,a,i,i[De],t,i[s+1]=O1(e,n),r,s)}}function A1(t,e){return e>=t.expandoStartIndex}function R1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Gn()],s=A1(t,n);L1(o,r)&&e===null&&!s&&(e=!1),e=N1(i,o,e,r),D1(i,o,e,n,s,r)}}function N1(t,e,n,r){let i=QT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Jg(null,t,e,n,r),n=Qa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Jg(i,t,e,n,r),o===null){let u=M1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Jg(null,t,e,u[1],r),u=Qa(u,e.attrs,r),P1(t,e,r,u))}else o=k1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function M1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(es(r)!==0)return t[xi(r)]}function P1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[xi(i)]=r}function k1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Qa(r,s,n)}return Qa(r,e.attrs,n)}function Jg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qa(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Qa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),IT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function x1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=T1(l)?kD(u,e,n,i,es(l),s):void 0;if(!md(h)){md(o)||I1(l)&&(o=kD(u,null,n,i,a,s));let p=Dg(Gn(),n);xx(r,s,p,i,o)}}function kD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===nn&&(g=p?Pt:void 0);let y=p?Ol(g,r):h===r?g:void 0;if(l&&!md(y)&&(y=Ol(u,r)),md(y)&&(a=y,s))return a;let C=t[i+1];i=s?xi(C):es(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Ol(u,r))}return a}function md(t){return t!==void 0}function O1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=qn(wd(t)))),t}function L1(t,e){return(t.flags&(e?8:16))!==0}function F1(t,e=""){let n=de(),r=it(),i=t+rt,o=r.firstCreatePass?Ad(r,i,1,e,null):r.data[i],s=V1(r,n,o,e,t);n[i]=s,ql()&&$m(r,n,s,o),Go(o,!1)}var V1=(t,e,n,r,i)=>(zl(!0),qk(e[De],r));function j1(t,e,n,r=""){return In(t,Pr(),n)?e+Ei(n)+r:nn}function U1(t,e,n,r,i,o=""){let s=qT(),a=RO(t,s,n,i);return Og(2),a?e+Ei(n)+r+Ei(i)+o:nn}function IC(t){return iy("",t),IC}function iy(t,e,n){let r=de(),i=j1(r,t,e,n);return i!==nn&&TC(r,Gn(),i),iy}function wC(t,e,n,r,i){let o=de(),s=U1(o,t,e,n,r,i);return s!==nn&&TC(o,Gn(),s),wC}function TC(t,e,n){let r=Dg(e,t);zk(t[De],r,n)}function DC(t,e,n){Bg(e)&&(e=e());let r=de(),i=Pr();if(In(r,i,e)){let o=it(),s=Ua();kb(s,r,t,e,r[De],n)}return DC}function B1(t,e){let n=Bg(t);return n&&t.set(e),n}function bC(t,e){let n=de(),r=it(),i=ft();return _C(r,n,n[De],i,t,e),bC}function $1(t,e,n){let r=it();if(r.firstCreatePass){let i=yn(t);Dm(n,r.data,r.blueprint,i,!0),Dm(e,r.data,r.blueprint,i,!1)}}function Dm(t,e,n,r,i){if(t=nt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Dm(t[o],e,n,r,i);else{let o=it(),s=de(),a=ft(),u=mi(t)?t:nt(t.provide),l=_g(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(mi(t)||!t.multi){let y=new Ni(l,i,rn,null),C=em(u,e,i?h:h+g,p);C===-1?(nm(nd(a,s),o,u),Xg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=em(u,e,h+g,p),C=em(u,e,h,h+g),N=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!N){nm(nd(a,s),o,u);let x=z1(i?q1:H1,n.length,i,r,l,t);!i&&R&&(n[C].providerFactory=x),Xg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=CC(n[i?C:y],l,!i&&r);Xg(o,t,y>-1?y:C,x)}!i&&r&&R&&n[C].componentProviders++}}}function Xg(t,e,n,r){let i=mi(e),o=CT(e);if(i||o){let u=(o?nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function CC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function em(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function H1(t,e,n,r,i){return bm(this.multi,[])}function q1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=rd(r,r[K],this.providerFactory.index,i);s=u.slice(0,a),bm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],bm(o,s);return s}function bm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function z1(t,e,n,r,i,o){let s=new Ni(t,n,rn,null);return s.multi=[],s.index=e,s.componentProviders=0,CC(s,i,r&&!n),s}function G1(t,e=[]){return n=>{n.providersResolver=(r,i)=>$1(r,i?i(t):t,e)}}var yd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},oy=(()=>{class t{compileModuleSync(n){return new hd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=gg(n),o=vb(i.declarations).reduce((s,a)=>{let u=Rr(a);return u&&s.push(new Jo(u)),s},[]);return new yd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var W1=(()=>{class t{zone=k(_e);changeDetectionScheduler=k(Cr);applicationRef=k(Li);applicationErrorHandler=k(Ot);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SC=new U("",{factory:()=>!1});function sy({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new _e(ve(F({},ay()),{scheduleInRootZone:n})),[{provide:_e,useFactory:t},{provide:Ar,multi:!0,useFactory:()=>{let r=k(W1,{optional:!0});return()=>r.initialize()}},{provide:Ar,multi:!0,useFactory:()=>{let r=k(Q1);return()=>{r.initialize()}}},e===!0?{provide:$g,useValue:!0}:[],{provide:Hg,useValue:n??Tb},{provide:Ot,useFactory:()=>{let r=k(_e),i=k(Fe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(pn),o.handleError(s))})}}}]}function K1(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=sy({ngZoneFactory:()=>{let i=ay(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&xr("NgZone_CoalesceEvent"),new _e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Zt([{provide:SC,useValue:!0},{provide:Ba,useValue:!1},r])}function ay(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Q1=(()=>{class t{subscription=new Re;initialized=!1;zone=k(_e);pendingTasks=k(_n);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var AC=(()=>{class t{applicationErrorHandler=k(Ot);appRef=k(Li);taskService=k(_n);ngZone=k(_e);zonelessEnabled=k(Ba);tracing=k(Ja,{optional:!0});disableScheduling=k($g,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Hg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ad||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?gD:Db;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Y1(){return typeof $localize<"u"&&$localize.locale||rc}var cy=new U("",{providedIn:"root",factory:()=>k(cy,{optional:!0,skipSelf:!0})||Y1()});function Qn(t){return dT(t)}function Z1(t,e){return Zu(t,e?.equal)}var RC=class{[ht];constructor(e){this[ht]=e}destroy(){this[ht].destroy()}};var MC=Symbol("InputSignalNode#UNSET"),fL=ve(F({},Ju),{transformFn:void 0,applyValueToInputSignal(t,e){Do(t,e)}});function PC(t,e){let n=Object.create(fL);n.value=t,n.transformFn=e?.transform;function r(){if(Io(n),n.value===MC){let i=null;throw new j(-950,i)}return n.value}return r[ht]=n,r}var Fd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ya(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pL=new U("");pL.__NG_ELEMENT_ID__=t=>{let e=ft();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function NC(t,e){return PC(t,e)}function gL(t){return PC(MC,t)}var kC=(NC.required=gL,NC);var uy=new U(""),mL=new U("");function ic(t){return!t.moduleRef}function yL(t){let e=ic(t)?t.r3Injector:t.moduleRef.injector,n=e.get(_e);return n.run(()=>{ic(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ot),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ic(t)){let o=()=>e.destroy(),s=t.platformInjector.get(uy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(uy);s.add(o),t.moduleRef.onDestroy(()=>{qa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return _L(r,n,()=>{let o=e.get(_n),s=o.add(),a=e.get(Jm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(cy,rc);if(yC(u||rc),!e.get(mL,!0))return ic(t)?e.get(Li):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(ic(t)){let h=e.get(Li);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return vL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var vL;function _L(t,e,n){try{let r=n();return nc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Ld=null;function EL(t=[],e){return Qe.create({name:e,providers:[{provide:Ma,useValue:"platform"},{provide:uy,useValue:new Set([()=>Ld=null])},...t]})}function IL(t=[]){if(Ld)return Ld;let e=EL(t);return Ld=e,dC(),wL(e),e}function wL(t){let e=t.get(Ed,null);qe(t,()=>{e?.forEach(n=>n())})}function ly(){return!1}var Vd=(()=>{class t{static __NG_ELEMENT_ID__=TL}return t})();function TL(t){return DL(ft(),de(),(t&16)===16)}function DL(t,e,n){if(Mr(t)&&!n){let r=zt(t.index,e);return new Pi(r,r)}else if(t.type&175){let r=e[kt];return new Pi(r,e)}return null}function xC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;we(8);try{let o=i?.injector??IL(r),s=[sy({}),{provide:Cr,useExisting:AC},nD,...n||[]],a=new Ka({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return yL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{we(9)}}function jd(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var FC=null;function Zn(){return FC}function dy(t){FC??=t}var oc=class{},hy=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(VC),providedIn:"platform"})}return t})();var VC=(()=>{class t extends hy{_location;_history;_doc=k(ot);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(n){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function jC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function OC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Or(t){return t&&t[0]!=="?"?`?${t}`:t}var os=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(BC),providedIn:"root"})}return t})(),UC=new U(""),BC=(()=>{class t extends os{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Or(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Or(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Or(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(hy),ne(UC,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ss=(()=>{class t{_subject=new Ge;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=SL(OC(LC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Or(r))}normalize(n){return t.stripTrailingSlash(CL(this._basePath,LC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Or(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Or(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Or;static joinWithSlash=jC;static stripTrailingSlash=OC;static \u0275fac=function(r){return new(r||t)(ne(os))};static \u0275prov=B({token:t,factory:()=>bL(),providedIn:"root"})}return t})();function bL(){return new ss(ne(os))}function CL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function LC(t){return t.replace(/\/index.html$/,"")}function SL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var $C=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=rs({type:t});static \u0275inj=vi({})}return t})();function fy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var sc=class{};var HC="browser";var ac=class{_doc;constructor(e){this._doc=e}manager},Ud=(()=>{class t extends ac{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ne(ot))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),$d=new U(""),vy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Ud));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Ud);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne($d),ne(_e))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),py="ng-app-id";function qC(t){for(let e of t)e.remove()}function zC(t,e){let n=e.createElement("style");return n.textContent=t,n}function NL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${py}="${e}"],link[${py}="${e}"]`);if(i)for(let o of i)o.removeAttribute(py),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function my(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var _y=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,NL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,zC);r?.forEach(i=>this.addUsage(i,this.external,my))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(qC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])qC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,zC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,my(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(ot),ne(_d),ne(Id,8),ne(Oi))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),gy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ey=/%COMP%/g;var WC="%COMP%",ML=`_nghost-${WC}`,PL=`_ngcontent-${WC}`,kL=!0,xL=new U("",{providedIn:"root",factory:()=>kL});function OL(t){return PL.replace(Ey,t)}function LL(t){return ML.replace(Ey,t)}function KC(t,e){return e.map(n=>n.replace(Ey,t))}var Iy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new cc(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Bd?i.applyToHost(n):i instanceof uc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Wn.Emulated:o=new Bd(u,l,r,this.appId,h,s,a,p,g);break;case Wn.ShadowDom:return new yy(u,l,n,r,s,a,this.nonce,p,g);default:o=new uc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ne(vy),ne(_y),ne(_d),ne(xL),ne(ot),ne(_e),ne(Id),ne(Ja,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),cc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(gy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(GC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=gy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=gy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(n,r,i&Kn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Kn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function GC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var yy=class extends cc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=KC(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=my(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},uc=class extends cc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?KC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Mi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bd=class extends uc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=OL(h),this.hostAttr=LL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Hd=class t extends oc{supportsDOMEvents=!0;static makeCurrent(){dy(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=FL();return n==null?null:VL(n)}resetBaseElement(){lc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fy(document.cookie,e)}},lc=null;function FL(){return lc=lc||document.head.querySelector("base"),lc?lc.getAttribute("href"):null}function VL(t){return new URL(t,document.baseURI).pathname}var jL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),QC=["alt","control","meta","shift"],UL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},YC=(()=>{class t extends ac{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),QC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=UL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),QC.forEach(s=>{if(s!==i){let a=BL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(ot))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function $L(t,e,n){let r=F({rootComponent:t,platformRef:n?.platformRef},HL(e));return xC(r)}function HL(t){return{appProviders:[...KL,...t?.providers??[]],platformProviders:WL}}function qL(){Hd.makeCurrent()}function zL(){return new pn}function GL(){return Rm(document),document}var WL=[{provide:Oi,useValue:HC},{provide:Ed,useValue:qL,multi:!0},{provide:ot,useFactory:GL}];var KL=[{provide:Ma,useValue:"root"},{provide:pn,useFactory:zL},{provide:$d,useClass:Ud,multi:!0,deps:[ot]},{provide:$d,useClass:YC,multi:!0,deps:[ot]},Iy,_y,vy,{provide:ki,useExisting:Iy},{provide:sc,useClass:jL},[]];var ZC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(ot))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z="primary",bc=Symbol("RouteTitle"),Cy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ji(t){return new Cy(t)}function oS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function YL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wn(t[n],e[n]))return!1;return!0}function wn(t,e){let n=t?Sy(t):void 0,r=e?Sy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!sS(t[i],e[i]))return!1;return!0}function Sy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function sS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function aS(t){return t.length>0?t[t.length-1]:null}function er(t){return Bp(t)?t:nc(t)?Ne(Promise.resolve(t)):W(t)}var ZL={exact:uS,subset:lS},cS={exact:JL,subset:XL,ignored:()=>!0};function JC(t,e,n){return ZL[n.paths](t.root,e.root,n.matrixParams)&&cS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function JL(t,e){return wn(t,e)}function uS(t,e,n){if(!Fi(t.segments,e.segments)||!Gd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!uS(t.children[r],e.children[r],n))return!1;return!0}function XL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>sS(t[n],e[n]))}function lS(t,e,n){return dS(t,e,e.segments,n)}function dS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Fi(i,n)||e.hasChildren()||!Gd(i,n,r))}else if(t.segments.length===n.length){if(!Fi(t.segments,n)||!Gd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!lS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Fi(t.segments,i)||!Gd(t.segments,i,r)||!t.children[Z]?!1:dS(t.children[Z],e,o,r)}}function Gd(t,e,n){return e.every((r,i)=>cS[n](t[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new pe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ji(this.queryParams),this._queryParamMap}toString(){return nF.serialize(this)}},pe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wd(this)}},Lr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ji(this.parameters),this._parameterMap}toString(){return fS(this)}};function eF(t,e){return Fi(t,e)&&t.every((n,r)=>wn(n.parameters,e[r].parameters))}function Fi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function tF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var Cc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new Ui,providedIn:"root"})}return t})(),Ui=class{parse(e){let n=new Ry(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${dc(e.root,!0)}`,r=oF(e.queryParams),i=typeof e.fragment=="string"?`#${rF(e.fragment)}`:"";return`${n}${r}${i}`}},nF=new Ui;function Wd(t){return t.segments.map(e=>fS(e)).join("/")}function dc(t,e){if(!t.hasChildren())return Wd(t);if(e){let n=t.children[Z]?dc(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${dc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=tF(t,(r,i)=>i===Z?[dc(t.children[Z],!1)]:[`${i}:${dc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${Wd(t)}/${n[0]}`:`${Wd(t)}/(${n.join("//")})`}}function hS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qd(t){return hS(t).replace(/%3B/gi,";")}function rF(t){return encodeURI(t)}function Ay(t){return hS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kd(t){return decodeURIComponent(t)}function XC(t){return Kd(t.replace(/\+/g,"%20"))}function fS(t){return`${Ay(t.path)}${iF(t.parameters)}`}function iF(t){return Object.entries(t).map(([e,n])=>`;${Ay(e)}=${Ay(n)}`).join("")}function oF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${qd(n)}=${qd(i)}`).join("&"):`${qd(n)}=${qd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var sF=/^[^\/()?;#]+/;function wy(t){let e=t.match(sF);return e?e[0]:""}var aF=/^[^\/()?;=#]+/;function cF(t){let e=t.match(aF);return e?e[0]:""}var uF=/^[^=?&#]+/;function lF(t){let e=t.match(uF);return e?e[0]:""}var dF=/^[^&#]+/;function hF(t){let e=t.match(dF);return e?e[0]:""}var Ry=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new pe(e,n)),r}parseSegment(){let e=wy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Lr(Kd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=cF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=wy(this.remaining);i&&(r=i,this.capture(r))}e[Kd(n)]=Kd(r)}parseQueryParam(e){let n=lF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=hF(this.remaining);s&&(r=s,this.capture(r))}let i=XC(n),o=XC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new pe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function pS(t){return t.segments.length>0?new pe([],{[Z]:t}):t}function gS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=gS(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new pe(t.segments,e);return fF(n)}function fF(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new pe(t.segments.concat(e.segments),e.children)}return t}function Fr(t){return t instanceof Dn}function mS(t,e,n=null,r=null){let i=yS(t);return vS(i,e,n,r)}function yS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new pe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=pS(r);return e??i}function vS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ty(i,i,i,n,r);let o=pF(e);if(o.toRoot())return Ty(i,i,new pe([],{}),n,r);let s=gF(o,i,t),a=s.processChildren?fc(s.segmentGroup,s.index,o.commands):ES(s.segmentGroup,s.index,o.commands);return Ty(i,s.segmentGroup,a,n,r)}function Qd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function mc(t){return typeof t=="object"&&t!=null&&t.outlets}function Ty(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=_S(t,e,n);let a=pS(gS(s));return new Dn(a,o,i)}function _S(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=_S(o,e,n)}),new pe(t.segments,r)}var Yd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Qd(r[0]))throw new j(4003,!1);let i=r.find(mc);if(i&&i!==aS(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Yd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Yd(n,e,r)}var us=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function gF(t,e,n){if(t.isAbsolute)return new us(e,!0,0);if(!n)return new us(e,!1,NaN);if(n.parent===null)return new us(n,!0,0);let r=Qd(t.commands[0])?0:1,i=n.segments.length-1+r;return mF(n,i,t.numberOfDoubleDots)}function mF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new us(r,!1,i-o)}function yF(t){return mc(t[0])?t[0].outlets:{[Z]:t}}function ES(t,e,n){if(t??=new pe([],{}),t.segments.length===0&&t.hasChildren())return fc(t,e,n);let r=vF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new pe(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new pe(t.segments.slice(r.pathIndex),t.children),fc(o,0,i)}else return r.match&&i.length===0?new pe(t.segments,{}):r.match&&!t.hasChildren()?Ny(t,e,n):r.match?fc(t,0,i):Ny(t,e,n)}function fc(t,e,n){if(n.length===0)return new pe(t.segments,{});{let r=yF(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=fc(t.children[Z],e,n);return new pe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ES(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new pe(t.segments,i)}}function vF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(mc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!tS(u,l,s))return o;r+=2}else{if(!tS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ny(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(mc(o)){let u=_F(o.outlets);return new pe(r,u)}if(i===0&&Qd(n[0])){let u=t.segments[e];r.push(new Lr(u.path,eS(n[0]))),i++;continue}let s=mc(o)?o.outlets[Z]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Qd(a)?(r.push(new Lr(s,eS(a))),i+=2):(r.push(new Lr(s,{})),i++)}return new pe(r,{})}function _F(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ny(new pe([],{}),0,r))}),e}function eS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function tS(t,e,n){return t==n.path&&wn(e,n.parameters)}var pc="imperative",Ye=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ye||{}),Vt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Bi=class extends Vt{type=Ye.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bn=class extends Vt{urlAfterRedirects;type=Ye.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Et=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Et||{}),yc=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(yc||{}),Tn=class extends Vt{reason;code;type=Ye.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jn=class extends Vt{reason;code;type=Ye.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},ds=class extends Vt{error;target;type=Ye.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vc=class extends Vt{urlAfterRedirects;state;type=Ye.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zd=class extends Vt{urlAfterRedirects;state;type=Ye.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jd=class extends Vt{urlAfterRedirects;state;shouldActivate;type=Ye.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xd=class extends Vt{urlAfterRedirects;state;type=Ye.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eh=class extends Vt{urlAfterRedirects;state;type=Ye.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},th=class{route;type=Ye.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nh=class{route;type=Ye.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rh=class{snapshot;type=Ye.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ih=class{snapshot;type=Ye.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oh=class{snapshot;type=Ye.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sh=class{snapshot;type=Ye.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var _c=class{},hs=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function EF(t){return!(t instanceof _c)&&!(t instanceof hs)}function IF(t,e){return t.providers&&!t._injector&&(t._injector=tc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function on(t){return t.outlet||Z}function wF(t,e){let n=t.filter(r=>on(r)===e);return n.push(...t.filter(r=>on(r)!==e)),n}function gs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ah=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return gs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ms(this.rootInjector)}},ms=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ah(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(Fe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ch=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=My(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=My(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Py(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Py(e,this._root).map(n=>n.value)}};function My(t,e){if(t===e.value)return e;for(let n of e.children){let r=My(t,n);if(r)return r}return null}function Py(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Py(t,n);if(r.length)return r.unshift(e),r}return[]}var Ft=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function cs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ec=class extends ch{snapshot;constructor(e,n){super(e),this.snapshot=n,Uy(this,e)}toString(){return this.snapshot.toString()}};function IS(t){let e=TF(t),n=new tt([new Lr("",{})]),r=new tt({}),i=new tt({}),o=new tt({}),s=new tt(""),a=new Xn(n,r,o,s,i,Z,t,e.root);return a.snapshot=e.root,new Ec(new Ft(a,[]),e)}function TF(t){let e={},n={},r={},o=new Vi([],e,r,"",n,Z,t,null,{});return new Ic("",new Ft(o,[]))}var Xn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(l=>l[bc]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>ji(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>ji(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&TS(i)&&(r.resolve[bc]=i.title),r}var Vi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ji(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ji(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ic=class extends ch{url;constructor(e,n){super(n),this.url=e,Uy(this,n)}toString(){return wS(this._root)}};function Uy(t,e){e.value._routerState=t,e.children.forEach(n=>Uy(t,n))}function wS(t){let e=t.children.length>0?` { ${t.children.map(wS).join(", ")} } `:"";return`${t.value}${e}`}function Dy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wn(e.params,n.params)||t.paramsSubject.next(n.params),YL(e.url,n.url)||t.urlSubject.next(n.url),wn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ky(t,e){let n=wn(t.params,e.params)&&eF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ky(t.parent,e.parent))}function TS(t){return typeof t.title=="string"||t.title===null}var DS=new U(""),By=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new _t;deactivateEvents=new _t;attachEvents=new _t;detachEvents=new _t;routerOutletData=kC();parentContexts=k(ms);location=k(ec);changeDetector=k(Vd);inputBinder=k(fh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new xy(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=is({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ns]})}return t})(),xy=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Xn?this.route:e===ms?this.childContexts:e===DS?this.outletData:this.parent.get(e,n)}},fh=new U("");var $y=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Qm({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&xd(0,"router-outlet")},dependencies:[By],encapsulation:2})}return t})();function Hy(t){let e=t.children&&t.children.map(Hy),n=e?ve(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=$y),n}function DF(t,e,n){let r=wc(t,e._root,n?n._root:void 0);return new Ec(r,e)}function wc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=bF(t,e,n);return new Ft(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>wc(t,a)),s}}let r=CF(e.value),i=e.children.map(o=>wc(t,o));return new Ft(r,i)}}function bF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return wc(t,r,i);return wc(t,r)})}function CF(t){return new Xn(new tt(t.url),new tt(t.params),new tt(t.queryParams),new tt(t.fragment),new tt(t.data),t.outlet,t.component,t)}var fs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},bS="ngNavigationCancelingError";function lh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Fr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CS(!1,Et.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function CS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[bS]=!0,n.cancellationCode=e,n}function SF(t){return SS(t)&&Fr(t.url)}function SS(t){return!!t&&t[bS]}var AF=(t,e,n,r)=>re(i=>(new Oy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Oy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Dy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=cs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=cs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=cs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=cs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new sh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ih(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Dy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Dy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},dh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ls=class{component;route;constructor(e,n){this.component=e,this.route=n}};function RF(t,e,n){let r=t._root,i=e?e._root:null;return hc(r,i,n,[r.value])}function NF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ys(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ig(t)?t:e.get(t):r}function hc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=cs(e);return t.children.forEach(s=>{MF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>gc(a,n.getContext(s),i)),i}function MF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=PF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new dh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?hc(t,e,a?a.children:null,r,i):hc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ls(a.outlet.component,s))}else s&&gc(e,a,i),i.canActivateChecks.push(new dh(r)),o.component?hc(t,null,a?a.children:null,r,i):hc(t,null,n,r,i);return i}function PF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Fi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fi(t.url,e.url)||!wn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ky(t,e)||!wn(t.queryParams,e.queryParams);case"paramsChange":default:return!ky(t,e)}}function gc(t,e,n){let r=cs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?gc(s,e.children.getContext(o),n):gc(s,null,n):gc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ls(e.outlet.component,i)):n.canDeactivateChecks.push(new ls(null,i)):n.canDeactivateChecks.push(new ls(null,i))}function Sc(t){return typeof t=="function"}function kF(t){return typeof t=="boolean"}function xF(t){return t&&Sc(t.canLoad)}function OF(t){return t&&Sc(t.canActivate)}function LF(t){return t&&Sc(t.canActivateChild)}function FF(t){return t&&Sc(t.canDeactivate)}function VF(t){return t&&Sc(t.canMatch)}function AS(t){return t instanceof Un||t?.name==="EmptyError"}var zd=Symbol("INITIAL_VALUE");function ps(){return bt(t=>wl(t.map(e=>e.pipe(Bn(1),bl(zd)))).pipe(re(e=>{for(let n of e)if(n!==!0){if(n===zd)return zd;if(n===!1||jF(n))return n}return!0}),Nt(e=>e!==zd),Bn(1)))}function jF(t){return Fr(t)||t instanceof fs}function UF(t,e){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?W(ve(F({},n),{guardsResult:!0})):BF(s,r,i,t).pipe(He(a=>a&&kF(a)?$F(r,o,t,e):W(a)),re(a=>ve(F({},n),{guardsResult:a})))})}function BF(t,e,n,r){return Ne(t).pipe(He(i=>WF(i.component,i.route,n,e,r)),$n(i=>i!==!0,!0))}function $F(t,e,n,r){return Ne(e).pipe(Fo(i=>Lo(qF(i.route.parent,r),HF(i.route,r),GF(t,i.path,n),zF(t,i.route,n))),$n(i=>i!==!0,!0))}function HF(t,e){return t!==null&&e&&e(new oh(t)),W(!0)}function qF(t,e){return t!==null&&e&&e(new rh(t)),W(!0)}function zF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>wa(()=>{let s=gs(e)??n,a=ys(o,s),u=OF(a)?a.canActivate(e,t):qe(s,()=>a(e,t));return er(u).pipe($n())}));return W(i).pipe(ps())}function GF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>NF(s)).filter(s=>s!==null).map(s=>wa(()=>{let a=s.guards.map(u=>{let l=gs(s.node)??n,h=ys(u,l),p=LF(h)?h.canActivateChild(r,t):qe(l,()=>h(r,t));return er(p).pipe($n())});return W(a).pipe(ps())}));return W(o).pipe(ps())}function WF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(a=>{let u=gs(e)??i,l=ys(a,u),h=FF(l)?l.canDeactivate(t,e,n,r):qe(u,()=>l(t,e,n,r));return er(h).pipe($n())});return W(s).pipe(ps())}function KF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let a=ys(s,t),u=xF(a)?a.canLoad(e,n):qe(t,()=>a(e,n));return er(u)});return W(o).pipe(ps(),RS(r))}function RS(t){return rl(We(e=>{if(typeof e!="boolean")throw lh(t,e)}),re(e=>e===!0))}function QF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let a=ys(s,t),u=VF(a)?a.canMatch(e,n):qe(t,()=>a(e,n));return er(u)});return W(o).pipe(ps(),RS(r))}var Tc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Dc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function as(t){return Oo(new Tc(t))}function YF(t){return Oo(new j(4e3,!1))}function ZF(t){return Oo(CS(!1,Et.GuardRejected))}var Ly=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[Z])return YF(`${e.redirectTo}`);i=i.children[Z]}}applyRedirectCommands(e,n,r,i,o){return JF(n,i,o).pipe(re(s=>{if(s instanceof Dn)throw new Dc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Dc(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new pe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function JF(t,e,n){if(typeof t=="string")return W(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return er(qe(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XF(t,e,n,r,i){let o=NS(t,e,n);return o.matched?(r=IF(e,r),QF(r,e,n,i).pipe(re(s=>s===!0?o:F({},Fy)))):W(o)}function NS(t,e,n){if(e.path==="**")return eV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Fy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||oS)(n,t,e);if(!i)return F({},Fy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function eV(t){return{matched:!0,parameters:t.length>0?aS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function nS(t,e,n,r){return n.length>0&&rV(t,n,r)?{segmentGroup:new pe(e,nV(r,new pe(n,t.children))),slicedSegments:[]}:n.length===0&&iV(t,n,r)?{segmentGroup:new pe(t.segments,tV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new pe(t.segments,t.children),slicedSegments:n}}function tV(t,e,n,r){let i={};for(let o of n)if(ph(t,e,o)&&!r[on(o)]){let s=new pe([],{});i[on(o)]=s}return F(F({},r),i)}function nV(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&on(r)!==Z){let i=new pe([],{});n[on(r)]=i}return n}function rV(t,e,n){return n.some(r=>ph(t,e,r)&&on(r)!==Z)}function iV(t,e,n){return n.some(r=>ph(t,e,r))}function ph(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function oV(t,e,n){return e.length===0&&!t.children[n]}var Vy=class{};function sV(t,e,n,r,i,o,s="emptyOnly"){return new jy(t,e,n,r,i,s,o).recognize()}var aV=31,jy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ly(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=nS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:n,rootSnapshot:r})=>{let i=new Ft(r,n),o=new Ic("",i),s=mS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Vi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,n).pipe(re(r=>({children:r,rootSnapshot:n})),Tr(r=>{if(r instanceof Dc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Tc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(re(s=>s instanceof Ft?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ne(o).pipe(Fo(s=>{let a=r.children[s],u=wF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Dl((s,a)=>(s.push(...a),s)),Dr(null),$p(),He(s=>{if(s===null)return as(r);let a=MS(s);return cV(a),W(a)}))}processSegment(e,n,r,i,o,s,a){return Ne(n).pipe(Fo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Tr(l=>{if(l instanceof Tc)return W(null);throw l}))),$n(u=>!!u),Tr(u=>{if(AS(u))return oV(r,i,o)?W(new Vy):as(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return on(r)!==s&&(s===Z||!ph(i,o,r))?as(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):as(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=NS(n,i,o);if(!u)return as(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aV&&(this.allowRedirects=!1));let y=new Vi(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,rS(i),on(i),i.component??i._loadedComponent??null,i,iS(i)),C=uh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(bt(R=>this.applyRedirects.lineralizeSegments(i,R)),He(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=XF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(bt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,C=new Vi(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,rS(r),on(r),r.component??r._loadedComponent??null,r,iS(r)),N=uh(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=nS(n,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(re(Q=>new Ft(C,Q)));if(l.length===0&&x.length===0)return W(new Ft(C,[]));let H=on(r)===o;return this.processSegment(h,l,R,x,H?Z:o,!0,C).pipe(re(Q=>new Ft(C,Q instanceof Ft?[Q]:[])))}))):as(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):KF(e,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,n).pipe(We(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):ZF(n))):W({routes:[],injector:e})}};function cV(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function uV(t){let e=t.value.routeConfig;return e&&e.path===""}function MS(t){let e=[],n=new Set;for(let r of t){if(!uV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=MS(r.children);e.push(new Ft(r.value,i))}return e.filter(r=>!n.has(r))}function rS(t){return t.data||{}}function iS(t){return t.resolve||{}}function lV(t,e,n,r,i,o){return He(s=>sV(t,e,n,r,s.extractedUrl,i,o).pipe(re(({state:a,tree:u})=>ve(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function dV(t,e){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of PS(u))s.add(l);let a=0;return Ne(s).pipe(Fo(u=>o.has(u)?hV(u,r,t,e):(u.data=uh(u,u.parent,t).resolve,W(void 0))),We(()=>a++),Vo(1),He(u=>a===s.size?W(n):Tt))})}function PS(t){let e=t.children.map(n=>PS(n)).flat();return[t,...e]}function hV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!TS(i)&&(o[bc]=i.title),wa(()=>(t.data=uh(t,t.parent,n).resolve,fV(o,t,e,r).pipe(re(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function fV(t,e,n,r){let i=Sy(t);if(i.length===0)return W({});let o={};return Ne(i).pipe(He(s=>pV(t[s],e,n,r).pipe($n(),We(a=>{if(a instanceof fs)throw lh(new Ui,a);o[s]=a}))),Vo(1),re(()=>o),Tr(s=>AS(s)?Tt:Oo(s)))}function pV(t,e,n,r){let i=gs(e)??r,o=ys(t,i),s=o.resolve?o.resolve(e,n):qe(i,()=>o(e,n));return er(s)}function by(t){return bt(e=>{let n=t(e);return n?Ne(n).pipe(re(()=>e)):W(e)})}var qy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[bc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(kS),providedIn:"root"})}return t})(),kS=(()=>{class t extends qy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(ZC))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vs=new U("",{providedIn:"root",factory:()=>({})}),Ac=new U(""),xS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(oy);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=er(qe(n,()=>r.loadComponent())).pipe(re(LS),bt(FS),We(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ta(()=>{this.componentLoaders.delete(r)})),o=new Mo(i,()=>new Ge).pipe(No());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OS(r,this.compiler,n,this.onLoadEndListener).pipe(Ta(()=>{this.childrenLoaders.delete(r)})),s=new Mo(o,()=>new Ge).pipe(No());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function OS(t,e,n,r){return er(qe(n,()=>t.loadChildren())).pipe(re(LS),bt(FS),He(i=>i instanceof Md||Array.isArray(i)?W(i):Ne(e.compileModuleAsync(i))),re(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ac,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hy),injector:o}}))}function gV(t){return t&&typeof t=="object"&&"default"in t}function LS(t){return gV(t)?t.default:t}function FS(t){return W(t)}var gh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(mV),providedIn:"root"})}return t})(),mV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),VS=new U("");var jS=new U(""),US=(()=>{class t{currentNavigation=Ai(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ge;transitionAbortWithErrorSubject=new Ge;configLoader=k(xS);environmentInjector=k(Fe);destroyRef=k(Si);urlSerializer=k(Cc);rootContexts=k(ms);location=k(ss);inputBindingEnabled=k(fh,{optional:!0})!==null;titleStrategy=k(qy);options=k(vs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(gh);createViewTransition=k(VS,{optional:!0});navigationErrorHandler=k(jS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new th(i)),r=i=>this.events.next(new nh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Qn(()=>{this.transitions?.next(ve(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new tt(null),this.transitions.pipe(Nt(r=>r!==null),bt(r=>{let i=!1;return W(r).pipe(bt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Et.SupersededByNewNavigation),Tt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ve(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Jn(o.id,this.urlSerializer.serialize(o.rawUrl),"",yc.IgnoredSameUrlNavigation)),o.resolve(!1),Tt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return W(o).pipe(bt(u=>(this.events.next(new Bi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Tt:Promise.resolve(u))),lV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),We(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new vc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Bi(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=IS(this.rootComponentType).snapshot;return this.currentTransition=r=ve(F({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:ve(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),W(r)}else return this.events.next(new Jn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",yc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Tt}),We(o=>{let s=new Zd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),re(o=>(this.currentTransition=r=ve(F({},o),{guards:RF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),UF(this.environmentInjector,o=>this.events.next(o)),We(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw lh(this.urlSerializer,o.guardsResult);let s=new Jd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Nt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Et.GuardRejected),!1)),by(o=>{if(o.guards.canActivateChecks.length!==0)return W(o).pipe(We(s=>{let a=new Xd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),bt(s=>{let a=!1;return W(s).pipe(dV(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Et.NoDataFromResolver)}}))}),We(s=>{let a=new eh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),by(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=gs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(We(h=>{a.component=h}),re(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return wl(s(o.targetSnapshot.root)).pipe(Dr(null),Bn(1))}),by(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ne(a).pipe(re(()=>r)):W(r)}),re(o=>{let s=DF(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ve(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),We(()=>{this.events.next(new _c)}),AF(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Bn(1),Cl(new G(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Nt(()=>!i&&!r.targetRouterState),We(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Et.Aborted)}))),We({next:o=>{i=!0,this.lastSuccessfulNavigation=Qn(this.currentNavigation),this.events.next(new bn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Cl(this.transitionAbortWithErrorSubject.pipe(We(o=>{throw o}))),Ta(()=>{i||this.cancelNavigationTransition(r,"",Et.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Tr(o=>{if(this.destroyed)return r.resolve(!1),Tt;if(i=!0,SS(o))this.events.next(new Tn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),SF(o)?this.events.next(new hs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ds(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof fs){let{message:u,cancellationCode:l}=lh(this.urlSerializer,a);this.events.next(new Tn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new hs(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Tt}))}))}cancelNavigationTransition(n,r,i){let o=new Tn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Qn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yV(t){return t!==pc}var BS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(vV),providedIn:"root"})}return t})(),hh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},vV=(()=>{class t extends hh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=vd(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$S=(()=>{class t{urlSerializer=k(Cc);options=k(vs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(ss);urlHandlingStrategy=k(gh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=IS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(_V),providedIn:"root"})}return t})(),_V=(()=>{class t extends $S{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Bi?this.updateStateMemento():n instanceof Jn?this.commitTransition(r):n instanceof vc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _c?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Tn&&n.code!==Et.SupersededByNewNavigation&&n.code!==Et.Redirect?this.restoreHistory(r):n instanceof ds?this.restoreHistory(r,!0):n instanceof bn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vd(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zy(t,e){t.events.pipe(Nt(n=>n instanceof bn||n instanceof Tn||n instanceof ds||n instanceof Jn),re(n=>n instanceof bn||n instanceof Jn?0:(n instanceof Tn?n.code===Et.Redirect||n.code===Et.SupersededByNewNavigation:!1)?2:1),Nt(n=>n!==2),Bn(1)).subscribe(()=>{e()})}var EV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rc=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(Ym);stateManager=k($S);options=k(vs,{optional:!0})||{};pendingTasks=k(_n);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(US);urlSerializer=k(Cc);location=k(ss);urlHandlingStrategy=k(gh);injector=k(Fe);_events=new Ge;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(BS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Ac,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(fh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Qn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Tn&&r.code!==Et.Redirect&&r.code!==Et.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bn)this.navigated=!0;else if(r instanceof hs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yV(i.source)},s);this.scheduleNavigation(a,pc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}EF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Ot)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Qn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Hy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=yS(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return vS(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Fr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,pc,null,r)}navigate(n,r={skipLocationChange:!1}){return wV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Sa(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},EV):r===!1?i=F({},IV):i=r,Fr(n))return JC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return JC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return zy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var HS=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ai(null);get href(){return Qn(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ge;applicationErrorHandler=k(Ot);options=k(vs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Fd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof bn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Fr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Fr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(rn(Rc),rn(Xn),Ya("tabindex"),rn(Nd),rn(Za),rn(os))};static \u0275dir=is({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Od("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&kd("href",i.reactiveHref(),Pm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",jd],skipLocationChange:[2,"skipLocationChange","skipLocationChange",jd],replaceUrl:[2,"replaceUrl","replaceUrl",jd],routerLink:"routerLink"},features:[ns]})}return t})();var DV=new U("");function bV(t,...e){return Zt([{provide:Ac,multi:!0,useValue:t},[],{provide:Xn,useFactory:CV,deps:[Rc]},{provide:Pd,multi:!0,useFactory:SV},e.map(n=>n.\u0275providers)])}function CV(t){return t.routerState.root}function SV(){let t=k(Qe);return e=>{let n=t.get(Li);if(e!==n.components[0])return;let r=t.get(Rc),i=t.get(AV);t.get(RV)===1&&r.initialNavigation(),t.get(NV,null,{optional:!0})?.setUpPreloading(),t.get(DV,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AV=new U("",{factory:()=>new Ge}),RV=new U("",{providedIn:"root",factory:()=>1});var NV=new U("");var qS=()=>{};var WS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Wy;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Wy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},PV=function(t){let e=WS(t);return mh.encodeByteArray(e,!0)},Mc=function(t){return PV(t).replace(/\./g,"")},yh=function(t){try{return mh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kV=()=>Qy().__FIREBASE_DEFAULTS__,xV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&yh(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return qS()||kV()||xV()||OV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yy=t=>{var e,n;return(n=(e=vh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KS=t=>{let e=Yy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zy=()=>{var t;return(t=vh())===null||t===void 0?void 0:t.config},Jy=t=>{var e;return(e=vh())===null||e===void 0?void 0:e[`_${t}`]};var $i=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function _h(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function QS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mc(JSON.stringify(n)),Mc(JSON.stringify(s)),""].join(".")}var Nc={};function LV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Nc))Nc[e]?t.emulator.push(e):t.prod.push(e);return t}function FV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var zS=!1;function Eh(t,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||Nc[t]===e||Nc[t]||zS)return;Nc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=LV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{zS=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=FV(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),H=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let Q=g.element;a(Q),h(R,N);let Ee=l();u(H,x),Q.append(H,C,R,Ee),document.body.appendChild(Q)}o?(C.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function VV(){var t;let e=(t=vh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eA(){let t=Ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tA(){return!VV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pc(){try{return typeof indexedDB=="object"}catch{return!1}}function nA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var jV="FirebaseError",jt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?UV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new jt(i,a,r)}};function UV(t,e){return t.replace(BV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BV=/\{\$([^}]+)}/g;function rA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(GS(o)&&GS(s)){if(!Cn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function GS(t){return t!==null&&typeof t=="object"}function kc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _s(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Es(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iA(t,e){let n=new Ky(t,e);return n.subscribe.bind(n)}var Ky=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$V(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gy),i.error===void 0&&(i.error=Gy),i.complete===void 0&&(i.complete=Gy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $V(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gy(){}var Xee=14400*1e3;function Oe(t){return t&&t._delegate?t._delegate:t}var It=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Hi="[DEFAULT]";var Xy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new $i;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qV(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HV(t){return t===Hi?void 0:t}function qV(t){return t.instantiationMode==="EAGER"}var Ih=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Xy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var zV=[],se=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(se||{}),GV={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},WV=se.INFO,KV={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},QV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=KV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sn=class{constructor(e){this.name=e,this._logLevel=WV,this._logHandler=QV,this._userLogHandler=null,zV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var YV=(t,e)=>e.some(n=>t instanceof n),oA,sA;function ZV(){return oA||(oA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JV(){return sA||(sA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var aA=new WeakMap,tv=new WeakMap,cA=new WeakMap,ev=new WeakMap,rv=new WeakMap;function XV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(An(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&aA.set(n,t)}).catch(()=>{}),rv.set(e,t),e}function e2(t){if(tv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});tv.set(t,e)}var nv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uA(t){nv=t(nv)}function t2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(wh(this),e,...n);return cA.set(r,e.sort?e.sort():[e]),An(r)}:JV().includes(t)?function(...e){return t.apply(wh(this),e),An(aA.get(this))}:function(...e){return An(t.apply(wh(this),e))}}function n2(t){return typeof t=="function"?t2(t):(t instanceof IDBTransaction&&e2(t),YV(t,ZV())?new Proxy(t,nv):t)}function An(t){if(t instanceof IDBRequest)return XV(t);if(ev.has(t))return ev.get(t);let e=n2(t);return e!==t&&(ev.set(t,e),rv.set(e,t)),e}var wh=t=>rv.get(t);function dA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=An(s);return r&&s.addEventListener("upgradeneeded",u=>{r(An(s.result),u.oldVersion,u.newVersion,An(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var r2=["get","getKey","getAll","getAllKeys","count"],i2=["put","add","delete","clear"],iv=new Map;function lA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iv.get(e))return iv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=i2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r2.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return iv.set(e,o),o}uA(t=>ve(F({},t),{get:(e,n,r)=>lA(e,n)||t.get(e,n,r),has:(e,n)=>!!lA(e,n)||t.has(e,n)}));var sv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function o2(t){let e=t.getComponent();return e?.type==="VERSION"}var av="@firebase/app",hA="0.13.2";var tr=new Sn("@firebase/app"),s2="@firebase/app-compat",a2="@firebase/analytics-compat",c2="@firebase/analytics",u2="@firebase/app-check-compat",l2="@firebase/app-check",d2="@firebase/auth",h2="@firebase/auth-compat",f2="@firebase/database",p2="@firebase/data-connect",g2="@firebase/database-compat",m2="@firebase/functions",y2="@firebase/functions-compat",v2="@firebase/installations",_2="@firebase/installations-compat",E2="@firebase/messaging",I2="@firebase/messaging-compat",w2="@firebase/performance",T2="@firebase/performance-compat",D2="@firebase/remote-config",b2="@firebase/remote-config-compat",C2="@firebase/storage",S2="@firebase/storage-compat",A2="@firebase/firestore",R2="@firebase/ai",N2="@firebase/firestore-compat",M2="firebase",P2="11.10.0";var cv="[DEFAULT]",k2={[av]:"fire-core",[s2]:"fire-core-compat",[c2]:"fire-analytics",[a2]:"fire-analytics-compat",[l2]:"fire-app-check",[u2]:"fire-app-check-compat",[d2]:"fire-auth",[h2]:"fire-auth-compat",[f2]:"fire-rtdb",[p2]:"fire-data-connect",[g2]:"fire-rtdb-compat",[m2]:"fire-fn",[y2]:"fire-fn-compat",[v2]:"fire-iid",[_2]:"fire-iid-compat",[E2]:"fire-fcm",[I2]:"fire-fcm-compat",[w2]:"fire-perf",[T2]:"fire-perf-compat",[D2]:"fire-rc",[b2]:"fire-rc-compat",[C2]:"fire-gcs",[S2]:"fire-gcs-compat",[A2]:"fire-fst",[N2]:"fire-fst-compat",[R2]:"fire-vertex","fire-js":"fire-js",[M2]:"fire-js-all"};var xc=new Map,x2=new Map,uv=new Map;function fA(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function an(t){let e=t.name;if(uv.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;uv.set(e,t);for(let n of xc.values())fA(n,t);for(let n of x2.values())fA(n,t);return!0}function Is(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}var O2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new sn("app","Firebase",O2);var lv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new It("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};var Ur=P2;function fv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:cv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=Zy()),!n)throw jr.create("no-options");let o=xc.get(i);if(o){if(Cn(n,o.options)&&Cn(r,o.config))return o;throw jr.create("duplicate-app",{appName:i})}let s=new Ih(i);for(let u of uv.values())s.addComponent(u);let a=new lv(n,r,s);return xc.set(i,a),a}function qi(t=cv){let e=xc.get(t);if(!e&&t===cv&&Zy())return fv();if(!e)throw jr.create("no-app",{appName:t});return e}function Th(){return Array.from(xc.values())}function Me(t,e,n){var r;let i=(r=k2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(a.join(" "));return}an(new It(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var L2="firebase-heartbeat-database",F2=1,Oc="firebase-heartbeat-store",ov=null;function yA(){return ov||(ov=dA(L2,F2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),ov}function V2(t){return v(this,null,function*(){try{let n=(yield yA()).transaction(Oc),r=yield n.objectStore(Oc).get(vA(t));return yield n.done,r}catch(e){if(e instanceof jt)tr.warn(e.message);else{let n=jr.create("idb-get",{originalErrorMessage:e?.message});tr.warn(n.message)}}})}function pA(t,e){return v(this,null,function*(){try{let r=(yield yA()).transaction(Oc,"readwrite");yield r.objectStore(Oc).put(e,vA(t)),yield r.done}catch(n){if(n instanceof jt)tr.warn(n.message);else{let r=jr.create("idb-set",{originalErrorMessage:n?.message});tr.warn(r.message)}}})}function vA(t){return`${t.name}!${t.options.appId}`}var j2=1024,U2=30,dv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new hv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>U2){let s=$2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=gA(),{heartbeatsToSend:r,unsentEntries:i}=B2(this._heartbeatsCache.heartbeats),o=Mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return tr.warn(n),""}})}};function gA(){return new Date().toISOString().substring(0,10)}function B2(t,e=j2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),mA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var hv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Pc()?nA().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield V2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mA(t){return Mc(JSON.stringify({version:2,heartbeats:t})).length}function $2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function H2(t){an(new It("platform-logger",e=>new sv(e),"PRIVATE")),an(new It("heartbeat",e=>new dv(e),"PRIVATE")),Me(av,hA,t),Me(av,hA,"esm2017"),Me("fire-js","")}H2("");var q2="firebase",z2="11.10.0";Me(q2,z2,"app");function _A(t){t===void 0&&(t=k(Qe));let e=t.get(Wo);return n=>new G(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Br=new Uo("ANGULARFIRE2_VERSION");function Lc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ts=(t,e)=>{let n=e?[e]:Th(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ws=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(ws||{}),EA=ly()&&typeof Zone<"u"?ws.WARN:ws.SILENT;var Dh=class{zone;delegate;constructor(e,n=jp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},$r=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(_e);this.outsideAngular=n.runOutsideAngular(()=>new Dh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Dh(typeof Zone>"u"?void 0:Zone.current,Vp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IA=!1;function G2(t,e){!IA&&(EA>ws.SILENT||ly())&&(IA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),EA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function W2(t){let e=k(_e,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function zi(t){let e=k(_e,{optional:!0});return e?e.run(()=>t()):t()}var K2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),qe(n,()=>zi(()=>t.apply(void 0,r)))),be=(t,e,n)=>(n||=e?ws.WARN:ws.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k($r),s=k(Wo),a=k(Fe)}catch{return G2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=zi(()=>s.add())),i[l]=K2(i[l],r,a));let u=W2(()=>t.apply(this,i));return e?u instanceof G?u.pipe(wr(o.outsideAngular),Ir(o.insideAngular),_A(a)):u instanceof Promise?zi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>qe(a,()=>zi(()=>h(g))),g=>qe(a,()=>zi(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:zi(()=>u):u instanceof G?u.pipe(wr(o.outsideAngular),Ir(o.insideAngular)):zi(()=>u)});var nr=class{constructor(e){return e}},Gi=class{constructor(){return Th()}};function Q2(t){return t&&t.length===1?t[0]:new nr(qi())}var pv=new U("angularfire2._apps"),Y2={provide:nr,useFactory:Q2,deps:[[new Lt,pv]]},Z2={provide:Gi,deps:[[new Lt,pv]]};function J2(t){return(e,n)=>{let r=n.get(Oi);Me("angularfire",Br.full,"core"),Me("angularfire",Br.full,"app"),Me("angular",tg.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new nr(i)}}function Kte(t,...e){return Zt([Y2,Z2,{provide:pv,useFactory:J2(t),multi:!0,deps:[_e,Qe,$r,...e]}])}var Qte=be(fv,!0);var X2=new Map,ej={activated:!1,tokenObservers:[]},tj={initialized:!1,enabled:!1};function cn(t){return X2.get(t)||Object.assign({},ej)}function bA(){return tj}var nj="https://content-firebaseappcheck.googleapis.com/v1";var rj="exchangeDebugToken",wA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},ine=1440*60*1e3;var yv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new $i,this.pending.promise.catch(n=>{}),yield ij(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new $i,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function ij(t){return new Promise(e=>{setTimeout(e,t)})}var oj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Hr=new sn("appCheck","AppCheck",oj);function CA(t){if(!cn(t).activated)throw Hr.create("use-before-activation",{appName:t.name})}function SA(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Hr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Hr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Hr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function AA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${nj}/projects/${n}/apps/${r}:${rj}?key=${i}`,body:{debug_token:e}}}var sj="firebase-app-check-database",aj=1,vv="firebase-app-check-store";var bh=null;function cj(){return bh||(bh=new Promise((t,e)=>{try{let n=indexedDB.open(sj,aj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Hr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(vv,{keyPath:"compositeKey"})}}}catch(n){e(Hr.create("storage-open",{originalErrorMessage:n?.message}))}}),bh)}function uj(t,e){return lj(dj(t),e)}function lj(t,e){return v(this,null,function*(){let r=(yield cj()).transaction(vv,"readwrite"),o=r.objectStore(vv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Hr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function dj(t){return`${t.options.appId}-${t.name}`}var Fc=new Sn("@firebase/app-check");function gv(t,e){return Pc()?uj(t,e).catch(n=>{Fc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function RA(){return bA().enabled}function NA(){return v(this,null,function*(){let t=bA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var hj={error:"UNKNOWN_ERROR"};function fj(t){return mh.encodeString(JSON.stringify(t),!1)}function _v(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;CA(r);let i=cn(r),o=i.token,s;if(o&&!Vc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Vc(l)?o=l:yield gv(r,void 0))}if(!e&&o&&Vc(o))return{token:o.token};let a=!1;if(RA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=SA(AA(r,yield NA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield gv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Fc.warn(l.message):n&&Fc.error(l),mv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield cn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Fc.warn(l.message):n&&Fc.error(l),s=l}let u;return o?s?Vc(o)?u={token:o.token,internalError:s}:u=mv(s):(u={token:o.token},i.token=o,yield gv(r,o)):u=mv(s),a&&yj(r,u),u})}function pj(t){return v(this,null,function*(){let e=t.app;CA(e);let{provider:n}=cn(e);if(RA()){let r=yield NA(),{token:i}=yield SA(AA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function gj(t,e,n,r){let{app:i}=t,o=cn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),TA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>TA(t))}function MA(t,e){let n=cn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function TA(t){let{app:e}=t,n=cn(e),r=n.tokenRefresher;r||(r=mj(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function mj(t){let{app:e}=t;return new yv(()=>v(null,null,function*(){let n=cn(e),r;if(n.token?r=yield _v(t,!0):r=yield _v(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=cn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},wA.RETRIAL_MIN_WAIT,wA.RETRIAL_MAX_WAIT)}function yj(t,e){let n=cn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vc(t){return t.expireTimeMillis-Date.now()>0}function mv(t){return{token:fj(hj),error:t}}var Ev=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=cn(this.app);for(let n of e)MA(this.app,n.next);return Promise.resolve()}};function vj(t,e){return new Ev(t,e)}function _j(t){return{getToken:e=>_v(t,e),getLimitedUseToken:()=>pj(t),addTokenListener:e=>gj(t,"INTERNAL",e),removeTokenListener:e=>MA(t.app,e)}}var Ej="@firebase/app-check",Ij="0.10.1";var wj="app-check",DA="app-check-internal";function Tj(){an(new It(wj,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return vj(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(DA).initialize()})),an(new It(DA,t=>{let e=t.getProvider("app-check").getImmediate();return _j(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(Ej,Ij)}Tj();var Dj="app-check";var Ds=class{constructor(){return Ts(Dj)}};var bj=["localhost","0.0.0.0","127.0.0.1"],yne=typeof window<"u"&&bj.includes(window.location.hostname);function WA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var KA=WA,QA=new sn("auth","Firebase",WA());var Mh=new Sn("@firebase/auth");function Cj(t,...e){Mh.logLevel<=se.WARN&&Mh.warn(`Auth (${Ur}): ${t}`,...e)}function Sh(t,...e){Mh.logLevel<=se.ERROR&&Mh.error(`Auth (${Ur}): ${t}`,...e)}function Nn(t,...e){throw zv(t,...e)}function Wi(t,...e){return zv(t,...e)}function YA(t,e,n){let r=Object.assign(Object.assign({},KA()),{[e]:n});return new sn("auth","Firebase",r).create(e,{appName:t.name})}function or(t){return YA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QA.create(t,...e)}function z(t,e,...n){if(!t)throw zv(e,...n)}function rr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Sh(e),new Error(e)}function Gr(t,e){t||rr(e)}function Dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Sj(){return PA()==="http:"||PA()==="https:"}function PA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Aj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sj()||JS()||"connection"in navigator)?navigator.onLine:!0}function Rj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ki=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||XS()}get(){return Aj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Gv(t,e){Gr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ph=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Nj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Mj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pj=new Ki(3e4,6e4);function Wr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Kr(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return ZA(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=kc(Object.assign({key:t.config.apiKey},h)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return ZS()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(y.credentials="include"),Ph.fetch()(yield JA(t,t.config.apiHost,n,p),y)}))})}function ZA(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Nj),e);try{let i=new bv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ch(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Ch(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Ch(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw YA(t,h,l);Nn(t,h)}}catch(i){if(i instanceof jt)throw i;Nn(t,"network-request-failed",{message:String(i)})}})}function Wc(o,s,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Kr(t,e,n,r,i);return"mfaPendingCredential"in l&&Nn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function JA(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Gv(t.config,i):`${t.config.apiScheme}://${i}`;return Mj.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function kj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var bv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wi(this.auth,"network-request-failed")),Pj.get())})}};function Ch(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Wi(t,e,r);return i.customData._tokenResponse=n,i}function kA(t){return t!==void 0&&t.enterprise!==void 0}var Cv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function xj(t,e){return v(this,null,function*(){return Kr(t,"GET","/v2/recaptchaConfig",Wr(t,e))})}function Oj(t,e){return v(this,null,function*(){return Kr(t,"POST","/v1/accounts:delete",e)})}function kh(t,e){return v(this,null,function*(){return Kr(t,"POST","/v1/accounts:lookup",e)})}function Uc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Wv(t,e=!1){return v(this,null,function*(){let n=Oe(t),r=yield n.getIdToken(e),i=Kv(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Uc(Iv(i.auth_time)),issuedAtTime:Uc(Iv(i.iat)),expirationTime:Uc(Iv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Iv(t){return Number(t)*1e3}function Kv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sh("JWT malformed, contained fewer than 3 sections"),null;try{let i=yh(n);return i?JSON.parse(i):(Sh("Failed to decode base64 JWT payload"),null)}catch(i){return Sh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xA(t){let e=Kv(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $c(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof jt&&Lj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Lj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Sv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Hc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function xh(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield $c(t,kh(n,{idToken:r}));z(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?XA(o.providerUserInfo):[],a=Fj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Hc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Qv(t){return v(this,null,function*(){let e=Oe(t);yield xh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Fj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XA(t){return t.map(e=>{var{providerId:n}=e,r=Up(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Vj(t,e){return v(this,null,function*(){let n=yield ZA(t,{},()=>v(null,null,function*(){let r=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield JA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(u.credentials="include"),Ph.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function jj(t,e){return v(this,null,function*(){return Kr(t,"POST","/v2/accounts:revokeToken",Wr(t,e))})}var Bc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=xA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Vj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return rr("not implemented")}};function qr(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var zr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield $c(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Wv(this,e)}reload(){return Qv(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield xh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Ct(this.auth.app))return Promise.reject(or(this.auth));let e=yield this.getIdToken();return yield $c(this,Oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:Ee,isAnonymous:mt,providerData:ye,stsTokenManager:T}=n;z(Q&&T,e,"internal-error");let _=Bc.fromJSON(this.name,T);z(typeof Q=="string",e,"internal-error"),qr(p,e.name),qr(g,e.name),z(typeof Ee=="boolean",e,"internal-error"),z(typeof mt=="boolean",e,"internal-error"),qr(y,e.name),qr(C,e.name),qr(N,e.name),qr(R,e.name),qr(x,e.name),qr(H,e.name);let I=new t({uid:Q,auth:e,email:g,emailVerified:Ee,displayName:p,isAnonymous:mt,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:x,lastLoginAt:H});return ye&&Array.isArray(ye)&&(I.providerData=ye.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Bc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield xh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?XA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Bc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var OA=new Map;function ir(t){Gr(t instanceof Function,"Expected a class definition");let e=OA.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OA.set(t,e),e)}var Uj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Av=Uj;function Ah(t,e,n){return`firebase:${t}:${e}:${n}`}var Oh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ah(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ah("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield kh(this.auth,{idToken:e}).catch(()=>{});return n?zr._fromGetAccountInfoResponse(this.auth,n,e):null}return zr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(ir(Av),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ir(Av),s=Ah(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield kh(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield zr._fromGetAccountInfoResponse(e,g,h)}else p=zr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function LA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o0(e))return"Blackberry";if(s0(e))return"Webos";if(t0(e))return"Safari";if((e.includes("chrome/")||n0(e))&&!e.includes("edge/"))return"Chrome";if(i0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function e0(t=Ze()){return/firefox\//i.test(t)}function t0(t=Ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n0(t=Ze()){return/crios\//i.test(t)}function r0(t=Ze()){return/iemobile/i.test(t)}function i0(t=Ze()){return/android/i.test(t)}function o0(t=Ze()){return/blackberry/i.test(t)}function s0(t=Ze()){return/webos/i.test(t)}function Yv(t=Ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bj(t=Ze()){var e;return Yv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $j(){return eA()&&document.documentMode===10}function a0(t=Ze()){return Yv(t)||i0(t)||s0(t)||o0(t)||/windows phone/i.test(t)||r0(t)}function c0(t,e=[]){let n;switch(t){case"Browser":n=LA(Ze());break;case"Worker":n=`${LA(Ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ur}/${r}`}var Rv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Hj(n){return v(this,arguments,function*(t,e={}){return Kr(t,"GET","/v2/passwordPolicy",Wr(t,e))})}var qj=6,Nv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:qj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Mv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lh(this),this.idTokenSubscription=new Lh(this),this.beforeStateQueue=new Rv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Oh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield kh(this,{idToken:e}),r=yield zr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Ct(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield xh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Rj()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Ct(this.app))return Promise.reject(or(this));let n=e?Oe(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Ct(this.app)?Promise.reject(or(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ct(this.app)?Promise.reject(or(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(ir(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Hj(this),n=new Nv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ir(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield Oh.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Cj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Yi(t){return Oe(t)}var Lh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=iA(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Hh={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zj(t){Hh=t}function u0(t){return Hh.loadJS(t)}function Gj(){return Hh.recaptchaEnterpriseScript}function Wj(){return Hh.gapiScript}function l0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Pv=class{constructor(){this.enterprise=new kv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},kv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var Kj="recaptcha-enterprise",d0="NO_RECAPTCHA",xv=class{constructor(e){this.type=Kj,this.auth=Yi(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){xj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Cv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;kA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(d0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Pv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&kA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Gj();u.length!==0&&(u+=a),u0(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function jc(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new xv(t),s;if(i)s=d0;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Ov(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield jc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield jc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield jc(t,e,n);return r(t,a).catch(u=>v(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield jc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let a=yield jc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")})}function Zv(t,e){let n=Is(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Cn(o,e??{}))return i;Nn(i,"already-initialized")}return n.initialize({options:e})}function Qj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Jv(t,e,n){let r=Yi(t);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=h0(e),{host:s,port:a}=Yj(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(Cn(l,r.config.emulator)&&Cn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Vr(s)?(_h(`${o}//${s}${u}`),Eh("Auth",!0)):i||Zj()}function h0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yj(t){let e=h0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:FA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:FA(s)}}}function FA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Zj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var qc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}};function Jj(t,e){return v(this,null,function*(){return Kr(t,"POST","/v1/accounts:signUp",e)})}function Xj(t,e){return v(this,null,function*(){return Wc(t,"POST","/v1/accounts:signInWithPassword",Wr(t,e))})}function eU(t,e){return v(this,null,function*(){return Wc(t,"POST","/v1/accounts:signInWithEmailLink",Wr(t,e))})}function tU(t,e){return v(this,null,function*(){return Wc(t,"POST","/v1/accounts:signInWithEmailLink",Wr(t,e))})}var zc=class t extends qc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ov(e,n,"signInWithPassword",Xj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eU(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ov(e,r,"signUpPassword",Jj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tU(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function wv(t,e){return v(this,null,function*(){return Wc(t,"POST","/v1/accounts:signInWithIdp",Wr(t,e))})}function nU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rU(t){let e=_s(Es(t)).link,n=e?_s(Es(e)).deep_link_id:null,r=_s(Es(t)).deep_link_id;return(r?_s(Es(r)).link:null)||r||n||e||t}var Fh=class t{constructor(e){var n,r,i,o,s,a;let u=_s(Es(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=nU((i=u.mode)!==null&&i!==void 0?i:null);z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=rU(e);try{return new t(n)}catch{return null}}};var f0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return zc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Fh.parseLink(r);return z(i,"argument-error"),zc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Vh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Lv=class extends Vh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function iU(t,e){return v(this,null,function*(){return Wc(t,"POST","/v1/accounts:signUp",Wr(t,e))})}var bs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield zr._fromIdTokenResponse(e,r,i),s=VA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=VA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function VA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Fv=class t extends jt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function p0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fv._fromErrorAndOperation(t,o,e,r):o})}function oU(t,e,n=!1){return v(this,null,function*(){let r=yield $c(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return bs._forOperation(t,"link",r)})}function sU(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Ct(r.app))return Promise.reject(or(r));let i="reauthenticate";try{let o=yield $c(t,p0(r,i,e,t),n);z(o.idToken,r,"internal-error");let s=Kv(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(t.uid===a,r,"user-mismatch"),bs._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nn(r,"user-mismatch"),o}})}function g0(t,e,n=!1){return v(this,null,function*(){if(Ct(t.app))return Promise.reject(or(t));let r="signIn",i=yield p0(t,r,e),o=yield bs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Xv(t,e){return v(this,null,function*(){return g0(Yi(t),e)})}function m0(t){return v(this,null,function*(){let e=Yi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function e_(t,e,n){return v(this,null,function*(){if(Ct(t.app))return Promise.reject(or(t));let r=Yi(t),s=yield Ov(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iU,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&m0(t),u}),a=yield bs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function t_(t,e,n){return Ct(t.app)?Promise.reject(or(t)):Xv(Oe(t),f0.credential(e,n)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&m0(t),r}))}function Kc(t,e,n,r){return Oe(t).onIdTokenChanged(e,n,r)}function n_(t,e,n){return Oe(t).beforeAuthStateChanged(e,n)}function r_(t){return Oe(t).signOut()}var jh="__sak";var Uh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jh,"1"),this.storage.removeItem(jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var aU=1e3,cU=10,uU=(()=>{class t extends Uh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);$j()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,cU):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield _r(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield _r(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield _r(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),y0=uU;var lU=(()=>{class t extends Uh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),i_=lU;function dU(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var hU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield dU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function v0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Vv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=v0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Rn(){return window}function fU(t){Rn().location.href=t}function _0(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}function pU(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function gU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mU(){return _0()?self:null}var E0="firebaseLocalStorageDb",yU=1,Bh="firebaseLocalStorage",I0="fbase_key",Qi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function qh(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function vU(){let t=indexedDB.deleteDatabase(E0);return new Qi(t).toPromise()}function jv(){let t=indexedDB.open(E0,yU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Bh,{keyPath:I0})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),yield vU(),e(yield jv()))}))})}function jA(t,e,n){return v(this,null,function*(){let r=qh(t,!0).put({[I0]:e,value:n});return new Qi(r).toPromise()})}function _U(t,e){return v(this,null,function*(){let n=qh(t,!1).get(e),r=yield new Qi(n).toPromise();return r===void 0?null:r.value})}function UA(t,e){let n=qh(t,!0).delete(e);return new Qi(n).toPromise()}var EU=800,IU=3,wU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield jv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>IU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return _0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=hU._getInstance(mU()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield pU(),!this.activeServiceWorker)return;this.sender=new Vv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||gU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield jv();return yield jA(n,jh,"1"),yield UA(n,jh),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>jA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>_U(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>UA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=qh(o,!1).getAll();return new Qi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),EU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),w0=wU;var bne=l0("rcb"),Cne=new Ki(3e4,6e4);function TU(t,e){return e?ir(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Gc=class extends qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function DU(t){return g0(t.auth,new Gc(t),t.bypassAuthState)}function bU(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),sU(n,new Gc(t),t.bypassAuthState)}function CU(t){return v(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),oU(n,new Gc(t),t.bypassAuthState)})}var Uv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DU;case"linkViaPopup":case"linkViaRedirect":return CU;case"reauthViaPopup":case"reauthViaRedirect":return bU;default:Nn(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Sne=new Ki(2e3,1e4);var SU="pendingRedirect",Rh=new Map,Bv=class t extends Uv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Rh.get(this.auth._key());if(!e){try{let r=(yield AU(this.resolver,this.auth))?yield _r(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return _r(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,_r(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function AU(t,e){return v(this,null,function*(){let n=MU(e),r=NU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function RU(t,e){Rh.set(t._key(),e)}function NU(t){return ir(t._redirectPersistence)}function MU(t){return Ah(SU,t.config.apiKey,t.name)}function PU(t,e,n=!1){return v(this,null,function*(){if(Ct(t.app))return Promise.reject(or(t));let r=Yi(t),i=TU(r,e),s=yield new Bv(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var kU=600*1e3,$v=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!T0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kU&&this.cachedEventUids.clear(),this.cachedEventUids.has(BA(e))}saveEventToCache(e){this.cachedEventUids.add(BA(e)),this.lastProcessedEventTime=Date.now()}};function BA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function T0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function xU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T0(t);default:return!1}}function OU(n){return v(this,arguments,function*(t,e={}){return Kr(t,"GET","/v1/projects",e)})}var LU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FU=/^https?/;function VU(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield OU(t);for(let n of e)try{if(jU(n))return}catch{}Nn(t,"unauthorized-domain")})}function jU(t){let e=Dv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!FU.test(n))return!1;if(LU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var UU=new Ki(3e4,6e4);function $A(){let t=Rn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BU(t){return new Promise((e,n)=>{var r,i,o;function s(){$A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$A(),n(Wi(t,"network-request-failed"))},timeout:UU.get()})}if(!((i=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rn().gapi)===null||o===void 0)&&o.load)s();else{let a=l0("iframefcb");return Rn()[a]=()=>{gapi.load?s():n(Wi(t,"network-request-failed"))},u0(`${Wj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Nh=null,e})}var Nh=null;function $U(t){return Nh=Nh||BU(t),Nh}var HU=new Ki(5e3,15e3),qU="__/auth/iframe",zU="emulator/auth/iframe",GU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KU(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Gv(e,zU):`https://${t.config.authDomain}/${qU}`,r={apiKey:e.apiKey,appName:t.name,v:Ur},i=WU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${kc(r).slice(1)}`}function QU(t){return v(this,null,function*(){let e=yield $U(t),n=Rn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:KU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GU,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Wi(t,"network-request-failed"),a=Rn().setTimeout(()=>{o(s)},HU.get());function u(){Rn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var YU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZU=500,JU=600,XU="_blank",eB="http://localhost",$h=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function tB(t,e,n,r=ZU,i=JU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},YU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ze().toLowerCase();n&&(a=n0(l)?XU:n),e0(l)&&(e=e||eB,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(Bj(l)&&a!=="_self")return nB(e||"",a),new $h(null);let p=window.open(e||"",a,h);z(p,t,"popup-blocked");try{p.focus()}catch{}return new $h(p)}function nB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rB="__/auth/handler",iB="emulator/auth/handler",oB=encodeURIComponent("fac");function HA(t,e,n,r,i,o){return v(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ur,eventId:i};if(e instanceof Vh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",rA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Lv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${oB}=${encodeURIComponent(u)}`:"";return`${sB(t)}?${kc(a).slice(1)}${l}`})}function sB({config:t}){return t.emulator?Gv(t,iB):`https://${t.authDomain}/${rB}`}var Tv="webStorageSupport",Hv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i_,this._completeRedirectFn=PU,this._overrideRedirectResult=RU}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Gr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield HA(e,n,r,Dv(),i);return tB(e,s,v0())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield HA(e,n,r,Dv(),i);return fU(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Gr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield QU(e),r=new $v(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tv,{type:Tv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Tv];s!==void 0&&n(!!s),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a0()||t0()||Yv()}},D0=Hv;var qA="@firebase/auth",zA="1.10.8";var qv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function aB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(t){an(new It("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c0(t)},l=new Mv(r,i,o,u);return Qj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),an(new It("auth-internal",e=>{let n=Yi(e.getProvider("auth").getImmediate());return(r=>new qv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(qA,zA,aB(t)),Me(qA,zA,"esm2017")}var uB=300,lB=Jy("authIdTokenMaxAge")||uB,GA=null,dB=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lB)return;let i=n?.token;GA!==i&&(GA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function o_(t=qi()){let e=Is(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Zv(t,{popupRedirectResolver:D0,persistence:[w0,y0,i_]}),r=Jy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=dB(o.toString());n_(n,s,()=>s(n.currentUser)),Kc(n,a=>s(a))}}let i=Yy("auth");return i&&Jv(n,`http://${i}`),n}function hB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Wi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",hB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");function S0(t){return new G(function(e){var n=Kc(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var A0="auth",Zi=class{constructor(e){return e}},Qc=class{constructor(){return Ts(A0)}};var s_=new U("angularfire2.auth-instances");function XB(t,e){let n=Lc(A0,t,e);return n&&new Zi(n)}function e$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Zi(r)}}var t$={provide:Qc,deps:[[new Lt,s_]]},n$={provide:Zi,useFactory:XB,deps:[[new Lt,s_],nr]};function _re(t,...e){return Me("angularfire",Br.full,"auth"),Zt([n$,t$,{provide:s_,useFactory:e$(t),multi:!0,deps:[_e,Qe,$r,Gi,[new Lt,Ds],...e]}])}var Ere=be(S0,!0);var Ire=be(e_,!0,2);var wre=be(o_,!0);var Tre=be(t_,!0,2);var Dre=be(r_,!0,2);var R0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N0={};var sr,a_;(function(){var t;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,S){for(var E=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)E[Fn-2]=arguments[Fn];return _.prototype[D].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],D=T.g[2];var S=T.g[3],E=_+(S^I&(D^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^S&(I^D))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,w=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(w[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<_;)if(w[D++]=T[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)T[I++]=this.g[_]>>>w&255;return T};function o(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function s(T,_){this.h=_;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;w&&S==_||(I[D]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var _=[],I=1,w=0;T>=I;w++)_[w]=T/I|0,I*=4294967296;return new s(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return R(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var _=l(Math.pow(T,6)),I=this,w="";;){var D=Ee(I,_).g;I=x(I,D.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:C(T)?0:1};function R(T){for(var _=T.g.length,I=[],w=0;w<_;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=_;D++){var S=w+(this.i(D)&65535)+(T.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(T,_){return T.add(R(_))}t.j=function(T){if(C(this)||C(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,Fn=T.i(D)>>>16,Zs=T.i(D)&65535;I[2*w+2*D]+=E*Zs,H(I,2*w+2*D),I[2*w+2*D+1]+=S*Zs,H(I,2*w+2*D+1),I[2*w+2*D+1]+=E*Fn,H(I,2*w+2*D+1),I[2*w+2*D+2]+=S*Fn,H(I,2*w+2*D+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function H(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function Q(T,_){this.g=T,this.h=_}function Ee(T,_){if(C(_))throw Error("division by zero");if(C(T))return new Q(p,p);if(N(T))return _=Ee(R(T),_),new Q(R(_.g),R(_.h));if(N(_))return _=Ee(T,R(_)),new Q(R(_.g),_.h);if(30<T.g.length){if(N(T)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=_;0>=w.l(T);)I=mt(I),w=mt(w);var D=ye(I,1),S=ye(w,1);for(w=ye(w,2),I=ye(I,2);!C(w);){var E=S.add(w);0>=E.l(T)&&(D=D.add(I),S=E),w=ye(w,1),I=ye(I,1)}return _=x(T,D.j(_)),new Q(D,_)}for(D=p;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(_);C(S)&&(S=g),D=D.add(S),T=x(T,E)}return new Q(D,T)}t.A=function(T){return Ee(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function mt(T){for(var _=T.g.length+1,I=[],w=0;w<_;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function ye(T,_){var I=_>>5;_%=32;for(var w=T.g.length-I,D=[],S=0;S<w;S++)D[S]=0<_?T.i(S+I)>>>_|T.i(S+I+1)<<32-_:T.i(S+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,a_=N0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,sr=N0.Integer=s}).apply(typeof R0<"u"?R0:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ar={};var c_,r$,Cs,u_,Yc,Gh,l_,d_,h_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,A){for(var O=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)O[Ie-2]=arguments[Ie];return d.prototype[b].apply(m,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let b=c.length||0,A=m.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ee(c){return Ee[" "](c),c}Ee[" "]=function(){};var mt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ye(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Yf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Fn{constructor(){this.h=this.g=null}add(d,f){let m=Zs.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Zs=new x(()=>new mM,c=>c.reset());class mM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Js,Xs=!1,Yf=new Fn,RI=()=>{let c=a.Promise.resolve(void 0);Js=()=>{c.then(yM)}};var yM=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=Zs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Xs=!1};function gr(){this.s=this.s,this.C=this.C}gr.prototype.s=!1,gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var vM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function ea(c,d){if(at.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(mt){e:{try{Ee(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_M[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ea.aa.h.call(this)}}C(ea,at);var _M={2:"touch",3:"pen",4:"mouse"};ea.prototype.h=function(){ea.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ta="closure_listenable_"+(1e6*Math.random()|0),EM=0;function IM(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++EM,this.da=this.fa=!1}function bu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Cu(c){this.src=c,this.g={},this.h=0}Cu.prototype.add=function(c,d,f,m,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Jf(c,d,m,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new IM(d,this.src,A,!!m,b),d.fa=f,c.push(d)),d};function Zf(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(m,b,1),A&&(bu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Jf(c,d,f,m){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return b}return-1}var Xf="closure_lm_"+(1e6*Math.random()|0),ep={};function NI(c,d,f,m,b){if(m&&m.once)return PI(c,d,f,m,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)NI(c,d[A],f,m,b);return null}return f=ip(f),c&&c[ta]?c.K(d,f,l(m)?!!m.capture:!!m,b):MI(c,d,f,!1,m,b)}function MI(c,d,f,m,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ie=np(c);if(Ie||(c[Xf]=Ie=new Cu(c)),f=Ie.add(d,f,m,O,A),f.proxy)return f;if(m=wM(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)vM||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(xI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function wM(){function c(f){return d.call(c.src,c.listener,f)}let d=TM;return c}function PI(c,d,f,m,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)PI(c,d[A],f,m,b);return null}return f=ip(f),c&&c[ta]?c.L(d,f,l(m)?!!m.capture:!!m,b):MI(c,d,f,!0,m,b)}function kI(c,d,f,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)kI(c,d[A],f,m,b);else m=l(m)?!!m.capture:!!m,f=ip(f),c&&c[ta]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Jf(A,f,m,b),-1<f&&(bu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=np(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Jf(d,f,m,b)),(f=-1<c?d[c]:null)&&tp(f))}function tp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ta])Zf(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(xI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=np(d))?(Zf(f,c),f.h==0&&(f.src=null,d[Xf]=null)):bu(c)}}}function xI(c){return c in ep?ep[c]:ep[c]="on"+c}function TM(c,d){if(c.da)c=!0;else{d=new ea(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&tp(c),c=f.call(m,d)}return c}function np(c){return c=c[Xf],c instanceof Cu?c:null}var rp="__closure_events_fn_"+(1e9*Math.random()>>>0);function ip(c){return typeof c=="function"?c:(c[rp]||(c[rp]=function(d){return c.handleEvent(d)}),c[rp])}function ct(){gr.call(this),this.i=new Cu(this),this.M=this,this.F=null}C(ct,gr),ct.prototype[ta]=!0,ct.prototype.removeEventListener=function(c,d,f,m){kI(this,c,d,f,m)};function yt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new at(d,c);else if(d instanceof at)d.target=d.target||c;else{var b=d;d=new at(m,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=Su(O,m,!0,d)&&b}if(O=d.g=c,b=Su(O,m,!0,d)&&b,b=Su(O,m,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=Su(O,m,!1,d)&&b}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)bu(f[m]);delete c.g[d],c.h--}}this.F=null},ct.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},ct.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Su(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ie=O.listener,et=O.ha||O.src;O.fa&&Zf(c.i,O),b=Ie.call(et,m)!==!1&&b}}return b&&!m.defaultPrevented}function OI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function LI(c){c.g=OI(()=>{c.g=null,c.i&&(c.i=!1,LI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class DM extends gr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:LI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function na(c){gr.call(this),this.h=c,this.g={}}C(na,gr);var FI=[];function VI(c){ye(c.g,function(d,f){this.g.hasOwnProperty(f)&&tp(d)},c),c.g={}}na.prototype.N=function(){na.aa.N.call(this),VI(this)},na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var op=a.JSON.stringify,bM=a.JSON.parse,CM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function sp(){}sp.prototype.h=null;function jI(c){return c.h||(c.h=c.i())}function UI(){}var ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ap(){at.call(this,"d")}C(ap,at);function cp(){at.call(this,"c")}C(cp,at);var oi={},BI=null;function Au(){return BI=BI||new ct}oi.La="serverreachability";function $I(c){at.call(this,oi.La,c)}C($I,at);function ia(c){let d=Au();yt(d,new $I(d))}oi.STAT_EVENT="statevent";function HI(c,d){at.call(this,oi.STAT_EVENT,c),this.stat=d}C(HI,at);function vt(c){let d=Au();yt(d,new HI(d,c))}oi.Ma="timingevent";function qI(c,d){at.call(this,oi.Ma,c),this.size=d}C(qI,at);function oa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function sa(){this.g=!0}sa.prototype.xa=function(){this.g=!1};function SM(c,d,f,m,b,A){c.info(function(){if(c.g)if(A)for(var O="",Ie=A.split("&"),et=0;et<Ie.length;et++){var fe=Ie[et].split("=");if(1<fe.length){var ut=fe[0];fe=fe[1];var lt=ut.split("_");O=2<=lt.length&&lt[1]=="type"?O+(ut+"="+fe+"&"):O+(ut+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function AM(c,d,f,m,b,A,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function go(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+NM(c,f)+(m?" "+m:"")})}function RM(c,d){c.info(function(){return"TIMEOUT: "+d})}sa.prototype.info=function(){};function NM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return op(f)}catch{return d}}var Ru={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},up;function Nu(){}C(Nu,sp),Nu.prototype.g=function(){return new XMLHttpRequest},Nu.prototype.i=function(){return{}},up=new Nu;function mr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new GI}function GI(){this.i=null,this.g="",this.h=!1}var WI={},lp={};function dp(c,d,f){c.L=1,c.v=xu(Vn(d)),c.m=f,c.P=!0,KI(c,null)}function KI(c,d){c.F=Date.now(),Mu(c),c.A=Vn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),cw(f.i,"t",m),c.C=0,f=c.j.J,c.h=new GI,c.g=Cw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new DM(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(FI[0]=b.toString()),b=FI);for(var A=0;A<b.length;A++){var O=NI(f,b[A],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ia(),SM(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;let d=this.M;d&&jn(c)==3?d.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{let lt=jn(this.g);var d=this.g.Ba();let vo=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||gw(this.g)))){this.J||lt!=4||d==7||(d==8||0>=vo?ia(3):ia(2)),hp(this);var f=this.g.Z();this.X=f;t:if(QI(this)){var m=gw(this.g);c="";var b=m.length,A=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),aa(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,AM(this.i,this.u,this.A,this.l,this.R,lt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,et=this.g;if((Ie=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ie)){var fe=Ie;break t}}fe=null}if(f=fe)go(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fp(this,f);else{this.o=!1,this.s=3,vt(12),si(this),aa(this);break e}}if(this.P){f=!0;let Qt;for(;!this.J&&this.C<O.length;)if(Qt=MM(this,O),Qt==lp){lt==4&&(this.s=4,vt(14),f=!1),go(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==WI){this.s=4,vt(15),go(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else go(this.i,this.l,Qt,null),fp(this,Qt);if(QI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||O.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)go(this.i,this.l,O,"[Invalid Chunked Response]"),si(this),aa(this);else if(0<O.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),_p(ut),ut.M=!0,vt(11))}}else go(this.i,this.l,O,null),fp(this,O);lt==4&&si(this),this.o&&!this.J&&(lt==4?ww(this.j,this):(this.o=!1,Mu(this)))}else KM(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),si(this),aa(this)}}}catch{}finally{}};function QI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function MM(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?lp:(f=Number(d.substring(f,m)),isNaN(f)?WI:(m+=1,m+f>d.length?lp:(d=d.slice(m,m+f),c.C=m+f,d)))}mr.prototype.cancel=function(){this.J=!0,si(this)};function Mu(c){c.S=Date.now()+c.I,YI(c,c.I)}function YI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=oa(g(c.ba,c),d)}function hp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(RM(this.i,this.A),this.L!=2&&(ia(),vt(17)),si(this),this.s=2,aa(this)):YI(this,this.S-c)};function aa(c){c.j.G==0||c.J||ww(c.j,c)}function si(c){hp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,VI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function fp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||pp(f.h,c))){if(!c.K&&pp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ju(f),Fu(f);else break e;vp(f),vt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=oa(g(f.Za,f),6e3));if(1>=XI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ci(f,11)}else if((c.K||f.g==c)&&ju(f),!H(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let ut=fe[3];ut!=null&&(f.la=ut,f.j.info("VER="+f.la));let lt=fe[4];lt!=null&&(f.Aa=lt,f.j.info("SVER="+f.Aa));let vo=fe[5];vo!=null&&typeof vo=="number"&&0<vo&&(m=1.5*vo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Qt=c.g;if(Qt){let Bu=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bu){var A=m.h;A.g||Bu.indexOf("spdy")==-1&&Bu.indexOf("quic")==-1&&Bu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(gp(A,A.h),A.h=null))}if(m.D){let Ep=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ep&&(m.ya=Ep,Te(m.I,m.D,Ep))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=bw(m,m.J?m.ia:null,m.W),O.K){ew(m.h,O);var Ie=O,et=m.L;et&&(Ie.I=et),Ie.B&&(hp(Ie),Mu(Ie)),m.g=O}else Ew(m);0<f.i.length&&Vu(f)}else fe[0]!="stop"&&fe[0]!="close"||ci(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ci(f,7):yp(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}ia(4)}catch{}}var PM=class{constructor(c,d){this.g=c,this.map=d}};function ZI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function JI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function XI(c){return c.h?1:c.g?c.g.size:0}function pp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function gp(c,d){c.g?c.g.add(d):c.h=d}function ew(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ZI.prototype.cancel=function(){if(this.i=tw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function tw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function kM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function xM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function nw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=xM(c),m=kM(c),b=m.length,A=0;A<b;A++)d.call(void 0,m[A],f&&f[A],c)}var rw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var A=c[f].substring(0,m);b=c[f].substring(m+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ai){this.h=c.h,Pu(this,c.j),this.o=c.o,this.g=c.g,ku(this,c.s),this.l=c.l;var d=c.i,f=new la;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),iw(this,f),this.m=c.m}else c&&(d=String(c).match(rw))?(this.h=!1,Pu(this,d[1]||"",!0),this.o=ca(d[2]||""),this.g=ca(d[3]||"",!0),ku(this,d[4]),this.l=ca(d[5]||"",!0),iw(this,d[6]||"",!0),this.m=ca(d[7]||"")):(this.h=!1,this.i=new la(null,this.h))}ai.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ua(d,ow,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ua(d,ow,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ua(f,f.charAt(0)=="/"?VM:FM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ua(f,UM)),c.join("")};function Vn(c){return new ai(c)}function Pu(c,d,f){c.j=f?ca(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ku(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function iw(c,d,f){d instanceof la?(c.i=d,BM(c.i,c.h)):(f||(d=ua(d,jM)),c.i=new la(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function xu(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ca(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ua(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,LM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function LM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ow=/[#\/\?@]/g,FM=/[#\?:]/g,VM=/[#\?]/g,jM=/[#\?@]/g,UM=/#/g;function la(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&OM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=la.prototype,t.add=function(c,d){yr(this),this.i=null,c=mo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function sw(c,d){yr(c),d=mo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function aw(c,d){return yr(c),d=mo(c,d),c.g.has(d)}t.forEach=function(c,d){yr(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},t.na=function(){yr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let A=0;A<b.length;A++)f.push(d[m])}return f},t.V=function(c){yr(this);let d=[];if(typeof c=="string")aw(this,c)&&(d=d.concat(this.g.get(mo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return yr(this),this.i=null,c=mo(this,c),aw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function cw(c,d,f){sw(c,d),0<f.length&&(c.i=null,c.g.set(mo(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var b=A;O[m]!==""&&(b+="="+encodeURIComponent(String(O[m]))),c.push(b)}}return this.i=c.join("&")};function mo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function BM(c,d){d&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(sw(this,m),cw(this,b,f))},c)),c.j=d}function $M(c,d){let f=new sa;if(a.Image){let m=new Image;m.onload=y(vr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(vr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(vr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(vr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function HM(c,d){let f=new sa,m=new AbortController,b=setTimeout(()=>{m.abort(),vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?vr(f,"TestPingServer: ok",!0,d):vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),vr(f,"TestPingServer: error",!1,d)})}function vr(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function qM(){this.g=new CM}function zM(c,d,f){let m=f||"";try{nw(c,function(b,A){let O=b;l(b)&&(O=op(b)),d.push(m+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function da(c){this.l=c.Ub||null,this.j=c.eb||!1}C(da,sp),da.prototype.g=function(){return new Ou(this.l,this.j)},da.prototype.i=(function(c){return function(){return c}})({});function Ou(c,d){ct.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ou,ct),t=Ou.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,fa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ha(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function uw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ha(this):fa(this),this.readyState==3&&uw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ha(this))},t.Qa=function(c){this.g&&(this.response=c,ha(this))},t.ga=function(){this.g&&ha(this)};function ha(c){c.readyState=4,c.l=null,c.j=null,c.v=null,fa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function fa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function lw(c){let d="";return ye(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function mp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=lw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ae(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,ct);var GM=/^https?$/i,WM=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():up.g(),this.v=this.o?jI(this.o):jI(up),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){dw(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(WM,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){dw(this,A)}};function dw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,hw(c),Lu(c)}function hw(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),Lu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lu(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fw(this):this.bb())},t.bb=function(){fw(this)};function fw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)OI(c.Ea,0,c);else if(yt(c,"readystatechange"),jn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var b=String(c.D).match(rw)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!GM.test(b?b.toLowerCase():"")}f=m}if(f)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var A=2<jn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",hw(c)}}finally{Lu(c)}}}}function Lu(c,d){if(c.g){pw(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||yt(c,"ready");try{f.onreadystatechange=m}catch{}}}function pw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),bM(d)}};function gw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function KM(c){let d={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=D(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function mw(c){this.Aa=0,this.i=[],this.j=new sa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pa("baseRetryDelayMs",5e3,c),this.cb=pa("retryDelaySeedMs",1e4,c),this.Wa=pa("forwardChannelMaxRetries",2,c),this.wa=pa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ZI(c&&c.concurrentRequestLimit),this.Da=new qM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){vt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=bw(this,null,this.W),Vu(this)};function yp(c){if(yw(c),c.G==3){var d=c.U++,f=Vn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),ga(c,f),d=new mr(c,c.j,d),d.L=2,d.v=xu(Vn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Cw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Mu(d)}Dw(c)}function Fu(c){c.g&&(_p(c),c.g.cancel(),c.g=null)}function yw(c){Fu(c),c.u&&(a.clearTimeout(c.u),c.u=null),ju(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Vu(c){if(!JI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Js||RI(),Xs||(Js(),Xs=!0),Yf.add(d,c),c.B=0}}function QM(c,d){return XI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=oa(g(c.Ga,c,d),Tw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new mr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=_w(this,b,d),f=Vn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),ga(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(lw(A)))+"&"+d:this.m&&mp(f,this.m,A)),gp(this.h,b),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),b.T=!0,dp(b,f,null)):dp(b,f,d),this.G=2}}else this.G==3&&(c?vw(this,c):this.i.length==0||JI(this.h)||vw(this))};function vw(c,d){var f;d?f=d.l:f=c.U++;let m=Vn(c.I);Te(m,"SID",c.K),Te(m,"RID",f),Te(m,"AID",c.T),ga(c,m),c.m&&c.o&&mp(m,c.m,c.o),f=new mr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=_w(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gp(c.h,f),dp(f,m,d)}function ga(c,d){c.H&&ye(c.H,function(f,m){Te(d,m,f)}),c.l&&nw({},function(f,m){Te(d,m,f)})}function _w(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ie=!0;for(let et=0;et<f;et++){let fe=b[et].g,ut=b[et].map;if(fe-=A,0>fe)A=Math.max(0,b[et].g-100),Ie=!1;else try{zM(ut,O,"req"+fe+"_")}catch{m&&m(ut)}}if(Ie){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function Ew(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Js||RI(),Xs||(Js(),Xs=!0),Yf.add(d,c),c.v=0}}function vp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=oa(g(c.Fa,c),Tw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Iw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=oa(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Fu(this),Iw(this))};function _p(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Iw(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Vn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),ga(c,d),c.m&&c.o&&mp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xu(Vn(d)),f.m=null,f.P=!0,KI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Fu(this),vp(this),vt(19))};function ju(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ww(c,d){var f=null;if(c.g==d){ju(c),_p(c),c.g=null;var m=2}else if(pp(c.h,d))f=d.D,ew(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=Au(),yt(m,new qI(m,f)),Vu(c)}else Ew(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&QM(c,d)||m==2&&vp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function Tw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ci(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new ai(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pu(m,"https"),xu(m),b?$M(m.toString(),f):HM(m.toString(),f)}else vt(2);c.G=0,c.l&&c.l.sa(d),Dw(c),yw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Dw(c){if(c.G=0,c.ka=[],c.l){let d=tw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function bw(c,d,f){var m=f instanceof ai?Vn(f):new ai(f);if(m.g!="")d&&(m.g=d+"."+m.g),ku(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new ai(null);m&&Pu(A,m),d&&(A.g=d),b&&ku(A,b),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Te(m,f,d),Te(m,"VER",c.la),ga(c,m),m}function Cw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new da({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sw(){}t=Sw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Uu(){}Uu.prototype.g=function(c,d){return new At(c,d)};function At(c,d){ct.call(this),this.g=new mw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new yo(this)}C(At,ct),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){yp(this.g)},At.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=op(c),c=f);d.i.push(new PM(d.Ya++,c)),d.G==3&&Vu(d)},At.prototype.N=function(){this.g.l=null,delete this.j,yp(this.g),delete this.g,At.aa.N.call(this)};function Aw(c){ap.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Aw,ap);function Rw(){cp.call(this),this.status=1}C(Rw,cp);function yo(c){this.g=c}C(yo,Sw),yo.prototype.ua=function(){yt(this.g,"a")},yo.prototype.ta=function(c){yt(this.g,new Aw(c))},yo.prototype.sa=function(c){yt(this.g,new Rw)},yo.prototype.ra=function(){yt(this.g,"b")},Uu.prototype.createWebChannel=Uu.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,h_=ar.createWebChannelTransport=function(){return new Uu},d_=ar.getStatEventTarget=function(){return Au()},l_=ar.Event=oi,Gh=ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ru.NO_ERROR=0,Ru.TIMEOUT=8,Ru.HTTP_ERROR=6,Yc=ar.ErrorCode=Ru,zI.COMPLETE="complete",u_=ar.EventType=zI,UI.EventType=ra,ra.OPEN="a",ra.CLOSE="b",ra.ERROR="c",ra.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Cs=ar.WebChannel=UI,r$=ar.FetchXmlHttpFactory=da,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,c_=ar.XhrIo=Ae}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});var M0="@firebase/firestore",P0="4.8.0";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var Gs="11.10.0";var ro=new Sn("@firebase/firestore");function Ss(){return ro.logLevel}function V(t,...e){if(ro.logLevel<=se.DEBUG){let n=e.map(eI);ro.debug(`Firestore (${Gs}): ${t}`,...n)}}function cr(t,...e){if(ro.logLevel<=se.ERROR){let n=e.map(eI);ro.error(`Firestore (${Gs}): ${t}`,...n)}}function Xr(t,...e){if(ro.logLevel<=se.WARN){let n=e.map(eI);ro.warn(`Firestore (${Gs}): ${t}`,...n)}}function eI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DR(t,r,n)}function DR(t,e,n){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cr(r),new Error(r)}function me(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||DR(e,i,r)}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var un=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Xh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},y_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}},v_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},__=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new un;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new un,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new un)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new Xh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new Je(e)}},E_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},I_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new E_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ef=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},w_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ef(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ef(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function i$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function bR(){return new TextEncoder}var nu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=i$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ie(t,e){return t<e?-1:t>e?1:0}function T_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=bR(),s=o$(o.encode(k0(t,n)),o.encode(k0(e,n)));return s!==0?s:ie(r,i)}}n+=r>65535?2:1}return ie(t.length,e.length)}function k0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function o$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ie(t[n],e[n]);return ie(t.length,e.length)}function xs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var x0="__name__",tf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ie(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):T_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}},Se=class t extends tf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},s$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class t extends tf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return s$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x0}static keyField(){return new t([x0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};function CR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function O0(t){if(!$.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function L0(t){if($.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function St(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=xf(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function c$(t,e){if(e<=0)throw new L(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Be(t,e){let n={typeString:t};return e&&(n.value=e),n}function vu(t,e){if(!SR(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}var F0=-62135596800,V0=1e6,ue=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*V0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<F0)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-F0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ue._jsonSchemaVersion="firestore/timestamp/1.0",ue._jsonSchema={type:Be("string",ue._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new ue(0,0))}static max(){return new t(new ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ru=-1,D_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};D_.UNKNOWN_ID=-1;function u$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new ue(n+1,0):new ue(n,r));return new io(i,$.empty(),e)}function l$(t){return new io(t.readTime,t.key,ru)}var io=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),$.empty(),ru)}static max(){return new t(te.max(),$.empty(),ru)}};function d$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}var h$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",b_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ws(t){return v(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==h$)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function f$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ks(t){return t.name==="IndexedDbTransactionError"}var tI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),nI=-1;function Of(t){return t==null}function iu(t){return t===0&&1/t==-1/0}function p$(t){return typeof t=="number"&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var AR="";function g$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=j0(e)),e=m$(t.get(n),e);return j0(e)}function m$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case AR:n+="";break;default:n+=o}}return n}function j0(t){return t+AR+""}var y$="remoteDocuments",RR="owner";var NR="mutationQueues";var MR="mutations";var PR="documentMutations",v$="remoteDocumentsV14";var kR="remoteDocumentGlobal";var xR="targets";var OR="targetDocuments";var LR="targetGlobal",FR="collectionParents";var VR="clientMetadata";var jR="bundles";var UR="namedQueries";var _$="indexConfiguration";var E$="indexState";var I$="indexEntries";var BR="documentOverlays";var w$="globals";var T$=[NR,MR,PR,y$,xR,RR,LR,OR,VR,kR,FR,jR,UR],jre=[...T$,BR],D$=[NR,MR,PR,v$,xR,RR,LR,OR,VR,kR,FR,jR,UR,BR],b$=D$,C$=[...b$,_$,E$,I$];var Ure=[...C$,w$];function U0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ii(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $R(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pe=class t{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ms(this.root,e,this.comparator,!0)}},Ms=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class t{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wt=class t{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Xe(Bt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var rf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var gt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};gt.EMPTY_BYTE_STRING=new gt("");var S$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(me(!!t,39018),typeof t=="string"){let e=0,n=S$.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lr(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}var HR="server_timestamp",qR="__type__",zR="__previous_value__",GR="__local_write_time__";function rI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[qR])===null||n===void 0?void 0:n.stringValue)===HR}function Lf(t){let e=t.mapValue.fields[zR];return rI(e)?Lf(e):e}function ou(t){let e=ur(t.mapValue.fields[GR].timestampValue);return new ue(e.seconds,e.nanos)}var C_=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},of="(default)",sf=class t{constructor(e,n){this.projectId=e,this.database=n||of}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var iI="__type__",WR="__max__",Wh={mapValue:{fields:{__type__:{stringValue:WR}}}},oI="__vector__",Os="value";function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rI(t)?4:QR(t)?9007199254740991:KR(t)?10:11:q(28295,{value:t})}function On(t,e){if(t===e)return!0;let n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ou(t).isEqual(ou(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ur(i.timestampValue),a=ur(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return lr(i.bytesValue).isEqual(lr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?iu(s)===iu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return xs(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(U0(s)!==U0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!On(s[u],a[u])))return!1;return!0})(t,e);default:return q(52216,{left:t})}}function su(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;let n=ei(t),r=ei(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return B0(t.timestampValue,e.timestampValue);case 4:return B0(ou(t),ou(e));case 5:return T_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=lr(o),u=lr(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ie(Ce(o.latitude),Ce(s.latitude));return a!==0?a:ie(Ce(o.longitude),Ce(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Os])===null||a===void 0?void 0:a.arrayValue,C=(u=g[Os])===null||u===void 0?void 0:u.arrayValue,N=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:$0(y,C)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Wh.mapValue&&s===Wh.mapValue)return 0;if(o===Wh.mapValue)return 1;if(s===Wh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=T_(u[p],h[p]);if(g!==0)return g;let y=Ls(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)})(t.mapValue,e.mapValue);default:throw q(23264,{le:n})}}function B0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);let n=ur(t),r=ur(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function $0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ls(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function Fs(t){return S_(t)}function S_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=ur(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return lr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=S_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${S_(n.fields[s])}`;return i+"}"})(t.mapValue):q(61005,{value:t})}function Yh(t){switch(ei(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Lf(t);return e?16+Yh(e):16;case 5:return 2*t.stringValue.length;case 6:return lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Yh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ii(r.fields,(o,s)=>{i+=o.length+Yh(s)}),i})(t.mapValue);default:throw q(13486,{value:t})}}function H0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function A_(t){return!!t&&"integerValue"in t}function sI(t){return!!t&&"arrayValue"in t}function q0(t){return!!t&&"nullValue"in t}function z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function KR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[iI])===null||n===void 0?void 0:n.stringValue)===oI}function Jc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WR}var $re={mapValue:{fields:{[iI]:{stringValue:oI},[Os]:{arrayValue:{}}}}};var Ut=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=Bt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Jc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ii(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Jc(this.value))}};function YR(t){let e=[];return ii(t.fields,(n,r)=>{let i=new Bt([n]);if(Zh(r)){let o=YR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wt(e)}var ln=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vs=class{constructor(e,n){this.position=e,this.inclusive=n}};function G0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=Ls(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function W0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}var oo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function A$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var af=class{},Ue=class t extends af{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N_(e,n,r):n==="array-contains"?new k_(e,r):n==="in"?new x_(e,r):n==="not-in"?new O_(e,r):n==="array-contains-any"?new L_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new M_(e,r):new P_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dn=class t extends af{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return ZR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function ZR(t){return t.op==="and"}function JR(t){return R$(t)&&ZR(t)}function R$(t){for(let e of t.filters)if(e instanceof dn)return!1;return!0}function R_(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(JR(t))return t.filters.map(e=>R_(e)).join(",");{let e=t.filters.map(n=>R_(n)).join(",");return`${t.op}(${e})`}}function XR(t,e){return t instanceof Ue?(function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)})(t,e):t instanceof dn?(function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&XR(s,i.filters[a]),!0):!1})(t,e):void q(19439)}function eN(t){return t instanceof Ue?(function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`})(t):t instanceof dn?(function(n){return n.op.toString()+" {"+n.getFilters().map(eN).join(" ,")+"}"})(t):"Filter"}var N_=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},M_=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=tN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},P_=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=tN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function tN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var k_=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return sI(n)&&su(n.arrayValue,this.value)}},x_=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}},O_=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!su(this.value.arrayValue,n)}},L_=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!sI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>su(this.value.arrayValue,r))}};var F_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function K0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new F_(t,e,n,r,i,o,s)}function aI(t){let e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>R_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.Pe=n}return e.Pe}function cI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!W0(t.startAt,e.startAt)&&W0(t.endAt,e.endAt)}function V_(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ti=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function N$(t,e,n,r,i,o,s,a){return new ti(t,e,n,r,i,o,s,a)}function Ff(t){return new ti(t)}function Q0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nN(t){return t.collectionGroup!==null}function Xc(t){let e=J(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xe(Bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new oo(o,r))}),n.has(Bt.keyField().canonicalString())||e.Te.push(new oo(Bt.keyField(),r))}return e.Te}function Pn(t){let e=J(t);return e.Ie||(e.Ie=M$(e,Xc(t))),e.Ie}function M$(t,e){if(t.limitType==="F")return K0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new oo(i.field,o)});let n=t.endAt?new Vs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vs(t.startAt.position,t.startAt.inclusive):null;return K0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function j_(t,e){let n=t.filters.concat([e]);return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cf(t,e,n){return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vf(t,e){return cI(Pn(t),Pn(e))&&t.limitType===e.limitType}function rN(t){return`${aI(Pn(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>eN(i)).join(", ")}]`),Of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`})(Pn(t))}; limitType=${t.limitType})`}function jf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Xc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=G0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Xc(r),i)||r.endAt&&!(function(s,a,u){let l=G0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Xc(r),i))})(t,e)}function P$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iN(t){return(e,n)=>{let r=!1;for(let i of Xc(t)){let o=k$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function k$(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ls(u,l):q(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var dr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return $R(this.inner)}size(){return this.innerSize}};var x$=new Pe($.comparator);function hr(){return x$}var oN=new Pe($.comparator);function Zc(...t){let e=oN;for(let n of t)e=e.insert(n.key,n);return e}function sN(t){let e=oN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ji(){return eu()}function aN(){return eu()}function eu(){return new dr(t=>t.toString(),(t,e)=>t.isEqual(e))}var O$=new Pe($.comparator),L$=new Xe($.comparator);function ce(...t){let e=L$;for(let n of t)e=e.add(n);return e}var F$=new Xe(ie);function V$(){return F$}function uI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function cN(t){return{integerValue:""+t}}function j$(t,e){return p$(e)?cN(e):uI(t,e)}var js=class{constructor(){this._=void 0}};function U$(t,e,n){return t instanceof Us?(function(i,o){let s={fields:{[qR]:{stringValue:HR},[GR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&rI(o)&&(o=Lf(o)),o&&(s.fields[zR]=o),{mapValue:s}})(n,e):t instanceof so?lN(t,e):t instanceof ao?dN(t,e):(function(i,o){let s=uN(i,o),a=Y0(s)+Y0(i.Ee);return A_(s)&&A_(i.Ee)?cN(a):uI(i.serializer,a)})(t,e)}function B$(t,e,n){return t instanceof so?lN(t,e):t instanceof ao?dN(t,e):n}function uN(t,e){return t instanceof Bs?(function(r){return A_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Us=class extends js{},so=class extends js{constructor(e){super(),this.elements=e}};function lN(t,e){let n=hN(e);for(let r of t.elements)n.some(i=>On(i,r))||n.push(r);return{arrayValue:{values:n}}}var ao=class extends js{constructor(e){super(),this.elements=e}};function dN(t,e){let n=hN(e);for(let r of t.elements)n=n.filter(i=>!On(i,r));return{arrayValue:{values:n}}}var Bs=class extends js{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function Y0(t){return Ce(t.integerValue||t.doubleValue)}function hN(t){return sI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $$(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof so&&i instanceof so||r instanceof ao&&i instanceof ao?xs(r.elements,i.elements,On):r instanceof Bs&&i instanceof Bs?On(r.Ee,i.Ee):r instanceof Us&&i instanceof Us})(t.transform,e.transform)}var U_=class{constructor(e,n){this.version=e,this.transformResults=n}},kn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var $s=class{};function fN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new au(t.key,kn.none()):new co(t.key,t.data,kn.none());{let n=t.data,r=Ut.empty(),i=new Xe(Bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ln(t.key,r,new Wt(i.toArray()),kn.none())}}function H$(t,e,n){t instanceof co?(function(i,o,s){let a=i.value.clone(),u=J0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Ln?(function(i,o,s){if(!Jh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=J0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(pN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function tu(t,e,n,r){return t instanceof co?(function(o,s,a,u){if(!Jh(o.precondition,s))return a;let l=o.value.clone(),h=X0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ln?(function(o,s,a,u){if(!Jh(o.precondition,s))return a;let l=X0(o.fieldTransforms,u,s),h=s.data;return h.setAll(pN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Jh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function q$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=uN(r.transform,i||null);o!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,o))}return n||null}function Z0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xs(r,i,(o,s)=>$$(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var co=class extends $s{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ln=class extends $s{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function pN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function J0(t,e,n){let r=new Map;me(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,B$(s,a,n[i]))}return r}function X0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,U$(o,s,e))}return r}var au=class extends $s{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},B_=class extends $s{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&H$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=tu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=tu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=aN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=fN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(n,r)=>Z0(n,r))&&xs(this.baseMutations,e.baseMutations,(n,r)=>Z0(n,r))}},H_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return O$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var q_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var z_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,he;function z$(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function gN(t){if(t===void 0)return cr("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(he=Ve||(Ve={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var eR=null;var G$=new sr([4294967295,4294967295],0);function tR(t){let e=bR().encode(t),n=new a_;return n.update(e),new Uint8Array(n.digest())}function nR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sr([n,r],0),new sr([i,o],0)]}var G_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xi(`Invalid padding: ${n}`);if(r<0)throw new Xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=sr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(sr.fromNumber(r)));return i.compare(G$)===1&&(i=new sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=tR(e),[r,i]=nR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=tR(e),[r,i]=nR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Xi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Pe(ie),hr(),ce())}},cu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ce(),ce(),ce())}};var Ps=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},lf=class{constructor(e,n){this.targetId=e,this.De=n}},df=class{constructor(e,n,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},hf=class{constructor(){this.ve=0,this.Ce=rR(),this.Fe=gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ce(),n=ce(),r=ce();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new cu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=rR()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},W_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=hr(),this.je=Kh(),this.Je=Kh(),this.He=new Pe(ie)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(V_(o))if(r===0){let s=new $(o.path);this.Xe(n,s,ln.newNoDocument(s,te.min()))}else me(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}eR?.ct((function(h,p,g,y,C){var N,R,x,H,Q,Ee;let mt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ye=p.unchangedNames;return ye&&(mt.bloomFilter={applied:C===0,hashCount:(N=ye?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(H=(x=(R=ye?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&H!==void 0?H:0,padding:(Ee=(Q=ye?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&Ee!==void 0?Ee:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),mt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=lr(r).toUint8Array()}catch(u){if(u instanceof rf)return Xr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new G_(s,i,o)}catch(u){return Xr(u instanceof Xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&V_(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,ln.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ce();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new uf(e,n,this.He,this.ze,r);return this.ze=hr(),this.je=Kh(),this.Je=Kh(),this.He=new Pe(ie),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new hf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Xe(ie),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Xe(ie),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Kh(){return new Pe($.comparator)}function rR(){return new Pe($.comparator)}var W$={asc:"ASCENDING",desc:"DESCENDING"},K$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q$={and:"AND",or:"OR"},K_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Q_(t,e){return t.useProto3Json||Of(e)?e:{value:e}}function ff(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y$(t,e){return ff(t,e.toTimestamp())}function xn(t){return me(!!t,49232),te.fromTimestamp((function(n){let r=ur(n);return new ue(r.seconds,r.nanos)})(t))}function lI(t,e){return Y_(t,e).canonicalString()}function Y_(t,e){let n=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function yN(t){let e=Se.fromString(t);return me(wN(e),10190,{key:e.toString()}),e}function Z_(t,e){return lI(t.databaseId,e.path)}function f_(t,e){let n=yN(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(_N(n))}function vN(t,e){return lI(t.databaseId,e)}function Z$(t){let e=yN(t);return e.length===4?Se.emptyPath():_N(e)}function J_(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _N(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iR(t,e,n){return{name:Z_(t,e),fields:n.value.mapValue.fields}}function J$(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(me(h===void 0||typeof h=="string",58123),gt.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),gt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?M.UNKNOWN:gN(l.code);return new L(h,l.message||"")})(s);n=new df(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=f_(t,r.document.name),o=xn(r.document.updateTime),s=r.document.createTime?xn(r.document.createTime):te.min(),a=new Ut({mapValue:{fields:r.document.fields}}),u=ln.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ps(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=f_(t,r.document),o=r.readTime?xn(r.readTime):te.min(),s=ln.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ps([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=f_(t,r.document),o=r.removedTargetIds||[];n=new Ps([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new z_(i,o),a=r.targetId;n=new lf(a,s)}}return n}function X$(t,e){let n;if(e instanceof co)n={update:iR(t,e.key,e.value)};else if(e instanceof au)n={delete:Z_(t,e.key)};else if(e instanceof Ln)n={update:iR(t,e.key,e.data),updateMask:cH(e.fieldMask)};else{if(!(e instanceof B_))return q(16599,{Rt:e.type});n={verify:Z_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Us)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof so)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ao)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bs)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Y$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(t,e.precondition)),n}function eH(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?xn(i.updateTime):xn(o);return s.isEqual(te.min())&&(s=xn(o)),new U_(s,i.transformResults||[])})(n,e))):[]}function tH(t,e){return{documents:[vN(t,e.path)]}}function nH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vN(t,i);let o=(function(l){if(l.length!==0)return IN(dn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Rs(g.field),direction:oH(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Q_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function rH(t){let e=Z$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){me(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=EN(p);return g instanceof dn&&JR(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(C){return new oo(Ns(C.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Of(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Vs(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Vs(y,g)})(n.endAt)),N$(e,i,s,o,a,"F",u,l)}function iH(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ns(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ns(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ns(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ns(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ue.create(Ns(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return dn.create(n.compositeFilter.filters.map(r=>EN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(n.compositeFilter.op))})(t):q(30097,{filter:t})}function oH(t){return W$[t]}function sH(t){return K$[t]}function aH(t){return Q$[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ns(t){return Bt.fromServerFormat(t.fieldPath)}function IN(t){return t instanceof Ue?(function(n){if(n.op==="=="){if(z0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(q0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(q0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:sH(n.op),value:n.value}}})(t):t instanceof dn?(function(n){let r=n.getFilters().map(i=>IN(i));return r.length===1?r[0]:{compositeFilter:{op:aH(n.op),filters:r}}})(t):q(54877,{filter:t})}function cH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var uu=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var X_=class{constructor(e){this.gt=e}};function uH(t){let e=rH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}var pf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),iu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=ur(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(lr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?QR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):KR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Os,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ce(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};pf.Ut=new pf;var eE=class{constructor(){this.Dn=new tE}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(io.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(io.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},tE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(Se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Se.comparator)).toArray()}};var Hre=new Uint8Array(0);var oR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TN=41943040,Gt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(TN,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);var lu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var sR="LruGarbageCollector",lH=1048576;function aR([t,e],[n,r]){let i=ie(t,n);return i===0?ie(e,r):i}var nE=class{constructor(e){this.Tr=e,this.buffer=new Xe(aR),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();aR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},rE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(sR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?V(sR,"Ignoring IndexedDB error during garbage collection: ",n):yield Ws(n)}yield this.Rr(3e5)}))}},iE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(tI.ue);let r=new nE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(oR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oR):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ss()<=se.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function dH(t,e){return new iE(t,e)}var oE=class{constructor(){this.changes=new dr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var aE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&tu(r.mutation,i,Wt.empty(),ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){let i=Ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Zc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=hr(),s=eu(),a=(function(){return eu()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ln)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),tu(h.mutation,l,h.mutation.getFieldMask(),ue.now())):s.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new sE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=eu(),i=new Pe((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=aN();h.forEach(g=>{if(!o.has(g)){let y=fN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Ji()),a=ru,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:sN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Zc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Zc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,g){return new ti(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ln.newInvalidDocument(h)))});let a=Zc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&tu(h.mutation,l,Wt.empty(),ue.now()),jf(n,l)&&(a=a.insert(u,l))}),a})}};var cE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:uH(i.bundledQuery),readTime:xn(i.readTime)}})(n)),P.resolve()}};var uE=class{constructor(){this.overlays=new Pe($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ji();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Ji(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ji(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ji(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new q_(n,r));let o=this.kr.get(n);o===void 0&&(o=ce(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var lE=class{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var du=class{constructor(){this.qr=new Xe(je.Qr),this.$r=new Xe(je.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new je(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new je(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new Se([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new Se([])),r=new je(n,e),i=new je(n,e+1),o=ce();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var dE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Xe(je.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new $_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new je(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?nI:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(ie);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new je(new $(o),0),a=new Xe(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new je(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var hE=class{constructor(e){this.ni=e,this.docs=(function(){return new Pe($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ln.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=hr(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||d$(l$(h),r)<=0||(i.has(h.key)||jf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fE(this)}getSize(e){return P.resolve(this.size)}},fE=class extends oE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var pE=class{constructor(e){this.persistence=e,this.ii=new dr(n=>aI(n),cI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new du,this.targetCount=0,this._i=lu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new lu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var gf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new tI(0),this.ci=!1,this.ci=!0,this.li=new lE,this.referenceDelegate=e(this),this.hi=new pE(this),this.indexManager=new eE,this.remoteDocumentCache=(function(i){return new hE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new X_(n),this.Ti=new cE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new dE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new gE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},gE=class extends b_{constructor(e){super(),this.currentSequenceNumber=e}},mE=class t{constructor(e){this.persistence=e,this.Ai=new du,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},mf=class t{constructor(e,n){this.persistence=e,this.gi=new dr(r=>g$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=dH(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yh(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var yE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ce(),i=ce();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var vE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _E=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return tA()?8:f$(Ze())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new vE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ss()<=se.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Ss()<=se.DEBUG&&V("QueryEngine","Query:",As(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ss()<=se.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):P.resolve())}ps(e,n){if(Q0(n))return P.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cf(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,cf(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return Q0(n)||i.isEqual(te.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Ss()<=se.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),As(n)),this.vs(e,s,n,u$(i,ru)).next(a=>a))})}bs(e,n){let r=new Xe(iN(e));return n.forEach((i,o)=>{jf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Ss()<=se.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",As(n)),this.gs.getDocumentsMatchingQuery(e,n,io.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var dI="LocalStore",hH=3e8,EE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Pe(ie),this.Ms=new dr(o=>aI(o),cI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function fH(t,e,n,r){return new EE(t,e,n,r)}function DN(t,e){return v(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function pH(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);me(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bN(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function gH(t,e){let n=J(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(gt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=hH?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=hr(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(mH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function mH(t,e,n){let r=ce(),i=ce();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=hr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(dI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function yH(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vH(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new uu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function IE(t,e,n){return v(this,null,function*(){let r=J(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ks(s))throw s;V(dI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function cR(t,e,n){let r=J(t),i=te.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,Pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:ce())).next(a=>(_H(r,P$(e),a),{documents:a,qs:o})))}function _H(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var yf=class{constructor(){this.activeTargetIds=V$()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wE=class{constructor(){this.Fo=new yf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var TE=class{xo(e){}shutdown(){}};var uR="ConnectivityMonitor",vf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(uR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(uR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qh=null;function DE(){return Qh===null?Qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qh++,"0x"+Qh.toString(16)}var p_="RestConnection",EH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},bE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=DE(),a=this.Go(e,n.toUriEncodedString());V(p_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Vr(l);return this.jo(e,a,u,r,h).then(p=>(V(p_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Xr(p_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=EH[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var CE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var pt="WebChannelConnection",SE=class extends bE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=DE();return new Promise((a,u)=>{let l=new c_;l.setWithCredentials(!0),l.listenOnce(u_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Yc.NO_ERROR:let p=l.getResponseJson();V(pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Yc.TIMEOUT:V(pt,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:let g=l.getStatus();if(V(pt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=(function(x){let H=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN})(C.status);u(new L(N,C.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(pt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(pt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=DE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=h_(),a=d_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(pt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,C=new CE({Ho:R=>{y?V(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(V(pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(pt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,x,H)=>{R.listen(x,Q=>{try{H(Q)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return N(p,Cs.EventType.OPEN,()=>{y||(V(pt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,Cs.EventType.CLOSE,()=>{y||(y=!0,V(pt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,Cs.EventType.ERROR,R=>{y||(y=!0,Xr(pt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Cs.EventType.MESSAGE,R=>{var x;if(!y){let H=R.data[0];me(!!H,16349);let Q=H,Ee=Q?.error||((x=Q[0])===null||x===void 0?void 0:x.error);if(Ee){V(pt,`RPC '${e}' stream ${i} received error:`,Ee);let mt=Ee.status,ye=(function(I){let w=Ve[I];if(w!==void 0)return gN(w)})(mt),T=Ee.message;ye===void 0&&(ye=M.INTERNAL,T="Unknown error status: "+mt+" with message "+Ee.message),y=!0,C.__(new L(ye,T)),p.close()}else V(pt,`RPC '${e}' stream ${i} received:`,H),C.a_(H)}}),N(a,l_.STAT_EVENT,R=>{R.stat===Gh.PROXY?V(pt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Gh.NOPROXY&&V(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function g_(){return typeof document<"u"?document:null}function Uf(t){return new K_(t,!0)}var _f=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var lR="PersistentStream",Ef=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new _f(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(lR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(lR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},AE=class extends Ef{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=J$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?xn(s.readTime):te.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=J_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=V_(u)?{documents:tH(o,u)}:{query:nH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mN(o,s.resumeToken);let l=Q_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=ff(o,s.snapshotVersion.toTimestamp());let l=Q_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=iH(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=J_(this.serializer),n.removeTarget=e,this.k_(n)}},RE=class extends Ef{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=eH(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=J_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>X$(this.serializer,r))};this.k_(n)}};var NE=class{},ME=class extends NE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Y_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Y_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},PE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(cr(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var uo="RemoteStore",kE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){lo(this)&&(V(uo,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=J(u);l.Ia.add(4),yield _u(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Bf(l)})})(this))}))}),this.Aa=new PE(r,i)}};function Bf(t){return v(this,null,function*(){if(lo(t))for(let e of t.da)yield e(!0)})}function _u(t){return v(this,null,function*(){for(let e of t.da)yield e(!1)})}function CN(t,e){let n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),gI(n)?pI(n):Qs(n).x_()&&fI(n,e))}function hI(t,e){let n=J(t),r=Qs(n);n.Ta.delete(e),r.x_()&&SN(n,e),n.Ta.size===0&&(r.x_()?r.B_():lo(n)&&n.Aa.set("Unknown"))}function fI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qs(t).H_(e)}function SN(t,e){t.Ra.$e(e),Qs(t).Y_(e)}function pI(t){t.Ra=new W_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Qs(t).start(),t.Aa.aa()}function gI(t){return lo(t)&&!Qs(t).M_()&&t.Ta.size>0}function lo(t){return J(t).Ia.size===0}function AN(t){t.Ra=void 0}function IH(t){return v(this,null,function*(){t.Aa.set("Online")})}function wH(t){return v(this,null,function*(){t.Ta.forEach((e,n)=>{fI(t,e)})})}function TH(t,e){return v(this,null,function*(){AN(t),gI(t)?(t.Aa.la(e),pI(t)):t.Aa.set("Unknown")})}function DH(t,e,n){return v(this,null,function*(){if(t.Aa.set("Online"),e instanceof df&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){V(uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield If(t,r)}else if(e instanceof Ps?t.Ra.Ye(e):e instanceof lf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{let r=yield bN(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(gt.EMPTY_BYTE_STRING,h.snapshotVersion)),SN(o,u);let p=new uu(h.target,u,l,h.sequenceNumber);fI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){V(uo,"Failed to raise snapshot:",r),yield If(t,r)}})}function If(t,e,n){return v(this,null,function*(){if(!Ks(e))throw e;t.Ia.add(1),yield _u(t),t.Aa.set("Offline"),n||(n=()=>bN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){V(uo,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield Bf(t)}))})}function RN(t,e){return e().catch(n=>If(t,n,e))}function $f(t){return v(this,null,function*(){let e=J(t),n=ni(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:nI;for(;bH(e);)try{let i=yield yH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,CH(e,i)}catch(i){yield If(e,i)}NN(e)&&MN(e)})}function bH(t){return lo(t)&&t.Pa.length<10}function CH(t,e){t.Pa.push(e);let n=ni(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function NN(t){return lo(t)&&!ni(t).M_()&&t.Pa.length>0}function MN(t){ni(t).start()}function SH(t){return v(this,null,function*(){ni(t).na()})}function AH(t){return v(this,null,function*(){let e=ni(t);for(let n of t.Pa)e.X_(n.mutations)})}function RH(t,e,n){return v(this,null,function*(){let r=t.Pa.shift(),i=H_.from(r,e,n);yield RN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield $f(t)})}function NH(t,e){return v(this,null,function*(){e&&ni(t).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return z$(s)&&s!==M.ABORTED})(i.code)){let o=r.Pa.shift();ni(r).N_(),yield RN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield $f(r)}})})(t,e)),NN(t)&&MN(t)})}function dR(t,e){return v(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),V(uo,"RemoteStore received new credentials");let r=lo(n);n.Ia.add(3),yield _u(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield Bf(n)})}function MH(t,e){return v(this,null,function*(){let n=J(t);e?(n.Ia.delete(2),yield Bf(n)):e||(n.Ia.add(2),yield _u(n),n.Aa.set("Unknown"))})}function Qs(t){return t.Va||(t.Va=(function(n,r,i){let o=J(n);return o.ia(),new AE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:IH.bind(null,t),e_:wH.bind(null,t),n_:TH.bind(null,t),J_:DH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.Va.N_(),gI(t)?pI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),AN(t))}))),t.Va}function ni(t){return t.ma||(t.ma=(function(n,r,i){let o=J(n);return o.ia(),new RE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:SH.bind(null,t),n_:NH.bind(null,t),ea:AH.bind(null,t),ta:RH.bind(null,t)}),t.da.push(e=>v(null,null,function*(){e?(t.ma.N_(),yield $f(t)):(yield t.ma.stop(),t.Pa.length>0&&(V(uo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var xE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mI(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Ks(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var wf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Zc(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Tf=class{constructor(){this.fa=new Pe($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Hs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,wf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var OE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},LE=class{constructor(){this.queries=hR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=J(n),o=i.queries;i.queries=hR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function hR(){return new dr(t=>rN(t),Vf)}function yI(t,e){return v(this,null,function*(){let n=J(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new OE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=mI(s,`Initialization of query '${As(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&_I(n)})}function vI(t,e){return v(this,null,function*(){let n=J(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function PH(t,e){let n=J(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&_I(n)}function kH(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function _I(t){t.Da.forEach(e=>{e.next()})}var FE,fR;(fR=FE||(FE={})).Fa="default",fR.Cache="cache";var hu=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Hs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==FE.Cache}};var Df=class{constructor(e){this.key=e}},bf=class{constructor(e){this.key=e}},VE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ce(),this.mutatedKeys=ce(),this.Xa=iN(e),this.eu=new wf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Tf,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=jf(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(C)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Hs(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ce(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new bf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Df(r))}),n}uu(e){this.Ha=e.qs,this.Za=ce();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Hs.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},EI="SyncEngine",jE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},UE=class{constructor(e){this.key=e,this.lu=!1}},BE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new dr(a=>rN(a),Vf),this.Tu=new Map,this.Iu=new Set,this.du=new Pe($.comparator),this.Eu=new Map,this.Au=new du,this.Ru={},this.Vu=new Map,this.mu=lu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function xH(t,e,n=!0){return v(this,null,function*(){let r=FN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield PN(r,e,n,!0),i})}function OH(t,e){return v(this,null,function*(){let n=FN(t);yield PN(n,e,!0,!1)})}function PN(t,e,n,r){return v(this,null,function*(){let i=yield vH(t.localStore,Pn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield LH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&CN(t.remoteStore,i),a})}function LH(t,e,n,r,i){return v(this,null,function*(){t.gu=(p,g,y)=>(function(N,R,x,H){return v(this,null,function*(){let Q=R.view.nu(x);Q.Ds&&(Q=yield cR(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,Q)));let Ee=H&&H.targetChanges.get(R.targetId),mt=H&&H.targetMismatches.get(R.targetId)!=null,ye=R.view.applyChanges(Q,N.isPrimaryClient,Ee,mt);return gR(N,R.targetId,ye._u),ye.snapshot})})(t,p,g,y);let o=yield cR(t.localStore,e,!0),s=new VE(e,o.qs),a=s.nu(o.documents),u=cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);gR(t,n,l._u);let h=new jE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function FH(t,e,n){return v(this,null,function*(){let r=J(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Vf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield IE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hI(r.remoteStore,i.targetId),$E(r,i.targetId)}).catch(Ws))):($E(r,i.targetId),yield IE(r.localStore,i.targetId,!0))})}function VH(t,e){return v(this,null,function*(){let n=J(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hI(n.remoteStore,r.targetId))})}function jH(t,e,n){return v(this,null,function*(){let r=GH(t);try{let i=yield(function(s,a){let u=J(s),l=ue.now(),h=a.reduce((y,C)=>y.add(C.key),ce()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=hr(),N=ce();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((x,H)=>{H.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let x=[];for(let H of a){let Q=q$(H,p.get(H.key).overlayedDocument);Q!=null&&x.push(new Ln(H.key,Q,YR(Q.value.mapValue),kn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:sN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Pe(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield Eu(r,i.changes),yield $f(r.remoteStore)}catch(i){let o=mI(i,"Failed to persist write");n.reject(o)}})}function kN(t,e){return v(this,null,function*(){let n=J(t);try{let r=yield gH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?me(s.lu,14607):i.removedDocuments.size>0&&(me(s.lu,42227),s.lu=!1))}),yield Eu(n,r,e)}catch(r){yield Ws(r)}})}function pR(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&_I(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UH(t,e,n){return v(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,ln.newNoDocument(o,te.min()));let a=ce().add(o),u=new uf(te.min(),new Map,new Pe(ie),s,a);yield kN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),II(r)}else yield IE(r.localStore,e,!1).then(()=>$E(r,e,n)).catch(Ws)})}function BH(t,e){return v(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield pH(n.localStore,e);ON(n,r,null),xN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Eu(n,i)}catch(i){yield Ws(i)}})}function $H(t,e,n){return v(this,null,function*(){let r=J(t);try{let i=yield(function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(me(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);ON(r,e,n),xN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Eu(r,i)}catch(i){yield Ws(i)}})}function xN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function ON(t,e,n){let r=J(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function $E(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||LN(t,r)})}function LN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(hI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),II(t))}function gR(t,e,n){for(let r of n)r instanceof Df?(t.Au.addReference(r.key,e),HH(t,r)):r instanceof bf?(V(EI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||LN(t,r.key)):q(19791,{yu:r})}function HH(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(EI,"New document in limbo: "+n),t.Iu.add(r),II(t))}function II(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(Se.fromString(e)),r=t.mu.next();t.Eu.set(r,new UE(n)),t.du=t.du.insert(n,r),CN(t.remoteStore,new uu(Pn(Ff(n.path)),r,"TargetPurposeLimboResolution",tI.ue))}}function Eu(t,e,n){return v(this,null,function*(){let r=J(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=yE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Ks(p))throw p;V(dI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(g,N)}}})})(r.localStore,o))})}function qH(t,e){return v(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){V(EI,"User change. New user:",e.toKey());let r=yield DN(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Eu(n,r.Bs)}})}function zH(t,e){let n=J(t),r=n.Eu.get(e);if(r&&r.lu)return ce().add(r.key);{let i=ce(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function FN(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UH.bind(null,e),e.hu.J_=PH.bind(null,e.eventManager),e.hu.pu=kH.bind(null,e.eventManager),e}function GH(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$H.bind(null,e),e}var VN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Uf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return fH(this.persistence,new _E,n.initialUser,this.serializer)}Du(n){return new gf(mE.Vi,this.serializer)}bu(n){return new wE}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),HE=class extends VN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){me(this.persistence.referenceDelegate instanceof mf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new rE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new gf(r=>mf.Vi(r,n),this.serializer)}};var WH=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qH.bind(null,this.syncEngine),yield MH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new LE})()}createDatastore(n){let r=Uf(n.databaseInfo.databaseId),i=(function(s){return new SE(s)})(n.databaseInfo);return(function(s,a,u,l){return new ME(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new kE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>pR(this.syncEngine,r,0),(function(){return vf.C()?new vf:new TE})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new BE(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield(function(o){return v(this,null,function*(){let s=J(o);V(uo,"RemoteStore shutting down."),s.Ia.add(5),yield _u(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var fu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var ri="FirestoreClient",qE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){V(ri,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(ri,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=mI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function m_(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V(ri,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield DN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Xr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Xr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function mR(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield KH(t);V(ri,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dR(e.remoteStore,i)),t._onlineComponents=e})}function KH(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(ri,"Using user provided OfflineComponentProvider");try{yield m_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Xr("Error using user provided cache. Falling back to memory cache: "+n),yield m_(t,new VN)}}else V(ri,"Using default OfflineComponentProvider"),yield m_(t,new HE(void 0));return t._offlineComponents})}function jN(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(ri,"Using user provided OnlineComponentProvider"),yield mR(t,t._uninitializedComponentsProvider._online)):(V(ri,"Using default OnlineComponentProvider"),yield mR(t,new WH))),t._onlineComponents})}function QH(t){return jN(t).then(e=>e.syncEngine)}function Cf(t){return v(this,null,function*(){let e=yield jN(t),n=e.eventManager;return n.onListen=xH.bind(null,e.syncEngine),n.onUnlisten=FH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VH.bind(null,e.syncEngine),n})}function YH(t,e,n={}){let r=new un;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new fu({next:g=>{h.Ou(),s.enqueueAndForget(()=>vI(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new hu(Ff(a.path),h,{includeMetadataChanges:!0,ka:!0});return yI(o,p)})(yield Cf(t),t.asyncQueue,e,n,r)})),r.promise}function ZH(t,e,n={}){let r=new un;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return(function(o,s,a,u,l){let h=new fu({next:g=>{h.Ou(),s.enqueueAndForget(()=>vI(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new hu(a,h,{includeMetadataChanges:!0,ka:!0});return yI(o,p)})(yield Cf(t),t.asyncQueue,e,n,r)})),r.promise}function UN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var yR=new Map;var BN="firestore.googleapis.com",vR=!0,Sf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BN,this.ssl=vR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:vR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lH)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new y_;switch(r.type){case"firstParty":return new I_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=yR.get(n);r&&(V("ComponentProvider","Removing Datastore"),yR.delete(n),r.terminate())})(this),Promise.resolve()}};function $N(t,e,n,r={}){var i;t=St(t,qs);let o=Vr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(_h(`https://${u}`),Eh("Firestore",!0)),s.host!==BN&&s.host!==u&&Xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Cn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Je.MOCK_USER;else{h=QS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Je(g)}t._authCredentials=new v_(new Xh(h,p))}}var fr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ze=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vu(n,t._jsonSchema))return new t(e,r||null,new $(Se.fromString(n.referencePath)))}};ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Be("string",ze._jsonSchemaVersion),referencePath:Be("string")};var Qr=class t extends fr{constructor(e,n,r){super(e,n,Ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function HN(t,e,...n){if(t=Oe(t),CR("collection","path",e),t instanceof qs){let r=Se.fromString(e,...n);return L0(r),new Qr(t,null,r)}{if(!(t instanceof ze||t instanceof Qr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return L0(r),new Qr(t.firestore,null,r)}}function wI(t,e,...n){if(t=Oe(t),arguments.length===1&&(e=nu.newId()),CR("doc","path",e),t instanceof qs){let r=Se.fromString(e,...n);return O0(r),new ze(t,null,new $(r))}{if(!(t instanceof ze||t instanceof Qr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return O0(r),new ze(t.firestore,t instanceof Qr?t.converter:null,new $(r))}}var _R="AsyncQueue",Af=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _f(this,"async_queue_retry"),this.oc=()=>{let r=g_();r&&V(_R,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=g_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=g_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new un;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ks(e))throw e;V(_R,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,cr("INTERNAL UNHANDLED ERROR: ",ER(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=xE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:ER(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function ER(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function IR(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var hn=class extends qs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Af,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Af(e),this._firestoreClient=void 0,yield e}})}};function qN(t,e){let n=typeof t=="object"?t:qi(),r=typeof t=="string"?t:e||of,i=Is(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=KS("firestore");o&&$N(i,...o)}return i}function Hf(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JH(t),t._firestoreClient}function JH(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new C_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new qE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Yr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(gt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:Be("string",Yr._jsonSchemaVersion),bytes:Be("string")};var zs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pu=class{constructor(e){this._methodName=e}};var Zr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(vu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:Be("string",Zr._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var Jr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:Be("string",Jr._jsonSchemaVersion),vectorValues:Be("object")};var XH=/^__.*__$/,zE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms):new co(e,this.data,n,this.fieldTransforms)}},Rf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ln(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function zN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:t})}}var GE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Mf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(zN(this.Ec)&&XH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},WE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uf(e)}Dc(e,n,r,i=!1){return new GE({Ec:e,methodName:n,bc:r,path:Bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qf(t){let e=t._freezeSettings(),n=Uf(t._databaseId);return new WE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GN(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);TI("Data must be an object, but it was:",s,r);let a=WN(r,s),u,l;if(o.merge)u=new Wt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=KE(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);QN(h,g)||h.push(g)}u=new Wt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new zE(new Ut(a),u,l)}var Nf=class t extends pu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function eq(t,e,n,r){let i=t.Dc(1,e,n);TI("Data must be an object, but it was:",i,r);let o=[],s=Ut.empty();ii(r,(u,l)=>{let h=DI(e,u,n);l=Oe(l);let p=i.gc(h);if(l instanceof Nf)o.push(h);else{let g=Iu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Wt(o);return new Rf(s,a,i.fieldTransforms)}function tq(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[KE(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(KE(e,o[g])),u.push(o[g+1]);let l=[],h=Ut.empty();for(let g=a.length-1;g>=0;--g)if(!QN(l,a[g])){let y=a[g],C=u[g];C=Oe(C);let N=s.gc(y);if(C instanceof Nf)l.push(y);else{let R=Iu(C,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Wt(l);return new Rf(h,p,s.fieldTransforms)}function nq(t,e,n,r=!1){return Iu(n,t.Dc(r?4:3,e))}function Iu(t,e){if(KN(t=Oe(t)))return TI("Unsupported field value:",e,t),WN(t,e);if(t instanceof pu)return(function(r,i){if(!zN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Iu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ue.fromDate(r);return{timestampValue:ff(i.serializer,o)}}if(r instanceof ue){let o=new ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ff(i.serializer,o)}}if(r instanceof Zr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:mN(i.serializer,r._byteString)};if(r instanceof ze){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jr)return(function(s,a){return{mapValue:{fields:{[iI]:{stringValue:oI},[Os]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return uI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${xf(r)}`)})(t,e)}function WN(t,e){let n={};return $R(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(t,(r,i)=>{let o=Iu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function KN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ue||t instanceof Zr||t instanceof Yr||t instanceof ze||t instanceof pu||t instanceof Jr)}function TI(t,e,n){if(!KN(n)||!SR(n)){let r=xf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function KE(t,e,n){if((e=Oe(e))instanceof zs)return e._internalPath;if(typeof e=="string")return DI(t,e);throw Mf("Field path arguments must be of type string or ",t,!1,void 0,n)}var rq=new RegExp("[~\\*/\\[\\]]");function DI(t,e,n){if(e.search(rq)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zs(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function QN(t,e){return t.some(n=>n.isEqual(e))}var Pf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new QE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},QE=class extends Pf{data(){return super.data()}};function zf(t,e){return typeof e=="string"?DI(t,e):e instanceof zs?e._internalPath:e._delegate._internalPath}function YN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gu=class{},mu=class extends gu{};function ZN(t,e,...n){let r=[];e instanceof gu&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof YE).length,a=o.filter(u=>u instanceof kf).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var kf=class t extends mu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return tM(e._query,n),new fr(e.firestore,e.converter,j_(e._query,n))}_parse(e){let n=qf(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){TR(p,h);let C=[];for(let N of p)C.push(wR(u,o,N));g={arrayValue:{values:C}}}else g=wR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||TR(p,h),g=nq(a,s,p,h==="in"||h==="not-in");return Ue.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function JN(t,e,n){let r=e,i=zf("where",t);return kf._create(i,r,n)}var YE=class t extends gu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)tM(s,u),s=j_(s,u)})(e._query,n),new fr(e.firestore,e.converter,j_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ZE=class t extends mu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oo(o,s)})(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new ti(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function XN(t,e="asc"){let n=e,r=zf("orderBy",t);return ZE._create(r,n)}var JE=class t extends mu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new fr(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}};function eM(t){return c$("limit",t),JE._create("limit",t,"F")}function wR(t,e,n){if(typeof(n=Oe(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nN(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Se.fromString(n));if(!$.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return H0(t,new $(r))}if(n instanceof ze)return H0(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(n)}.`)}function TR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tM(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var XE=class{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ii(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Os].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new Jr(o)}convertGeoPoint(e){return new Zr(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){let n=ur(e);return new ue(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);me(wN(r),9688,{name:e});let i=new sf(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||cr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function nM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var eo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},to=class t extends Pf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Be("string",to._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var ks=class extends to{data(e={}){return super.data(e)}},no=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new eo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ks(this._firestore,this._userDataWriter,r.key,r,new eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new eo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new eo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:iq(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function iq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}function rM(t){t=St(t,ze);let e=St(t.firestore,hn);return YH(Hf(e),t._key).then(n=>uM(e,t,n))}no._jsonSchemaVersion="firestore/querySnapshot/1.0",no._jsonSchema={type:Be("string",no._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var yu=class extends XE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}};function iM(t){t=St(t,fr);let e=St(t.firestore,hn),n=Hf(e),r=new yu(e);return YN(t._query),ZH(n,t._query).then(i=>new no(e,r,t,i))}function oM(t,e,n){t=St(t,ze);let r=St(t.firestore,hn),i=nM(t.converter,e,n);return Wf(r,[GN(qf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kn.none())])}function sM(t,e,n,...r){t=St(t,ze);let i=St(t.firestore,hn),o=qf(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof zs?tq(o,"updateDoc",t._key,e,n,r):eq(o,"updateDoc",t._key,e),Wf(i,[s.toMutation(t._key,kn.exists(!0))])}function aM(t){return Wf(St(t.firestore,hn),[new au(t._key,kn.none())])}function cM(t,e){let n=St(t.firestore,hn),r=wI(t),i=nM(t.converter,e);return Wf(n,[GN(qf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function Gf(t,...e){var n,r,i;t=Oe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||IR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(IR(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof ze)l=St(t.firestore,hn),h=Ff(t._key.path),u={next:p=>{e[s]&&e[s](uM(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=St(t,fr);l=St(p.firestore,hn),h=p._query;let g=new yu(l);u={next:y=>{e[s]&&e[s](new no(l,g,p,y))},error:e[s+1],complete:e[s+2]},YN(t._query)}return(function(g,y,C,N){let R=new fu(N),x=new hu(y,R,C);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return yI(yield Cf(g),x)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return vI(yield Cf(g),x)}))}})(Hf(l),h,a,u)}function Wf(t,e){return(function(r,i){let o=new un;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return jH(yield QH(r),i,o)})),o.promise})(Hf(t),e)}function uM(t,e,n){let r=n.docs.get(e._key),i=new yu(t);return new to(t,i,e._key,r,new eo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Gs=i})(Ur),an(new It("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new hn(new __(r.getProvider("auth-internal")),new w_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Me(M0,P0,e),Me(M0,P0,"esm2017")})();var Kf=function(){return Kf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Kf.apply(this,arguments)};var aq={includeMetadataChanges:!1};function lM(t,e){return e===void 0&&(e=aq),new G(function(n){var r=Gf(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function dM(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Kf(Kf({},r),(n={},n[e.idField]=t.id,n))}function hM(t){return lM(t,{includeMetadataChanges:!0}).pipe(re(function(e){return e.docs}))}function fM(t,e){return e===void 0&&(e={}),hM(t).pipe(re(function(n){return n.map(function(r){return dM(r,e)})}))}var ho=class{constructor(e){return e}},pM="firestore",bI=class{constructor(){return Ts(pM)}};var CI=new U("angularfire2.firestore-instances");function cq(t,e){let n=Lc(pM,t,e);return n&&new ho(n)}function uq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ho(r)}}var lq={provide:bI,deps:[[new Lt,CI]]},dq={provide:ho,useFactory:cq,deps:[[new Lt,CI],nr]};function roe(t,...e){return Me("angularfire",Br.full,"fst"),Zt([dq,lq,{provide:CI,useFactory:uq(t),multi:!0,deps:[_e,Qe,$r,Gi,[new Lt,Qc],[new Lt,Ds],...e]}])}var wu=be(fM,!0);var fo=be(cM,!0,2);var $e=be(HN,!0,2);var Qf=be(aM,!0,2);var wt=be(wI,!0,2);var pr=be(rM,!0);var po=be(iM,!0);var ioe=be(qN,!0);var Tu=be(eM,!0,2);var SI=be(Gf,!0);var Ys=be(XN,!0,2),Kt=be(ZN,!0,2);var AI=be(oM,!0,2);var Du=be(sM,!0,2);var st=be(JN,!0,2);var gM=class t{firestore=k(ho);auth=k(Zi);createTournament(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=wt(this.firestore,"users",e.uid),r=yield pr(n),i=r.exists()?r.data().nickname:e.email||"",o=$e(this.firestore,"tournaments"),s={player1Id:e.uid,player1Email:e.email||"",player1Nickname:i,status:"waiting",currentRound:1,player1Score:0,player2Score:0,rounds:this.initializeRounds(),createdAt:ue.now(),updatedAt:ue.now(),gameMode:"tournament"};return(yield fo(o,s)).id})}createComputerTournament(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=wt(this.firestore,"users",e.uid),r=yield pr(n),i=r.exists()?r.data().nickname:e.email,o=$e(this.firestore,"tournaments"),s={player1Id:e.uid,player1Email:e.email||"",player1Nickname:i,player2Id:"COMPUTER",player2Email:"\u{1F916} Computer",player2Nickname:"\u{1F916} Computer",isVsComputer:!0,status:"in-progress",currentRound:1,player1Score:0,player2Score:0,rounds:this.initializeRounds(),createdAt:ue.now(),updatedAt:ue.now(),gameMode:"tournament"};return(yield fo(o,s)).id})}createCasualComputerGame(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=wt(this.firestore,"users",e.uid),r=yield pr(n),i=r.exists()?r.data().nickname:e.email,o=$e(this.firestore,"tournaments"),s={player1Id:e.uid,player1Email:e.email||"",player1Nickname:i,player2Id:"COMPUTER",player2Email:"\u{1F916} Computer",player2Nickname:"\u{1F916} Computer",isVsComputer:!0,gameMode:"casual",status:"in-progress",currentRound:1,player1Score:0,player2Score:0,rounds:[{roundNumber:1,player1Choice:null,player2Choice:null,winner:null,completed:!1}],createdAt:ue.now(),updatedAt:ue.now()};return(yield fo(o,s)).id})}createCasualGame(){return v(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Not authenticated");let n=wt(this.firestore,"users",e.uid),r=yield pr(n),i=r.exists()?r.data().nickname:e.email,o=$e(this.firestore,"tournaments"),s={player1Id:e.uid,player1Email:e.email||"",player1Nickname:i,player2Id:null,player2Email:null,player2Nickname:null,isVsComputer:!1,gameMode:"casual",status:"waiting",currentRound:1,player1Score:0,player2Score:0,rounds:[{roundNumber:1,player1Choice:null,player2Choice:null,winner:null,completed:!1}],createdAt:ue.now(),updatedAt:ue.now()};return(yield fo(o,s)).id})}getInProgressCasualGames(e){let n=Kt($e(this.firestore,"tournaments"),st("gameMode","==","casual"),st("status","==","in-progress"),Ys("updatedAt","desc"));return wu(n,{idField:"id"}).pipe(re(r=>r.filter(i=>i.player1Id===e||i.player2Id===e)))}joinTournament(e){return v(this,null,function*(){let n=this.auth.currentUser;if(!n)throw new Error("Not authenticated");let r=wt(this.firestore,"users",n.uid),i=yield pr(r),o=i.exists()?i.data().nickname:n.email||"",s=wt(this.firestore,"tournaments",e);yield Du(s,{player2Id:n.uid,player2Email:n.email||"",player2Nickname:o,status:"in-progress",updatedAt:ue.now()})})}makeChoice(e,n){return v(this,null,function*(){let r=wt(this.firestore,"tournaments",e),i=yield pr(r);if(!i.exists())throw new Error("Tournament not found");let o=i.data(),s=this.auth.currentUser;if(!s)throw new Error("Not authenticated");let a=s.uid===o.player1Id,u=o.rounds[o.currentRound-1];if(a?u.player1Choice=n:u.player2Choice=n,o.isVsComputer&&a&&!u.player2Choice){let l=["rock","paper","scissors"];u.player2Choice=l[Math.floor(Math.random()*l.length)]}if(u.player1Choice&&u.player2Choice){let l=this.determineWinner(u.player1Choice,u.player2Choice);u.winner=l==="player1"?o.player1Id:l==="player2"?o.player2Id||"COMPUTER":null,u.completed=!0,l==="player1"&&o.player1Score++,l==="player2"&&o.player2Score++,o.gameMode==="casual"?(o.currentRound++,o.rounds.push({roundNumber:o.currentRound,player1Choice:null,player2Choice:null,winner:null,completed:!1})):o.currentRound<5?o.currentRound++:(o.status="completed",yield this.updatePlayerStats(o))}o.updatedAt=ue.now(),yield Du(r,o)})}determineWinner(e,n){return e===n?null:e==="rock"&&n==="scissors"||e==="paper"&&n==="rock"||e==="scissors"&&n==="paper"?"player1":"player2"}updatePlayerStats(e){return v(this,null,function*(){return Promise.resolve()})}getComputerChoice(){return["rock","paper","scissors"][Math.floor(Math.random()*3)]}determineRoundWinner(e,n,r,i){return e===n?null:e==="rock"&&n==="scissors"||e==="paper"&&n==="rock"||e==="scissors"&&n==="paper"?r:i}initializeRounds(){return Array.from({length:5},(e,n)=>({roundNumber:n+1,player1Choice:null,player2Choice:null,winner:null,completed:!1}))}getTournament(e){return new G(n=>{let r=wt(this.firestore,"tournaments",e),i=SI(r,o=>{o.exists()?n.next(F({id:o.id},o.data())):n.next(null)},o=>{n.error(o)});return()=>i()})}getAvailableTournaments(){return new G(e=>{let n=$e(this.firestore,"tournaments"),r=Kt(n,st("status","==","waiting"),Tu(20)),i=SI(r,o=>{let s=o.docs.map(a=>F({id:a.id},a.data()));e.next(s)},o=>{e.error(o)});return()=>i()})}deleteTournament(e){return v(this,null,function*(){let n=wt(this.firestore,"tournaments",e);yield Qf(n)})}getUserGameHistory(e){return v(this,null,function*(){let n=$e(this.firestore,"tournaments"),r=Kt(n,st("status","==","completed"),Tu(50));return(yield po(r)).docs.map(s=>F({id:s.id},s.data())).filter(s=>s.player1Id===e||s.player2Id===e).sort((s,a)=>a.updatedAt?.toMillis()-s.updatedAt?.toMillis())})}getUserStats(e,n){let r=0,i=0,o=0,s=0,a=0;return n.forEach(u=>{let l=u.player1Id===e,h=l?u.player1Score:u.player2Score,p=l?u.player2Score:u.player1Score;h>p?r++:h<p?i++:o++,s+=h,a+=p}),{totalGames:n.length,wins:r,losses:i,draws:o,winRate:n.length>0?(r/n.length*100).toFixed(1):"0.0",totalRoundsWon:s,totalRoundsLost:a}}getLeaderboardData(e){return v(this,null,function*(){let n=$e(this.firestore,"tournaments"),r=new Date;switch(e){case"day":r.setDate(r.getDate()-1);break;case"week":r.setDate(r.getDate()-7);break;case"month":r.setMonth(r.getMonth()-1);break;case"year":r.setFullYear(r.getFullYear()-1);break;case"all":r=new Date(0);break}let i=Kt(n,st("status","==","completed"),Tu(500)),a=(yield po(i)).docs.map(l=>F({id:l.id},l.data())).filter(l=>l.updatedAt&&l.updatedAt.toDate()>=r),u=new Map;return a.forEach(l=>{if(l.player1Id&&!l.isVsComputer){let h=u.get(l.player1Id)||{userId:l.player1Id,email:l.player1Email,wins:0,losses:0,draws:0,totalGames:0,roundsWon:0,roundsLost:0,winRate:0};h.totalGames++,h.roundsWon+=l.player1Score,h.roundsLost+=l.player2Score,l.player1Score>l.player2Score?h.wins++:l.player1Score<l.player2Score?h.losses++:h.draws++,h.winRate=h.wins/h.totalGames*100,u.set(l.player1Id,h)}if(l.player2Id&&l.player2Id!=="COMPUTER"){let h=u.get(l.player2Id)||{userId:l.player2Id,email:l.player2Email||"Unknown",wins:0,losses:0,draws:0,totalGames:0,roundsWon:0,roundsLost:0,winRate:0};h.totalGames++,h.roundsWon+=l.player2Score,h.roundsLost+=l.player1Score,l.player2Score>l.player1Score?h.wins++:l.player2Score<l.player1Score?h.losses++:h.draws++,h.winRate=h.wins/h.totalGames*100,u.set(l.player2Id,h)}}),Array.from(u.values()).sort((l,h)=>h.wins!==l.wins?h.wins-l.wins:h.winRate-l.winRate).slice(0,10)})}addFriend(e,n,r){return v(this,null,function*(){let i=this.auth.currentUser;if(!i)throw new Error("Not authenticated");if(yield this.getFriend(i.uid,e))throw new Error("Already friends");let s=$e(this.firestore,"friends");yield fo(s,{userId:i.uid,friendId:e,friendEmail:n,friendNickname:r,addedAt:ue.now()})})}removeFriend(e){return v(this,null,function*(){let n=this.auth.currentUser;if(!n)throw new Error("Not authenticated");let r=$e(this.firestore,"friends"),i=Kt(r,st("userId","==",n.uid),st("friendId","==",e));(yield po(i)).forEach(s=>v(this,null,function*(){yield Qf(s.ref)}))})}getFriends(e){return v(this,null,function*(){let n=$e(this.firestore,"friends"),r=Kt(n,st("userId","==",e),Ys("addedAt","desc"));return(yield po(r)).docs.map(o=>F({id:o.id},o.data()))})}getFriend(e,n){return v(this,null,function*(){let r=$e(this.firestore,"friends"),i=Kt(r,st("userId","==",e),st("friendId","==",n)),o=yield po(i);return o.empty?null:F({id:o.docs[0].id},o.docs[0].data())})}isFriend(e){return v(this,null,function*(){let n=this.auth.currentUser;return n?(yield this.getFriend(n.uid,e))!==null:!1})}sendGameRequest(e,n,r){return v(this,null,function*(){let i=this.auth.currentUser?.uid;if(!i)throw new Error("Not authenticated");let o=this.auth.currentUser?.email||"",s=yield this.getUserNickname(i),a=wt($e(this.firestore,"gameRequests"));yield AI(a,{id:a.id,fromUserId:i,fromEmail:o,fromNickname:s||o,toUserId:e,status:"pending",createdAt:ue.now()})})}getGameRequests(e){let n=Kt($e(this.firestore,"gameRequests"),st("toUserId","==",e),st("status","==","pending"),Ys("createdAt","desc"));return wu(n,{idField:"id"})}getSentGameRequests(e){let n=Kt($e(this.firestore,"gameRequests"),st("fromUserId","==",e),st("status","in",["pending","accepted"]),Ys("createdAt","desc"));return wu(n,{idField:"id"})}acceptGameRequest(e){return v(this,null,function*(){let n=wt(this.firestore,"gameRequests",e),r=yield pr(n);if(!r.exists())throw new Error("Request not found");let i=r.data(),o=yield this.createTournamentForRequest(i.fromUserId,i.fromEmail,i.fromNickname,i.toUserId);return yield Du(n,{status:"accepted",tournamentId:o}),o})}declineGameRequest(e){return v(this,null,function*(){let n=wt(this.firestore,"gameRequests",e);yield Du(n,{status:"declined"})})}createTournamentForRequest(e,n,r,i){return v(this,null,function*(){let o=this.auth.currentUser?.email||"",s=yield this.getUserNickname(i),a=wt($e(this.firestore,"tournaments")),u={id:a.id,player1Id:e,player1Email:n,player1Nickname:r||n,player2Id:i,player2Email:o,player2Nickname:s||o,player1Score:0,player2Score:0,currentRound:1,status:"in-progress",rounds:this.initializeRounds(),createdAt:ue.now(),updatedAt:ue.now(),isVsComputer:!1,gameMode:"tournament"};return yield AI(a,u),a.id})}getUserNickname(e){return v(this,null,function*(){let n=wt(this.firestore,"users",e),r=yield pr(n);return r.exists()&&r.data().nickname||""})}getChatMessages(e){let n=Kt($e(this.firestore,"chatMessages"),st("tournamentId","==",e),Ys("timestamp","asc"),Tu(50));return wu(n,{idField:"id"})}sendChatMessage(e,n){return v(this,null,function*(){let r=this.auth.currentUser;if(!r)throw new Error("Not authenticated");let i=yield this.getUserNickname(r.uid),o=$e(this.firestore,"chatMessages");yield fo(o,{tournamentId:e,userId:r.uid,userNickname:i||r.email||"Player",message:n.trim(),timestamp:ue.now()})})}clearChatMessages(e){return v(this,null,function*(){let n=Kt($e(this.firestore,"chatMessages"),st("tournamentId","==",e)),i=(yield po(n)).docs.map(o=>Qf(o.ref));yield Promise.all(i)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{F as a,ve as b,v as c,Ge as d,Ne as e,re as f,NP as g,j as h,Ml as i,B as j,vi as k,U as l,k as m,UT as n,BT as o,Ai as p,ns as q,vd as r,Za as s,dx as t,_t as u,Nd as v,rn as w,Qm as x,rs as y,is as z,cC as A,nc as B,kd as C,l1 as D,d1 as E,h1 as F,f1 as G,fC as H,ey as I,ty as J,xd as K,ny as L,ry as M,pC as N,v1 as O,mC as P,Od as Q,vC as R,E1 as S,EC as T,F1 as U,IC as V,iy as W,wC as X,DC as Y,B1 as Z,bC as _,G1 as $,K1 as aa,Qn as ba,Z1 as ca,Vd as da,jd as ea,Zn as fa,$C as ga,$L as ha,Xn as ia,By as ja,Rc as ka,HS as la,bV as ma,Kte as na,Qte as oa,Zi as pa,_re as qa,Ere as ra,Ire as sa,wre as ta,Tre as ua,Dre as va,ho as wa,roe as xa,wt as ya,pr as za,ioe as Aa,AI as Ba,Du as Ca,gM as Da};
